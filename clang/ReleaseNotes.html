<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Clang 20.0.0git (In-Progress) Release Notes &#8212; Clang 20.0.0git documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css?v=dfa0e015" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />
    <script src="_static/documentation_options.js?v=5cbea708"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clang Compiler User’s Manual" href="UsersManual.html" />
    <link rel="prev" title="Using Clang as a Compiler" href="index.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Clang 20.0.0git documentation</span></a></h1>
        <h2 class="heading"><span>Clang 20.0.0git (In-Progress) Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="clang-release-releasenotestitle">
<h1>Clang 20.0.0git (In-Progress)  Release Notes<a class="headerlink" href="#clang-release-releasenotestitle" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id47">Introduction</a></p></li>
<li><p><a class="reference internal" href="#potentially-breaking-changes" id="id48">Potentially Breaking Changes</a></p>
<ul>
<li><p><a class="reference internal" href="#c-c-language-potentially-breaking-changes" id="id49">C/C++ Language Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#c-specific-potentially-breaking-changes" id="id50">C++ Specific Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#abi-changes-in-this-version" id="id51">ABI Changes in This Version</a></p></li>
<li><p><a class="reference internal" href="#ast-dumping-potentially-breaking-changes" id="id52">AST Dumping Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#clang-frontend-potentially-breaking-changes" id="id53">Clang Frontend Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#clang-python-bindings-potentially-breaking-changes" id="id54">Clang Python Bindings Potentially Breaking Changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-s-new-in-clang-release" id="id55">What’s New in Clang 20.0.0git?</a></p>
<ul>
<li><p><a class="reference internal" href="#c-language-changes" id="id56">C++ Language Changes</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id57">C Language Changes</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id58">Non-comprehensive list of changes in this release</a></p></li>
<li><p><a class="reference internal" href="#new-compiler-flags" id="id59">New Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#deprecated-compiler-flags" id="id60">Deprecated Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#modified-compiler-flags" id="id61">Modified Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#removed-compiler-flags" id="id62">Removed Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#attribute-changes-in-clang" id="id63">Attribute Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-s-diagnostics" id="id64">Improvements to Clang’s diagnostics</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-s-time-trace" id="id65">Improvements to Clang’s time-trace</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-coverage-mapping" id="id66">Improvements to Coverage Mapping</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes-in-this-version" id="id67">Bug Fixes in This Version</a></p></li>
<li><p><a class="reference internal" href="#openacc-specific-changes" id="id68">OpenACC Specific Changes</a></p></li>
<li><p><a class="reference internal" href="#target-specific-changes" id="id69">Target Specific Changes</a></p></li>
<li><p><a class="reference internal" href="#dwarf-support-in-clang" id="id70">DWARF Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#floating-point-support-in-clang" id="id71">Floating Point Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#fixed-point-support-in-clang" id="id72">Fixed Point Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#ast-matchers" id="id73">AST Matchers</a></p></li>
<li><p><a class="reference internal" href="#clang-format" id="id74">clang-format</a></p></li>
<li><p><a class="reference internal" href="#libclang" id="id75">libclang</a></p></li>
<li><p><a class="reference internal" href="#static-analyzer" id="id76">Static Analyzer</a></p></li>
<li><p><a class="reference internal" href="#sanitizers" id="id77">Sanitizers</a></p></li>
<li><p><a class="reference internal" href="#python-binding-changes" id="id78">Python Binding Changes</a></p></li>
<li><p><a class="reference internal" href="#openmp-support" id="id79">OpenMP Support</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#additional-information" id="id80">Additional Information</a></p></li>
</ul>
</nav>
<p>Written by the <a class="reference external" href="https://llvm.org/">LLVM Team</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These are in-progress notes for the upcoming Clang 20 release.
Release notes for previous releases can be found on
<a class="reference external" href="https://llvm.org/releases/">the Releases Page</a>.</p>
</div>
<section id="introduction">
<h2><a class="toc-backref" href="#id47" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the Clang C/C++/Objective-C
frontend, part of the LLVM Compiler Infrastructure, release 20.0.0git. Here we
describe the status of Clang in some detail, including major
improvements from the previous release and new feature work. For the
general LLVM release notes, see <a class="reference external" href="https://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. For the libc++ release notes,
see <a class="reference external" href="https://libcxx.llvm.org/ReleaseNotes.html">this page</a>. All LLVM releases
may be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
<p>For more information about Clang or LLVM, including information about the
latest release, please see the <a class="reference external" href="https://clang.llvm.org">Clang Web Site</a> or the
<a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
</section>
<section id="potentially-breaking-changes">
<h2><a class="toc-backref" href="#id48" role="doc-backlink">Potentially Breaking Changes</a><a class="headerlink" href="#potentially-breaking-changes" title="Link to this heading">¶</a></h2>
<p>These changes are ones which we think may surprise users when upgrading to
Clang 20.0.0git because of the opportunity they pose for disruption to existing
code bases.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">le32</span></code> and <code class="docutils literal notranslate"><span class="pre">le64</span></code> targets have been removed.</p></li>
</ul>
<section id="c-c-language-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id49" role="doc-backlink">C/C++ Language Potentially Breaking Changes</a><a class="headerlink" href="#c-c-language-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
</section>
<section id="c-specific-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id50" role="doc-backlink">C++ Specific Potentially Breaking Changes</a><a class="headerlink" href="#c-specific-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The type trait builtin <code class="docutils literal notranslate"><span class="pre">__is_nullptr</span></code> has been removed, since it has very
few users and can be written as <code class="docutils literal notranslate"><span class="pre">__is_same(__remove_cv(T),</span> <span class="pre">decltype(nullptr))</span></code>,
which GCC supports as well.</p></li>
<li><p>Clang will now correctly diagnose as ill-formed a constant expression where an
enum without a fixed underlying type is set to a value outside the range of
the enumeration’s values.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span><span class="w"> </span><span class="nc">E</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Zero</span><span class="p">,</span><span class="w"> </span><span class="n">One</span><span class="p">,</span><span class="w"> </span><span class="n">Two</span><span class="p">,</span><span class="w"> </span><span class="n">Three</span><span class="p">,</span><span class="w"> </span><span class="n">Four</span><span class="w"> </span><span class="p">};</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">Val1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="mi">3</span><span class="p">;</span><span class="w">  </span><span class="c1">// Ok</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">Val2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="mi">7</span><span class="p">;</span><span class="w">  </span><span class="c1">// Ok</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">Val3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="mi">8</span><span class="p">;</span><span class="w">  </span><span class="c1">// Now ill-formed, out of the range [0, 7]</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">Val4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">E</span><span class="p">)</span><span class="mi">-1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Now ill-formed, out of the range [0, 7]</span>
</pre></div>
</div>
<p>Since Clang 16, it has been possible to suppress the diagnostic via
<cite>-Wno-enum-constexpr-conversion</cite>, to allow for a transition period for users.
Now, in Clang 20, <strong>it is no longer possible to suppress the diagnostic</strong>.</p>
</li>
<li><p>Extraneous template headers are now ill-formed by default.
This error can be disable with <code class="docutils literal notranslate"><span class="pre">-Wno-error=extraneous-template-head</span></code>.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="c1">// error: extraneous template head</span>
<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="n">f</span><span class="p">();</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="abi-changes-in-this-version">
<h3><a class="toc-backref" href="#id51" role="doc-backlink">ABI Changes in This Version</a><a class="headerlink" href="#abi-changes-in-this-version" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed Microsoft name mangling of placeholder, auto and decltype(auto), return types for MSVC 1920+. This change resolves incompatibilities with code compiled by MSVC 1920+ but will introduce incompatibilities with code compiled by earlier versions of Clang unless such code is built with the compiler option -fms-compatibility-version=19.14 to imitate the MSVC 1914 mangling behavior.</p></li>
</ul>
</section>
<section id="ast-dumping-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id52" role="doc-backlink">AST Dumping Potentially Breaking Changes</a><a class="headerlink" href="#ast-dumping-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
</section>
<section id="clang-frontend-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id53" role="doc-backlink">Clang Frontend Potentially Breaking Changes</a><a class="headerlink" href="#clang-frontend-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
</section>
<section id="clang-python-bindings-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id54" role="doc-backlink">Clang Python Bindings Potentially Breaking Changes</a><a class="headerlink" href="#clang-python-bindings-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Parts of the interface returning string results will now return
the empty string <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> when no result is available, instead of <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p>Calling a property on the <code class="docutils literal notranslate"><span class="pre">CompletionChunk</span></code> or <code class="docutils literal notranslate"><span class="pre">CompletionString</span></code> class
statically now leads to an error, instead of returning a <code class="docutils literal notranslate"><span class="pre">CachedProperty</span></code> object
that is used internally. Properties are only available on instances.</p></li>
<li><p>For a single-line <code class="docutils literal notranslate"><span class="pre">SourceRange</span></code> and a <code class="docutils literal notranslate"><span class="pre">SourceLocation</span></code> in the same line,
but after the end of the <code class="docutils literal notranslate"><span class="pre">SourceRange</span></code>, <code class="docutils literal notranslate"><span class="pre">SourceRange.__contains__</span></code>
used to incorrectly return <code class="docutils literal notranslate"><span class="pre">True</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/22617">#22617</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/52827">#52827</a>)</p></li>
</ul>
</section>
</section>
<section id="what-s-new-in-clang-release">
<h2><a class="toc-backref" href="#id55" role="doc-backlink">What’s New in Clang 20.0.0git?</a><a class="headerlink" href="#what-s-new-in-clang-release" title="Link to this heading">¶</a></h2>
<p>Some of the major new features and improvements to Clang are listed
here. Generic improvements to Clang as a whole or to its underlying
infrastructure are described first, followed by language-specific
sections with improvements to Clang’s support for those languages.</p>
<section id="c-language-changes">
<h3><a class="toc-backref" href="#id56" role="doc-backlink">C++ Language Changes</a><a class="headerlink" href="#c-language-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Allow single element access of GCC vector/ext_vector_type object to be
constant expression. Supports the <cite>V.xyzw</cite> syntax and other tidbits
as seen in OpenCL. Selecting multiple elements is left as a future work.</p></li>
</ul>
<section id="c-2c-feature-support">
<h4>C++2c Feature Support<a class="headerlink" href="#c-2c-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_is_implicit_lifetime</span></code> intrinsic, which supports
<a class="reference external" href="https://wg21.link/p2674r1">P2647R1 A trait for implicit lifetime types</a></p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_is_virtual_base_of</span></code> intrinsic, which supports
<a class="reference external" href="https://wg21.link/p2985r0">P2985R0 A type trait for detecting virtual base classes</a></p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2893">P2893R3 Variadic Friends</a></p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2747R2">P2747R2 constexpr placement new</a>.</p></li>
</ul>
</section>
<section id="c-23-feature-support">
<h4>C++23 Feature Support<a class="headerlink" href="#c-23-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Removed the restriction to literal types in constexpr functions in C++23 mode.</p></li>
</ul>
</section>
<section id="c-20-feature-support">
<h4>C++20 Feature Support<a class="headerlink" href="#c-20-feature-support" title="Link to this heading">¶</a></h4>
</section>
<section id="resolutions-to-c-defect-reports">
<h4>Resolutions to C++ Defect Reports<a class="headerlink" href="#resolutions-to-c-defect-reports" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Allow calling initializer list constructors from initializer lists with
a single element of the same type instead of always copying.
(<cite>CWG2137: List-initialization from object of same type &lt;https://cplusplus.github.io/CWG/issues/2137.html&gt;</cite>)</p></li>
<li><p>Speculative resolution for CWG2311 implemented so that the implementation of CWG2137 doesn’t remove
previous cases where guaranteed copy elision was done. Given a prvalue <code class="docutils literal notranslate"><span class="pre">e</span></code> of class type
<code class="docutils literal notranslate"><span class="pre">T</span></code>, <code class="docutils literal notranslate"><span class="pre">T{e}</span></code> will try to resolve an initializer list constructor and will use it if successful.
Otherwise, if there is no initializer list constructor, the copy will be elided as if it was <code class="docutils literal notranslate"><span class="pre">T(e)</span></code>.
(<cite>CWG2311: Missed case for guaranteed copy elision &lt;https://cplusplus.github.io/CWG/issues/2311.html&gt;</cite>)</p></li>
<li><p>Casts from a bit-field to an integral type is now not considered narrowing if the
width of the bit-field means that all potential values are in the range
of the target type, even if the type of the bit-field is larger.
(<a class="reference external" href="https://cplusplus.github.io/CWG/issues/2627.html">CWG2627: Bit-fields and narrowing conversions</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nullptr</span></code> is now promoted to <code class="docutils literal notranslate"><span class="pre">void*</span></code> when passed to a C-style variadic function.
(<a class="reference external" href="https://cplusplus.github.io/CWG/issues/722.html">CWG722: Can nullptr be passed to an ellipsis?</a>)</p></li>
<li><p>Allow <code class="docutils literal notranslate"><span class="pre">void{}</span></code> as a prvalue of type <code class="docutils literal notranslate"><span class="pre">void</span></code>.
(<a class="reference external" href="https://cplusplus.github.io/CWG/issues/2351.html">CWG2351: void{}</a>).</p></li>
</ul>
</section>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id57" role="doc-backlink">C Language Changes</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<section id="c2y-feature-support">
<h4>C2y Feature Support<a class="headerlink" href="#c2y-feature-support" title="Link to this heading">¶</a></h4>
</section>
<section id="c23-feature-support">
<h4>C23 Feature Support<a class="headerlink" href="#c23-feature-support" title="Link to this heading">¶</a></h4>
</section>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h3><a class="toc-backref" href="#id58" role="doc-backlink">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The floating point comparison builtins (<code class="docutils literal notranslate"><span class="pre">__builtin_isgreater</span></code>,
<code class="docutils literal notranslate"><span class="pre">__builtin_isgreaterequal</span></code>, <code class="docutils literal notranslate"><span class="pre">__builtin_isless</span></code>, etc.) and
<code class="docutils literal notranslate"><span class="pre">__builtin_signbit</span></code> can now be used in constant expressions.</p></li>
</ul>
</section>
<section id="new-compiler-flags">
<h3><a class="toc-backref" href="#id59" role="doc-backlink">New Compiler Flags</a><a class="headerlink" href="#new-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">-fc++-static-destructors={all,thread-local,none}</span></code> flag was
added to control which C++ variables have static destructors
registered: all (the default) does so for all variables, thread-local
only for thread-local variables, and none (which corresponds to the
existing <code class="docutils literal notranslate"><span class="pre">-fno-c++-static-destructors</span></code> flag) skips all static
destructors registration.</p></li>
</ul>
</section>
<section id="deprecated-compiler-flags">
<h3><a class="toc-backref" href="#id60" role="doc-backlink">Deprecated Compiler Flags</a><a class="headerlink" href="#deprecated-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-fheinous-gnu-extensions</span></code> is deprecated; it is now equivalent to
specifying <code class="docutils literal notranslate"><span class="pre">-Wno-error=invalid-gnu-asm-cast</span></code> and may be removed in the
future.</p></li>
</ul>
</section>
<section id="modified-compiler-flags">
<h3><a class="toc-backref" href="#id61" role="doc-backlink">Modified Compiler Flags</a><a class="headerlink" href="#modified-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">-ffp-model</span></code> option has been updated to enable a more limited set of
optimizations when the <code class="docutils literal notranslate"><span class="pre">fast</span></code> argument is used and to accept a new argument,
<code class="docutils literal notranslate"><span class="pre">aggressive</span></code>. The behavior of <code class="docutils literal notranslate"><span class="pre">-ffp-model=aggressive</span></code> is equivalent
to the previous behavior of <code class="docutils literal notranslate"><span class="pre">-ffp-model=fast</span></code>. The updated
<code class="docutils literal notranslate"><span class="pre">-ffp-model=fast</span></code> behavior no longer assumes finite math only and uses
the <code class="docutils literal notranslate"><span class="pre">promoted</span></code> algorithm for complex division when possible rather than the
less basic (limited range) algorithm.</p></li>
</ul>
</section>
<section id="removed-compiler-flags">
<h3><a class="toc-backref" href="#id62" role="doc-backlink">Removed Compiler Flags</a><a class="headerlink" href="#removed-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The compiler flag <cite>-Wenum-constexpr-conversion</cite> (and the <cite>Wno-</cite>, <cite>Wno-error-</cite>
derivatives) is now removed, since it’s no longer possible to suppress the
diagnostic (see above). Users can expect an <cite>unknown warning</cite> diagnostic if
it’s still in use.</p></li>
</ul>
</section>
<section id="attribute-changes-in-clang">
<h3><a class="toc-backref" href="#id63" role="doc-backlink">Attribute Changes in Clang</a><a class="headerlink" href="#attribute-changes-in-clang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Clang now disallows more than one <code class="docutils literal notranslate"><span class="pre">__attribute__((ownership_returns(class,</span> <span class="pre">idx)))</span></code> with
different class names attached to one function.</p></li>
<li><p>Introduced a new format attribute <code class="docutils literal notranslate"><span class="pre">__attribute__((format(syslog,</span> <span class="pre">1,</span> <span class="pre">2)))</span></code> from OpenBSD.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">hybrid_patchable</span></code> attribute is now supported on ARM64EC targets. It can be used to specify
that a function requires an additional x86-64 thunk, which may be patched at runtime.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[[clang::lifetimebound]]</span></code> is now explicitly disallowed on explicit object member functions
where they were previously silently ignored.</p></li>
<li><p>Clang now automatically adds <code class="docutils literal notranslate"><span class="pre">[[clang::lifetimebound]]</span></code> to the parameters of
<code class="docutils literal notranslate"><span class="pre">std::span,</span> <span class="pre">std::string_view</span></code> constructors, this enables Clang to capture
more cases where the returned reference outlives the object.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/100567">#100567</a>)</p></li>
</ul>
</section>
<section id="improvements-to-clang-s-diagnostics">
<h3><a class="toc-backref" href="#id64" role="doc-backlink">Improvements to Clang’s diagnostics</a><a class="headerlink" href="#improvements-to-clang-s-diagnostics" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Some template related diagnostics have been improved.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// error: templates can only be declared in namespace or class scope</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"> </span><span class="c1">// error: non-static data member &#39;i&#39; cannot be declared as a template</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
<li><p>Clang now has improved diagnostics for functions with explicit ‘this’ parameters. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/97878">#97878</a></p></li>
<li><p>Clang now diagnoses dangling references to fields of temporary objects. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/81589">#81589</a>.</p></li>
<li><p>Clang now diagnoses undefined behavior in constant expressions more consistently. This includes invalid shifts, and signed overflow in arithmetic.</p></li>
<li><p>-Wdangling-assignment-gsl is enabled by default.</p></li>
<li><p>Clang now always preserves the template arguments as written used
to specialize template type aliases.</p></li>
<li><p>Clang now diagnoses the use of <code class="docutils literal notranslate"><span class="pre">main</span></code> in an <code class="docutils literal notranslate"><span class="pre">extern</span></code> context as invalid according to [basic.start.main] p3. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/101512">#101512</a>.</p></li>
<li><p>Clang now diagnoses when the result of a [[nodiscard]] function is discarded after being cast in C. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/104391">#104391</a>.</p></li>
<li><p>Don’t emit duplicated dangling diagnostics. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/93386">#93386</a>).</p></li>
<li><p>Improved diagnostic when trying to befriend a concept. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/45182">#45182</a>).</p></li>
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">-Winvalid-gnu-asm-cast</span></code> diagnostic group to control warnings
about use of “noop” casts for lvalues (a GNU extension). This diagnostic is
a warning which defaults to being an error, is enabled by default, and is
also controlled by the now-deprecated <code class="docutils literal notranslate"><span class="pre">-fheinous-gnu-extensions</span></code> flag.</p></li>
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">-Wdecls-in-multiple-modules</span></code> option to assist users to identify
multiple declarations in different modules, which is the major reason of the slow
compilation speed with modules. This warning is disabled by default and it needs
to be explicitly enabled or by <code class="docutils literal notranslate"><span class="pre">-Weverything</span></code>.</p></li>
</ul>
</section>
<section id="improvements-to-clang-s-time-trace">
<h3><a class="toc-backref" href="#id65" role="doc-backlink">Improvements to Clang’s time-trace</a><a class="headerlink" href="#improvements-to-clang-s-time-trace" title="Link to this heading">¶</a></h3>
</section>
<section id="improvements-to-coverage-mapping">
<h3><a class="toc-backref" href="#id66" role="doc-backlink">Improvements to Coverage Mapping</a><a class="headerlink" href="#improvements-to-coverage-mapping" title="Link to this heading">¶</a></h3>
</section>
<section id="bug-fixes-in-this-version">
<h3><a class="toc-backref" href="#id67" role="doc-backlink">Bug Fixes in This Version</a><a class="headerlink" href="#bug-fixes-in-this-version" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed the definition of <code class="docutils literal notranslate"><span class="pre">ATOMIC_FLAG_INIT</span></code> in <code class="docutils literal notranslate"><span class="pre">&lt;stdatomic.h&gt;</span></code> so it can
be used in C++.</p></li>
<li><p>Fixed a failed assertion when checking required literal types in C context. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/101304">#101304</a>).</p></li>
<li><p>Fixed a crash when trying to transform a dependent address space type. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/101685">#101685</a>.</p></li>
<li><p>Fixed a crash when diagnosing format strings and encountering an empty
delimited escape sequence (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;\o{}&quot;</span></code>). <a class="reference external" href="https://github.com/llvm/llvm-project/issues/102218">#102218</a></p></li>
</ul>
<section id="bug-fixes-to-compiler-builtins">
<h4>Bug Fixes to Compiler Builtins<a class="headerlink" href="#bug-fixes-to-compiler-builtins" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fix crash when atomic builtins are called with pointer to zero-size struct (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/90330">#90330</a>)</p></li>
<li><p>Clang now allows pointee types of atomic builtin arguments to be complete template types
that was not instantiated elsewhere.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__noop</span></code> can now be used in a constant expression. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/102064">#102064</a>)</p></li>
</ul>
</section>
<section id="bug-fixes-to-attribute-support">
<h4>Bug Fixes to Attribute Support<a class="headerlink" href="#bug-fixes-to-attribute-support" title="Link to this heading">¶</a></h4>
</section>
<section id="bug-fixes-to-c-support">
<h4>Bug Fixes to C++ Support<a class="headerlink" href="#bug-fixes-to-c-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixed a crash when an expression with a dependent <code class="docutils literal notranslate"><span class="pre">__typeof__</span></code> type is used as the operand of a unary operator. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/97646">#97646</a>)</p></li>
<li><p>Fixed incorrect pack expansion of init-capture references in requires expresssions.</p></li>
<li><p>Fixed a failed assertion when checking invalid delete operator declaration. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/96191">#96191</a>)</p></li>
<li><p>Fix a crash when checking destructor reference with an invalid initializer. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/97230">#97230</a>)</p></li>
<li><p>Clang now correctly parses potentially declarative nested-name-specifiers in pointer-to-member declarators.</p></li>
<li><p>Fix a crash when checking the initialzier of an object that was initialized
with a string literal. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/82167">#82167</a>)</p></li>
<li><p>Fix a crash when matching template template parameters with templates which have
parameters of different class type. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/101394">#101394</a>)</p></li>
<li><p>Clang now correctly recognizes the correct context for parameter
substitutions in concepts, so it doesn’t incorrectly complain of missing
module imports in those situations. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60336">#60336</a>)</p></li>
<li><p>Fix init-capture packs having a size of one before being instantiated. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63677">#63677</a>)</p></li>
<li><p>Clang now preserves the unexpanded flag in a lambda transform used for pack expansion. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56852">#56852</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/85667">#85667</a>),
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/99877">#99877</a>).</p></li>
<li><p>Fixed a bug when diagnosing ambiguous explicit specializations of constrained member functions.</p></li>
<li><p>Fixed an assertion failure when selecting a function from an overload set that includes a
specialization of a conversion function template.</p></li>
<li><p>Correctly diagnose attempts to use a concept name in its own definition;
A concept name is introduced to its scope sooner to match the C++ standard. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55875">#55875</a>)</p></li>
<li><p>Properly reject defaulted relational operators with invalid types for explicit object parameters,
e.g., <code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">operator==(this</span> <span class="pre">int,</span> <span class="pre">const</span> <span class="pre">Foo&amp;)</span></code> (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/100329">#100329</a>), and rvalue reference parameters.</p></li>
<li><p>Properly reject defaulted copy/move assignment operators that have a non-reference explicit object parameter.</p></li>
<li><p>Clang now properly handles the order of attributes in <cite>extern</cite> blocks. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/101990">#101990</a>).</p></li>
<li><p>Fixed an assertion failure by preventing null explicit object arguments from being deduced. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/102025">#102025</a>).</p></li>
<li><p>Correctly check constraints of explicit instantiations of member functions. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/46029">#46029</a>)</p></li>
<li><p>When performing partial ordering of function templates, clang now checks that
the deduction was consistent. Fixes (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/18291">#18291</a>).</p></li>
<li><p>Fixed an assertion failure about a constraint of a friend function template references to a value with greater
template depth than the friend function template. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/98258">#98258</a>)</p></li>
<li><p>Clang now rebuilds the template parameters of out-of-line declarations and specializations in the context
of the current instantiation in all cases.</p></li>
<li><p>Fix evaluation of the index of dependent pack indexing expressions/types specifiers (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/105900">#105900</a>)</p></li>
<li><p>Correctly handle subexpressions of an immediate invocation in the presence of implicit casts. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/105558">#105558</a>)</p></li>
<li><p>Clang now correctly handles direct-list-initialization of a structured bindings from an array. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/31813">#31813</a>)</p></li>
<li><p>Mangle placeholders for deduced types as a template-prefix, such that mangling
of template template parameters uses the correct production. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/106182">#106182</a>)</p></li>
<li><p>Fixed an assertion failure when converting vectors to int/float with invalid expressions. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/105486">#105486</a>)</p></li>
<li><p>Template parameter names are considered in the name lookup of out-of-line class template
specialization right before its declaration context. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/64082">#64082</a>)</p></li>
<li><p>Fixed a constraint comparison bug for friend declarations. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/78101">#78101</a>)</p></li>
</ul>
</section>
<section id="bug-fixes-to-ast-handling">
<h4>Bug Fixes to AST Handling<a class="headerlink" href="#bug-fixes-to-ast-handling" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixed a crash that occurred when dividing by zero in complex integer division. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55390">#55390</a>).</p></li>
</ul>
</section>
<section id="miscellaneous-bug-fixes">
<h4>Miscellaneous Bug Fixes<a class="headerlink" href="#miscellaneous-bug-fixes" title="Link to this heading">¶</a></h4>
</section>
<section id="miscellaneous-clang-crashes-fixed">
<h4>Miscellaneous Clang Crashes Fixed<a class="headerlink" href="#miscellaneous-clang-crashes-fixed" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixed a crash in C due to incorrect lookup that members in nested anonymous struct/union
can be found as ordinary identifiers in struct/union definition. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/31295">#31295</a>)</p></li>
<li><p>Fixed a crash caused by long chains of <code class="docutils literal notranslate"><span class="pre">sizeof</span></code> and other similar operators
that can be followed by a non-parenthesized expression. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/45061">#45061</a>)</p></li>
<li><p>Fixed an crash when compiling <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">STDC</span> <span class="pre">FP_CONTRACT</span> <span class="pre">DEFAULT</span></code> with
<code class="docutils literal notranslate"><span class="pre">-ffp-contract=fast-honor-pragmas</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/104830">#104830</a>)</p></li>
<li><p>Fixed a crash when function has more than 65536 parameters.
Now a diagnostic is emitted. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/35741">#35741</a>)</p></li>
</ul>
</section>
</section>
<section id="openacc-specific-changes">
<h3><a class="toc-backref" href="#id68" role="doc-backlink">OpenACC Specific Changes</a><a class="headerlink" href="#openacc-specific-changes" title="Link to this heading">¶</a></h3>
</section>
<section id="target-specific-changes">
<h3><a class="toc-backref" href="#id69" role="doc-backlink">Target Specific Changes</a><a class="headerlink" href="#target-specific-changes" title="Link to this heading">¶</a></h3>
<section id="amdgpu-support">
<h4>AMDGPU Support<a class="headerlink" href="#amdgpu-support" title="Link to this heading">¶</a></h4>
</section>
<section id="x86-support">
<h4>X86 Support<a class="headerlink" href="#x86-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The MMX vector intrinsic functions from <code class="docutils literal notranslate"><span class="pre">*mmintrin.h</span></code> which
operate on <cite>__m64</cite> vectors, such as <code class="docutils literal notranslate"><span class="pre">_mm_add_pi8</span></code>, have been
reimplemented to use the SSE2 instruction-set and XMM registers
unconditionally. These intrinsics are therefore <em>no longer
supported</em> if MMX is enabled without SSE2 – either from targeting
CPUs from the Pentium-MMX through the Pentium 3, or explicitly via
passing arguments such as <code class="docutils literal notranslate"><span class="pre">-mmmx</span> <span class="pre">-mno-sse2</span></code>. MMX assembly code
remains supported without requiring SSE2, including inside
inline-assembly.</p></li>
<li><p>The compiler builtins such as <code class="docutils literal notranslate"><span class="pre">__builtin_ia32_paddb</span></code> which
formerly implemented the above MMX intrinsic functions have been
removed. Any uses of these removed functions should migrate to the
functions defined by the <code class="docutils literal notranslate"><span class="pre">*mmintrin.h</span></code> headers. A mapping can be
found in the file <code class="docutils literal notranslate"><span class="pre">clang/www/builtins.py</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">AVX10.2</span></code>.
* Supported MINMAX intrinsics of <code class="docutils literal notranslate"><span class="pre">*_(mask(z)))_minmax(ne)_p[s|d|h|bh]</span></code> and
<code class="docutils literal notranslate"><span class="pre">*_(mask(z)))_minmax_s[s|d|h]</span></code>.</p></li>
</ul>
</section>
<section id="arm-and-aarch64-support">
<h4>Arm and AArch64 Support<a class="headerlink" href="#arm-and-aarch64-support" title="Link to this heading">¶</a></h4>
</section>
<section id="android-support">
<h4>Android Support<a class="headerlink" href="#android-support" title="Link to this heading">¶</a></h4>
</section>
<section id="windows-support">
<h4>Windows Support<a class="headerlink" href="#windows-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Clang no longer allows references inside a union when emulating MSVC 1900+ even if <cite>fms-extensions</cite> is enabled.
Starting with VS2015, MSVC 1900, this Microsoft extension is no longer allowed and always results in an error.
Clang now follows the MSVC behavior in this scenario.
When <cite>-fms-compatibility-version=18.00</cite> or prior is set on the command line this Microsoft extension is still
allowed as VS2013 and prior allow it.</p></li>
</ul>
</section>
<section id="loongarch-support">
<h4>LoongArch Support<a class="headerlink" href="#loongarch-support" title="Link to this heading">¶</a></h4>
</section>
<section id="risc-v-support">
<h4>RISC-V Support<a class="headerlink" href="#risc-v-support" title="Link to this heading">¶</a></h4>
</section>
<section id="cuda-hip-language-changes">
<h4>CUDA/HIP Language Changes<a class="headerlink" href="#cuda-hip-language-changes" title="Link to this heading">¶</a></h4>
</section>
<section id="cuda-support">
<h4>CUDA Support<a class="headerlink" href="#cuda-support" title="Link to this heading">¶</a></h4>
</section>
<section id="aix-support">
<h4>AIX Support<a class="headerlink" href="#aix-support" title="Link to this heading">¶</a></h4>
</section>
<section id="netbsd-support">
<h4>NetBSD Support<a class="headerlink" href="#netbsd-support" title="Link to this heading">¶</a></h4>
</section>
<section id="webassembly-support">
<h4>WebAssembly Support<a class="headerlink" href="#webassembly-support" title="Link to this heading">¶</a></h4>
</section>
<section id="avr-support">
<h4>AVR Support<a class="headerlink" href="#avr-support" title="Link to this heading">¶</a></h4>
</section>
</section>
<section id="dwarf-support-in-clang">
<h3><a class="toc-backref" href="#id70" role="doc-backlink">DWARF Support in Clang</a><a class="headerlink" href="#dwarf-support-in-clang" title="Link to this heading">¶</a></h3>
</section>
<section id="floating-point-support-in-clang">
<h3><a class="toc-backref" href="#id71" role="doc-backlink">Floating Point Support in Clang</a><a class="headerlink" href="#floating-point-support-in-clang" title="Link to this heading">¶</a></h3>
</section>
<section id="fixed-point-support-in-clang">
<h3><a class="toc-backref" href="#id72" role="doc-backlink">Fixed Point Support in Clang</a><a class="headerlink" href="#fixed-point-support-in-clang" title="Link to this heading">¶</a></h3>
</section>
<section id="ast-matchers">
<h3><a class="toc-backref" href="#id73" role="doc-backlink">AST Matchers</a><a class="headerlink" href="#ast-matchers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed an issue with the <cite>hasName</cite> and <cite>hasAnyName</cite> matcher when matching
inline namespaces with an enclosing namespace of the same name.</p></li>
<li><p>Fixed an ordering issue with the <cite>hasOperands</cite> matcher occuring when setting a
binding in the first matcher and using it in the second matcher.</p></li>
</ul>
</section>
<section id="clang-format">
<h3><a class="toc-backref" href="#id74" role="doc-backlink">clang-format</a><a class="headerlink" href="#clang-format" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">BreakBinaryOperations</span></code> option.</p></li>
</ul>
</section>
<section id="libclang">
<h3><a class="toc-backref" href="#id75" role="doc-backlink">libclang</a><a class="headerlink" href="#libclang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">clang_isBeforeInTranslationUnit</span></code>. Given two source locations, it determines
whether the first one comes strictly before the second in the source code.</p></li>
</ul>
</section>
<section id="static-analyzer">
<h3><a class="toc-backref" href="#id76" role="doc-backlink">Static Analyzer</a><a class="headerlink" href="#static-analyzer" title="Link to this heading">¶</a></h3>
<section id="new-features">
<h4>New features<a class="headerlink" href="#new-features" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>MallocChecker now checks for <code class="docutils literal notranslate"><span class="pre">ownership_returns(class,</span> <span class="pre">idx)</span></code> and <code class="docutils literal notranslate"><span class="pre">ownership_takes(class,</span> <span class="pre">idx)</span></code>
attributes with class names different from “malloc”. Clang static analyzer now reports an error
if class of allocation and deallocation function mismatches.
<a class="reference external" href="https://clang.llvm.org/docs/analyzer/checkers.html#unix-mismatcheddeallocator-c-c">Documentation</a>.</p></li>
</ul>
</section>
<section id="crash-and-bug-fixes">
<h4>Crash and bug fixes<a class="headerlink" href="#crash-and-bug-fixes" title="Link to this heading">¶</a></h4>
</section>
<section id="improvements">
<h4>Improvements<a class="headerlink" href="#improvements" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Improved the handling of the <code class="docutils literal notranslate"><span class="pre">ownership_returns</span></code> attribute. Now, Clang reports an
error if the attribute is attached to a function that returns a non-pointer value.
Fixes (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/99501">#99501</a>)</p></li>
</ul>
</section>
<section id="moved-checkers">
<h4>Moved checkers<a class="headerlink" href="#moved-checkers" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The checker <code class="docutils literal notranslate"><span class="pre">alpha.security.MallocOverflow</span></code> was deleted because it was
badly implemented and its agressive logic produced too many false positives.
To detect too large arguments passed to malloc, consider using the checker
<code class="docutils literal notranslate"><span class="pre">alpha.taint.TaintedAlloc</span></code>.</p></li>
</ul>
</section>
</section>
<section id="sanitizers">
<span id="release-notes-sanitizers"></span><h3><a class="toc-backref" href="#id77" role="doc-backlink">Sanitizers</a><a class="headerlink" href="#sanitizers" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Introduced Realtime Sanitizer, activated by using the -fsanitize=realtime
flag. This sanitizer detects unsafe system library calls, such as memory
allocations and mutex locks. If any such function is called during invocation
of a function marked with the <code class="docutils literal notranslate"><span class="pre">[[clang::nonblocking]]</span></code> attribute, an error
is printed to the console and the process exits non-zero.</p></li>
<li><p>Added the <code class="docutils literal notranslate"><span class="pre">-fsanitize-undefined-ignore-overflow-pattern</span></code> flag which can be
used to disable specific overflow-dependent code patterns. The supported
patterns are: <code class="docutils literal notranslate"><span class="pre">add-signed-overflow-test</span></code>, <code class="docutils literal notranslate"><span class="pre">add-unsigned-overflow-test</span></code>,
<code class="docutils literal notranslate"><span class="pre">negated-unsigned-const</span></code>, and <code class="docutils literal notranslate"><span class="pre">unsigned-post-decr-while</span></code>. The sanitizer
instrumentation can be toggled off for all available patterns by specifying
<code class="docutils literal notranslate"><span class="pre">all</span></code>. Conversely, you may disable all exclusions with <code class="docutils literal notranslate"><span class="pre">none</span></code> which is
the default.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">/// specified with ``-fsanitize-undefined-ignore-overflow-pattern=add-unsigned-overflow-test``</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">common_overflow_check_pattern</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="n">base</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">offset</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">base</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// The pattern of `a + b &lt; a`, and other re-orderings, won&#39;t be instrumented</span>
<span class="p">}</span>

<span class="c1">/// specified with ``-fsanitize-undefined-ignore-overflow-pattern=add-signed-overflow-test``</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">common_overflow_check_pattern_signed</span><span class="p">(</span><span class="kt">signed</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">base</span><span class="p">,</span><span class="w"> </span><span class="kt">signed</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">offset</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">base</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">offset</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">base</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// The pattern of `a + b &lt; a`, and other re-orderings, won&#39;t be instrumented</span>
<span class="p">}</span>

<span class="c1">/// specified with ``-fsanitize-undefined-ignore-overflow-pattern=negated-unsigned-const``</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">negation_overflow</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1UL</span><span class="p">;</span><span class="w"> </span><span class="c1">// No longer causes a negation overflow warning</span>
<span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-2UL</span><span class="p">;</span><span class="w"> </span><span class="c1">// and so on...</span>
<span class="p">}</span>

<span class="c1">/// specified with ``-fsanitize-undefined-ignore-overflow-pattern=unsigned-post-decr-while``</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">while_post_decrement</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">count</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">// No longer causes unsigned-integer-overflow sanitizer to trip</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Many existing projects have a large amount of these code patterns present.
This new flag should allow those projects to enable integer sanitizers with
less noise.</p>
</li>
</ul>
</section>
<section id="python-binding-changes">
<h3><a class="toc-backref" href="#id78" role="doc-backlink">Python Binding Changes</a><a class="headerlink" href="#python-binding-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed an issue that led to crashes when calling <code class="docutils literal notranslate"><span class="pre">Type.get_exception_specification_kind</span></code>.</p></li>
</ul>
</section>
<section id="openmp-support">
<h3><a class="toc-backref" href="#id79" role="doc-backlink">OpenMP Support</a><a class="headerlink" href="#openmp-support" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added support for ‘omp assume’ directive.</p></li>
</ul>
<section id="id46">
<h4>Improvements<a class="headerlink" href="#id46" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Improve the handling of mapping array-section for struct containing nested structs with user defined mappers</p></li>
<li><p><cite>num_teams</cite> and <cite>thead_limit</cite> now accept multiple expressions when it is used
along in <code class="docutils literal notranslate"><span class="pre">target</span> <span class="pre">teams</span> <span class="pre">ompx_bare</span></code> construct. This allows the target region
to be launched with multi-dim grid on GPUs.</p></li>
</ul>
</section>
</section>
</section>
<section id="additional-information">
<h2><a class="toc-backref" href="#id80" role="doc-backlink">Additional Information</a><a class="headerlink" href="#additional-information" title="Link to this heading">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="https://clang.llvm.org/">Clang web
page</a>. The web page contains versions of the
API documentation which are up-to-date with the Git version of
the source code. You can access versions of these documents specific to
this release by going into the “<code class="docutils literal notranslate"><span class="pre">clang/docs/</span></code>” directory in the Clang
tree.</p>
<p>If you have any questions or comments about Clang, please feel free to
contact us on the <a class="reference external" href="https://discourse.llvm.org/c/clang/6">Discourse forums (Clang Frontend category)</a>.</p>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2007-2024, The Clang Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>
  </body>
</html>