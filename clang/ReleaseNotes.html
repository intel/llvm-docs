
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Clang 15.0.0git (In-Progress) Release Notes &#8212; Clang 15.0.0git documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clang Compiler User’s Manual" href="UsersManual.html" />
    <link rel="prev" title="Using Clang as a Compiler" href="index.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Clang 15.0.0git documentation</span></a></h1>
        <h2 class="heading"><span>Clang 15.0.0git (In-Progress) Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="clang-release-releasenotestitle">
<h1>Clang 15.0.0git (In-Progress)  Release Notes<a class="headerlink" href="#clang-release-releasenotestitle" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id6">Introduction</a></p></li>
<li><p><a class="reference internal" href="#what-s-new-in-clang-release" id="id7">What’s New in Clang 15.0.0git?</a></p>
<ul>
<li><p><a class="reference internal" href="#major-new-features" id="id8">Major New Features</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes" id="id9">Bug Fixes</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id10">Non-comprehensive list of changes in this release</a></p></li>
<li><p><a class="reference internal" href="#new-compiler-flags" id="id11">New Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#deprecated-compiler-flags" id="id12">Deprecated Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#modified-compiler-flags" id="id13">Modified Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#removed-compiler-flags" id="id14">Removed Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#new-pragmas-in-clang" id="id15">New Pragmas in Clang</a></p></li>
<li><p><a class="reference internal" href="#attribute-changes-in-clang" id="id16">Attribute Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#windows-support" id="id17">Windows Support</a></p></li>
<li><p><a class="reference internal" href="#c-language-changes-in-clang" id="id18">C Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#c2x-feature-support" id="id19">C2x Feature Support</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id20">C++ Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#cuda-language-changes-in-clang" id="id21">CUDA Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#objective-c-language-changes-in-clang" id="id22">Objective-C Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#opencl-c-language-changes-in-clang" id="id23">OpenCL C Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#abi-changes-in-clang" id="id24">ABI Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#openmp-support-in-clang" id="id25">OpenMP Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#cuda-support-in-clang" id="id26">CUDA Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#x86-support-in-clang" id="id27">X86 Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#dwarf-support-in-clang" id="id28">DWARF Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#arm-and-aarch64-support-in-clang" id="id29">Arm and AArch64 Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#floating-point-support-in-clang" id="id30">Floating Point Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#internal-api-changes" id="id31">Internal API Changes</a></p></li>
<li><p><a class="reference internal" href="#build-system-changes" id="id32">Build System Changes</a></p></li>
<li><p><a class="reference internal" href="#ast-matchers" id="id33">AST Matchers</a></p></li>
<li><p><a class="reference internal" href="#clang-format" id="id34">clang-format</a></p></li>
<li><p><a class="reference internal" href="#libclang" id="id35">libclang</a></p></li>
<li><p><a class="reference internal" href="#static-analyzer" id="id36">Static Analyzer</a></p></li>
<li><p><a class="reference internal" href="#undefined-behavior-sanitizer-ubsan" id="id37">Undefined Behavior Sanitizer (UBSan)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#core-analysis-improvements" id="id38">Core Analysis Improvements</a></p></li>
<li><p><a class="reference internal" href="#new-issues-found" id="id39">New Issues Found</a></p>
<ul>
<li><p><a class="reference internal" href="#python-binding-changes" id="id40">Python Binding Changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#significant-known-problems" id="id41">Significant Known Problems</a></p></li>
<li><p><a class="reference internal" href="#additional-information" id="id42">Additional Information</a></p></li>
</ul>
</div>
<p>Written by the <a class="reference external" href="https://llvm.org/">LLVM Team</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These are in-progress notes for the upcoming Clang 15 release.
Release notes for previous releases can be found on
<a class="reference external" href="https://releases.llvm.org/download.html">the Download Page</a>.</p>
</div>
<section id="introduction">
<h2><a class="toc-backref" href="#id6">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document contains the release notes for the Clang C/C++/Objective-C
frontend, part of the LLVM Compiler Infrastructure, release 15.0.0git. Here we
describe the status of Clang in some detail, including major
improvements from the previous release and new feature work. For the
general LLVM release notes, see <a class="reference external" href="https://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. All LLVM
releases may be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web
site</a>.</p>
<p>For more information about Clang or LLVM, including information about the
latest release, please see the <a class="reference external" href="https://clang.llvm.org">Clang Web Site</a> or the
<a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
<p>Note that if you are reading this file from a Git checkout or the
main Clang web page, this document applies to the <em>next</em> release, not
the current one. To see the release notes for a specific release, please
see the <a class="reference external" href="https://llvm.org/releases/">releases page</a>.</p>
</section>
<section id="what-s-new-in-clang-release">
<h2><a class="toc-backref" href="#id7">What’s New in Clang 15.0.0git?</a><a class="headerlink" href="#what-s-new-in-clang-release" title="Permalink to this headline">¶</a></h2>
<p>Some of the major new features and improvements to Clang are listed
here. Generic improvements to Clang as a whole or to its underlying
infrastructure are described first, followed by language-specific
sections with improvements to Clang’s support for those languages.</p>
<section id="major-new-features">
<h3><a class="toc-backref" href="#id8">Major New Features</a><a class="headerlink" href="#major-new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Clang now supports the <code class="docutils literal notranslate"><span class="pre">-fzero-call-used-regs</span></code> feature for x86. The purpose
of this feature is to limit Return-Oriented Programming (ROP) exploits and
information leakage. It works by zeroing out a selected class of registers
before function return — e.g., all GPRs that are used within the function.
There is an analogous <code class="docutils literal notranslate"><span class="pre">zero_call_used_regs</span></code> attribute to allow for finer
control of this feature.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h3><a class="toc-backref" href="#id9">Bug Fixes</a><a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CXXNewExpr::getArraySize()</span></code> previously returned a <code class="docutils literal notranslate"><span class="pre">llvm::Optional</span></code>
wrapping a <code class="docutils literal notranslate"><span class="pre">nullptr</span></code> when the <code class="docutils literal notranslate"><span class="pre">CXXNewExpr</span></code> did not have an array
size expression. This was fixed and <code class="docutils literal notranslate"><span class="pre">::getArraySize()</span></code> will now always
either return <code class="docutils literal notranslate"><span class="pre">None</span></code> or a <code class="docutils literal notranslate"><span class="pre">llvm::Optional</span></code> wrapping a valid <code class="docutils literal notranslate"><span class="pre">Expr*</span></code>.
This fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/53742">Issue 53742</a>.</p></li>
<li><p>We now ignore full expressions when traversing cast subexpressions. This
fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/53044">Issue 53044</a>.</p></li>
<li><p>Allow <cite>-Wno-gnu</cite> to silence GNU extension diagnostics for pointer arithmetic
diagnostics. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/54444">Issue 54444</a>.</p></li>
<li><p>Placeholder constraints, as in <cite>Concept auto x = f();</cite>, were not checked when modifiers
like <code class="docutils literal notranslate"><span class="pre">auto&amp;</span></code> or <code class="docutils literal notranslate"><span class="pre">auto**</span></code> were added. These constraints are now checked.
This fixes  <a class="reference external" href="https://github.com/llvm/llvm-project/issues/53911">Issue 53911</a>
and  <a class="reference external" href="https://github.com/llvm/llvm-project/issues/54443">Issue 54443</a>.</p></li>
<li><p>Previously invalid member variables with template parameters would crash clang.
Now fixed by setting identifiers for them.
This fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/28475">Issue 28475 (PR28101)</a>.</p></li>
<li><p>Now allow the <cite>restrict</cite> and <cite>_Atomic</cite> qualifiers to be used in conjunction
with <cite>__auto_type</cite> to match the behavior in GCC. This fixes
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/53652">Issue 53652</a>.</p></li>
<li><p>No longer crash when specifying a variably-modified parameter type in a
function with the <code class="docutils literal notranslate"><span class="pre">naked</span></code> attribute. This fixes
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50541">Issue 50541</a>.</p></li>
<li><p>Allow multiple <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">weak</span></code> directives to name the same undeclared (if an
alias, target) identifier instead of only processing one such <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">weak</span></code>
per identifier.
Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/28985">Issue 28985</a>.</p></li>
<li><p>Unevaluated lambdas in dependant contexts no longer result in clang crashing.
This fixes Issues <a class="reference external" href="https://github.com/llvm/llvm-project/issues/50376">50376</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/51414">51414</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/51416">51416</a>,
and <a class="reference external" href="https://github.com/llvm/llvm-project/issues/51641">51641</a>.</p></li>
</ul>
<section id="improvements-to-clang-s-diagnostics">
<h4>Improvements to Clang’s diagnostics<a class="headerlink" href="#improvements-to-clang-s-diagnostics" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-Wliteral-range</span></code> will warn on floating-point equality comparisons with
constants that are not representable in a casted value. For example,
<code class="docutils literal notranslate"><span class="pre">(float)</span> <span class="pre">f</span> <span class="pre">==</span> <span class="pre">0.1</span></code> is always false.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Winline-namespace-reopened-noninline</span></code> now takes into account that the
<code class="docutils literal notranslate"><span class="pre">inline</span></code> keyword must appear on the original but not necessarily all
extension definitions of an inline namespace and therefore points its note
at the original definition. This fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/50794">Issue 50794 (PR51452)</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wunused-but-set-variable</span></code> now also warns if the variable is only used
by unary operators.</p></li>
</ul>
</section>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h3><a class="toc-backref" href="#id10">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The builtin function __builtin_dump_struct would crash clang when the target
struct have bitfield. Now it fixed, and __builtin_dump_struct support dump
the bitwidth of bitfields.
This fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/54462">Issue 54462</a>.</p></li>
</ul>
</section>
<section id="new-compiler-flags">
<h3><a class="toc-backref" href="#id11">New Compiler Flags</a><a class="headerlink" href="#new-compiler-flags" title="Permalink to this headline">¶</a></h3>
</section>
<section id="deprecated-compiler-flags">
<h3><a class="toc-backref" href="#id12">Deprecated Compiler Flags</a><a class="headerlink" href="#deprecated-compiler-flags" title="Permalink to this headline">¶</a></h3>
</section>
<section id="modified-compiler-flags">
<h3><a class="toc-backref" href="#id13">Modified Compiler Flags</a><a class="headerlink" href="#modified-compiler-flags" title="Permalink to this headline">¶</a></h3>
</section>
<section id="removed-compiler-flags">
<h3><a class="toc-backref" href="#id14">Removed Compiler Flags</a><a class="headerlink" href="#removed-compiler-flags" title="Permalink to this headline">¶</a></h3>
</section>
<section id="new-pragmas-in-clang">
<h3><a class="toc-backref" href="#id15">New Pragmas in Clang</a><a class="headerlink" href="#new-pragmas-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</section>
<section id="attribute-changes-in-clang">
<h3><a class="toc-backref" href="#id16">Attribute Changes in Clang</a><a class="headerlink" href="#attribute-changes-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Attributes loaded as clang plugins which are sensitive to LangOpts must
now override <code class="docutils literal notranslate"><span class="pre">acceptsLangOpts</span></code> instead of <code class="docutils literal notranslate"><span class="pre">diagLangOpts</span></code>.
Returning false will produce a generic “attribute ignored” diagnostic, as
with clang’s built-in attributes.
If plugins want to provide richer diagnostics, they can do so when the
attribute is handled instead, e.g. in <code class="docutils literal notranslate"><span class="pre">handleDeclAttribute</span></code>.
(This was changed in order to better support attributes in code completion).</p></li>
<li><p>__has_cpp_attribute, __has_c_attribute, __has_attribute, and __has_declspec
will now macro expand their argument. This causes a change in behavior for
code using <code class="docutils literal notranslate"><span class="pre">__has_cpp_attribute(__clang__::attr)</span></code> (and same for
<code class="docutils literal notranslate"><span class="pre">__has_c_attribute</span></code>) where it would previously expand to <code class="docutils literal notranslate"><span class="pre">0</span></code> for all
attributes, but will now issue an error due to the expansion of the
predefined <code class="docutils literal notranslate"><span class="pre">__clang__</span></code> macro.</p></li>
<li><p>Added support for parameter pack expansion in <cite>clang::annotate</cite>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">overloadable</span></code> attribute can now be written in all of the syntactic
locations a declaration attribute may appear.
This fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/53805">Issue 53805</a>.</p></li>
<li><p>Improved namespace attributes handling:</p>
<ul>
<li><p>Handle GNU attributes before a namespace identifier and subsequent
attributes of different kinds.</p></li>
<li><p>Emit error on GNU attributes for a nested namespace definition.</p></li>
</ul>
</li>
<li><p>Statement attributes <code class="docutils literal notranslate"><span class="pre">[[clang::noinline]]</span></code> and  <code class="docutils literal notranslate"><span class="pre">[[clang::always_inline]]</span></code>
can be used to control inlining decisions at callsites.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span> <span class="pre">push</span></code> now supports multiple attributes within a single directive.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">__declspec(naked)</span></code> attribute can no longer be written on a member
function in Microsoft compatibility mode, matching the behavior of cl.exe.</p></li>
<li><p>Improve __builtin_dump_struct:</p>
<ul>
<li><p>Support bitfields in struct and union.</p></li>
<li><p>Improve the dump format, dump both bitwidth(if its a bitfield) and field value.</p></li>
</ul>
</li>
</ul>
</section>
<section id="windows-support">
<h3><a class="toc-backref" href="#id17">Windows Support</a><a class="headerlink" href="#windows-support" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add support for MSVC-compatible <code class="docutils literal notranslate"><span class="pre">/JMC</span></code>/<code class="docutils literal notranslate"><span class="pre">/JMC-</span></code> flag in clang-cl (supports
X86/X64/ARM/ARM64). <code class="docutils literal notranslate"><span class="pre">/JMC</span></code> could only be used when <code class="docutils literal notranslate"><span class="pre">/Zi</span></code> or <code class="docutils literal notranslate"><span class="pre">/Z7</span></code> is
turned on. With this addition, clang-cl can be used in Visual Studio for the
JustMyCode feature. Note, you may need to manually add <code class="docutils literal notranslate"><span class="pre">/JMC</span></code> as additional
compile options in the Visual Studio since it currently assumes clang-cl does not support <code class="docutils literal notranslate"><span class="pre">/JMC</span></code>.</p></li>
</ul>
</section>
<section id="c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id18">C Language Changes in Clang</a><a class="headerlink" href="#c-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
</section>
<section id="c2x-feature-support">
<h3><a class="toc-backref" href="#id19">C2x Feature Support</a><a class="headerlink" href="#c2x-feature-support" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Implemented <a class="reference external" href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2764.pdf">WG14 N2674 The noreturn attribute</a>.</p></li>
<li><p>Implemented <a class="reference external" href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2935.pdf">WG14 N2935 Make false and true first-class language features</a>.</p></li>
<li><p>Implemented <a class="reference external" href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2763.pdf">WG14 N2763 Adding a fundamental type for N-bit integers</a>.</p></li>
<li><p>Implemented <a class="reference external" href="http://www.open-std.org/jtc1/sc22/wg14/www/docs/n2775.pdf">WG14 N2775 Literal suffixes for bit-precise integers</a>.</p></li>
<li><p>Implemented the <cite>*_WIDTH</cite> macros to complete support for
<a class="reference external" href="https://www9.open-std.org/jtc1/sc22/wg14/www/docs/n2412.pdf">WG14 N2412 Two’s complement sign representation for C2x</a>.</p></li>
</ul>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id20">C++ Language Changes in Clang</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
<section id="c-20-feature-support">
<h4>C++20 Feature Support<a class="headerlink" href="#c-20-feature-support" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Diagnose consteval and constexpr issues that happen at namespace scope. This
partially addresses <a class="reference external" href="https://github.com/llvm/llvm-project/issues/51593">Issue 51593</a>.</p></li>
</ul>
</section>
<section id="c-2b-feature-support">
<h4>C++2b Feature Support<a class="headerlink" href="#c-2b-feature-support" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2128R6">P2128R6: Multidimensional subscript operator</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P0849R8">P0849R8: auto(x): decay-copy in the language</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2242R3">P2242R3: Non-literal variables (and labels and gotos) in constexpr functions</a>.</p></li>
</ul>
</section>
</section>
<section id="cuda-language-changes-in-clang">
<h3><a class="toc-backref" href="#id21">CUDA Language Changes in Clang</a><a class="headerlink" href="#cuda-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
</section>
<section id="objective-c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id22">Objective-C Language Changes in Clang</a><a class="headerlink" href="#objective-c-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
</section>
<section id="opencl-c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id23">OpenCL C Language Changes in Clang</a><a class="headerlink" href="#opencl-c-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
<p>…</p>
</section>
<section id="abi-changes-in-clang">
<h3><a class="toc-backref" href="#id24">ABI Changes in Clang</a><a class="headerlink" href="#abi-changes-in-clang" title="Permalink to this headline">¶</a></h3>
</section>
<section id="openmp-support-in-clang">
<h3><a class="toc-backref" href="#id25">OpenMP Support in Clang</a><a class="headerlink" href="#openmp-support-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">clang-nvlink-wrapper</span></code> tool introduced to support linking of cubin files
archived in an archive. See <a class="reference internal" href="ClangNvlinkWrapper.html"><span class="doc">Clang Nvlink Wrapper</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clang-linker-wrapper</span></code> tool introduced to support linking using a new OpenMP
target offloading method. See <a class="reference internal" href="ClangLinkerWrapper.html"><span class="doc">Clang Linker Wrapper</span></a>.</p></li>
<li><p>Support for a new driver for OpenMP target offloading has been added as an
opt-in feature. The new driver can be selected using <code class="docutils literal notranslate"><span class="pre">-fopenmp-new-driver</span></code>
with clang. Device-side LTO can also be enabled using the new driver by
passing <code class="docutils literal notranslate"><span class="pre">-foffload-lto=</span></code> as well. The new driver supports the following
features:
- Linking AMDGPU and NVPTX offloading targets.
- Static linking using archive files.
- Device-side LTO.</p></li>
</ul>
</section>
<section id="cuda-support-in-clang">
<h3><a class="toc-backref" href="#id26">CUDA Support in Clang</a><a class="headerlink" href="#cuda-support-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</section>
<section id="x86-support-in-clang">
<h3><a class="toc-backref" href="#id27">X86 Support in Clang</a><a class="headerlink" href="#x86-support-in-clang" title="Permalink to this headline">¶</a></h3>
</section>
<section id="dwarf-support-in-clang">
<h3><a class="toc-backref" href="#id28">DWARF Support in Clang</a><a class="headerlink" href="#dwarf-support-in-clang" title="Permalink to this headline">¶</a></h3>
</section>
<section id="arm-and-aarch64-support-in-clang">
<h3><a class="toc-backref" href="#id29">Arm and AArch64 Support in Clang</a><a class="headerlink" href="#arm-and-aarch64-support-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>When using <code class="docutils literal notranslate"><span class="pre">-mbranch-protection=bti</span></code> with AArch64, calls to setjmp will
now be followed by a BTI instruction. This is done to be compatible with
setjmp implementations that return with a br instead of a ret. You can
disable this behaviour using the <code class="docutils literal notranslate"><span class="pre">-mno-bti-at-return-twice</span></code> option.</p></li>
</ul>
</section>
<section id="floating-point-support-in-clang">
<h3><a class="toc-backref" href="#id30">Floating Point Support in Clang</a><a class="headerlink" href="#floating-point-support-in-clang" title="Permalink to this headline">¶</a></h3>
</section>
<section id="internal-api-changes">
<h3><a class="toc-backref" href="#id31">Internal API Changes</a><a class="headerlink" href="#internal-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A new sugar <code class="docutils literal notranslate"><span class="pre">Type</span></code> AST node represents types accessed via a C++ using
declaration. Given code <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">std::error_code;</span> <span class="pre">error_code</span> <span class="pre">x;</span></code>, <code class="docutils literal notranslate"><span class="pre">x</span></code> has
a <code class="docutils literal notranslate"><span class="pre">UsingType</span></code> which desugars to the previous <code class="docutils literal notranslate"><span class="pre">RecordType</span></code>.</p></li>
<li><p>Added a new attribute flag <cite>AcceptsExprPack</cite> that when set allows expression
pack expansions in the parsed arguments of the corresponding attribute.
Additionally it introduces delaying of attribute arguments, adding common
handling for creating attributes that cannot be fully initialized prior to
template instantiation.</p></li>
</ul>
</section>
<section id="build-system-changes">
<h3><a class="toc-backref" href="#id32">Build System Changes</a><a class="headerlink" href="#build-system-changes" title="Permalink to this headline">¶</a></h3>
</section>
<section id="ast-matchers">
<h3><a class="toc-backref" href="#id33">AST Matchers</a><a class="headerlink" href="#ast-matchers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Expanded <code class="docutils literal notranslate"><span class="pre">isInline</span></code> narrowing matcher to support c++17 inline variables.</p></li>
</ul>
</section>
<section id="clang-format">
<h3><a class="toc-backref" href="#id34">clang-format</a><a class="headerlink" href="#clang-format" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>Important change</strong>: Renamed <code class="docutils literal notranslate"><span class="pre">IndentRequires</span></code> to <code class="docutils literal notranslate"><span class="pre">IndentRequiresClause</span></code>
and changed the default for all styles from <code class="docutils literal notranslate"><span class="pre">false</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p>Reworked and improved handling of concepts and requires. Added the
<code class="docutils literal notranslate"><span class="pre">RequiresClausePosition</span></code> option as part of that.</p></li>
<li><p>Changed <code class="docutils literal notranslate"><span class="pre">BreakBeforeConceptDeclarations</span></code> from <code class="docutils literal notranslate"><span class="pre">Boolean</span></code> to an enum.</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">InsertBraces</span></code> has been added to insert optional braces after control
statements.</p></li>
</ul>
</section>
<section id="libclang">
<h3><a class="toc-backref" href="#id35">libclang</a><a class="headerlink" href="#libclang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</section>
<section id="static-analyzer">
<h3><a class="toc-backref" href="#id36">Static Analyzer</a><a class="headerlink" href="#static-analyzer" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</section>
<section id="undefined-behavior-sanitizer-ubsan">
<span id="release-notes-ubsan"></span><h3><a class="toc-backref" href="#id37">Undefined Behavior Sanitizer (UBSan)</a><a class="headerlink" href="#undefined-behavior-sanitizer-ubsan" title="Permalink to this headline">¶</a></h3>
</section>
</section>
<section id="core-analysis-improvements">
<h2><a class="toc-backref" href="#id38">Core Analysis Improvements</a><a class="headerlink" href="#core-analysis-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>…</p></li>
</ul>
</section>
<section id="new-issues-found">
<h2><a class="toc-backref" href="#id39">New Issues Found</a><a class="headerlink" href="#new-issues-found" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>…</p></li>
</ul>
<section id="python-binding-changes">
<h3><a class="toc-backref" href="#id40">Python Binding Changes</a><a class="headerlink" href="#python-binding-changes" title="Permalink to this headline">¶</a></h3>
<p>The following methods have been added:</p>
<ul class="simple">
<li><p>…</p></li>
</ul>
</section>
</section>
<section id="significant-known-problems">
<h2><a class="toc-backref" href="#id41">Significant Known Problems</a><a class="headerlink" href="#significant-known-problems" title="Permalink to this headline">¶</a></h2>
</section>
<section id="additional-information">
<h2><a class="toc-backref" href="#id42">Additional Information</a><a class="headerlink" href="#additional-information" title="Permalink to this headline">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="https://clang.llvm.org/">Clang web
page</a>. The web page contains versions of the
API documentation which are up-to-date with the Git version of
the source code. You can access versions of these documents specific to
this release by going into the “<code class="docutils literal notranslate"><span class="pre">clang/docs/</span></code>” directory in the Clang
tree.</p>
<p>If you have any questions or comments about Clang, please feel free to
contact us via the <a class="reference external" href="https://lists.llvm.org/mailman/listinfo/cfe-dev">mailing
list</a>.</p>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2022, The Clang Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.1.2.
    </div>
  </body>
</html>