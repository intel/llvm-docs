<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPC++ Runtime: sycl::_V1::detail::tls_code_loc_t Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DPC++ Runtime
   </div>
   <div id="projectbrief">Runtime libraries for oneAPI DPC++</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sycl::_V1::detail::tls_code_loc_t Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Data type that manages the <a class="el" href="structsycl_1_1__V1_1_1detail_1_1code__location.html">code_location</a> information in TLS.  
 <a href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="detail_2common_8hpp_source.html">sycl/detail/common.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a180d9c3aea419d9336038a0b5068f6ca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html#a180d9c3aea419d9336038a0b5068f6ca">tls_code_loc_t</a> ()</td></tr>
<tr class="memdesc:a180d9c3aea419d9336038a0b5068f6ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Consructor that checks to see if a TLS entry already exists.  <a href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html#a180d9c3aea419d9336038a0b5068f6ca">More...</a><br /></td></tr>
<tr class="separator:a180d9c3aea419d9336038a0b5068f6ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabcd6152b505eb525314f0e17364e3f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html#aabcd6152b505eb525314f0e17364e3f8">tls_code_loc_t</a> (const <a class="el" href="structsycl_1_1__V1_1_1detail_1_1code__location.html">detail::code_location</a> &amp;CodeLoc)</td></tr>
<tr class="memdesc:aabcd6152b505eb525314f0e17364e3f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iniitializes TLS with CodeLoc if a TLS entry not present.  <a href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html#aabcd6152b505eb525314f0e17364e3f8">More...</a><br /></td></tr>
<tr class="separator:aabcd6152b505eb525314f0e17364e3f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaacf53c0ae497846b14951c417e03bb5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html#aaacf53c0ae497846b14951c417e03bb5">~tls_code_loc_t</a> ()</td></tr>
<tr class="memdesc:aaacf53c0ae497846b14951c417e03bb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the code location is set up by this instance, reset it.  <a href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html#aaacf53c0ae497846b14951c417e03bb5">More...</a><br /></td></tr>
<tr class="separator:aaacf53c0ae497846b14951c417e03bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a3fe878ee7a8132ae59aeaddbffc9f"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsycl_1_1__V1_1_1detail_1_1code__location.html">detail::code_location</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html#a37a3fe878ee7a8132ae59aeaddbffc9f">query</a> ()</td></tr>
<tr class="memdesc:a37a3fe878ee7a8132ae59aeaddbffc9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query the information in the TLS slot.  <a href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html#a37a3fe878ee7a8132ae59aeaddbffc9f">More...</a><br /></td></tr>
<tr class="separator:a37a3fe878ee7a8132ae59aeaddbffc9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Data type that manages the <a class="el" href="structsycl_1_1__V1_1_1detail_1_1code__location.html">code_location</a> information in TLS. </p>
<p>As new SYCL features are added, they all enable the propagation of the code location information where the SYCL API was called by the application layer. In order to facilitate this, the <a class="el" href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html" title="Data type that manages the code_location information in TLS.">tls_code_loc_t</a> object assists in managing the data in TLS : (1) Populate the information when you at the top level function in the call chain. This is usually the end-user entry point function into SYCL. (2) Remove the information when the object goes out of scope in the top level function.</p>
<p>Usage:- void bar() { <a class="el" href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html" title="Data type that manages the code_location information in TLS.">tls_code_loc_t</a> p; // Print the source information of where foo() was called in main() <a class="el" href="namespacestd.html#a89ad7e93ceeef4d5506bbd30d2f9f681" title="Linked to standard output.">std::cout</a> &lt;&lt; p.query().fileName() &lt;&lt; ":" &lt;&lt; p.query().lineNumber() &lt;&lt; std::endl; } // Will work for arbitrary call chain lengths. void bar1() {bar();}</p>
<p>// Foo() is equivalent to a SYCL end user entry point such as // <a class="el" href="classsycl_1_1__V1_1_1queue.html#a123f9d1df9cbb040c4810d7a493bdcee" title="Copies data from one memory region to another, each is either a host pointer or a pointer within USM ...">queue.memcpy()</a> or <a class="el" href="classsycl_1_1__V1_1_1queue.html#a5fcf0c525944e1561a82404dabf5daa9" title="Copies data from one memory region to another, each is either a host pointer or a pointer within USM ...">queue.copy()</a> void foo(const code_location &amp;loc) { <a class="el" href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html" title="Data type that manages the code_location information in TLS.">tls_code_loc_t</a> tp(loc); bar1(); }</p>
<p>void main() { foo(const <a class="el" href="structsycl_1_1__V1_1_1detail_1_1code__location.html">code_location</a> &amp;loc = <a class="el" href="structsycl_1_1__V1_1_1detail_1_1code__location.html#a02f65879e268ddfaea96a0ffdc9d4fa2">code_location::current()</a>); } </p>

<p class="definition">Definition at line <a class="el" href="detail_2common_8hpp_source.html#l00129">129</a> of file <a class="el" href="detail_2common_8hpp_source.html">common.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a180d9c3aea419d9336038a0b5068f6ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a180d9c3aea419d9336038a0b5068f6ca">&#9670;&nbsp;</a></span>tls_code_loc_t() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sycl::_V1::detail::tls_code_loc_t::tls_code_loc_t </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Consructor that checks to see if a TLS entry already exists. </p>
<p>Default constructor to use in lower levels of the calling stack to check and see if code location object is available.</p>
<p>If a previous populated TLS entry exists, this constructor will capture the informationa and allow you to query the information later.</p>
<p>If not, continue with instrumentation as needed </p>

<p class="definition">Definition at line <a class="el" href="common_8cpp_source.html#l00024">24</a> of file <a class="el" href="common_8cpp_source.html">common.cpp</a>.</p>

<p class="reference">References <a class="el" href="detail_2common_8hpp_source.html#l00089">sycl::_V1::detail::code_location::fileName()</a>, <a class="el" href="detail_2common_8hpp_source.html#l00090">sycl::_V1::detail::code_location::functionName()</a>, and <a class="el" href="common_8cpp_source.html#l00019">sycl::_V1::detail::GCodeLocTLS</a>.</p>

</div>
</div>
<a id="aabcd6152b505eb525314f0e17364e3f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabcd6152b505eb525314f0e17364e3f8">&#9670;&nbsp;</a></span>tls_code_loc_t() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sycl::_V1::detail::tls_code_loc_t::tls_code_loc_t </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structsycl_1_1__V1_1_1detail_1_1code__location.html">detail::code_location</a> &amp;&#160;</td>
          <td class="paramname"><em>CodeLoc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iniitializes TLS with CodeLoc if a TLS entry not present. </p>
<p>Constructor to use at the top level of the calling stack.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CodeLoc</td><td>The code location information to set up the TLS slot with.</td></tr>
  </table>
  </dd>
</dl>
<p>This is usually a SYCL entry point used by the end user in their application code. In this case, we still check to see if another code location has been stashed in the TLS at a higher level. If not, we have the code location information that must be active for the current calling scope. </p>

<p class="definition">Definition at line <a class="el" href="common_8cpp_source.html#l00035">35</a> of file <a class="el" href="common_8cpp_source.html">common.cpp</a>.</p>

<p class="reference">References <a class="el" href="detail_2common_8hpp_source.html#l00089">sycl::_V1::detail::code_location::fileName()</a>, <a class="el" href="detail_2common_8hpp_source.html#l00090">sycl::_V1::detail::code_location::functionName()</a>, and <a class="el" href="common_8cpp_source.html#l00019">sycl::_V1::detail::GCodeLocTLS</a>.</p>

</div>
</div>
<a id="aaacf53c0ae497846b14951c417e03bb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaacf53c0ae497846b14951c417e03bb5">&#9670;&nbsp;</a></span>~tls_code_loc_t()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sycl::_V1::detail::tls_code_loc_t::~tls_code_loc_t </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the code location is set up by this instance, reset it. </p>
<p>If we are the top lovel scope, reset the code location info. </p>

<p class="definition">Definition at line <a class="el" href="common_8cpp_source.html#l00047">47</a> of file <a class="el" href="common_8cpp_source.html">common.cpp</a>.</p>

<p class="reference">References <a class="el" href="common_8cpp_source.html#l00019">sycl::_V1::detail::GCodeLocTLS</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a37a3fe878ee7a8132ae59aeaddbffc9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37a3fe878ee7a8132ae59aeaddbffc9f">&#9670;&nbsp;</a></span>query()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsycl_1_1__V1_1_1detail_1_1code__location.html">detail::code_location</a> &amp; sycl::_V1::detail::tls_code_loc_t::query </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query the information in the TLS slot. </p>
<dl class="section return"><dt>Returns</dt><dd>The code location information saved in the TLS slot. If not TLS entry has been set up, a default coe location is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="common_8cpp_source.html#l00054">54</a> of file <a class="el" href="common_8cpp_source.html">common.cpp</a>.</p>

<p class="reference">References <a class="el" href="common_8cpp_source.html#l00019">sycl::_V1::detail::GCodeLocTLS</a>.</p>

<p class="reference">Referenced by <a class="el" href="commands_8cpp_source.html#l00963">sycl::_V1::detail::Command::copySubmissionCodeLocation()</a>, <a class="el" href="pi_8cpp_source.html#l00143">sycl::_V1::detail::pi::emitFunctionWithArgsBeginTrace()</a>, and <a class="el" href="global__handler_8cpp_source.html#l00085">sycl::_V1::detail::GlobalHandler::TraceEventXPTI()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/sycl/detail/<a class="el" href="detail_2common_8hpp_source.html">common.hpp</a></li>
<li>source/detail/<a class="el" href="common_8cpp_source.html">common.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacesycl.html">sycl</a></li><li class="navelem"><a class="el" href="namespacesycl_1_1__V1.html">_V1</a></li><li class="navelem"><a class="el" href="namespacesycl_1_1__V1_1_1detail.html">detail</a></li><li class="navelem"><a class="el" href="classsycl_1_1__V1_1_1detail_1_1tls__code__loc__t.html">tls_code_loc_t</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
