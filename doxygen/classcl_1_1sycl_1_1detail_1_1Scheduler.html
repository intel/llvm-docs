<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DPC++ Runtime: cl::sycl::detail::Scheduler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DPC++ Runtime
   </div>
   <div id="projectbrief">Runtime libraries for oneAPI Data Parallel C++</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classcl_1_1sycl_1_1detail_1_1Scheduler.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classcl_1_1sycl_1_1detail_1_1Scheduler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">cl::sycl::detail::Scheduler Class Reference<div class="ingroups"><a class="el" href="group__sycl__graph.html">DPC++ Execution Graph</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>DPC++ graph scheduler class.  
 <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="scheduler_8hpp_source.html">detail/scheduler/scheduler.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for cl::sycl::detail::Scheduler:</div>
<div class="dyncontent">
<div class="center"><img src="classcl_1_1sycl_1_1detail_1_1Scheduler__coll__graph.png" border="0" usemap="#cl_1_1sycl_1_1detail_1_1Scheduler_coll__map" alt="Collaboration graph"/></div>
<map name="cl_1_1sycl_1_1detail_1_1Scheduler_coll__map" id="cl_1_1sycl_1_1detail_1_1Scheduler_coll__map">
<area shape="rect" title="DPC++ graph scheduler class." alt="" coords="771,217,955,243"/>
<area shape="rect" title=" " alt="" coords="300,5,521,76"/>
<area shape="rect" title=" " alt="" coords="339,100,482,141"/>
<area shape="rect" title=" " alt="" coords="345,166,476,193"/>
<area shape="rect" title=" " alt="" coords="379,217,443,243"/>
<area shape="rect" title=" " alt="" coords="331,267,491,294"/>
<area shape="rect" title=" " alt="" coords="327,319,495,360"/>
<area shape="rect" href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphBuilder.html" title="Graph builder class." alt="" coords="319,384,503,425"/>
<area shape="rect" title=" " alt="" coords="5,384,173,425"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphBuilder.html">GraphBuilder</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Graph builder class.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphBuilder.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphProcessor.html">GraphProcessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Graph Processor provides interfaces for enqueueing commands and their dependencies to the underlying runtime.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphProcessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcl_1_1sycl_1_1detail_1_1Scheduler_1_1StreamBuffers.html">StreamBuffers</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stream buffers structure.  <a href="structcl_1_1sycl_1_1detail_1_1Scheduler_1_1StreamBuffers.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac0e8ff38f6f6274626f65b2b52227f47"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ac0e8ff38f6f6274626f65b2b52227f47">addCG</a> (std::unique_ptr&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1CG.html">detail::CG</a> &gt; CommandGroup, <a class="el" href="namespacecl_1_1sycl_1_1detail.html#a6c21d261b1995d0ce7058f54581ac8a8">QueueImplPtr</a> Queue)</td></tr>
<tr class="memdesc:ac0e8ff38f6f6274626f65b2b52227f47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a command group, and adds it to the dependency graph.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ac0e8ff38f6f6274626f65b2b52227f47">More...</a><br /></td></tr>
<tr class="separator:ac0e8ff38f6f6274626f65b2b52227f47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5887b8414f705ee134016e59e14baeb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#af5887b8414f705ee134016e59e14baeb">addCopyBack</a> (<a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *Req)</td></tr>
<tr class="memdesc:af5887b8414f705ee134016e59e14baeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a command group, that copies most recent memory to the memory pointed by the requirement.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#af5887b8414f705ee134016e59e14baeb">More...</a><br /></td></tr>
<tr class="separator:af5887b8414f705ee134016e59e14baeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af01d870c24856e2c5d1bd4b74c4f7701"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#af01d870c24856e2c5d1bd4b74c4f7701">waitForEvent</a> (<a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a> Event)</td></tr>
<tr class="memdesc:af01d870c24856e2c5d1bd4b74c4f7701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for the event.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#af01d870c24856e2c5d1bd4b74c4f7701">More...</a><br /></td></tr>
<tr class="separator:af01d870c24856e2c5d1bd4b74c4f7701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24c668644f9f5a46f87bd67f68951835"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a24c668644f9f5a46f87bd67f68951835">removeMemoryObject</a> (<a class="el" href="classcl_1_1sycl_1_1detail_1_1SYCLMemObjI.html">detail::SYCLMemObjI</a> *MemObj)</td></tr>
<tr class="memdesc:a24c668644f9f5a46f87bd67f68951835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes buffer from the graph.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a24c668644f9f5a46f87bd67f68951835">More...</a><br /></td></tr>
<tr class="separator:a24c668644f9f5a46f87bd67f68951835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec5f4676243cfbf21edc4abeb054f8fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#aec5f4676243cfbf21edc4abeb054f8fa">cleanupFinishedCommands</a> (<a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a> FinishedEvent)</td></tr>
<tr class="memdesc:aec5f4676243cfbf21edc4abeb054f8fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes finished non-leaf non-alloca commands from the subgraph (assuming that all its commands have been waited for).  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#aec5f4676243cfbf21edc4abeb054f8fa">More...</a><br /></td></tr>
<tr class="separator:aec5f4676243cfbf21edc4abeb054f8fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e184b6920626e812994f0b905a9644a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a6e184b6920626e812994f0b905a9644a">addHostAccessor</a> (<a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *Req)</td></tr>
<tr class="memdesc:a6e184b6920626e812994f0b905a9644a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds nodes to the graph, that update the requirement with the pointer to the host memory.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a6e184b6920626e812994f0b905a9644a">More...</a><br /></td></tr>
<tr class="separator:a6e184b6920626e812994f0b905a9644a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa17761af756131d983574f5558c2f854"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#aa17761af756131d983574f5558c2f854">releaseHostAccessor</a> (<a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *Req)</td></tr>
<tr class="memdesc:aa17761af756131d983574f5558c2f854"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unblocks operations with the memory object.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#aa17761af756131d983574f5558c2f854">More...</a><br /></td></tr>
<tr class="separator:aa17761af756131d983574f5558c2f854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5795ad851a992b79c7e1591db6f3216"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ab5795ad851a992b79c7e1591db6f3216">allocateStreamBuffers</a> (<a class="el" href="classcl_1_1sycl_1_1detail_1_1stream__impl.html">stream_impl</a> *, size_t, size_t)</td></tr>
<tr class="memdesc:ab5795ad851a992b79c7e1591db6f3216"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate buffers in the pool for a provided stream.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ab5795ad851a992b79c7e1591db6f3216">More...</a><br /></td></tr>
<tr class="separator:ab5795ad851a992b79c7e1591db6f3216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe16ed2b110354a8612ab9238f53c265"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#afe16ed2b110354a8612ab9238f53c265">deallocateStreamBuffers</a> (<a class="el" href="classcl_1_1sycl_1_1detail_1_1stream__impl.html">stream_impl</a> *)</td></tr>
<tr class="memdesc:afe16ed2b110354a8612ab9238f53c265"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate all stream buffers in the pool.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#afe16ed2b110354a8612ab9238f53c265">More...</a><br /></td></tr>
<tr class="separator:afe16ed2b110354a8612ab9238f53c265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e54bc01214bd25329e556ba97b0258"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#a6c21d261b1995d0ce7058f54581ac8a8">QueueImplPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a51e54bc01214bd25329e556ba97b0258">getDefaultHostQueue</a> ()</td></tr>
<tr class="separator:a51e54bc01214bd25329e556ba97b0258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad4ad62a6e1d3c4eb1a29c1d464357c8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#aad4ad62a6e1d3c4eb1a29c1d464357c8">Scheduler</a> ()</td></tr>
<tr class="separator:aad4ad62a6e1d3c4eb1a29c1d464357c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae48e3a629d271a28cb280432389b881f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ae48e3a629d271a28cb280432389b881f">~Scheduler</a> ()</td></tr>
<tr class="separator:ae48e3a629d271a28cb280432389b881f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a6a372403ed668ccf5f5469a854aa3f5e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html">Scheduler</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a6a372403ed668ccf5f5469a854aa3f5e">getInstance</a> ()</td></tr>
<tr class="separator:a6a372403ed668ccf5f5469a854aa3f5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95468b0ba102b4bfe152461dec8acd63"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structcl_1_1sycl_1_1detail_1_1MemObjRecord.html">MemObjRecord</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a95468b0ba102b4bfe152461dec8acd63">getMemObjRecord</a> (const <a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *const Req)</td></tr>
<tr class="separator:a95468b0ba102b4bfe152461dec8acd63"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a1bff8b0f2caf28c9a6773ae020c90f67"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a1bff8b0f2caf28c9a6773ae020c90f67">RWLockT</a> = std::shared_timed_mutex</td></tr>
<tr class="separator:a1bff8b0f2caf28c9a6773ae020c90f67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a011d40c491f07a7097b8b77431c50f54"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a011d40c491f07a7097b8b77431c50f54">ReadLockT</a> = std::shared_lock&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a1bff8b0f2caf28c9a6773ae020c90f67">RWLockT</a> &gt;</td></tr>
<tr class="separator:a011d40c491f07a7097b8b77431c50f54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e0c81499c15b06c9c0dd1762e5cce57"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a8e0c81499c15b06c9c0dd1762e5cce57">WriteLockT</a> = std::unique_lock&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a1bff8b0f2caf28c9a6773ae020c90f67">RWLockT</a> &gt;</td></tr>
<tr class="separator:a8e0c81499c15b06c9c0dd1762e5cce57"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9c0a7598078a371ae98fc317eeeedc96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a9c0a7598078a371ae98fc317eeeedc96">acquireWriteLock</a> (<a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a8e0c81499c15b06c9c0dd1762e5cce57">WriteLockT</a> &amp;Lock)</td></tr>
<tr class="memdesc:a9c0a7598078a371ae98fc317eeeedc96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides exclusive access to std::shared_timed_mutex object with deadlock avoidance.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a9c0a7598078a371ae98fc317eeeedc96">More...</a><br /></td></tr>
<tr class="separator:a9c0a7598078a371ae98fc317eeeedc96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4feeaf531a9273da563ec68dd27c1132"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a4feeaf531a9273da563ec68dd27c1132">cleanupCommands</a> (const std::vector&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1Command.html">Command</a> * &gt; &amp;Cmds)</td></tr>
<tr class="separator:a4feeaf531a9273da563ec68dd27c1132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf7209aa0ed78b3157ba7d7b68e999a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#aaf7209aa0ed78b3157ba7d7b68e999a0">waitForRecordToFinish</a> (<a class="el" href="structcl_1_1sycl_1_1detail_1_1MemObjRecord.html">MemObjRecord</a> *Record, <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a011d40c491f07a7097b8b77431c50f54">ReadLockT</a> &amp;GraphReadLock)</td></tr>
<tr class="memdesc:aaf7209aa0ed78b3157ba7d7b68e999a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function waits on all of the graph leaves which somehow use the memory object which is represented by <code>Record</code>.  <a href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#aaf7209aa0ed78b3157ba7d7b68e999a0">More...</a><br /></td></tr>
<tr class="separator:aaf7209aa0ed78b3157ba7d7b68e999a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:afe48a436f2c71c8e2a9dddbf6498222f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#afe48a436f2c71c8e2a9dddbf6498222f">enqueueLeavesOfReqUnlocked</a> (const <a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *const Req, std::vector&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1Command.html">Command</a> * &gt; &amp;ToCleanUp)</td></tr>
<tr class="separator:afe48a436f2c71c8e2a9dddbf6498222f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a609d270e5c2651fb22533dbd9fdf136e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphBuilder.html">GraphBuilder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a609d270e5c2651fb22533dbd9fdf136e">MGraphBuilder</a></td></tr>
<tr class="separator:a609d270e5c2651fb22533dbd9fdf136e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732c15bb7fa1de1dd501e4dabe06f5df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a1bff8b0f2caf28c9a6773ae020c90f67">RWLockT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a732c15bb7fa1de1dd501e4dabe06f5df">MGraphLock</a></td></tr>
<tr class="separator:a732c15bb7fa1de1dd501e4dabe06f5df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17f0f01f6b24cc916719952ef3f23504"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1Command.html">Command</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a17f0f01f6b24cc916719952ef3f23504">MDeferredCleanupCommands</a></td></tr>
<tr class="separator:a17f0f01f6b24cc916719952ef3f23504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8a71c590f8fcecfe0735c610d6291e"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#adc8a71c590f8fcecfe0735c610d6291e">MDeferredCleanupMutex</a></td></tr>
<tr class="separator:adc8a71c590f8fcecfe0735c610d6291e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5477da51f48aec98b98e990c887a1902"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#a6c21d261b1995d0ce7058f54581ac8a8">QueueImplPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a5477da51f48aec98b98e990c887a1902">DefaultHostQueue</a></td></tr>
<tr class="separator:a5477da51f48aec98b98e990c887a1902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad076232447dc5700d3821c487e6c4bab"><td class="memItemLeft" align="right" valign="top">std::recursive_mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ad076232447dc5700d3821c487e6c4bab">StreamBuffersPoolMutex</a></td></tr>
<tr class="separator:ad076232447dc5700d3821c487e6c4bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e7f0b212e78ad11f9f8c9dc43b64496"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1stream__impl.html">stream_impl</a> *, <a class="el" href="structcl_1_1sycl_1_1detail_1_1Scheduler_1_1StreamBuffers.html">StreamBuffers</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a3e7f0b212e78ad11f9f8c9dc43b64496">StreamBuffersPool</a></td></tr>
<tr class="separator:a3e7f0b212e78ad11f9f8c9dc43b64496"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a62a7fc89f0ee4604e3ccab9b6b6a343f"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a62a7fc89f0ee4604e3ccab9b6b6a343f">Command</a></td></tr>
<tr class="separator:a62a7fc89f0ee4604e3ccab9b6b6a343f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac24921e3619f5c224cf67dc02a0d6b76"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ac24921e3619f5c224cf67dc02a0d6b76">DispatchHostTask</a></td></tr>
<tr class="separator:ac24921e3619f5c224cf67dc02a0d6b76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada31d15c00c8f3992ab6c85f7ec414cb"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ada31d15c00c8f3992ab6c85f7ec414cb">queue_impl</a></td></tr>
<tr class="separator:ada31d15c00c8f3992ab6c85f7ec414cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad44c6eb29090d3bbf185641c8adb2b12"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ad44c6eb29090d3bbf185641c8adb2b12">event_impl</a></td></tr>
<tr class="separator:ad44c6eb29090d3bbf185641c8adb2b12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5aea7766fbe6d37849f45208e705cb9"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#ae5aea7766fbe6d37849f45208e705cb9">stream_impl</a></td></tr>
<tr class="separator:ae5aea7766fbe6d37849f45208e705cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f99db988226e336bff4e17f446b10db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a8f99db988226e336bff4e17f446b10db">initStream</a> (<a class="el" href="namespacecl_1_1sycl_1_1detail.html#afa0db6a2af73316d79d1ae6c2cbd99ef">StreamImplPtr</a>, <a class="el" href="namespacecl_1_1sycl_1_1detail.html#a6c21d261b1995d0ce7058f54581ac8a8">QueueImplPtr</a>)</td></tr>
<tr class="separator:a8f99db988226e336bff4e17f446b10db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>DPC++ graph scheduler class. </p>
<h1><a class="anchor" id="sched_overview"></a>
Scheduler Overview</h1>
<p>The <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> is a part of DPC++ RT which ensures correct execution of command groups. To achieve this <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> manages acyclic dependency graph (which can have independent sub-graphs) that consists of several types of nodes that represent specific commands:</p>
<ol type="1">
<li>Allocate memory. The command represents memory allocation operation. There can be multiple allocations for a single SYCL memory object.</li>
<li>Release memory. The command represents memory release operation.</li>
<li>Execute command group. The command represents <a class="el" href="classcl_1_1sycl_1_1detail_1_1CG.html">Command Group</a> (kernel) execution operation.</li>
<li>Copy memory. The command represents memory copy operation between two memory allocations of a single memory object.</li>
</ol>
<p>As the main input <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> takes a command group and returns an event representing it, so it can be waited on later. When a new command group comes, <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> adds one or more nodes to the graph depending on the command groups' requirements. For example, if a new command group is submitted to the SYCL context which has the latest data for all the requirements, <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> adds a new "Execute command group" command making it dependent on all commands affecting new command group's requirements. But if one of the requirements has no up-to-date instance in the context which the command group is submitted to, <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> additionally inserts copy memory command (together with allocate memory command if needed).</p>
<p>A simple graph looks like: </p><div class="dotgraph">
<img src="dot_inline_dotgraph_3.png" alt="dot_inline_dotgraph_3.png" border="0" usemap="#dot_inline_dotgraph_3.map"/>
</div>
<p>Where nodes represent commands and edges represent dependencies between them. There are three commands connected by arrows which mean that before executing second command group the first one must be executed. Also before executing the first command group memory allocation must be performed.</p>
<p>At some point <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> enqueues commands to the underlying devices. To do this, <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> performs topological sort to get the order in which commands should be enqueued. For example, the following graph (D depends on B and C, B and C depends on A) will be enqueued in the following order: </p><div class="fragment"><div class="line">EventA = Enqueue(A, <span class="comment">/*Deps=*/</span>{});</div>
<div class="line">EventB = Enqueue(B, <span class="comment">/*Deps=*/</span>{EventA});</div>
<div class="line">EventC = Enqueue(C, <span class="comment">/*Deps=*/</span>{EventA});</div>
<div class="line">EventD = Enqueue(D, <span class="comment">/*Deps=*/</span>{EventB, EventC});</div>
</div><!-- fragment --> <div class="dotgraph">
<img src="dot_inline_dotgraph_4.png" alt="dot_inline_dotgraph_4.png" border="0" usemap="#dot_inline_dotgraph_4.map"/>
</div>
<h1><a class="anchor" id="sched_impl"></a>
Implementation details</h1>
<p>The <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> is split up into two parts: graph builder and graph processor.</p>
<p>To build dependencies, <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> needs to memorize memory objects and commands that modify them.</p>
<p>To detect that two command groups access the same memory object and create a dependency between them, <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> needs to store information about the memory object.</p>
<h2><a class="anchor" id="sched_thread_safety"></a>
Thread safety</h2>
<p>To ensure thread safe execution of methods, <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> provides access to the graph that's guarded by a read-write mutex (analog of shared mutex from C++17).</p>
<p>A read-write mutex allows concurrent access to read-only operations, while write operations require exclusive access.</p>
<p>All the methods of <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphBuilder.html" title="Graph builder class.">GraphBuilder</a> lock the mutex in write mode because these methods can modify the graph. Methods of <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphProcessor.html" title="Graph Processor provides interfaces for enqueueing commands and their dependencies to the underlying ...">GraphProcessor</a> lock the mutex in read mode as they are not modifying the graph.</p>
<h2><a class="anchor" id="shced_err_handling"></a>
Error handling</h2>
<p>There are two sources of errors that needs to be handled in <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a>:</p><ol type="1">
<li>errors that happen during command enqueue process</li>
<li>the error that happend during command execution.</li>
</ol>
<p>If an error occurs during command enqueue process, the <a class="el" href="classcl_1_1sycl_1_1detail_1_1Command.html#ab35ad43f728063e91f640dcc44da333e" title="Checks if the command is enqueued, and calls enqueueImp.">Command::enqueue</a> method returns the faulty command. <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> then reschedules the command and all dependent commands (if any).</p>
<p>An error with command processing can happen in underlying runtime, in this case <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> is notified asynchronously (using callback mechanism) what triggers rescheduling. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00358">358</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a011d40c491f07a7097b8b77431c50f54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a011d40c491f07a7097b8b77431c50f54">&#9670;&nbsp;</a></span>ReadLockT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a011d40c491f07a7097b8b77431c50f54">cl::sycl::detail::Scheduler::ReadLockT</a> =  std::shared_lock&lt;<a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a1bff8b0f2caf28c9a6773ae020c90f67">RWLockT</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00453">453</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="a1bff8b0f2caf28c9a6773ae020c90f67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bff8b0f2caf28c9a6773ae020c90f67">&#9670;&nbsp;</a></span>RWLockT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a1bff8b0f2caf28c9a6773ae020c90f67">cl::sycl::detail::Scheduler::RWLockT</a> =  std::shared_timed_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00452">452</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="a8e0c81499c15b06c9c0dd1762e5cce57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e0c81499c15b06c9c0dd1762e5cce57">&#9670;&nbsp;</a></span>WriteLockT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a8e0c81499c15b06c9c0dd1762e5cce57">cl::sycl::detail::Scheduler::WriteLockT</a> =  std::unique_lock&lt;<a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a1bff8b0f2caf28c9a6773ae020c90f67">RWLockT</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00454">454</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aad4ad62a6e1d3c4eb1a29c1d464357c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad4ad62a6e1d3c4eb1a29c1d464357c8">&#9670;&nbsp;</a></span>Scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cl::sycl::detail::Scheduler::Scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00384">384</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="CL_2sycl_2detail_2common_8hpp_source.html#l00198">cl::sycl::detail::getSyclObjImpl()</a>.</p>

</div>
</div>
<a id="ae48e3a629d271a28cb280432389b881f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae48e3a629d271a28cb280432389b881f">&#9670;&nbsp;</a></span>~Scheduler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cl::sycl::detail::Scheduler::~Scheduler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00393">393</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="pi_8hpp_source.html#l00056">cl::sycl::detail::pi::PI_TRACE_BASIC</a>, and <a class="el" href="pi_8cpp_source.html#l00368">cl::sycl::detail::pi::trace()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9c0a7598078a371ae98fc317eeeedc96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c0a7598078a371ae98fc317eeeedc96">&#9670;&nbsp;</a></span>acquireWriteLock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::acquireWriteLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a8e0c81499c15b06c9c0dd1762e5cce57">WriteLockT</a> &amp;&#160;</td>
          <td class="paramname"><em>Lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Provides exclusive access to std::shared_timed_mutex object with deadlock avoidance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Lock</td><td>is an instance of WriteLockT, created with <code>std::defer_lock</code> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00415">415</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

</div>
</div>
<a id="ac0e8ff38f6f6274626f65b2b52227f47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0e8ff38f6f6274626f65b2b52227f47">&#9670;&nbsp;</a></span>addCG()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a> cl::sycl::detail::Scheduler::addCG </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1CG.html">detail::CG</a> &gt;&#160;</td>
          <td class="paramname"><em>CommandGroup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#a6c21d261b1995d0ce7058f54581ac8a8">QueueImplPtr</a>&#160;</td>
          <td class="paramname"><em>Queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a command group, and adds it to the dependency graph. </p>
<p>It's called by SYCL's <a class="el" href="classcl_1_1sycl_1_1queue.html#a74cfc07a129881fbb0782cfc8092c150" title="Submits a command group function object to the queue, in order to be scheduled for execution on the d...">queue.submit</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CommandGroup</td><td>is a unique_ptr to a command group to be added. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an event object to wait on for command group completion. </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00073">73</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="commands_8hpp_source.html#l00153">cl::sycl::detail::Command::getEvent()</a>, <a class="el" href="scheduler__helpers_8cpp_source.html#l00019">cl::sycl::detail::initStream()</a>, <a class="el" href="commands_8hpp_source.html#l00256">cl::sycl::detail::Command::MDeps</a>, <a class="el" href="commands_8hpp_source.html#l00061">cl::sycl::detail::EnqueueResultT::MResult</a>, <a class="el" href="commands_8hpp_source.html#l00258">cl::sycl::detail::Command::MUsers</a>, and <a class="el" href="pi_8h_source.html#l00085">PI_INVALID_OPERATION</a>.</p>

</div>
</div>
<a id="af5887b8414f705ee134016e59e14baeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5887b8414f705ee134016e59e14baeb">&#9670;&nbsp;</a></span>addCopyBack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a> cl::sycl::detail::Scheduler::addCopyBack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *&#160;</td>
          <td class="paramname"><em>Req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a command group, that copies most recent memory to the memory pointed by the requirement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Req</td><td>is a requirement that points to the memory where data is needed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an event object to wait on for copy finish. </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00173">173</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="commands_8hpp_source.html#l00153">cl::sycl::detail::Command::getEvent()</a>, <a class="el" href="commands_8hpp_source.html#l00149">cl::sycl::detail::Command::getQueue()</a>, <a class="el" href="commands_8hpp_source.html#l00061">cl::sycl::detail::EnqueueResultT::MResult</a>, and <a class="el" href="pi_8h_source.html#l00085">PI_INVALID_OPERATION</a>.</p>

<p class="reference">Referenced by <a class="el" href="sycl__mem__obj__t_8cpp_source.html#l00059">cl::sycl::detail::SYCLMemObjT::updateHostMemory()</a>.</p>

</div>
</div>
<a id="a6e184b6920626e812994f0b905a9644a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e184b6920626e812994f0b905a9644a">&#9670;&nbsp;</a></span>addHostAccessor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a> cl::sycl::detail::Scheduler::addHostAccessor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *&#160;</td>
          <td class="paramname"><em>Req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds nodes to the graph, that update the requirement with the pointer to the host memory. </p>
<p>Assumes the host pointer contains the latest data. New operations with the same memory object that have side effects are blocked until <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#aa17761af756131d983574f5558c2f854" title="Unblocks operations with the memory object.">releaseHostAccessor(Requirement *Req)</a> is callled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Req</td><td>is the requirement to be updated. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an event which indicates when these nodes are completed and host accessor is ready for use. </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00301">301</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="commands_8hpp_source.html#l00153">cl::sycl::detail::Command::getEvent()</a>, <a class="el" href="commands_8hpp_source.html#l00061">cl::sycl::detail::EnqueueResultT::MResult</a>, and <a class="el" href="pi_8h_source.html#l00085">PI_INVALID_OPERATION</a>.</p>

</div>
</div>
<a id="ab5795ad851a992b79c7e1591db6f3216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5795ad851a992b79c7e1591db6f3216">&#9670;&nbsp;</a></span>allocateStreamBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::allocateStreamBuffers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcl_1_1sycl_1_1detail_1_1stream__impl.html">stream_impl</a> *&#160;</td>
          <td class="paramname"><em>Impl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>StreamBufferSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>FlushBufferSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate buffers in the pool for a provided stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Impl</td><td>to the stream object </td></tr>
    <tr><td class="paramname">StreamBufferSize</td><td>of the stream buffer </td></tr>
    <tr><td class="paramname">FlushBufferSize</td><td>of the flush buffer for a single work item </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00370">370</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="stream__impl_8cpp_source.html#l00025">cl::sycl::detail::stream_impl::stream_impl()</a>.</p>

</div>
</div>
<a id="a4feeaf531a9273da563ec68dd27c1132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4feeaf531a9273da563ec68dd27c1132">&#9670;&nbsp;</a></span>cleanupCommands()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::cleanupCommands </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1Command.html">Command</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>Cmds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00440">440</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="commands_8cpp_source.html#l00238">cl::sycl::detail::DispatchHostTask::operator()()</a>.</p>

</div>
</div>
<a id="aec5f4676243cfbf21edc4abeb054f8fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec5f4676243cfbf21edc4abeb054f8fa">&#9670;&nbsp;</a></span>cleanupFinishedCommands()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::cleanupFinishedCommands </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a>&#160;</td>
          <td class="paramname"><em>FinishedEvent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes finished non-leaf non-alloca commands from the subgraph (assuming that all its commands have been waited for). </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphBuilder.html#aaa175b042f1f6b5e3af40555f0094781" title="Removes finished non-leaf non-alloca commands from the subgraph (assuming that all its commands have ...">GraphBuilder::cleanupFinishedCommands</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">FinishedEvent</td><td>is a cleanup candidate event. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00233">233</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00223">cl::sycl::detail::deallocateStreams()</a>.</p>

<p class="reference">Referenced by <a class="el" href="event__impl_8cpp_source.html#l00247">cl::sycl::detail::event_impl::cleanupCommand()</a>.</p>

</div>
</div>
<a id="afe16ed2b110354a8612ab9238f53c265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe16ed2b110354a8612ab9238f53c265">&#9670;&nbsp;</a></span>deallocateStreamBuffers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::deallocateStreamBuffers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcl_1_1sycl_1_1detail_1_1stream__impl.html">stream_impl</a> *&#160;</td>
          <td class="paramname"><em>Impl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deallocate all stream buffers in the pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Impl</td><td>to the stream object </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00378">378</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

</div>
</div>
<a id="afe48a436f2c71c8e2a9dddbf6498222f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe48a436f2c71c8e2a9dddbf6498222f">&#9670;&nbsp;</a></span>enqueueLeavesOfReqUnlocked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::enqueueLeavesOfReqUnlocked </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *const&#160;</td>
          <td class="paramname"><em>Req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="classcl_1_1sycl_1_1detail_1_1Command.html">Command</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>ToCleanUp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00354">354</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="scheduler_8hpp_source.html#l00203">cl::sycl::detail::MemObjRecord::MReadLeaves</a>, <a class="el" href="sycl__mem__obj__i_8hpp_source.html#l00074">cl::sycl::detail::SYCLMemObjI::MRecord</a>, <a class="el" href="commands_8hpp_source.html#l00061">cl::sycl::detail::EnqueueResultT::MResult</a>, <a class="el" href="accessor__impl_8hpp_source.html#l00112">cl::sycl::detail::AccessorImplHost::MSYCLMemObj</a>, <a class="el" href="scheduler_8hpp_source.html#l00206">cl::sycl::detail::MemObjRecord::MWriteLeaves</a>, and <a class="el" href="pi_8h_source.html#l00085">PI_INVALID_OPERATION</a>.</p>

</div>
</div>
<a id="a51e54bc01214bd25329e556ba97b0258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51e54bc01214bd25329e556ba97b0258">&#9670;&nbsp;</a></span>getDefaultHostQueue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#a6c21d261b1995d0ce7058f54581ac8a8">QueueImplPtr</a> cl::sycl::detail::Scheduler::getDefaultHostQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00442">442</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="a6a372403ed668ccf5f5469a854aa3f5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a372403ed668ccf5f5469a854aa3f5e">&#9670;&nbsp;</a></span>getInstance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html">Scheduler</a> &amp; cl::sycl::detail::Scheduler::getInstance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>an instance of the scheduler object. </dd></dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00209">209</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="stream__impl_8cpp_source.html#l00041">cl::sycl::detail::stream_impl::accessGlobalBuf()</a>, <a class="el" href="stream__impl_8cpp_source.html#l00049">cl::sycl::detail::stream_impl::accessGlobalFlushBuf()</a>, <a class="el" href="stream__impl_8cpp_source.html#l00058">cl::sycl::detail::stream_impl::accessGlobalOffset()</a>, <a class="el" href="event__impl_8cpp_source.html#l00247">cl::sycl::detail::event_impl::cleanupCommand()</a>, <a class="el" href="stream__impl_8cpp_source.html#l00071">cl::sycl::detail::stream_impl::flush()</a>, <a class="el" href="commands_8cpp_source.html#l00544">cl::sycl::detail::Command::processDepEvent()</a>, <a class="el" href="stream__impl_8cpp_source.html#l00025">cl::sycl::detail::stream_impl::stream_impl()</a>, <a class="el" href="sycl__mem__obj__t_8cpp_source.html#l00059">cl::sycl::detail::SYCLMemObjT::updateHostMemory()</a>, <a class="el" href="event__impl_8cpp_source.html#l00195">cl::sycl::detail::event_impl::wait()</a>, and <a class="el" href="event__impl_8cpp_source.html#l00222">cl::sycl::detail::event_impl::wait_and_throw()</a>.</p>

</div>
</div>
<a id="a95468b0ba102b4bfe152461dec8acd63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95468b0ba102b4bfe152461dec8acd63">&#9670;&nbsp;</a></span>getMemObjRecord()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcl_1_1sycl_1_1detail_1_1MemObjRecord.html">MemObjRecord</a> * cl::sycl::detail::Scheduler::getMemObjRecord </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *const&#160;</td>
          <td class="paramname"><em>Req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00436">436</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="sycl__mem__obj__i_8hpp_source.html#l00074">cl::sycl::detail::SYCLMemObjI::MRecord</a>, and <a class="el" href="accessor__impl_8hpp_source.html#l00112">cl::sycl::detail::AccessorImplHost::MSYCLMemObj</a>.</p>

</div>
</div>
<a id="aa17761af756131d983574f5558c2f854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa17761af756131d983574f5558c2f854">&#9670;&nbsp;</a></span>releaseHostAccessor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::releaseHostAccessor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#af0ce64d569ce971ebc1920cef881a8b9">Requirement</a> *&#160;</td>
          <td class="paramname"><em>Req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unblocks operations with the memory object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Req</td><td>is a requirement that points to the memory object being unblocked. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00338">338</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="accessor__impl_8hpp_source.html#l00121">cl::sycl::detail::AccessorImplHost::MBlockedCmd</a>, and <a class="el" href="commands_8hpp_source.html#l00279">cl::sycl::detail::Command::MEnqueueStatus</a>.</p>

</div>
</div>
<a id="a24c668644f9f5a46f87bd67f68951835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24c668644f9f5a46f87bd67f68951835">&#9670;&nbsp;</a></span>removeMemoryObject()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::removeMemoryObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcl_1_1sycl_1_1detail_1_1SYCLMemObjI.html">detail::SYCLMemObjI</a> *&#160;</td>
          <td class="paramname"><em>MemObj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes buffer from the graph. </p>
<p>The lifetime of memory object descriptor begins when the first command group that uses the memory object is submitted and ends when "removeMemoryObject(...)" method is called which means there will be no command group that uses the memory object. When removeMemoryObject is called <a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html" title="DPC++ graph scheduler class.">Scheduler</a> will enqueue and wait on all release commands associated with the memory object, which effectively guarantees that all commands accessing the memory object are complete and then the resources allocated for the memory object are freed. Then all the commands affecting the memory object are removed.</p>
<p>This member function is used by <a class="el" href="classcl_1_1sycl_1_1buffer.html">buffer</a> and <a class="el" href="classcl_1_1sycl_1_1image.html">image</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MemObj</td><td>is a memory object that points to the buffer being removed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00261">261</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="scheduler_8cpp_source.html#l00223">cl::sycl::detail::deallocateStreams()</a>.</p>

<p class="reference">Referenced by <a class="el" href="sycl__mem__obj__t_8cpp_source.html#l00077">cl::sycl::detail::SYCLMemObjT::updateHostMemory()</a>.</p>

</div>
</div>
<a id="af01d870c24856e2c5d1bd4b74c4f7701"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af01d870c24856e2c5d1bd4b74c4f7701">&#9670;&nbsp;</a></span>waitForEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::waitForEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#ae666f00e7fc733aa20add2a77a262c9c">EventImplPtr</a>&#160;</td>
          <td class="paramname"><em>Event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for the event. </p>
<p>This operation is blocking. For eager execution mode this method invokes corresponding function of device API.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Event</td><td>is a pointer to event to wait on. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00213">213</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="event__impl_8cpp_source.html#l00195">cl::sycl::detail::event_impl::wait()</a>.</p>

</div>
</div>
<a id="aaf7209aa0ed78b3157ba7d7b68e999a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf7209aa0ed78b3157ba7d7b68e999a0">&#9670;&nbsp;</a></span>waitForRecordToFinish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void cl::sycl::detail::Scheduler::waitForRecordToFinish </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcl_1_1sycl_1_1detail_1_1MemObjRecord.html">MemObjRecord</a> *&#160;</td>
          <td class="paramname"><em>Record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a011d40c491f07a7097b8b77431c50f54">ReadLockT</a> &amp;&#160;</td>
          <td class="paramname"><em>GraphReadLock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function waits on all of the graph leaves which somehow use the memory object which is represented by <code>Record</code>. </p>
<p>The function is called upon destruction of memory buffer. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Record</td><td>memory record to await graph leaves of to finish </td></tr>
    <tr><td class="paramname">GraphReadLock</td><td>locked graph read lock</td></tr>
  </table>
  </dd>
</dl>
<p>GraphReadLock will be unlocked/locked as needed. Upon return from the function, GraphReadLock will be left in locked state. </p>

<p class="definition">Definition at line <a class="el" href="scheduler_8cpp_source.html#l00029">29</a> of file <a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a>.</p>

<p class="reference">References <a class="el" href="commands_8hpp_source.html#l00153">cl::sycl::detail::Command::getEvent()</a>, <a class="el" href="commands_8hpp_source.html#l00369">cl::sycl::detail::AllocaCommandBase::getReleaseCmd()</a>, <a class="el" href="scheduler_8hpp_source.html#l00200">cl::sycl::detail::MemObjRecord::MAllocaCommands</a>, <a class="el" href="scheduler_8hpp_source.html#l00203">cl::sycl::detail::MemObjRecord::MReadLeaves</a>, <a class="el" href="commands_8hpp_source.html#l00061">cl::sycl::detail::EnqueueResultT::MResult</a>, <a class="el" href="scheduler_8hpp_source.html#l00206">cl::sycl::detail::MemObjRecord::MWriteLeaves</a>, <a class="el" href="pi_8h_source.html#l00085">PI_INVALID_OPERATION</a>, and <a class="el" href="commands_8cpp_source.html#l00746">cl::sycl::detail::Command::resolveReleaseDependencies()</a>.</p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a62a7fc89f0ee4604e3ccab9b6b6a343f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a7fc89f0ee4604e3ccab9b6b6a343f">&#9670;&nbsp;</a></span>Command</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classcl_1_1sycl_1_1detail_1_1Command.html">Command</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00775">775</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="ac24921e3619f5c224cf67dc02a0d6b76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac24921e3619f5c224cf67dc02a0d6b76">&#9670;&nbsp;</a></span>DispatchHostTask</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classcl_1_1sycl_1_1detail_1_1DispatchHostTask.html">DispatchHostTask</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00776">776</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="ad44c6eb29090d3bbf185641c8adb2b12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad44c6eb29090d3bbf185641c8adb2b12">&#9670;&nbsp;</a></span>event_impl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classcl_1_1sycl_1_1detail_1_1event__impl.html">event_impl</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00778">778</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="a8f99db988226e336bff4e17f446b10db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f99db988226e336bff4e17f446b10db">&#9670;&nbsp;</a></span>initStream</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void initStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#afa0db6a2af73316d79d1ae6c2cbd99ef">StreamImplPtr</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#a6c21d261b1995d0ce7058f54581ac8a8">QueueImplPtr</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler__helpers_8cpp_source.html#l00019">19</a> of file <a class="el" href="scheduler__helpers_8cpp_source.html">scheduler_helpers.cpp</a>.</p>

</div>
</div>
<a id="ada31d15c00c8f3992ab6c85f7ec414cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada31d15c00c8f3992ab6c85f7ec414cb">&#9670;&nbsp;</a></span>queue_impl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classcl_1_1sycl_1_1detail_1_1queue__impl.html">queue_impl</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00777">777</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="ae5aea7766fbe6d37849f45208e705cb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5aea7766fbe6d37849f45208e705cb9">&#9670;&nbsp;</a></span>stream_impl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classcl_1_1sycl_1_1detail_1_1stream__impl.html">stream_impl</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00810">810</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5477da51f48aec98b98e990c887a1902"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5477da51f48aec98b98e990c887a1902">&#9670;&nbsp;</a></span>DefaultHostQueue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacecl_1_1sycl_1_1detail.html#a6c21d261b1995d0ce7058f54581ac8a8">QueueImplPtr</a> cl::sycl::detail::Scheduler::DefaultHostQueue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00773">773</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="a17f0f01f6b24cc916719952ef3f23504"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17f0f01f6b24cc916719952ef3f23504">&#9670;&nbsp;</a></span>MDeferredCleanupCommands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classcl_1_1sycl_1_1detail_1_1Command.html">Command</a> *&gt; cl::sycl::detail::Scheduler::MDeferredCleanupCommands</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00770">770</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="adc8a71c590f8fcecfe0735c610d6291e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc8a71c590f8fcecfe0735c610d6291e">&#9670;&nbsp;</a></span>MDeferredCleanupMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex cl::sycl::detail::Scheduler::MDeferredCleanupMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00771">771</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<a id="a609d270e5c2651fb22533dbd9fdf136e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a609d270e5c2651fb22533dbd9fdf136e">&#9670;&nbsp;</a></span>MGraphBuilder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler_1_1GraphBuilder.html">GraphBuilder</a> cl::sycl::detail::Scheduler::MGraphBuilder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00767">767</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="commands_8cpp_source.html#l00544">cl::sycl::detail::Command::processDepEvent()</a>.</p>

</div>
</div>
<a id="a732c15bb7fa1de1dd501e4dabe06f5df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a732c15bb7fa1de1dd501e4dabe06f5df">&#9670;&nbsp;</a></span>MGraphLock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html#a1bff8b0f2caf28c9a6773ae020c90f67">RWLockT</a> cl::sycl::detail::Scheduler::MGraphLock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00768">768</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="commands_8cpp_source.html#l00238">cl::sycl::detail::DispatchHostTask::operator()()</a>, and <a class="el" href="event__impl_8cpp_source.html#l00222">cl::sycl::detail::event_impl::wait_and_throw()</a>.</p>

</div>
</div>
<a id="a3e7f0b212e78ad11f9f8c9dc43b64496"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e7f0b212e78ad11f9f8c9dc43b64496">&#9670;&nbsp;</a></span>StreamBuffersPool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="classcl_1_1sycl_1_1detail_1_1stream__impl.html">stream_impl</a> *, <a class="el" href="structcl_1_1sycl_1_1detail_1_1Scheduler_1_1StreamBuffers.html">StreamBuffers</a> *&gt; cl::sycl::detail::Scheduler::StreamBuffersPool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00824">824</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="stream__impl_8cpp_source.html#l00041">cl::sycl::detail::stream_impl::accessGlobalBuf()</a>, <a class="el" href="stream__impl_8cpp_source.html#l00049">cl::sycl::detail::stream_impl::accessGlobalFlushBuf()</a>, and <a class="el" href="stream__impl_8cpp_source.html#l00071">cl::sycl::detail::stream_impl::flush()</a>.</p>

</div>
</div>
<a id="ad076232447dc5700d3821c487e6c4bab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad076232447dc5700d3821c487e6c4bab">&#9670;&nbsp;</a></span>StreamBuffersPoolMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::recursive_mutex cl::sycl::detail::Scheduler::StreamBuffersPoolMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="scheduler_8hpp_source.html#l00814">814</a> of file <a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>source/detail/scheduler/<a class="el" href="scheduler_8hpp_source.html">scheduler.hpp</a></li>
<li>source/detail/scheduler/<a class="el" href="scheduler_8cpp_source.html">scheduler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecl.html">cl</a></li><li class="navelem"><a class="el" href="namespacecl_1_1sycl.html">sycl</a></li><li class="navelem"><a class="el" href="namespacecl_1_1sycl_1_1detail.html">detail</a></li><li class="navelem"><a class="el" href="classcl_1_1sycl_1_1detail_1_1Scheduler.html">Scheduler</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
