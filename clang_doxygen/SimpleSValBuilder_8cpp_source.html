<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>clang: lib/StaticAnalyzer/Core/SimpleSValBuilder.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">clang
   &#160;<span id="projectnumber">15.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_5323669f7aaa7f9ff43db9a3c9e1bf2d.html">StaticAnalyzer</a></li><li class="navelem"><a class="el" href="dir_865805a4b828c72a90e2b2ae360b5892.html">Core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SimpleSValBuilder.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SimpleSValBuilder_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// SimpleSValBuilder.cpp - A basic SValBuilder -----------------------*- C++ -*-</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//  This file defines SimpleSValBuilder, a basic implementation of SValBuilder.</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SValBuilder_8h.html">clang/StaticAnalyzer/Core/PathSensitive/SValBuilder.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="APSIntType_8h.html">clang/StaticAnalyzer/Core/PathSensitive/APSIntType.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ExprEngine_8h.html">clang/StaticAnalyzer/Core/PathSensitive/ExprEngine.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ProgramState_8h.html">clang/StaticAnalyzer/Core/PathSensitive/ProgramState.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="SValVisitor_8h.html">clang/StaticAnalyzer/Core/PathSensitive/SValVisitor.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceclang.html">clang</a>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using namespace </span>ento;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">class </span>SimpleSValBuilder : <span class="keyword">public</span> SValBuilder {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; </div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="comment">// With one `simplifySValOnce` call, a compound symbols might collapse to</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="comment">// simpler symbol tree that is still possible to further simplify. Thus, we</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="comment">// do the simplification on a new symbol tree until we reach the simplest</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">// form, i.e. the fixpoint.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="comment">// Consider the following symbol `(b * b) * b * b` which has this tree:</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <span class="comment">//       *</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="comment">//      / \</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">  //     *   b</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">//    /  \</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">  //   /    b</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="comment">// (b * b)</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="comment">// Now, if the `b * b == 1` new constraint is added then during the first</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// iteration we have the following transformations:</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="comment">//       *                  *</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">//      / \                / \</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">  //     *   b     --&gt;      b   b</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">//    /  \</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">  //   /    b</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="comment">//  1</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="comment">// We need another iteration to reach the final result `1`.</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  SVal simplifyUntilFixpoint(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, SVal Val);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// Recursively descends into symbolic expressions and replaces symbols</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="comment">// with their known values (in the sense of the getKnownValue() method).</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="comment">// We traverse the symbol tree and query the constraint values for the</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="comment">// sub-trees and if a value is a constant we do the constant folding.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  SVal simplifySValOnce(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, SVal <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  SimpleSValBuilder(llvm::BumpPtrAllocator &amp;alloc, <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;context,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                    ProgramStateManager &amp;stateMgr)</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      : SValBuilder(alloc, context, stateMgr) {}</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  ~SimpleSValBuilder()<span class="keyword"> override </span>{}</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  SVal evalMinus(NonLoc val) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  SVal evalComplement(NonLoc val) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  SVal evalBinOpNN(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> op,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                   NonLoc lhs, NonLoc rhs, <a class="code" href="classclang_1_1QualType.html">QualType</a> resultTy) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  SVal evalBinOpLL(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> op,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                   Loc lhs, Loc rhs, <a class="code" href="classclang_1_1QualType.html">QualType</a> resultTy) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  SVal evalBinOpLN(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> op,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                   Loc lhs, NonLoc rhs, <a class="code" href="classclang_1_1QualType.html">QualType</a> resultTy) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">  /// getKnownValue - evaluates a given SVal. If the SVal has only one possible</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">  ///  (integer) value, that value is returned. Otherwise, returns NULL.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *getKnownValue(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, SVal <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  SVal simplifySVal(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, SVal <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>) <span class="keyword">override</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  SVal MakeSymIntVal(<span class="keyword">const</span> SymExpr *LHS, <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> op,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                     <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> &amp;RHS, <a class="code" href="classclang_1_1QualType.html">QualType</a> resultTy);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;};</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="namespaceclang_1_1ento.html#a2c7edf92eaa5aa1cd9730c9c0e943f48">   79</a></span>&#160;<a class="code" href="classclang_1_1ento_1_1SValBuilder.html">SValBuilder</a> *<a class="code" href="namespaceclang_1_1ento.html#a2c7edf92eaa5aa1cd9730c9c0e943f48">ento::createSimpleSValBuilder</a>(llvm::BumpPtrAllocator &amp;alloc,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                           <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;context,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                           <a class="code" href="classclang_1_1ento_1_1ProgramStateManager.html">ProgramStateManager</a> &amp;stateMgr) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> SimpleSValBuilder(alloc, context, stateMgr);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">// Transfer function for unary operators.</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;SVal SimpleSValBuilder::evalMinus(NonLoc val) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">switch</span> (val.getSubKind()) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">case</span> nonloc::ConcreteIntKind:</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">return</span> val.castAs&lt;nonloc::ConcreteInt&gt;().evalMinus(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160; </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;SVal SimpleSValBuilder::evalComplement(NonLoc <a class="code" href="namespaceclang_1_1tooling.html#a4ffee664435dba78b2225a5457619b53">X</a>) {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="namespaceclang_1_1tooling.html#a4ffee664435dba78b2225a5457619b53">X</a>.getSubKind()) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">case</span> nonloc::ConcreteIntKind:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceclang_1_1tooling.html#a4ffee664435dba78b2225a5457619b53">X</a>.castAs&lt;nonloc::ConcreteInt&gt;().evalComplement(*<span class="keyword">this</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">// Transfer function for binary operators.</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;SVal SimpleSValBuilder::MakeSymIntVal(<span class="keyword">const</span> SymExpr *LHS,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                    <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> op,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                    <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> &amp;RHS,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                    <a class="code" href="classclang_1_1QualType.html">QualType</a> resultTy) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordtype">bool</span> isIdempotent = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// Check for a few special cases with known reductions first.</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// We can&#39;t reduce this case; just treat it normally.</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">case</span> BO_Mul:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// a*0 and a*1</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (RHS == 0)</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">return</span> makeIntVal(0, resultTy);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHS == 1)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      isIdempotent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">case</span> BO_Div:</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// a/0 and a/1</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> (RHS == 0)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="comment">// This is also handled elsewhere.</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">return</span> UndefinedVal();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHS == 1)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      isIdempotent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">case</span> BO_Rem:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// a%0 and a%1</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (RHS == 0)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      <span class="comment">// This is also handled elsewhere.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">return</span> UndefinedVal();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHS == 1)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">return</span> makeIntVal(0, resultTy);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">case</span> BO_Add:</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">case</span> BO_Sub:</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">case</span> BO_Shl:</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">case</span> BO_Shr:</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">case</span> BO_Xor:</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// a+0, a-0, a&lt;&lt;0, a&gt;&gt;0, a^0</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (RHS == 0)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      isIdempotent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">case</span> BO_And:</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// a&amp;0 and a&amp;(~0)</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (RHS == 0)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">return</span> makeIntVal(0, resultTy);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHS.isAllOnes())</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      isIdempotent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="keywordflow">case</span> BO_Or:</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// a|0 and a|(~0)</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">if</span> (RHS == 0)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      isIdempotent = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (RHS.isAllOnes()) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> &amp;Result = BasicVals.Convert(resultTy, RHS);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">return</span> nonloc::ConcreteInt(Result);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  <span class="comment">// Idempotent ops (like a*1) can still change the type of an expression.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// Wrap the LHS up in a NonLoc again and let evalCast do the</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// dirty work.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">if</span> (isIdempotent)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordflow">return</span> evalCast(nonloc::SymbolVal(LHS), resultTy, <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="comment">// If we reach this point, the expression cannot be simplified.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="comment">// Make a SymbolVal for the entire expression, after converting the RHS.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *ConvertedRHS = &amp;RHS;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op)) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// We&#39;re looking for a type big enough to compare the symbolic value</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="comment">// with the given constant.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="comment">// FIXME: This is an approximation of Sema::UsualArithmeticConversions.</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;Ctx = getContext();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> SymbolType = LHS-&gt;getType();</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    uint64_t ValWidth = RHS.getBitWidth();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    uint64_t TypeWidth = Ctx.<a class="code" href="classclang_1_1ASTContext.html#aa7a28eab5ee69542aff5b8216ed77046">getTypeSize</a>(SymbolType);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (ValWidth &lt; TypeWidth) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="comment">// If the value is too small, extend it.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      ConvertedRHS = &amp;BasicVals.Convert(SymbolType, RHS);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ValWidth == TypeWidth) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="comment">// If the value is signed but the symbol is unsigned, do the comparison</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="comment">// in unsigned space. [C99 6.3.1.8]</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="comment">// (For the opposite case, the value is already unsigned.)</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keywordflow">if</span> (RHS.isSigned() &amp;&amp; !SymbolType-&gt;<a class="code" href="classclang_1_1Type.html#a113e0b9c6c21004ec048a350daa43c4a">isSignedIntegerOrEnumerationType</a>())</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        ConvertedRHS = &amp;BasicVals.Convert(SymbolType, RHS);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    ConvertedRHS = &amp;BasicVals.Convert(resultTy, RHS);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">return</span> makeNonLoc(LHS, op, *ConvertedRHS, resultTy);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">// See if Sym is known to be a relation Rel with Bound.</span></div>
<div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="SimpleSValBuilder_8cpp.html#a00f19a5423d393963cb7b3a2e0e03f66">  207</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="SimpleSValBuilder_8cpp.html#a00f19a5423d393963cb7b3a2e0e03f66">isInRelation</a>(<a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> Rel, <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym,</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                         <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> Bound, <a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>) {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;  SValBuilder &amp;SVB = <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>-&gt;getStateManager().getSValBuilder();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  SVal Result =</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      SVB.evalBinOpNN(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, Rel, nonloc::SymbolVal(Sym),</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                      nonloc::ConcreteInt(Bound), SVB.getConditionType());</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> DV = Result.getAs&lt;DefinedSVal&gt;()) {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>-&gt;assume(*DV, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">// See if Sym is known to be within [min/4, max/4], where min and max</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">// are the bounds of the symbol&#39;s integral type. With such symbols,</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">// some manipulations can be performed without the risk of overflow.</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// assume() doesn&#39;t cause infinite recursion because we should be dealing</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">// with simpler symbols on every recursive call.</span></div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="SimpleSValBuilder_8cpp.html#ada4ba524268abb1d85d16fcb751e981d">  224</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="SimpleSValBuilder_8cpp.html#ada4ba524268abb1d85d16fcb751e981d">isWithinConstantOverflowBounds</a>(<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym,</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                           <a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  SValBuilder &amp;SVB = <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>-&gt;getStateManager().getSValBuilder();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  BasicValueFactory &amp;BV = SVB.getBasicValueFactory();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> T = Sym-&gt;getType();</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  assert(T-&gt;<a class="code" href="classclang_1_1Type.html#a113e0b9c6c21004ec048a350daa43c4a">isSignedIntegerOrEnumerationType</a>() &amp;&amp;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;         <span class="stringliteral">&quot;This only works with signed integers!&quot;</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  APSIntType AT = BV.getAPSIntType(T);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> Max = AT.getMaxValue() / AT.getValue(4), Min = -Max;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SimpleSValBuilder_8cpp.html#a00f19a5423d393963cb7b3a2e0e03f66">isInRelation</a>(BO_LE, Sym, Max, <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>) &amp;&amp;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;         <a class="code" href="SimpleSValBuilder_8cpp.html#a00f19a5423d393963cb7b3a2e0e03f66">isInRelation</a>(BO_GE, Sym, Min, <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">// Same for the concrete integers: see if I is within [min/4, max/4].</span></div>
<div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="SimpleSValBuilder_8cpp.html#a6a4dd866eafb074992dc7f888d30f0b4">  240</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="SimpleSValBuilder_8cpp.html#ada4ba524268abb1d85d16fcb751e981d">isWithinConstantOverflowBounds</a>(<a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> I) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  APSIntType AT(I);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  assert(!AT.isUnsigned() &amp;&amp;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;         <span class="stringliteral">&quot;This only works with signed integers!&quot;</span>);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160; </div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> Max = AT.getMaxValue() / AT.getValue(4), Min = -Max;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">return</span> (I &lt;= Max) &amp;&amp; (I &gt;= -Max);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;}</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="keyword">static</span> std::pair&lt;SymbolRef, llvm::APSInt&gt;</div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="SimpleSValBuilder_8cpp.html#a7a441dcd35f776da5a045a0b46fd8616">  250</a></span>&#160;<a class="code" href="SimpleSValBuilder_8cpp.html#a7a441dcd35f776da5a045a0b46fd8616">decomposeSymbol</a>(<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym, BasicValueFactory &amp;BV) {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *SymInt = dyn_cast&lt;SymIntExpr&gt;(Sym))</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#ab7d2b91f8648ca68c349ddb91ab80995">BinaryOperator::isAdditiveOp</a>(SymInt-&gt;getOpcode()))</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">return</span> std::make_pair(SymInt-&gt;getLHS(),</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                            (SymInt-&gt;getOpcode() == BO_Add) ?</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                            (SymInt-&gt;getRHS()) :</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                            (-SymInt-&gt;getRHS()));</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="comment">// Fail to decompose: &quot;reduce&quot; the problem to the &quot;$x + 0&quot; case.</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">return</span> std::make_pair(Sym, BV.getValue(0, Sym-&gt;getType()));</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">// Simplify &quot;(LSym + LInt) Op (RSym + RInt)&quot; assuming all values are of the</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">// same signed integral type and no overflows occur (which should be checked</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">// by the caller).</span></div>
<div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="SimpleSValBuilder_8cpp.html#a37bcced8cc1c2706a4c102004dab392e">  265</a></span>&#160;<span class="keyword">static</span> NonLoc <a class="code" href="SimpleSValBuilder_8cpp.html#a37bcced8cc1c2706a4c102004dab392e">doRearrangeUnchecked</a>(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                   <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> Op,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                   <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> LSym, <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> LInt,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                   <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> RSym, <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> RInt) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  SValBuilder &amp;SVB = <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>-&gt;getStateManager().getSValBuilder();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  BasicValueFactory &amp;BV = SVB.getBasicValueFactory();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  SymbolManager &amp;SymMgr = SVB.getSymbolManager();</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> SymTy = LSym-&gt;getType();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  assert(SymTy == RSym-&gt;getType() &amp;&amp;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;         <span class="stringliteral">&quot;Symbols are not of the same type!&quot;</span>);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  assert(APSIntType(LInt) == BV.getAPSIntType(SymTy) &amp;&amp;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;         <span class="stringliteral">&quot;Integers are not of the same type as symbols!&quot;</span>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  assert(APSIntType(RInt) == BV.getAPSIntType(SymTy) &amp;&amp;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;         <span class="stringliteral">&quot;Integers are not of the same type as symbols!&quot;</span>);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160; </div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> ResultTy;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(Op))</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    ResultTy = SVB.getConditionType();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#ab7d2b91f8648ca68c349ddb91ab80995">BinaryOperator::isAdditiveOp</a>(Op))</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    ResultTy = SymTy;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    llvm_unreachable(<span class="stringliteral">&quot;Operation not suitable for unchecked rearrangement!&quot;</span>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// FIXME: Can we use assume() without getting into an infinite recursion?</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">if</span> (LSym == RSym)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> SVB.evalBinOpNN(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, Op, nonloc::ConcreteInt(LInt),</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                           nonloc::ConcreteInt(RInt), ResultTy)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        .castAs&lt;NonLoc&gt;();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> ResultSym = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> ResultOp;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> ResultInt;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(Op)) {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// Prefer comparing to a non-negative number.</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">// FIXME: Maybe it&#39;d be better to have consistency in</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// &quot;$x - $y&quot; vs. &quot;$y - $x&quot; because those are solver&#39;s keys.</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (LInt &gt; RInt) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      ResultSym = SymMgr.getSymSymExpr(RSym, BO_Sub, LSym, SymTy);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      ResultOp = <a class="code" href="classclang_1_1BinaryOperator.html#a7a6035c40e72a4b1d7d49ec91503f7c5">BinaryOperator::reverseComparisonOp</a>(Op);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      ResultInt = LInt - RInt; <span class="comment">// Opposite order!</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      ResultSym = SymMgr.getSymSymExpr(LSym, BO_Sub, RSym, SymTy);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      ResultOp = Op;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      ResultInt = RInt - LInt; <span class="comment">// Opposite order!</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    ResultSym = SymMgr.getSymSymExpr(LSym, Op, RSym, SymTy);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    ResultInt = (Op == BO_Add) ? (LInt + RInt) : (LInt - RInt);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    ResultOp = BO_Add;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// Bring back the cosmetic difference.</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">if</span> (ResultInt &lt; 0) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      ResultInt = -ResultInt;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      ResultOp = BO_Sub;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ResultInt == 0) {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="comment">// Shortcut: Simplify &quot;$x + 0&quot; to &quot;$x&quot;.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">return</span> nonloc::SymbolVal(ResultSym);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> &amp;PersistentResultInt = BV.getValue(ResultInt);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">return</span> nonloc::SymbolVal(</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      SymMgr.getSymIntExpr(ResultSym, ResultOp, PersistentResultInt, ResultTy));</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">// Rearrange if symbol type matches the result type and if the operator is a</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">// comparison operator, both symbol and constant must be within constant</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">// overflow bounds.</span></div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="SimpleSValBuilder_8cpp.html#a868022f818da39e0a5c9f8fb01ce8360">  332</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="SimpleSValBuilder_8cpp.html#a868022f818da39e0a5c9f8fb01ce8360">shouldRearrange</a>(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> Op,</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                            <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym, <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> Int, <a class="code" href="classclang_1_1QualType.html">QualType</a> Ty) {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">return</span> Sym-&gt;getType() == Ty &amp;&amp;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    (!<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(Op) ||</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;     (<a class="code" href="SimpleSValBuilder_8cpp.html#ada4ba524268abb1d85d16fcb751e981d">isWithinConstantOverflowBounds</a>(Sym, <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>) &amp;&amp;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="SimpleSValBuilder_8cpp.html#ada4ba524268abb1d85d16fcb751e981d">isWithinConstantOverflowBounds</a>(Int)));</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno"><a class="line" href="SimpleSValBuilder_8cpp.html#a6d87535d2b88a9526c616bfded70646d">  340</a></span>&#160;<span class="keyword">static</span> <a class="code" href="classllvm_1_1Optional.html">Optional&lt;NonLoc&gt;</a> <a class="code" href="SimpleSValBuilder_8cpp.html#a6d87535d2b88a9526c616bfded70646d">tryRearrange</a>(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>,</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                     <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> Op, NonLoc Lhs,</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                     NonLoc Rhs, <a class="code" href="classclang_1_1QualType.html">QualType</a> ResultTy) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  ProgramStateManager &amp;StateMgr = <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>-&gt;getStateManager();</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  SValBuilder &amp;SVB = StateMgr.getSValBuilder();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// We expect everything to be of the same type - this type.</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> SingleTy;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// FIXME: After putting complexity threshold to the symbols we can always</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">//        rearrange additive operations but rearrange comparisons only if</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">//        option is set.</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">if</span> (!SVB.getAnalyzerOptions().ShouldAggressivelySimplifyBinaryOperation)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">return</span> None;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> LSym = Lhs.getAsSymbol();</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">if</span> (!LSym)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">return</span> None;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(Op)) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    SingleTy = LSym-&gt;getType();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">if</span> (ResultTy != SVB.getConditionType())</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="keywordflow">return</span> None;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="comment">// Initialize SingleTy later with a symbol&#39;s type.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#ab7d2b91f8648ca68c349ddb91ab80995">BinaryOperator::isAdditiveOp</a>(Op)) {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    SingleTy = ResultTy;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (LSym-&gt;getType() != SingleTy)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">return</span> None;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="comment">// Don&#39;t rearrange other operations.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">return</span> None;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  assert(!SingleTy.<a class="code" href="classclang_1_1QualType.html#a54127635d2ca4754e91ee96b594eff74">isNull</a>() &amp;&amp; <span class="stringliteral">&quot;We should have figured out the type by now!&quot;</span>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="comment">// Rearrange signed symbolic expressions only</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  <span class="keywordflow">if</span> (!SingleTy-&gt;<a class="code" href="classclang_1_1Type.html#a113e0b9c6c21004ec048a350daa43c4a">isSignedIntegerOrEnumerationType</a>())</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">return</span> None;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> RSym = Rhs.getAsSymbol();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">if</span> (!RSym || RSym-&gt;getType() != SingleTy)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">return</span> None;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  BasicValueFactory &amp;BV = <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>-&gt;getBasicVals();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> LInt, RInt;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;  std::tie(LSym, LInt) = <a class="code" href="SimpleSValBuilder_8cpp.html#a7a441dcd35f776da5a045a0b46fd8616">decomposeSymbol</a>(LSym, BV);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  std::tie(RSym, RInt) = <a class="code" href="SimpleSValBuilder_8cpp.html#a7a441dcd35f776da5a045a0b46fd8616">decomposeSymbol</a>(RSym, BV);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="SimpleSValBuilder_8cpp.html#a868022f818da39e0a5c9f8fb01ce8360">shouldRearrange</a>(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, Op, LSym, LInt, SingleTy) ||</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      !<a class="code" href="SimpleSValBuilder_8cpp.html#a868022f818da39e0a5c9f8fb01ce8360">shouldRearrange</a>(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, Op, RSym, RInt, SingleTy))</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span> None;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;  <span class="comment">// We know that no overflows can occur anymore.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="SimpleSValBuilder_8cpp.html#a37bcced8cc1c2706a4c102004dab392e">doRearrangeUnchecked</a>(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, Op, LSym, LInt, RSym, RInt);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;SVal SimpleSValBuilder::evalBinOpNN(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>,</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                  <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> op,</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                  NonLoc lhs, NonLoc rhs,</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                  <a class="code" href="classclang_1_1QualType.html">QualType</a> resultTy)  {</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  NonLoc InputLHS = lhs;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  NonLoc InputRHS = rhs;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// Constraints may have changed since the creation of a bound SVal. Check if</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">// the values can be simplified based on those new constraints.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  SVal simplifiedLhs = simplifySVal(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, lhs);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  SVal simplifiedRhs = simplifySVal(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, rhs);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> simplifiedLhsAsNonLoc = simplifiedLhs.getAs&lt;NonLoc&gt;())</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    lhs = *simplifiedLhsAsNonLoc;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> simplifiedRhsAsNonLoc = simplifiedRhs.getAs&lt;NonLoc&gt;())</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    rhs = *simplifiedRhsAsNonLoc;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="comment">// Handle trivial case where left-side and right-side are the same.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (lhs == rhs)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">case</span> BO_LE:</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordflow">case</span> BO_GE:</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">true</span>, resultTy);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordflow">case</span> BO_LT:</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <span class="keywordflow">case</span> BO_GT:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">false</span>, resultTy);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <span class="keywordflow">case</span> BO_Xor:</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">case</span> BO_Sub:</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> (resultTy-&gt;<a class="code" href="classclang_1_1Type.html#a58b6f352a1bd0963e500a4e902c4e74c">isIntegralOrEnumerationType</a>())</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;          <span class="keywordflow">return</span> makeIntVal(0, resultTy);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="keywordflow">return</span> evalCast(makeIntVal(0, <span class="comment">/*isUnsigned=*/</span><span class="keyword">false</span>), resultTy,</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                        <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">case</span> BO_Or:</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">case</span> BO_And:</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">return</span> evalCast(lhs, resultTy, <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160; </div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">switch</span> (lhs.getSubKind()) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">return</span> makeSymExprValNN(op, lhs, rhs, resultTy);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">case</span> nonloc::PointerToMemberKind: {</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      assert(rhs.getSubKind() == nonloc::PointerToMemberKind &amp;&amp;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;             <span class="stringliteral">&quot;Both SVals should have pointer-to-member-type&quot;</span>);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keyword">auto</span> LPTM = lhs.castAs&lt;<a class="code" href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffa64fff8a92fc84c1785af8cc47b4025ac">nonloc::PointerToMember</a>&gt;(),</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;           RPTM = rhs.castAs&lt;<a class="code" href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffa64fff8a92fc84c1785af8cc47b4025ac">nonloc::PointerToMember</a>&gt;();</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keyword">auto</span> LPTMD = LPTM.getPTMData(), RPTMD = RPTM.getPTMData();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;          <span class="keywordflow">return</span> makeTruthVal(LPTMD == RPTMD, resultTy);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          <span class="keywordflow">return</span> makeTruthVal(LPTMD != RPTMD, resultTy);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;          <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">case</span> nonloc::LocAsIntegerKind: {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      Loc lhsL = lhs.castAs&lt;nonloc::LocAsInteger&gt;().getLoc();</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">switch</span> (rhs.getSubKind()) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="keywordflow">case</span> nonloc::LocAsIntegerKind:</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;          <span class="comment">// FIXME: at the moment the implementation</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          <span class="comment">// of modeling &quot;pointers as integers&quot; is not complete.</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op))</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;          <span class="keywordflow">return</span> evalBinOpLL(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, op, lhsL,</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                             rhs.castAs&lt;nonloc::LocAsInteger&gt;().getLoc(),</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                             resultTy);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">case</span> nonloc::ConcreteIntKind: {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;          <span class="comment">// FIXME: at the moment the implementation</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;          <span class="comment">// of modeling &quot;pointers as integers&quot; is not complete.</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op))</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          <span class="comment">// Transform the integer into a location and compare.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          <span class="comment">// FIXME: This only makes sense for comparisons. If we want to, say,</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          <span class="comment">// add 1 to a LocAsInteger, we&#39;d better unpack the Loc and add to it,</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          <span class="comment">// then pack it back into a LocAsInteger.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> i = rhs.castAs&lt;nonloc::ConcreteInt&gt;().<a class="code" href="ArrayBoundCheckerV2_8cpp.html#a0f5cc163e1c5feb0c0b0af79d4b4869a">getValue</a>();</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;          <span class="comment">// If the region has a symbolic base, pay attention to the type; it</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          <span class="comment">// might be coming from a non-default address space. For non-symbolic</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;          <span class="comment">// regions it doesn&#39;t matter that much because such comparisons would</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;          <span class="comment">// most likely evaluate to concrete false anyway. FIXME: We might</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          <span class="comment">// still need to handle the non-comparison case.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> lSym = lhs.getAsLocSymbol(<span class="keyword">true</span>))</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            BasicVals.getAPSIntType(lSym-&gt;getType()).apply(i);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            BasicVals.getAPSIntType(Context.<a class="code" href="classclang_1_1ASTContext.html#a485732164c40553bb323c58f5e8bf7a7">VoidPtrTy</a>).apply(i);</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;          <span class="keywordflow">return</span> evalBinOpLL(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, op, lhsL, makeLoc(i), resultTy);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        }</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;          <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;              <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">false</span>, resultTy);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;              <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">true</span>, resultTy);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;              <span class="comment">// This case also handles pointer arithmetic.</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;              <span class="keywordflow">return</span> makeSymExprValNN(op, InputLHS, InputRHS, resultTy);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;          }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    }</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">case</span> nonloc::ConcreteIntKind: {</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> LHSValue = lhs.castAs&lt;nonloc::ConcreteInt&gt;().<a class="code" href="ArrayBoundCheckerV2_8cpp.html#a0f5cc163e1c5feb0c0b0af79d4b4869a">getValue</a>();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="comment">// If we&#39;re dealing with two known constants, just perform the operation.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *KnownRHSValue = getKnownValue(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, rhs)) {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> RHSValue = *KnownRHSValue;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op)) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;          <span class="comment">// We&#39;re looking for a type big enough to compare the two values.</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;          <span class="comment">// FIXME: This is not correct. char + short will result in a promotion</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;          <span class="comment">// to int. Unfortunately we have lost types by this point.</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;          APSIntType CompareType = <a class="code" href="____clang__cuda__math_8h.html#ae6bb573e13e3bd5738c8faa552b6a129">std::max</a>(APSIntType(LHSValue),</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                                            APSIntType(RHSValue));</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;          CompareType.apply(LHSValue);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;          CompareType.apply(RHSValue);</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classclang_1_1BinaryOperator.html#a894267e5afe54fdc4c933c0033df8883">BinaryOperator::isShiftOp</a>(op)) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;          APSIntType IntType = BasicVals.getAPSIntType(resultTy);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;          IntType.apply(LHSValue);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          IntType.apply(RHSValue);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        }</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160; </div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *Result =</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;          BasicVals.evalAPSInt(op, LHSValue, RHSValue);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="keywordflow">if</span> (!Result)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          <span class="keywordflow">return</span> UndefinedVal();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="keywordflow">return</span> nonloc::ConcreteInt(*Result);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160; </div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="comment">// Swap the left and right sides and flip the operator if doing so</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="comment">// allows us to better reason about the expression (this is a form</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="comment">// of expression canonicalization).</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="comment">// While we&#39;re at it, catch some special cases for non-commutative ops.</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">case</span> BO_LT:</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="keywordflow">case</span> BO_GT:</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">case</span> BO_LE:</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">case</span> BO_GE:</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        op = <a class="code" href="classclang_1_1BinaryOperator.html#a7a6035c40e72a4b1d7d49ec91503f7c5">BinaryOperator::reverseComparisonOp</a>(op);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        LLVM_FALLTHROUGH;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keywordflow">case</span> BO_Add:</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="keywordflow">case</span> BO_Mul:</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">case</span> BO_And:</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">case</span> BO_Xor:</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      <span class="keywordflow">case</span> BO_Or:</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        std::swap(lhs, rhs);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">case</span> BO_Shr:</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="comment">// (~0)&gt;&gt;a</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordflow">if</span> (LHSValue.isAllOnes() &amp;&amp; LHSValue.isSigned())</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;          <span class="keywordflow">return</span> evalCast(lhs, resultTy, <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        LLVM_FALLTHROUGH;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">case</span> BO_Shl:</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="comment">// 0&lt;&lt;a and 0&gt;&gt;a</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">if</span> (LHSValue == 0)</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;          <span class="keywordflow">return</span> evalCast(lhs, resultTy, <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordflow">return</span> makeSymExprValNN(op, InputLHS, InputRHS, resultTy);</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">case</span> BO_Div:</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="comment">// 0 / x == 0</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">case</span> BO_Rem:</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="comment">// 0 % x == 0</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">if</span> (LHSValue == 0)</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;          <span class="keywordflow">return</span> makeZeroVal(resultTy);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        LLVM_FALLTHROUGH;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">return</span> makeSymExprValNN(op, InputLHS, InputRHS, resultTy);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="keywordflow">case</span> nonloc::SymbolValKind: {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <span class="comment">// We only handle LHS as simple symbols or SymIntExprs.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym = lhs.castAs&lt;nonloc::SymbolVal&gt;().getSymbol();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="comment">// LHS is a symbolic expression.</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="namespaceclang_1_1ento.html#a5ad9f2578b4189b78e7fadc567534263">SymIntExpr</a> *symIntExpr = dyn_cast&lt;SymIntExpr&gt;(Sym)) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160; </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="comment">// Is this a logical not? (!x is represented as x == 0.)</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">if</span> (op == BO_EQ &amp;&amp; rhs.isZeroConstant()) {</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          <span class="comment">// We know how to negate certain expressions. Simplify them here.</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;          <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> opc = symIntExpr-&gt;getOpcode();</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          <span class="keywordflow">switch</span> (opc) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="comment">// We don&#39;t know how to negate this operation.</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;            <span class="comment">// Just handle it as if it were a normal comparison to 0.</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;          <span class="keywordflow">case</span> BO_LAnd:</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;          <span class="keywordflow">case</span> BO_LOr:</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            llvm_unreachable(<span class="stringliteral">&quot;Logical operators handled by branching logic.&quot;</span>);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;          <span class="keywordflow">case</span> BO_Assign:</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;          <span class="keywordflow">case</span> BO_MulAssign:</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;          <span class="keywordflow">case</span> BO_DivAssign:</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;          <span class="keywordflow">case</span> BO_RemAssign:</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          <span class="keywordflow">case</span> BO_AddAssign:</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;          <span class="keywordflow">case</span> BO_SubAssign:</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;          <span class="keywordflow">case</span> BO_ShlAssign:</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;          <span class="keywordflow">case</span> BO_ShrAssign:</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;          <span class="keywordflow">case</span> BO_AndAssign:</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;          <span class="keywordflow">case</span> BO_XorAssign:</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;          <span class="keywordflow">case</span> BO_OrAssign:</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;          <span class="keywordflow">case</span> BO_Comma:</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            llvm_unreachable(<span class="stringliteral">&quot;&#39;=&#39; and &#39;,&#39; operators handled by ExprEngine.&quot;</span>);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;          <span class="keywordflow">case</span> BO_PtrMemD:</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;          <span class="keywordflow">case</span> BO_PtrMemI:</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            llvm_unreachable(<span class="stringliteral">&quot;Pointer arithmetic not handled here.&quot;</span>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;          <span class="keywordflow">case</span> BO_LT:</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;          <span class="keywordflow">case</span> BO_GT:</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;          <span class="keywordflow">case</span> BO_LE:</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;          <span class="keywordflow">case</span> BO_GE:</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;          <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;          <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            assert(resultTy-&gt;<a class="code" href="classclang_1_1Type.html#a096577dc2c0e924586ad954a1f99e671">isBooleanType</a>() ||</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                   resultTy == getConditionType());</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            assert(symIntExpr-&gt;getType()-&gt;isBooleanType() ||</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                   getContext().hasSameUnqualifiedType(symIntExpr-&gt;getType(),</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                                       getConditionType()));</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="comment">// Negate the comparison and make a value.</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            opc = <a class="code" href="classclang_1_1BinaryOperator.html#a6fb3d0cabdc29abc18eca219c1424037">BinaryOperator::negateComparisonOp</a>(opc);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="keywordflow">return</span> makeNonLoc(symIntExpr-&gt;getLHS(), opc,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                symIntExpr-&gt;getRHS(), resultTy);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;          }</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160; </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="comment">// For now, only handle expressions whose RHS is a constant.</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *RHSValue = getKnownValue(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, rhs)) {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;          <span class="comment">// If both the LHS and the current expression are additive,</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;          <span class="comment">// fold their constants and try again.</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#ab7d2b91f8648ca68c349ddb91ab80995">BinaryOperator::isAdditiveOp</a>(op)) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> lop = symIntExpr-&gt;getOpcode();</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#ab7d2b91f8648ca68c349ddb91ab80995">BinaryOperator::isAdditiveOp</a>(lop)) {</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;              <span class="comment">// Convert the two constants to a common type, then combine them.</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;              <span class="comment">// resultTy may not be the best type to convert to, but it&#39;s</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;              <span class="comment">// probably the best choice in expressions with mixed type</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;              <span class="comment">// (such as x+1U+2LL). The rules for implicit conversions should</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;              <span class="comment">// choose a reasonable type to preserve the expression, and will</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;              <span class="comment">// at least match how the value is going to be used.</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;              APSIntType IntType = BasicVals.getAPSIntType(resultTy);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;              <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> &amp;first = IntType.convert(symIntExpr-&gt;getRHS());</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;              <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> &amp;second = IntType.convert(*RHSValue);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;              <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *newRHS;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;              <span class="keywordflow">if</span> (lop == op)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                newRHS = BasicVals.evalAPSInt(BO_Add, first, second);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;              <span class="keywordflow">else</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                newRHS = BasicVals.evalAPSInt(BO_Sub, first, second);</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;              assert(newRHS &amp;&amp; <span class="stringliteral">&quot;Invalid operation despite common type!&quot;</span>);</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;              rhs = nonloc::ConcreteInt(*newRHS);</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;              lhs = nonloc::SymbolVal(symIntExpr-&gt;getLHS());</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;              op = lop;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            }</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;          }</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160; </div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;          <span class="comment">// Otherwise, make a SymIntExpr out of the expression.</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;          <span class="keywordflow">return</span> MakeSymIntVal(symIntExpr, op, *RHSValue, resultTy);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        }</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="comment">// Is the RHS a constant?</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *RHSValue = getKnownValue(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, rhs))</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="keywordflow">return</span> MakeSymIntVal(Sym, op, *RHSValue, resultTy);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;NonLoc&gt;</a> <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a> = <a class="code" href="SimpleSValBuilder_8cpp.html#a6d87535d2b88a9526c616bfded70646d">tryRearrange</a>(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, op, lhs, rhs, resultTy))</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">return</span> *<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      <span class="comment">// Give up -- this is not a symbolic expression we can handle.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">return</span> makeSymExprValNN(op, InputLHS, InputRHS, resultTy);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    }</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    }</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;}</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno"><a class="line" href="SimpleSValBuilder_8cpp.html#abf55751a6b84ac5790b31dfc2d5a1973">  672</a></span>&#160;<span class="keyword">static</span> SVal <a class="code" href="SimpleSValBuilder_8cpp.html#abf55751a6b84ac5790b31dfc2d5a1973">evalBinOpFieldRegionFieldRegion</a>(<span class="keyword">const</span> FieldRegion *LeftFR,</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                                            <span class="keyword">const</span> FieldRegion *RightFR,</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                                            <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> op,</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                                            <a class="code" href="classclang_1_1QualType.html">QualType</a> resultTy,</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                            SimpleSValBuilder &amp;SVB) {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="comment">// Only comparisons are meaningful here!</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op))</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="comment">// Next, see if the two FRs have the same super-region.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="comment">// FIXME: This doesn&#39;t handle casts yet, and simply stripping the casts</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="comment">// doesn&#39;t help.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">if</span> (LeftFR-&gt;getSuperRegion() != RightFR-&gt;getSuperRegion())</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *LeftFD = LeftFR-&gt;getDecl();</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *RightFD = RightFR-&gt;getDecl();</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *RD = LeftFD-&gt;<a class="code" href="classclang_1_1FieldDecl.html#ac2498104ca816f4fc20a31e010db531d">getParent</a>();</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160; </div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="comment">// Make sure the two FRs are from the same kind of record. Just in case!</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="comment">// FIXME: This is probably where inheritance would be a problem.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">if</span> (RD != RightFD-&gt;<a class="code" href="classclang_1_1FieldDecl.html#ac2498104ca816f4fc20a31e010db531d">getParent</a>())</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="comment">// We know for sure that the two fields are not the same, since that</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="comment">// would have given us the same SVal.</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">if</span> (op == BO_EQ)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">return</span> SVB.makeTruthVal(<span class="keyword">false</span>, resultTy);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">if</span> (op == BO_NE)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">return</span> SVB.makeTruthVal(<span class="keyword">true</span>, resultTy);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="comment">// Iterate through the fields and see which one comes first.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="comment">// [C99 6.7.2.1.13] &quot;Within a structure object, the non-bit-field</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="comment">// members and the units in which bit-fields reside have addresses that</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="comment">// increase in the order in which they are declared.&quot;</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordtype">bool</span> leftFirst = (op == BO_LT || op == BO_LE);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *I : RD-&gt;<a class="code" href="classclang_1_1RecordDecl.html#a5e73db3d805697af36d80739d55369ec">fields</a>()) {</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (I == LeftFD)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <span class="keywordflow">return</span> SVB.makeTruthVal(leftFirst, resultTy);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">if</span> (I == RightFD)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">return</span> SVB.makeTruthVal(!leftFirst, resultTy);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  }</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  llvm_unreachable(<span class="stringliteral">&quot;Fields not found in parent record&#39;s definition&quot;</span>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">// FIXME: all this logic will change if/when we have MemRegion::getLocation().</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;SVal SimpleSValBuilder::evalBinOpLL(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>,</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                                  <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> op,</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                                  Loc lhs, Loc rhs,</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                  <a class="code" href="classclang_1_1QualType.html">QualType</a> resultTy) {</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="comment">// Only comparisons and subtractions are valid operations on two pointers.</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="comment">// See [C99 6.5.5 through 6.5.14] or [C++0x 5.6 through 5.15].</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="comment">// However, if a pointer is casted to an integer, evalBinOpNN may end up</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="comment">// calling this function with another operation (PR7527). We don&#39;t attempt to</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="comment">// model this for now, but it could be useful, particularly when the</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">// &quot;location&quot; is actually an integer value that&#39;s been passed through a void*.</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="keywordflow">if</span> (!(<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op) || op == BO_Sub))</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="comment">// Special cases for when both sides are identical.</span></div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keywordflow">if</span> (lhs == rhs) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      llvm_unreachable(<span class="stringliteral">&quot;Unimplemented operation for two identical values&quot;</span>);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">case</span> BO_Sub:</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="keywordflow">return</span> makeZeroVal(resultTy);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="keywordflow">case</span> BO_LE:</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">case</span> BO_GE:</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">true</span>, resultTy);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">case</span> BO_LT:</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keywordflow">case</span> BO_GT:</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">false</span>, resultTy);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">switch</span> (lhs.getSubKind()) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    llvm_unreachable(<span class="stringliteral">&quot;Ordering not implemented for this Loc.&quot;</span>);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordflow">case</span> loc::GotoLabelKind:</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <span class="comment">// The only thing we know about labels is that they&#39;re non-null.</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">if</span> (rhs.isZeroConstant()) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <span class="keywordflow">case</span> BO_Sub:</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="keywordflow">return</span> evalCast(lhs, resultTy, <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keywordflow">case</span> BO_LE:</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordflow">case</span> BO_LT:</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">false</span>, resultTy);</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">case</span> BO_GT:</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">case</span> BO_GE:</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">true</span>, resultTy);</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      }</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    }</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    <span class="comment">// There may be two labels for the same location, and a function region may</span></div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="comment">// have the same address as a label at the start of the function (depending</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">// on the ABI).</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="comment">// FIXME: we can probably do a comparison against other MemRegions, though.</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="comment">// FIXME: is there a way to tell if two labels refer to the same location?</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160; </div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  <span class="keywordflow">case</span> loc::ConcreteIntKind: {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="comment">// If one of the operands is a symbol and the other is a constant,</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="comment">// build an expression for use by the constraint manager.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> rSym = rhs.getAsLocSymbol()) {</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <span class="comment">// We can only build expressions with symbols on the left,</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="comment">// so we need a reversible operator.</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op) || op == BO_Cmp)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160; </div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> &amp;lVal = lhs.castAs&lt;loc::ConcreteInt&gt;().<a class="code" href="ArrayBoundCheckerV2_8cpp.html#a0f5cc163e1c5feb0c0b0af79d4b4869a">getValue</a>();</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      op = <a class="code" href="classclang_1_1BinaryOperator.html#a7a6035c40e72a4b1d7d49ec91503f7c5">BinaryOperator::reverseComparisonOp</a>(op);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="keywordflow">return</span> makeNonLoc(rSym, op, lVal, resultTy);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">// If both operands are constants, just perform the operation.</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;loc::ConcreteInt&gt;</a> rInt = rhs.getAs&lt;loc::ConcreteInt&gt;()) {</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      SVal ResultVal =</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;          lhs.castAs&lt;loc::ConcreteInt&gt;().evalBinOp(BasicVals, op, *rInt);</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;NonLoc&gt;</a> Result = ResultVal.getAs&lt;NonLoc&gt;())</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">return</span> evalCast(*Result, resultTy, <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      assert(!ResultVal.getAs&lt;Loc&gt;() &amp;&amp; <span class="stringliteral">&quot;Loc-Loc ops should not produce Locs&quot;</span>);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="comment">// Special case comparisons against NULL.</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="comment">// This must come after the test if the RHS is a symbol, which is used to</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <span class="comment">// build constraints. The address of any non-symbolic region is guaranteed</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="comment">// to be non-NULL, as is any label.</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    assert(rhs.getAs&lt;loc::MemRegionVal&gt;() || rhs.getAs&lt;loc::GotoLabel&gt;());</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordflow">if</span> (lhs.isZeroConstant()) {</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">case</span> BO_GT:</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">case</span> BO_GE:</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">false</span>, resultTy);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="keywordflow">case</span> BO_LT:</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">case</span> BO_LE:</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">true</span>, resultTy);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="comment">// Comparing an arbitrary integer to a region or label address is</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="comment">// completely unknowable.</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;    <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">case</span> loc::MemRegionValKind: {</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;loc::ConcreteInt&gt;</a> rInt = rhs.getAs&lt;loc::ConcreteInt&gt;()) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      <span class="comment">// If one of the operands is a symbol and the other is a constant,</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="comment">// build an expression for use by the constraint manager.</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> lSym = lhs.getAsLocSymbol(<span class="keyword">true</span>)) {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op))</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;          <span class="keywordflow">return</span> MakeSymIntVal(lSym, op, rInt-&gt;getValue(), resultTy);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="comment">// Special case comparisons to NULL.</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="comment">// This must come after the test if the LHS is a symbol, which is used to</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <span class="comment">// build constraints. The address of any non-symbolic region is guaranteed</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="comment">// to be non-NULL.</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">if</span> (rInt-&gt;isZeroConstant()) {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="keywordflow">if</span> (op == BO_Sub)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;          <span class="keywordflow">return</span> evalCast(lhs, resultTy, <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160; </div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op)) {</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;          <a class="code" href="classclang_1_1QualType.html">QualType</a> boolType = getContext().BoolTy;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;          NonLoc l = evalCast(lhs, boolType, <a class="code" href="classclang_1_1QualType.html">QualType</a>{}).castAs&lt;NonLoc&gt;();</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;          NonLoc r = makeTruthVal(<span class="keyword">false</span>, boolType).castAs&lt;NonLoc&gt;();</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;          <span class="keywordflow">return</span> evalBinOpNN(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, op, l, r, resultTy);</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      }</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="comment">// Comparing a region to an arbitrary integer is completely unknowable.</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160; </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// Get both values as regions, if possible.</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keyword">const</span> MemRegion *LeftMR = lhs.getAsRegion();</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    assert(LeftMR &amp;&amp; <span class="stringliteral">&quot;MemRegionValKind SVal doesn&#39;t have a region!&quot;</span>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keyword">const</span> MemRegion *RightMR = rhs.getAsRegion();</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">if</span> (!RightMR)</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      <span class="comment">// The RHS is probably a label, which in theory could address a region.</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="comment">// FIXME: we can probably make a more useful statement about non-code</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <span class="comment">// regions, though.</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keyword">const</span> MemRegion *LeftBase = LeftMR-&gt;getBaseRegion();</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keyword">const</span> MemRegion *RightBase = RightMR-&gt;getBaseRegion();</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keyword">const</span> MemSpaceRegion *LeftMS = LeftBase-&gt;getMemorySpace();</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keyword">const</span> MemSpaceRegion *RightMS = RightBase-&gt;getMemorySpace();</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keyword">const</span> MemSpaceRegion *UnknownMS = MemMgr.getUnknownRegion();</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="comment">// If the two regions are from different known memory spaces they cannot be</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="comment">// equal. Also, assume that no symbolic region (whose memory space is</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="comment">// unknown) is on the stack.</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (LeftMS != RightMS &amp;&amp;</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        ((LeftMS != UnknownMS &amp;&amp; RightMS != UnknownMS) ||</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;         (isa&lt;StackSpaceRegion&gt;(LeftMS) || isa&lt;StackSpaceRegion&gt;(RightMS)))) {</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">false</span>, resultTy);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">true</span>, resultTy);</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;      }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    }</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="comment">// If both values wrap regions, see if they&#39;re from different base regions.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="comment">// Note, heap base symbolic regions are assumed to not alias with</span></div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="comment">// each other; for example, we assume that malloc returns different address</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    <span class="comment">// on each invocation.</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="comment">// FIXME: ObjC object pointers always reside on the heap, but currently</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="comment">// we treat their memory space as unknown, because symbolic pointers</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="comment">// to ObjC objects may alias. There should be a way to construct</span></div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="comment">// possibly-aliasing heap-based regions. For instance, MacOSXApiChecker</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    <span class="comment">// guesses memory space for ObjC object pointers manually instead of</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="comment">// relying on us.</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <span class="keywordflow">if</span> (LeftBase != RightBase &amp;&amp;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        ((!isa&lt;SymbolicRegion&gt;(LeftBase) &amp;&amp; !isa&lt;SymbolicRegion&gt;(RightBase)) ||</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;         (isa&lt;HeapSpaceRegion&gt;(LeftMS) || isa&lt;HeapSpaceRegion&gt;(RightMS))) ){</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">false</span>, resultTy);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">return</span> makeTruthVal(<span class="keyword">true</span>, resultTy);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// Handle special cases for when both regions are element regions.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keyword">const</span> ElementRegion *RightER = dyn_cast&lt;ElementRegion&gt;(RightMR);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keyword">const</span> ElementRegion *LeftER = dyn_cast&lt;ElementRegion&gt;(LeftMR);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">if</span> (RightER &amp;&amp; LeftER) {</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="comment">// Next, see if the two ERs have the same super-region and matching types.</span></div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="comment">// FIXME: This should do something useful even if the types don&#39;t match,</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="comment">// though if both indexes are constant the RegionRawOffset path will</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <span class="comment">// give the correct answer.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keywordflow">if</span> (LeftER-&gt;getSuperRegion() == RightER-&gt;getSuperRegion() &amp;&amp;</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;          LeftER-&gt;getElementType() == RightER-&gt;getElementType()) {</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <span class="comment">// Get the left index and cast it to the correct type.</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;        <span class="comment">// If the index is unknown or undefined, bail out here.</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;        SVal LeftIndexVal = LeftER-&gt;getIndex();</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;        <a class="code" href="classllvm_1_1Optional.html">Optional&lt;NonLoc&gt;</a> LeftIndex = LeftIndexVal.getAs&lt;NonLoc&gt;();</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;        <span class="keywordflow">if</span> (!LeftIndex)</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;          <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        LeftIndexVal = evalCast(*LeftIndex, ArrayIndexTy, <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;        LeftIndex = LeftIndexVal.getAs&lt;NonLoc&gt;();</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="keywordflow">if</span> (!LeftIndex)</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;          <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        <span class="comment">// Do the same for the right index.</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;        SVal RightIndexVal = RightER-&gt;getIndex();</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <a class="code" href="classllvm_1_1Optional.html">Optional&lt;NonLoc&gt;</a> RightIndex = RightIndexVal.getAs&lt;NonLoc&gt;();</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        <span class="keywordflow">if</span> (!RightIndex)</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;          <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        RightIndexVal = evalCast(*RightIndex, ArrayIndexTy, <a class="code" href="classclang_1_1QualType.html">QualType</a>{});</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        RightIndex = RightIndexVal.getAs&lt;NonLoc&gt;();</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <span class="keywordflow">if</span> (!RightIndex)</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;          <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160; </div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        <span class="comment">// Actually perform the operation.</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="comment">// evalBinOpNN expects the two indexes to already be the right type.</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        <span class="keywordflow">return</span> evalBinOpNN(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, op, *LeftIndex, *RightIndex, resultTy);</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      }</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    }</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160; </div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="comment">// Special handling of the FieldRegions, even with symbolic offsets.</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="keyword">const</span> FieldRegion *RightFR = dyn_cast&lt;FieldRegion&gt;(RightMR);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keyword">const</span> FieldRegion *LeftFR = dyn_cast&lt;FieldRegion&gt;(LeftMR);</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">if</span> (RightFR &amp;&amp; LeftFR) {</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      SVal R = <a class="code" href="SimpleSValBuilder_8cpp.html#abf55751a6b84ac5790b31dfc2d5a1973">evalBinOpFieldRegionFieldRegion</a>(LeftFR, RightFR, op, resultTy,</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;                                               *<span class="keyword">this</span>);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <span class="keywordflow">if</span> (!R.isUnknown())</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <span class="keywordflow">return</span> R;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    }</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="comment">// Compare the regions using the raw offsets.</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    RegionOffset LeftOffset = LeftMR-&gt;getAsOffset();</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    RegionOffset RightOffset = RightMR-&gt;getAsOffset();</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">if</span> (LeftOffset.getRegion() != <span class="keyword">nullptr</span> &amp;&amp;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        LeftOffset.getRegion() == RightOffset.getRegion() &amp;&amp;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        !LeftOffset.hasSymbolicOffset() &amp;&amp; !RightOffset.hasSymbolicOffset()) {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      int64_t left = LeftOffset.getOffset();</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      int64_t right = RightOffset.getOffset();</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;          <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <span class="keywordflow">case</span> BO_LT:</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;          <span class="keywordflow">return</span> makeTruthVal(left &lt; right, resultTy);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;        <span class="keywordflow">case</span> BO_GT:</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;          <span class="keywordflow">return</span> makeTruthVal(left &gt; right, resultTy);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;        <span class="keywordflow">case</span> BO_LE:</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;          <span class="keywordflow">return</span> makeTruthVal(left &lt;= right, resultTy);</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;        <span class="keywordflow">case</span> BO_GE:</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;          <span class="keywordflow">return</span> makeTruthVal(left &gt;= right, resultTy);</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;        <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;          <span class="keywordflow">return</span> makeTruthVal(left == right, resultTy);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;          <span class="keywordflow">return</span> makeTruthVal(left != right, resultTy);</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    }</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="comment">// At this point we&#39;re not going to get a good answer, but we can try</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="comment">// conjuring an expression instead.</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> LHSSym = lhs.getAsLocSymbol();</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> RHSSym = rhs.getAsLocSymbol();</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">if</span> (LHSSym &amp;&amp; RHSSym)</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <span class="keywordflow">return</span> makeNonLoc(LHSSym, op, RHSSym, resultTy);</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160; </div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="comment">// If we get here, we have no way of comparing the regions.</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  }</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  }</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;}</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160; </div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;SVal SimpleSValBuilder::evalBinOpLN(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>,</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                                    <a class="code" href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">BinaryOperator::Opcode</a> op, Loc lhs,</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                                    NonLoc rhs, <a class="code" href="classclang_1_1QualType.html">QualType</a> resultTy) {</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="keywordflow">if</span> (op &gt;= BO_PtrMemD &amp;&amp; op &lt;= BO_PtrMemI) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> PTMSV = rhs.getAs&lt;<a class="code" href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffa64fff8a92fc84c1785af8cc47b4025ac">nonloc::PointerToMember</a>&gt;()) {</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keywordflow">if</span> (PTMSV-&gt;isNullMemberPointer())</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        <span class="keywordflow">return</span> UndefinedVal();</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160; </div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <span class="keyword">auto</span> getFieldLValue = [&amp;](<span class="keyword">const</span> <span class="keyword">auto</span> *FD) -&gt; SVal {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;        SVal Result = lhs;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;I : *PTMSV)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;          Result = StateMgr.getStoreManager().evalDerivedToBase(</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;              Result, I-&gt;getType(), I-&gt;isVirtual());</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>-&gt;getLValue(FD, Result);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      };</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *FD = PTMSV-&gt;getDeclAs&lt;<a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a>&gt;()) {</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;        <span class="keywordflow">return</span> getFieldLValue(FD);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *FD = PTMSV-&gt;getDeclAs&lt;<a class="code" href="classclang_1_1IndirectFieldDecl.html">IndirectFieldDecl</a>&gt;()) {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;        <span class="keywordflow">return</span> getFieldLValue(FD);</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;      }</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    }</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    <span class="keywordflow">return</span> rhs;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;  }</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  assert(!<a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(op) &amp;&amp;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;         <span class="stringliteral">&quot;arguments to comparison ops must be of the same type&quot;</span>);</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160; </div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="comment">// Special case: rhs is a zero constant.</span></div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="keywordflow">if</span> (rhs.isZeroConstant())</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">return</span> lhs;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160; </div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">// Perserve the null pointer so that it can be found by the DerefChecker.</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="keywordflow">if</span> (lhs.isZeroConstant())</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordflow">return</span> lhs;</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160; </div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  <span class="comment">// We are dealing with pointer arithmetic.</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  <span class="comment">// Handle pointer arithmetic on constant values.</span></div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;nonloc::ConcreteInt&gt;</a> rhsInt = rhs.getAs&lt;nonloc::ConcreteInt&gt;()) {</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;loc::ConcreteInt&gt;</a> lhsInt = lhs.getAs&lt;loc::ConcreteInt&gt;()) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> &amp;leftI = lhsInt-&gt;getValue();</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      assert(leftI.isUnsigned());</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> rightI(rhsInt-&gt;getValue(), <span class="comment">/* isUnsigned */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160; </div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="comment">// Convert the bitwidth of rightI.  This should deal with overflow</span></div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <span class="comment">// since we are dealing with concrete values.</span></div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      rightI = rightI.extOrTrunc(leftI.getBitWidth());</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="comment">// Offset the increment by the pointer size.</span></div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;      <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> Multiplicand(rightI.getBitWidth(), <span class="comment">/* isUnsigned */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <a class="code" href="classclang_1_1QualType.html">QualType</a> pointeeType = resultTy-&gt;<a class="code" href="classclang_1_1Type.html#a56c474868f4027b847f181f99b226f47">getPointeeType</a>();</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      Multiplicand = getContext().getTypeSizeInChars(pointeeType).getQuantity();</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      rightI *= Multiplicand;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160; </div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="comment">// Compute the adjusted pointer.</span></div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="keywordflow">switch</span> (op) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        <span class="keywordflow">case</span> BO_Add:</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;          rightI = leftI + rightI;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;        <span class="keywordflow">case</span> BO_Sub:</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;          rightI = leftI - rightI;</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;          llvm_unreachable(<span class="stringliteral">&quot;Invalid pointer arithmetic operation&quot;</span>);</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      }</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">return</span> loc::ConcreteInt(getBasicValueFactory().<a class="code" href="ArrayBoundCheckerV2_8cpp.html#a0f5cc163e1c5feb0c0b0af79d4b4869a">getValue</a>(rightI));</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;    }</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  }</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// Handle cases where &#39;lhs&#39; is a region.</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> MemRegion *region = lhs.getAsRegion()) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    rhs = convertToArrayIndex(rhs).castAs&lt;NonLoc&gt;();</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    SVal index = UnknownVal();</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keyword">const</span> SubRegion *superR = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;    <span class="comment">// We need to know the type of the pointer in order to add an integer to it.</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// Depending on the type, different amount of bytes is added.</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> elementType;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160; </div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> ElementRegion *elemReg = dyn_cast&lt;ElementRegion&gt;(region)) {</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      assert(op == BO_Add || op == BO_Sub);</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      index = evalBinOpNN(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, op, elemReg-&gt;getIndex(), rhs,</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                          getArrayIndexType());</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      superR = cast&lt;SubRegion&gt;(elemReg-&gt;getSuperRegion());</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      elementType = elemReg-&gt;getElementType();</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    }</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isa&lt;SubRegion&gt;(region)) {</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      assert(op == BO_Add || op == BO_Sub);</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      index = (op == BO_Add) ? rhs : evalMinus(rhs);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      superR = cast&lt;SubRegion&gt;(region);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="comment">// TODO: Is this actually reliable? Maybe improving our MemRegion</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="comment">// hierarchy to provide typed regions for all non-void pointers would be</span></div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="comment">// better. For instance, we cannot extend this towards LocAsInteger</span></div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <span class="comment">// operations, where result type of the expression is integer.</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <span class="keywordflow">if</span> (resultTy-&gt;<a class="code" href="classclang_1_1Type.html#acec6a1ac593ef9b1805529f25dd32b12">isAnyPointerType</a>())</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;        elementType = resultTy-&gt;<a class="code" href="classclang_1_1Type.html#a56c474868f4027b847f181f99b226f47">getPointeeType</a>();</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160; </div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">// Represent arithmetic on void pointers as arithmetic on char pointers.</span></div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="comment">// It is fine when a TypedValueRegion of char value type represents</span></div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;    <span class="comment">// a void pointer. Note that arithmetic on void pointers is a GCC extension.</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordflow">if</span> (elementType-&gt;<a class="code" href="classclang_1_1Type.html#a08a8d6c5fb67e56ace4f2ce305701781">isVoidType</a>())</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      elementType = getContext().CharTy;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;NonLoc&gt;</a> indexV = index.getAs&lt;NonLoc&gt;()) {</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keywordflow">return</span> loc::MemRegionVal(MemMgr.getElementRegion(elementType, *indexV,</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                                                       superR, getContext()));</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    }</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="keywordflow">return</span> UnknownVal();</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;}</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160; </div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *SimpleSValBuilder::getKnownValue(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>,</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                                                   SVal <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a> = simplifySVal(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>.isUnknownOrUndef())</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160; </div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;loc::ConcreteInt&gt;</a> <a class="code" href="namespaceclang_1_1tooling.html#a4ffee664435dba78b2225a5457619b53">X</a> = <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>.getAs&lt;loc::ConcreteInt&gt;())</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="namespaceclang_1_1tooling.html#a4ffee664435dba78b2225a5457619b53">X</a>-&gt;getValue();</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classllvm_1_1Optional.html">Optional&lt;nonloc::ConcreteInt&gt;</a> <a class="code" href="namespaceclang_1_1tooling.html#a4ffee664435dba78b2225a5457619b53">X</a> = <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>.getAs&lt;nonloc::ConcreteInt&gt;())</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    <span class="keywordflow">return</span> &amp;<a class="code" href="namespaceclang_1_1tooling.html#a4ffee664435dba78b2225a5457619b53">X</a>-&gt;getValue();</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160; </div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym = <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>.getAsSymbol())</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>-&gt;getConstraintManager().getSymVal(<a class="code" href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a>, Sym);</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;}</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160; </div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;SVal SimpleSValBuilder::simplifyUntilFixpoint(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, SVal Val) {</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;  SVal SimplifiedVal = simplifySValOnce(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, Val);</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="keywordflow">while</span> (SimplifiedVal != Val) {</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    Val = SimplifiedVal;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    SimplifiedVal = simplifySValOnce(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, Val);</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;  }</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">return</span> SimplifiedVal;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;}</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;SVal SimpleSValBuilder::simplifySVal(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, SVal <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>) {</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;  <span class="keywordflow">return</span> simplifyUntilFixpoint(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;}</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;SVal SimpleSValBuilder::simplifySValOnce(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, SVal <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>) {</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="comment">// For now, this function tries to constant-fold symbols inside a</span></div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;  <span class="comment">// nonloc::SymbolVal, and does nothing else. More simplifications should</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">// be possible, such as constant-folding an index in an ElementRegion.</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="keyword">class </span>Simplifier : <span class="keyword">public</span> FullSValVisitor&lt;Simplifier, SVal&gt; {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    SValBuilder &amp;SVB;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="comment">// Cache results for the lifetime of the Simplifier. Results change every</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="comment">// time new constraints are added to the program state, which is the whole</span></div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="comment">// point of simplifying, and for that very reason it&#39;s pointless to maintain</span></div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <span class="comment">// the same cache for the duration of the whole analysis.</span></div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    llvm::DenseMap&lt;SymbolRef, SVal&gt; Cached;</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> isUnchanged(<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym, SVal Val) {</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;      <span class="keywordflow">return</span> Sym == Val.getAsSymbol();</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    }</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160; </div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    SVal cache(<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym, SVal <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>) {</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      Cached[Sym] = <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    SVal skip(<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym) {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <span class="keywordflow">return</span> cache(Sym, SVB.makeSymbolVal(Sym));</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    }</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160; </div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="comment">// Return the known const value for the Sym if available, or return Undef</span></div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;    <span class="comment">// otherwise.</span></div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    SVal getConst(<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym) {</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *<a class="code" href="namespaceclang_1_1interp.html#adf26e3e32de986fab3e1a884d29de1e8">Const</a> =</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;          <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>-&gt;getConstraintManager().getSymVal(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, Sym);</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceclang_1_1interp.html#adf26e3e32de986fab3e1a884d29de1e8">Const</a>)</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classclang_1_1ento_1_1Loc.html#ade52f99777d7f54628cdac05e9992878">Loc::isLocType</a>(Sym-&gt;getType()) ? (SVal)SVB.makeIntLocVal(*<a class="code" href="namespaceclang_1_1interp.html#adf26e3e32de986fab3e1a884d29de1e8">Const</a>)</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                                              : (SVal)SVB.makeIntVal(*<a class="code" href="namespaceclang_1_1interp.html#adf26e3e32de986fab3e1a884d29de1e8">Const</a>);</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      <span class="keywordflow">return</span> UndefinedVal();</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    }</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160; </div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    SVal getConstOrVisit(<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym) {</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keyword">const</span> SVal <a class="code" href="Interp_8cpp.html#a7366213a28ea9f41665f7fd8752f4318">Ret</a> = getConst(Sym);</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="Interp_8cpp.html#a7366213a28ea9f41665f7fd8752f4318">Ret</a>.isUndef())</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <span class="keywordflow">return</span> Visit(Sym);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="Interp_8cpp.html#a7366213a28ea9f41665f7fd8752f4318">Ret</a>;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    }</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    Simplifier(<a class="code" href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">ProgramStateRef</a> <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>)</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;        : <a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>), SVB(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>-&gt;getStateManager().getSValBuilder()) {}</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;    SVal VisitSymbolData(<span class="keyword">const</span> SymbolData *S) {</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="comment">// No cache here.</span></div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">llvm::APSInt</a> *I =</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;              SVB.getKnownValue(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, SVB.makeSymbolVal(S)))</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classclang_1_1ento_1_1Loc.html#ade52f99777d7f54628cdac05e9992878">Loc::isLocType</a>(S-&gt;getType()) ? (SVal)SVB.makeIntLocVal(*I)</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                                            : (SVal)SVB.makeIntVal(*I);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      <span class="keywordflow">return</span> SVB.makeSymbolVal(S);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    }</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="comment">// TODO: Support SymbolCast.</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160; </div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    SVal VisitSymIntExpr(<span class="keyword">const</span> <a class="code" href="namespaceclang_1_1ento.html#a5ad9f2578b4189b78e7fadc567534263">SymIntExpr</a> *S) {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <span class="keyword">auto</span> I = Cached.find(S);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <span class="keywordflow">if</span> (I != Cached.end())</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;        <span class="keywordflow">return</span> I-&gt;second;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160; </div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      SVal LHS = getConstOrVisit(S-&gt;getLHS());</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;      <span class="keywordflow">if</span> (isUnchanged(S-&gt;getLHS(), LHS))</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        <span class="keywordflow">return</span> skip(S);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      SVal RHS;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <span class="comment">// By looking at the APSInt in the right-hand side of S, we cannot</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="comment">// figure out if it should be treated as a Loc or as a NonLoc.</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="comment">// So make our guess by recalling that we cannot multiply pointers</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <span class="comment">// or compare a pointer to an integer.</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1ento_1_1Loc.html#ade52f99777d7f54628cdac05e9992878">Loc::isLocType</a>(S-&gt;getLHS()-&gt;getType()) &amp;&amp;</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;          <a class="code" href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">BinaryOperator::isComparisonOp</a>(S-&gt;getOpcode())) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;        <span class="comment">// The usual conversion of $sym to &amp;SymRegion{$sym}, as they have</span></div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="comment">// the same meaning for Loc-type symbols, but the latter form</span></div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="comment">// is preferred in SVal computations for being Loc itself.</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> Sym = LHS.getAsSymbol()) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;          assert(<a class="code" href="classclang_1_1ento_1_1Loc.html#ade52f99777d7f54628cdac05e9992878">Loc::isLocType</a>(Sym-&gt;getType()));</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;          LHS = SVB.makeLoc(Sym);</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        }</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        RHS = SVB.makeIntLocVal(S-&gt;getRHS());</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        RHS = SVB.makeIntVal(S-&gt;getRHS());</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      }</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">return</span> cache(</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;          S, SVB.evalBinOp(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, S-&gt;getOpcode(), LHS, RHS, S-&gt;getType()));</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    }</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160; </div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    SVal VisitIntSymExpr(<span class="keyword">const</span> <a class="code" href="namespaceclang_1_1ento.html#a6d0c7b6393b49be0b0b6bee5ffb6e6e4">IntSymExpr</a> *S) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;      <span class="keyword">auto</span> I = Cached.find(S);</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      <span class="keywordflow">if</span> (I != Cached.end())</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;        <span class="keywordflow">return</span> I-&gt;second;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160; </div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      SVal RHS = getConstOrVisit(S-&gt;getRHS());</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">if</span> (isUnchanged(S-&gt;getRHS(), RHS))</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="keywordflow">return</span> skip(S);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      SVal LHS = SVB.makeIntVal(S-&gt;getLHS());</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keywordflow">return</span> cache(</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;          S, SVB.evalBinOp(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, S-&gt;getOpcode(), LHS, RHS, S-&gt;getType()));</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    }</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    SVal VisitSymSymExpr(<span class="keyword">const</span> <a class="code" href="namespaceclang_1_1ento.html#a91d63b0e82140f8d4670faef7f624062">SymSymExpr</a> *S) {</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keyword">auto</span> I = Cached.find(S);</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <span class="keywordflow">if</span> (I != Cached.end())</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;        <span class="keywordflow">return</span> I-&gt;second;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160; </div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="comment">// For now don&#39;t try to simplify mixed Loc/NonLoc expressions</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="comment">// because they often appear from LocAsInteger operations</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <span class="comment">// and we don&#39;t know how to combine a LocAsInteger</span></div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="comment">// with a concrete value.</span></div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1ento_1_1Loc.html#ade52f99777d7f54628cdac05e9992878">Loc::isLocType</a>(S-&gt;getLHS()-&gt;getType()) !=</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;          <a class="code" href="classclang_1_1ento_1_1Loc.html#ade52f99777d7f54628cdac05e9992878">Loc::isLocType</a>(S-&gt;getRHS()-&gt;getType()))</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="keywordflow">return</span> skip(S);</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160; </div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      SVal LHS = getConstOrVisit(S-&gt;getLHS());</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      SVal RHS = getConstOrVisit(S-&gt;getRHS());</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="keywordflow">if</span> (isUnchanged(S-&gt;getLHS(), LHS) &amp;&amp; isUnchanged(S-&gt;getRHS(), RHS))</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordflow">return</span> skip(S);</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160; </div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keywordflow">return</span> cache(</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;          S, SVB.evalBinOp(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>, S-&gt;getOpcode(), LHS, RHS, S-&gt;getType()));</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    }</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    SVal VisitSymExpr(<a class="code" href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">SymbolRef</a> S) { <span class="keywordflow">return</span> nonloc::SymbolVal(S); }</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160; </div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    SVal VisitMemRegion(<span class="keyword">const</span> MemRegion *R) { <span class="keywordflow">return</span> loc::MemRegionVal(R); }</div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160; </div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    SVal VisitNonLocSymbolVal(nonloc::SymbolVal <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>) {</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      <span class="comment">// Simplification is much more costly than computing complexity.</span></div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="comment">// For high complexity, it may be not worth it.</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;      <span class="keywordflow">return</span> Visit(<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>.getSymbol());</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    }</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    SVal VisitSVal(SVal <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>) { <span class="keywordflow">return</span> <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>; }</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  };</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;  <span class="comment">// A crude way of preventing this function from calling itself from evalBinOp.</span></div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> isReentering = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="keywordflow">if</span> (isReentering)</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160; </div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  isReentering = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  SVal SimplifiedV = Simplifier(<a class="code" href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a>).Visit(<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>);</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  isReentering = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160; </div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;  <span class="keywordflow">return</span> SimplifiedV;</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassclang_1_1ento_1_1Loc_html_ade52f99777d7f54628cdac05e9992878"><div class="ttname"><a href="classclang_1_1ento_1_1Loc.html#ade52f99777d7f54628cdac05e9992878">clang::ento::Loc::isLocType</a></div><div class="ttdeci">static bool isLocType(QualType T)</div><div class="ttdef"><b>Definition:</b> <a href="SVals_8h_source.html#l00335">SVals.h:335</a></div></div>
<div class="ttc" id="a____clang__cuda__math_8h_html_ae6bb573e13e3bd5738c8faa552b6a129"><div class="ttname"><a href="____clang__cuda__math_8h.html#ae6bb573e13e3bd5738c8faa552b6a129">max</a></div><div class="ttdeci">__DEVICE__ int max(int __a, int __b)</div><div class="ttdef"><b>Definition:</b> <a href="____clang__cuda__math_8h_source.html#l00196">__clang_cuda_math.h:196</a></div></div>
<div class="ttc" id="aSimpleSValBuilder_8cpp_html_ada4ba524268abb1d85d16fcb751e981d"><div class="ttname"><a href="SimpleSValBuilder_8cpp.html#ada4ba524268abb1d85d16fcb751e981d">isWithinConstantOverflowBounds</a></div><div class="ttdeci">static bool isWithinConstantOverflowBounds(SymbolRef Sym, ProgramStateRef State)</div><div class="ttdef"><b>Definition:</b> <a href="SimpleSValBuilder_8cpp_source.html#l00224">SimpleSValBuilder.cpp:224</a></div></div>
<div class="ttc" id="aSimpleSValBuilder_8cpp_html_a00f19a5423d393963cb7b3a2e0e03f66"><div class="ttname"><a href="SimpleSValBuilder_8cpp.html#a00f19a5423d393963cb7b3a2e0e03f66">isInRelation</a></div><div class="ttdeci">static bool isInRelation(BinaryOperator::Opcode Rel, SymbolRef Sym, llvm::APSInt Bound, ProgramStateRef State)</div><div class="ttdef"><b>Definition:</b> <a href="SimpleSValBuilder_8cpp_source.html#l00207">SimpleSValBuilder.cpp:207</a></div></div>
<div class="ttc" id="aInterp_8cpp_html_a7366213a28ea9f41665f7fd8752f4318"><div class="ttname"><a href="Interp_8cpp.html#a7366213a28ea9f41665f7fd8752f4318">Ret</a></div><div class="ttdeci">static bool Ret(InterpState &amp;S, CodePtr &amp;PC, APValue &amp;Result)</div><div class="ttdef"><b>Definition:</b> <a href="Interp_8cpp_source.html#l00034">Interp.cpp:34</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html_ab7d2b91f8648ca68c349ddb91ab80995"><div class="ttname"><a href="classclang_1_1BinaryOperator.html#ab7d2b91f8648ca68c349ddb91ab80995">clang::BinaryOperator::isAdditiveOp</a></div><div class="ttdeci">bool isAdditiveOp() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03947">Expr.h:3947</a></div></div>
<div class="ttc" id="anamespaceclang_1_1ento_html_a2c7edf92eaa5aa1cd9730c9c0e943f48"><div class="ttname"><a href="namespaceclang_1_1ento.html#a2c7edf92eaa5aa1cd9730c9c0e943f48">clang::ento::createSimpleSValBuilder</a></div><div class="ttdeci">SValBuilder * createSimpleSValBuilder(llvm::BumpPtrAllocator &amp;alloc, ASTContext &amp;context, ProgramStateManager &amp;stateMgr)</div><div class="ttdef"><b>Definition:</b> <a href="SimpleSValBuilder_8cpp_source.html#l00079">SimpleSValBuilder.cpp:79</a></div></div>
<div class="ttc" id="anamespaceclang_1_1ento_html_a4e45a121820f0d80d8910093dd33a1df"><div class="ttname"><a href="namespaceclang_1_1ento.html#a4e45a121820f0d80d8910093dd33a1df">clang::ento::ProgramStateRef</a></div><div class="ttdeci">IntrusiveRefCntPtr&lt; const ProgramState &gt; ProgramStateRef</div><div class="ttdef"><b>Definition:</b> <a href="ProgramState__Fwd_8h_source.html#l00037">ProgramState_Fwd.h:37</a></div></div>
<div class="ttc" id="aclassclang_1_1QualType_html"><div class="ttname"><a href="classclang_1_1QualType.html">clang::QualType</a></div><div class="ttdoc">A (possibly-)qualified type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00675">Type.h:675</a></div></div>
<div class="ttc" id="aSimpleSValBuilder_8cpp_html_abf55751a6b84ac5790b31dfc2d5a1973"><div class="ttname"><a href="SimpleSValBuilder_8cpp.html#abf55751a6b84ac5790b31dfc2d5a1973">evalBinOpFieldRegionFieldRegion</a></div><div class="ttdeci">static SVal evalBinOpFieldRegionFieldRegion(const FieldRegion *LeftFR, const FieldRegion *RightFR, BinaryOperator::Opcode op, QualType resultTy, SimpleSValBuilder &amp;SVB)</div><div class="ttdef"><b>Definition:</b> <a href="SimpleSValBuilder_8cpp_source.html#l00672">SimpleSValBuilder.cpp:672</a></div></div>
<div class="ttc" id="aSimpleSValBuilder_8cpp_html_a37bcced8cc1c2706a4c102004dab392e"><div class="ttname"><a href="SimpleSValBuilder_8cpp.html#a37bcced8cc1c2706a4c102004dab392e">doRearrangeUnchecked</a></div><div class="ttdeci">static NonLoc doRearrangeUnchecked(ProgramStateRef State, BinaryOperator::Opcode Op, SymbolRef LSym, llvm::APSInt LInt, SymbolRef RSym, llvm::APSInt RInt)</div><div class="ttdef"><b>Definition:</b> <a href="SimpleSValBuilder_8cpp_source.html#l00265">SimpleSValBuilder.cpp:265</a></div></div>
<div class="ttc" id="aclassclang_1_1FieldDecl_html"><div class="ttname"><a href="classclang_1_1FieldDecl.html">clang::FieldDecl</a></div><div class="ttdoc">Represents a member of a struct/union/class.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l02839">Decl.h:2839</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html_a7a6035c40e72a4b1d7d49ec91503f7c5"><div class="ttname"><a href="classclang_1_1BinaryOperator.html#a7a6035c40e72a4b1d7d49ec91503f7c5">clang::BinaryOperator::reverseComparisonOp</a></div><div class="ttdeci">static Opcode reverseComparisonOp(Opcode Opc)</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03979">Expr.h:3979</a></div></div>
<div class="ttc" id="anamespaceclang_1_1ento_html_a7b23a067324d14c5d493837dbc4fd8ca"><div class="ttname"><a href="namespaceclang_1_1ento.html#a7b23a067324d14c5d493837dbc4fd8ca">clang::ento::SymbolRef</a></div><div class="ttdeci">const SymExpr * SymbolRef</div><div class="ttdef"><b>Definition:</b> <a href="SymExpr_8h_source.html#l00110">SymExpr.h:110</a></div></div>
<div class="ttc" id="aclassllvm_1_1Optional_html"><div class="ttname"><a href="classllvm_1_1Optional.html">llvm::Optional</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVM_8h_source.html#l00040">LLVM.h:40</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a08a8d6c5fb67e56ace4f2ce305701781"><div class="ttname"><a href="classclang_1_1Type.html#a08a8d6c5fb67e56ace4f2ce305701781">clang::Type::isVoidType</a></div><div class="ttdeci">bool isVoidType() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07057">Type.h:7057</a></div></div>
<div class="ttc" id="anamespaceclang_1_1tooling_html_a4ffee664435dba78b2225a5457619b53"><div class="ttname"><a href="namespaceclang_1_1tooling.html#a4ffee664435dba78b2225a5457619b53">clang::tooling::X</a></div><div class="ttdeci">static ToolExecutorPluginRegistry::Add&lt; AllTUsToolExecutorPlugin &gt; X(&quot;all-TUs&quot;, &quot;Runs FrontendActions on all TUs in the compilation database. &quot; &quot;Tool results are stored in memory.&quot;)</div></div>
<div class="ttc" id="anamespaceclang_1_1ento_html_a91d63b0e82140f8d4670faef7f624062"><div class="ttname"><a href="namespaceclang_1_1ento.html#a91d63b0e82140f8d4670faef7f624062">clang::ento::SymSymExpr</a></div><div class="ttdeci">BinarySymExprImpl&lt; const SymExpr *, const SymExpr *, SymExpr::Kind::SymSymExprKind &gt; SymSymExpr</div><div class="ttdoc">Represents a symbolic expression like 'x' + 'y'.</div><div class="ttdef"><b>Definition:</b> <a href="SymbolManager_8h_source.html#l00415">SymbolManager.h:415</a></div></div>
<div class="ttc" id="aArrayBoundCheckerV2_8cpp_html_a0f5cc163e1c5feb0c0b0af79d4b4869a"><div class="ttname"><a href="ArrayBoundCheckerV2_8cpp.html#a0f5cc163e1c5feb0c0b0af79d4b4869a">getValue</a></div><div class="ttdeci">static SVal getValue(SVal val, SValBuilder &amp;svalBuilder)</div><div class="ttdef"><b>Definition:</b> <a href="ArrayBoundCheckerV2_8cpp_source.html#l00277">ArrayBoundCheckerV2.cpp:277</a></div></div>
<div class="ttc" id="aByteCodeEmitter_8cpp_html_abcdace8b2ec8db6d1a21f45f8a45e6fd"><div class="ttname"><a href="ByteCodeEmitter_8cpp.html#abcdace8b2ec8db6d1a21f45f8a45e6fd">APSInt</a></div><div class="ttdeci">llvm::APSInt APSInt</div><div class="ttdef"><b>Definition:</b> <a href="ByteCodeEmitter_8cpp_source.html#l00019">ByteCodeEmitter.cpp:19</a></div></div>
<div class="ttc" id="aASTContext_8h_html_ab1457e11becd51c5d0c750caab5446c2"><div class="ttname"><a href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a></div><div class="ttdeci">#define V(N, I)</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l03167">ASTContext.h:3167</a></div></div>
<div class="ttc" id="aSimpleSValBuilder_8cpp_html_a7a441dcd35f776da5a045a0b46fd8616"><div class="ttname"><a href="SimpleSValBuilder_8cpp.html#a7a441dcd35f776da5a045a0b46fd8616">decomposeSymbol</a></div><div class="ttdeci">static std::pair&lt; SymbolRef, llvm::APSInt &gt; decomposeSymbol(SymbolRef Sym, BasicValueFactory &amp;BV)</div><div class="ttdef"><b>Definition:</b> <a href="SimpleSValBuilder_8cpp_source.html#l00250">SimpleSValBuilder.cpp:250</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a113e0b9c6c21004ec048a350daa43c4a"><div class="ttname"><a href="classclang_1_1Type.html#a113e0b9c6c21004ec048a350daa43c4a">clang::Type::isSignedIntegerOrEnumerationType</a></div><div class="ttdeci">bool isSignedIntegerOrEnumerationType() const</div><div class="ttdoc">Determines whether this is an integer type that is signed or an enumeration types whose underlying ty...</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l02040">Type.cpp:2040</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html"><div class="ttname"><a href="classclang_1_1ASTContext.html">clang::ASTContext</a></div><div class="ttdoc">Holds long-lived AST nodes (such as types and decls) that can be referred to throughout the semantic ...</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l00208">ASTContext.h:208</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_aa7a28eab5ee69542aff5b8216ed77046"><div class="ttname"><a href="classclang_1_1ASTContext.html#aa7a28eab5ee69542aff5b8216ed77046">clang::ASTContext::getTypeSize</a></div><div class="ttdeci">uint64_t getTypeSize(QualType T) const</div><div class="ttdoc">Return the size of the specified (complete) type T, in bits.</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l02282">ASTContext.h:2282</a></div></div>
<div class="ttc" id="aSimpleSValBuilder_8cpp_html_a868022f818da39e0a5c9f8fb01ce8360"><div class="ttname"><a href="SimpleSValBuilder_8cpp.html#a868022f818da39e0a5c9f8fb01ce8360">shouldRearrange</a></div><div class="ttdeci">static bool shouldRearrange(ProgramStateRef State, BinaryOperator::Opcode Op, SymbolRef Sym, llvm::APSInt Int, QualType Ty)</div><div class="ttdef"><b>Definition:</b> <a href="SimpleSValBuilder_8cpp_source.html#l00332">SimpleSValBuilder.cpp:332</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a56c474868f4027b847f181f99b226f47"><div class="ttname"><a href="classclang_1_1Type.html#a56c474868f4027b847f181f99b226f47">clang::Type::getPointeeType</a></div><div class="ttdeci">QualType getPointeeType() const</div><div class="ttdoc">If this is a pointer, ObjC object pointer, or block pointer, this returns the respective pointee.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00625">Type.cpp:625</a></div></div>
<div class="ttc" id="anamespaceclang_1_1interp_html_adf26e3e32de986fab3e1a884d29de1e8"><div class="ttname"><a href="namespaceclang_1_1interp.html#adf26e3e32de986fab3e1a884d29de1e8">clang::interp::Const</a></div><div class="ttdeci">bool Const(InterpState &amp;S, CodePtr OpPC, const T &amp;Arg)</div><div class="ttdef"><b>Definition:</b> <a href="Interp_8h_source.html#l00296">Interp.h:296</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html_a6fb3d0cabdc29abc18eca219c1424037"><div class="ttname"><a href="classclang_1_1BinaryOperator.html#a6fb3d0cabdc29abc18eca219c1424037">clang::BinaryOperator::negateComparisonOp</a></div><div class="ttdeci">static Opcode negateComparisonOp(Opcode Opc)</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03966">Expr.h:3966</a></div></div>
<div class="ttc" id="anamespaceclang_1_1prec_html_a9bfbe31f4770359ea44ad42e7c7ed8ffa64fff8a92fc84c1785af8cc47b4025ac"><div class="ttname"><a href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffa64fff8a92fc84c1785af8cc47b4025ac">clang::prec::PointerToMember</a></div><div class="ttdeci">@ PointerToMember</div><div class="ttdef"><b>Definition:</b> <a href="OperatorPrecedence_8h_source.html#l00042">OperatorPrecedence.h:42</a></div></div>
<div class="ttc" id="aStaticAnalyzer_2README_8txt_html_a1a264b3e48bda8ea3bed83698db8dca7"><div class="ttname"><a href="StaticAnalyzer_2README_8txt.html#a1a264b3e48bda8ea3bed83698db8dca7">state</a></div><div class="ttdeci">and static some checkers Checker The latter are built on top of the former via the Checker and CheckerVisitor and attempts to isolate them from much of the gore of the internal analysis the analyzer is basically a source code simulator that traces out possible paths of execution The state of the and the combination of state and program point is a node in an exploded which has the entry program point and initial state</div><div class="ttdef"><b>Definition:</b> <a href="StaticAnalyzer_2README_8txt_source.html#l00030">README.txt:30</a></div></div>
<div class="ttc" id="aclassclang_1_1ento_1_1SValBuilder_html"><div class="ttname"><a href="classclang_1_1ento_1_1SValBuilder.html">clang::ento::SValBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="SValBuilder_8h_source.html#l00053">SValBuilder.h:53</a></div></div>
<div class="ttc" id="anamespaceclang_1_1ento_html_a6d0c7b6393b49be0b0b6bee5ffb6e6e4"><div class="ttname"><a href="namespaceclang_1_1ento.html#a6d0c7b6393b49be0b0b6bee5ffb6e6e4">clang::ento::IntSymExpr</a></div><div class="ttdeci">BinarySymExprImpl&lt; const llvm::APSInt &amp;, const SymExpr *, SymExpr::Kind::IntSymExprKind &gt; IntSymExpr</div><div class="ttdoc">Represents a symbolic expression like 3 - 'x'.</div><div class="ttdef"><b>Definition:</b> <a href="SymbolManager_8h_source.html#l00411">SymbolManager.h:411</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a485732164c40553bb323c58f5e8bf7a7"><div class="ttname"><a href="classclang_1_1ASTContext.html#a485732164c40553bb323c58f5e8bf7a7">clang::ASTContext::VoidPtrTy</a></div><div class="ttdeci">CanQualType VoidPtrTy</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l01119">ASTContext.h:1119</a></div></div>
<div class="ttc" id="aclassclang_1_1ento_1_1ProgramStateManager_html"><div class="ttname"><a href="classclang_1_1ento_1_1ProgramStateManager.html">clang::ento::ProgramStateManager</a></div><div class="ttdef"><b>Definition:</b> <a href="ProgramState_8h_source.html#l00461">ProgramState.h:461</a></div></div>
<div class="ttc" id="anamespaceclang_1_1ento_html_a5ad9f2578b4189b78e7fadc567534263"><div class="ttname"><a href="namespaceclang_1_1ento.html#a5ad9f2578b4189b78e7fadc567534263">clang::ento::SymIntExpr</a></div><div class="ttdeci">BinarySymExprImpl&lt; const SymExpr *, const llvm::APSInt &amp;, SymExpr::Kind::SymIntExprKind &gt; SymIntExpr</div><div class="ttdoc">Represents a symbolic expression like 'x' + 3.</div><div class="ttdef"><b>Definition:</b> <a href="SymbolManager_8h_source.html#l00407">SymbolManager.h:407</a></div></div>
<div class="ttc" id="aSValBuilder_8h_html"><div class="ttname"><a href="SValBuilder_8h.html">SValBuilder.h</a></div></div>
<div class="ttc" id="aclassclang_1_1RecordDecl_html_a5e73db3d805697af36d80739d55369ec"><div class="ttname"><a href="classclang_1_1RecordDecl.html#a5e73db3d805697af36d80739d55369ec">clang::RecordDecl::fields</a></div><div class="ttdeci">field_range fields() const</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l04105">Decl.h:4105</a></div></div>
<div class="ttc" id="aclassclang_1_1QualType_html_a54127635d2ca4754e91ee96b594eff74"><div class="ttname"><a href="classclang_1_1QualType.html#a54127635d2ca4754e91ee96b594eff74">clang::QualType::isNull</a></div><div class="ttdeci">bool isNull() const</div><div class="ttdoc">Return true if this QualType doesn't point to a type yet.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00740">Type.h:740</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html_a33fda07ee14ef1edbec22085be9b44d6"><div class="ttname"><a href="classclang_1_1BinaryOperator.html#a33fda07ee14ef1edbec22085be9b44d6">clang::BinaryOperator::isComparisonOp</a></div><div class="ttdeci">bool isComparisonOp() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03961">Expr.h:3961</a></div></div>
<div class="ttc" id="aUnwrappedLineFormatter_8cpp_html_a83e9e4ff6cb05dbdf72ab2a01aa289c0"><div class="ttname"><a href="UnwrappedLineFormatter_8cpp.html#a83e9e4ff6cb05dbdf72ab2a01aa289c0">State</a></div><div class="ttdeci">LineState State</div><div class="ttdef"><b>Definition:</b> <a href="UnwrappedLineFormatter_8cpp_source.html#l01083">UnwrappedLineFormatter.cpp:1083</a></div></div>
<div class="ttc" id="aAPSIntType_8h_html"><div class="ttname"><a href="APSIntType_8h.html">APSIntType.h</a></div></div>
<div class="ttc" id="anamespaceclang_html_a443b552ee80020cfeb2b86c99e7f85e1"><div class="ttname"><a href="namespaceclang.html#a443b552ee80020cfeb2b86c99e7f85e1">clang::BinaryOperatorKind</a></div><div class="ttdeci">BinaryOperatorKind</div><div class="ttdef"><b>Definition:</b> <a href="OperationKinds_8h_source.html#l00025">OperationKinds.h:25</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a096577dc2c0e924586ad954a1f99e671"><div class="ttname"><a href="classclang_1_1Type.html#a096577dc2c0e924586ad954a1f99e671">clang::Type::isBooleanType</a></div><div class="ttdeci">bool isBooleanType() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07173">Type.h:7173</a></div></div>
<div class="ttc" id="aProgramState_8h_html"><div class="ttname"><a href="ProgramState_8h.html">ProgramState.h</a></div></div>
<div class="ttc" id="aSimpleSValBuilder_8cpp_html_a6d87535d2b88a9526c616bfded70646d"><div class="ttname"><a href="SimpleSValBuilder_8cpp.html#a6d87535d2b88a9526c616bfded70646d">tryRearrange</a></div><div class="ttdeci">static Optional&lt; NonLoc &gt; tryRearrange(ProgramStateRef State, BinaryOperator::Opcode Op, NonLoc Lhs, NonLoc Rhs, QualType ResultTy)</div><div class="ttdef"><b>Definition:</b> <a href="SimpleSValBuilder_8cpp_source.html#l00340">SimpleSValBuilder.cpp:340</a></div></div>
<div class="ttc" id="aExprEngine_8h_html"><div class="ttname"><a href="ExprEngine_8h.html">ExprEngine.h</a></div></div>
<div class="ttc" id="aclassclang_1_1FieldDecl_html_ac2498104ca816f4fc20a31e010db531d"><div class="ttname"><a href="classclang_1_1FieldDecl.html#ac2498104ca816f4fc20a31e010db531d">clang::FieldDecl::getParent</a></div><div class="ttdeci">const RecordDecl * getParent() const</div><div class="ttdoc">Returns the parent of this field declaration, which is the struct in which this field is defined.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l03031">Decl.h:3031</a></div></div>
<div class="ttc" id="anamespaceclang_html"><div class="ttname"><a href="namespaceclang.html">clang</a></div><div class="ttdef"><b>Definition:</b> <a href="CalledOnceCheck_8h_source.html#l00017">CalledOnceCheck.h:17</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_acec6a1ac593ef9b1805529f25dd32b12"><div class="ttname"><a href="classclang_1_1Type.html#acec6a1ac593ef9b1805529f25dd32b12">clang::Type::isAnyPointerType</a></div><div class="ttdeci">bool isAnyPointerType() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l06754">Type.h:6754</a></div></div>
<div class="ttc" id="aclassclang_1_1IndirectFieldDecl_html"><div class="ttname"><a href="classclang_1_1IndirectFieldDecl.html">clang::IndirectFieldDecl</a></div><div class="ttdoc">Represents a field injected from an anonymous union/struct into the parent scope.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l03093">Decl.h:3093</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html_a894267e5afe54fdc4c933c0033df8883"><div class="ttname"><a href="classclang_1_1BinaryOperator.html#a894267e5afe54fdc4c933c0033df8883">clang::BinaryOperator::isShiftOp</a></div><div class="ttdeci">bool isShiftOp() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03949">Expr.h:3949</a></div></div>
<div class="ttc" id="aSValVisitor_8h_html"><div class="ttname"><a href="SValVisitor_8h.html">SValVisitor.h</a></div></div>
<div class="ttc" id="aclassclang_1_1RecordDecl_html"><div class="ttname"><a href="classclang_1_1RecordDecl.html">clang::RecordDecl</a></div><div class="ttdoc">Represents a struct/union/class.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l03885">Decl.h:3885</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a58b6f352a1bd0963e500a4e902c4e74c"><div class="ttname"><a href="classclang_1_1Type.html#a58b6f352a1bd0963e500a4e902c4e74c">clang::Type::isIntegralOrEnumerationType</a></div><div class="ttdeci">bool isIntegralOrEnumerationType() const</div><div class="ttdoc">Determine whether this type is an integral or enumeration type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07160">Type.h:7160</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 4 2022 01:35:55 for clang by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
