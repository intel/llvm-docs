<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>clang: lib/CodeGen/CodeGenPGO.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">clang
   &#160;<span id="projectnumber">19.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CodeGenPGO.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CodeGenPGO_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===--- CodeGenPGO.cpp - PGO Instrumentation for LLVM CodeGen --*- C++ -*-===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// Instrumentation-based profile-guided optimization</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGenPGO_8h.html">CodeGenPGO.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGenFunction_8h.html">CodeGenFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CoverageMappingGen_8h.html">CoverageMappingGen.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RecursiveASTVisitor_8h.html">clang/AST/RecursiveASTVisitor.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StmtVisitor_8h.html">clang/AST/StmtVisitor.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/Intrinsics.h&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;llvm/IR/MDBuilder.h&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;llvm/Support/CommandLine.h&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;llvm/Support/Endian.h&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;llvm/Support/FileSystem.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;llvm/Support/MD5.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;optional&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacellvm.html">llvm</a> {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">extern</span> cl::opt&lt;bool&gt; <a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">EnableSingleByteCoverage</a>;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;} <span class="comment">// namespace llvm</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">static</span> llvm::cl::opt&lt;bool&gt;</div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="CodeGenPGO_8cpp.html#a89ab0f7404b3b6c4922fccc675c20b67">   31</a></span>&#160;    <a class="code" href="CodeGenPGO_8cpp.html#a89ab0f7404b3b6c4922fccc675c20b67">EnableValueProfiling</a>(<span class="stringliteral">&quot;enable-value-profiling&quot;</span>,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                         llvm::cl::desc(<span class="stringliteral">&quot;Enable value profiling&quot;</span>),</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                         llvm::cl::Hidden, llvm::cl::init(<span class="keyword">false</span>));</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160; </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">extern</span> llvm::cl::opt&lt;bool&gt; <a class="code" href="CodeGenPGO_8cpp.html#aac70704dede76a64b7347031e4fd990a">SystemHeadersCoverage</a>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceclang.html">clang</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">using namespace </span>CodeGen;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keywordtype">void</span> CodeGenPGO::setFuncName(StringRef Name,</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                             llvm::GlobalValue::LinkageTypes <a class="code" href="namespaceclang.html#a6cb4fc7755d8dccec57b672a2c83b5ce">Linkage</a>) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  llvm::IndexedInstrProfReader *PGOReader = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6aec167a8fbc040d3965669313df36c1">getPGOReader</a>();</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  FuncName = llvm::getPGOFuncName(</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;      Name, <a class="code" href="namespaceclang.html#a6cb4fc7755d8dccec57b672a2c83b5ce">Linkage</a>, CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().<a class="code" href="classclang_1_1CodeGenOptions.html#a7c94a9c3d9c6708972867f4aba7ffe33">MainFileName</a>,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      PGOReader ? PGOReader-&gt;getVersion() : llvm::IndexedInstrProf::Version);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="comment">// If we&#39;re generating a profile, create a variable for the name.</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">if</span> (CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().<a class="code" href="classclang_1_1CodeGenOptions.html#a669d55f4c690e9e5e6a5060468429955">hasProfileClangInstr</a>())</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    FuncNameVar = llvm::createPGOFuncNameVar(CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), <a class="code" href="namespaceclang.html#a6cb4fc7755d8dccec57b672a2c83b5ce">Linkage</a>, FuncName);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="keywordtype">void</span> CodeGenPGO::setFuncName(llvm::Function *Fn) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  setFuncName(Fn-&gt;getName(), Fn-&gt;getLinkage());</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <span class="comment">// Create PGOFuncName meta data.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  llvm::createPGOFuncNameMetadata(*Fn, FuncName);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">/// The version of the PGO hash algorithm.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">   59</a></span>&#160;<span class="comment"></span><span class="keyword">enum</span> <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">PGOHashVersion</a> : <span class="keywordtype">unsigned</span> {</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">   60</a></span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a>,</div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15afccb5f2d78f540f3f2b2f1421bf63037">   61</a></span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15afccb5f2d78f540f3f2b2f1421bf63037">PGO_HASH_V2</a>,</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15ab67dbfd8a3de0ff97ef69a0fcd81c537">   62</a></span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15ab67dbfd8a3de0ff97ef69a0fcd81c537">PGO_HASH_V3</a>,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// Keep this set to the latest hash version.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a3ebf516548cdd44420f7ff61749fc4df">PGO_HASH_LATEST</a> = <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15ab67dbfd8a3de0ff97ef69a0fcd81c537">PGO_HASH_V3</a></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a3ebf516548cdd44420f7ff61749fc4df">   66</a></span>&#160;};</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/// Stable hasher for PGO region counters.</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/// PGOHash produces a stable hash of a given function&#39;s control flow.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">/// Changing the output of this hash will invalidate all previously generated</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">/// profiles -- i.e., don&#39;t do it.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">/// \note  When this hash does eventually change (years?), we still need to</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">/// support old hashes.  We&#39;ll need to pull in the version number from the</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/// profile data format and use the matching hash function.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"></span><span class="keyword">class </span>PGOHash {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> Working;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordtype">unsigned</span> Count;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">PGOHashVersion</a> HashVersion;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  llvm::MD5 MD5;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> NumBitsPerType = 6;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> NumTypesPerWord = <span class="keyword">sizeof</span>(<a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a>) * 8 / NumBitsPerType;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> TooBig = 1u &lt;&lt; NumBitsPerType;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">  /// Hash values for AST nodes.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">  /// Distinct values for AST nodes that have region counters attached.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">  /// These values must be stable.  All new members must be added at the end,</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">  /// and no members should be removed.  Changing the enumeration value for an</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">  /// AST node will affect the hash of every function that contains that node.</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"></span>  <span class="keyword">enum</span> HashType : <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="namespaceclang_1_1XRayInstrKind.html#a74957f939e9c2b26d53095846a926c34">None</a> = 0,</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="classclang_1_1LabelStmt.html">LabelStmt</a> = 1,</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classclang_1_1WhileStmt.html">WhileStmt</a>,</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="classclang_1_1DoStmt.html">DoStmt</a>,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classclang_1_1ForStmt.html">ForStmt</a>,</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="classclang_1_1CXXForRangeStmt.html">CXXForRangeStmt</a>,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classclang_1_1ObjCForCollectionStmt.html">ObjCForCollectionStmt</a>,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="classclang_1_1SwitchStmt.html">SwitchStmt</a>,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="classclang_1_1CaseStmt.html">CaseStmt</a>,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="classclang_1_1DefaultStmt.html">DefaultStmt</a>,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classclang_1_1IfStmt.html">IfStmt</a>,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="classclang_1_1CXXTryStmt.html">CXXTryStmt</a>,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classclang_1_1CXXCatchStmt.html">CXXCatchStmt</a>,</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="classclang_1_1ConditionalOperator.html">ConditionalOperator</a>,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    BinaryOperatorLAnd,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    BinaryOperatorLOr,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="classclang_1_1BinaryConditionalOperator.html">BinaryConditionalOperator</a>,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// The preceding values are available with PGO_HASH_V1.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    EndOfScope,</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    IfThenBranch,</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    IfElseBranch,</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="classclang_1_1GotoStmt.html">GotoStmt</a>,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="classclang_1_1IndirectGotoStmt.html">IndirectGotoStmt</a>,</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="classclang_1_1BreakStmt.html">BreakStmt</a>,</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="classclang_1_1ContinueStmt.html">ContinueStmt</a>,</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <a class="code" href="classclang_1_1ReturnStmt.html">ReturnStmt</a>,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    ThrowExpr,</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    UnaryOperatorLNot,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    BinaryOperatorLT,</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    BinaryOperatorGT,</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    BinaryOperatorLE,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    BinaryOperatorGE,</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    BinaryOperatorEQ,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    BinaryOperatorNE,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// The preceding values are available since PGO_HASH_V2.</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="comment">// Keep this last.  It&#39;s for the static assert that follows.</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    LastHashType</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  };</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  static_assert(LastHashType &lt;= TooBig, <span class="stringliteral">&quot;Too many types in HashType&quot;</span>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  PGOHash(<a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">PGOHashVersion</a> HashVersion)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      : Working(0), Count(0), HashVersion(HashVersion) {}</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="keywordtype">void</span> combine(HashType <a class="code" href="classclang_1_1Type.html">Type</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> <a class="code" href="namespaceclang.html#addb9e36a0528443df269a65ef2ed0634">finalize</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">PGOHashVersion</a> getHashVersion()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> HashVersion; }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;};</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> PGOHash::NumBitsPerType;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keyword">const</span> <span class="keywordtype">unsigned</span> PGOHash::NumTypesPerWord;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keyword">const</span> <span class="keywordtype">unsigned</span> PGOHash::TooBig;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">/// Get the PGO hash version used in the given indexed profile.</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">PGOHashVersion</a> getPGOHashVersion(llvm::IndexedInstrProfReader *PGOReader,</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                                        <a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM) {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">if</span> (PGOReader-&gt;getVersion() &lt;= 4)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">if</span> (PGOReader-&gt;getVersion() &lt;= 5)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15afccb5f2d78f540f3f2b2f1421bf63037">PGO_HASH_V2</a>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15ab67dbfd8a3de0ff97ef69a0fcd81c537">PGO_HASH_V3</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">/// A RecursiveASTVisitor that fills a map of statements to PGO counters.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment"></span><span class="keyword">struct </span>MapRegionCounters : <span class="keyword">public</span> <a class="code" href="classclang_1_1RecursiveASTVisitor.html">RecursiveASTVisitor</a>&lt;MapRegionCounters&gt; {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keyword">using</span> <a class="code" href="classBase.html">Base</a> = <a class="code" href="classclang_1_1RecursiveASTVisitor.html">RecursiveASTVisitor&lt;MapRegionCounters&gt;</a>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">  /// The next counter value to assign.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> NextCounter;<span class="comment"></span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">  /// The function hash.</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment"></span>  PGOHash Hash;<span class="comment"></span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">  /// The map of statements to counters.</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment"></span>  llvm::DenseMap&lt;const Stmt *, unsigned&gt; &amp;CounterMap;<span class="comment"></span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">  /// The next bitmap byte index to assign.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> NextMCDCBitmapIdx;<span class="comment"></span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">  /// The state of MC/DC Coverage in this function.</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment"></span>  <a class="code" href="structclang_1_1CodeGen_1_1MCDC_1_1State.html">MCDC::State</a> &amp;MCDCState;<span class="comment"></span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">  /// Maximum number of supported MC/DC conditions in a boolean expression.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> MCDCMaxCond;<span class="comment"></span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">  /// The profile version.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment"></span>  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ProfileVersion;<span class="comment"></span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">  /// Diagnostics Engine used to report warnings.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment"></span>  <a class="code" href="classclang_1_1DiagnosticsEngine.html">DiagnosticsEngine</a> &amp;<a class="code" href="LiteralSupport_8cpp.html#a5f4a4a29292c4a1697226abf1d22b9dd">Diag</a>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  MapRegionCounters(<a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">PGOHashVersion</a> HashVersion, <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ProfileVersion,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    llvm::DenseMap&lt;const Stmt *, unsigned&gt; &amp;CounterMap,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    <a class="code" href="structclang_1_1CodeGen_1_1MCDC_1_1State.html">MCDC::State</a> &amp;MCDCState, <span class="keywordtype">unsigned</span> MCDCMaxCond,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    <a class="code" href="classclang_1_1DiagnosticsEngine.html">DiagnosticsEngine</a> &amp;<a class="code" href="LiteralSupport_8cpp.html#a5f4a4a29292c4a1697226abf1d22b9dd">Diag</a>)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      : NextCounter(0), Hash(HashVersion), CounterMap(CounterMap),</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        NextMCDCBitmapIdx(0), MCDCState(MCDCState), MCDCMaxCond(MCDCMaxCond),</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        ProfileVersion(ProfileVersion), <a class="code" href="LiteralSupport_8cpp.html#a5f4a4a29292c4a1697226abf1d22b9dd">Diag</a>(<a class="code" href="LiteralSupport_8cpp.html#a5f4a4a29292c4a1697226abf1d22b9dd">Diag</a>) {}</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <span class="comment">// Blocks and lambdas are handled as separate functions, so we need not</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// traverse them in the parent context.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordtype">bool</span> TraverseBlockExpr(<a class="code" href="classclang_1_1BlockExpr.html">BlockExpr</a> *BE) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordtype">bool</span> TraverseLambdaExpr(<a class="code" href="classclang_1_1LambdaExpr.html">LambdaExpr</a> *<a class="code" href="namespaceclang_1_1interp.html#a78c22da8b8a5d7be2b50556e77390657">LE</a>) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// Traverse the captures, but not the body.</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> C : zip(<a class="code" href="namespaceclang_1_1interp.html#a78c22da8b8a5d7be2b50556e77390657">LE</a>-&gt;captures(), <a class="code" href="namespaceclang_1_1interp.html#a78c22da8b8a5d7be2b50556e77390657">LE</a>-&gt;capture_inits()))</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      TraverseLambdaCapture(<a class="code" href="namespaceclang_1_1interp.html#a78c22da8b8a5d7be2b50556e77390657">LE</a>, &amp;std::get&lt;0&gt;(C), std::get&lt;1&gt;(C));</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordtype">bool</span> TraverseCapturedStmt(<a class="code" href="classclang_1_1CapturedStmt.html">CapturedStmt</a> *CS) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">bool</span> VisitDecl(<span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">switch</span> (D-&gt;<a class="code" href="classclang_1_1Decl.html#aedd1ee920162f9a35e8d249a4926d9d5">getKind</a>()) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">case</span> Decl::Function:</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">case</span> Decl::CXXMethod:</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">case</span> Decl::CXXConstructor:</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">case</span> Decl::CXXDestructor:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordflow">case</span> Decl::CXXConversion:</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">case</span> Decl::ObjCMethod:</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="HTMLLogger_8cpp.html#a25544cda03353a1bf51de8223e358ae8">Decl::Block</a>:</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">case</span> Decl::Captured:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      CounterMap[D-&gt;<a class="code" href="classclang_1_1Decl.html#a3fea7c6b02a9f1f5ef8b9a2f16f02342">getBody</a>()] = NextCounter++;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">  /// If \p S gets a fresh counter, update the counter mappings. Return the</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">  /// V1 hash of \p S.</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"></span>  PGOHash::HashType updateCounterMappings(<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S) {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keyword">auto</span> <a class="code" href="classclang_1_1Type.html">Type</a> = getHashType(<a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a>, S);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1Type.html">Type</a> != <a class="code" href="namespaceclang_1_1XRayInstrKind.html#a74957f939e9c2b26d53095846a926c34">PGOHash::None</a>)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      CounterMap[S] = NextCounter++;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classclang_1_1Type.html">Type</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">  /// The following stacks are used with dataTraverseStmtPre() and</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">  /// dataTraverseStmtPost() to track the depth of nested logical operators in a</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">  /// boolean expression in a function.  The ultimate purpose is to keep track</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">  /// of the number of leaf-level conditions in the boolean expression so that a</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">  /// profile bitmap can be allocated based on that number.</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">  ///</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">  /// The stacks are also used to find error cases and notify the user.  A</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">  /// standard logical operator nest for a boolean expression could be in a form</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">  /// similar to this: &quot;x = a &amp;&amp; b &amp;&amp; c &amp;&amp; (d || f)&quot;</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment"></span>  <span class="keywordtype">unsigned</span> NumCond = 0;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordtype">bool</span> SplitNestedLogicalOp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const Stmt *, 16&gt;</a> NonLogOpStack;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;const BinaryOperator *, 16&gt;</a> LogOpStack;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="comment">// Hook: dataTraverseStmtPre() is invoked prior to visiting an AST Stmt node.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="keywordtype">bool</span> dataTraverseStmtPre(<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S) {<span class="comment"></span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">    /// If MC/DC is not enabled, MCDCMaxCond will be set to 0. Do nothing.</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment"></span>    <span class="keywordflow">if</span> (MCDCMaxCond == 0)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">    /// At the top of the logical operator nest, reset the number of conditions,</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">    /// also forget previously seen split nesting cases.</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span>    <span class="keywordflow">if</span> (LogOpStack.empty()) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      NumCond = 0;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      SplitNestedLogicalOp = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160; </div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *E = dyn_cast&lt;Expr&gt;(S)) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <span class="keyword">const</span> <a class="code" href="classclang_1_1BinaryOperator.html">BinaryOperator</a> *BinOp = dyn_cast&lt;BinaryOperator&gt;(E-&gt;IgnoreParens());</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">if</span> (BinOp &amp;&amp; BinOp-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#a0149731b48b397fabc77b60bca65c6c6">isLogicalOp</a>()) {<span class="comment"></span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">        /// Check for &quot;split-nested&quot; logical operators. This happens when a new</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">        /// boolean expression logical-op nest is encountered within an existing</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">        /// boolean expression, separated by a non-logical operator.  For</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">        /// example, in &quot;x = (a &amp;&amp; b &amp;&amp; c &amp;&amp; foo(d &amp;&amp; f))&quot;, the &quot;d &amp;&amp; f&quot; case</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">        /// starts a new boolean expression that is separated from the other</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">        /// conditions by the operator foo(). Split-nested cases are not</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">        /// supported by MC/DC.</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span>        SplitNestedLogicalOp = SplitNestedLogicalOp || !NonLogOpStack.empty();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160; </div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        LogOpStack.push_back(BinOp);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">    /// Keep track of non-logical operators. These are OK as long as we don&#39;t</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">    /// encounter a new logical operator after seeing one.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment"></span>    <span class="keywordflow">if</span> (!LogOpStack.empty())</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      NonLogOpStack.push_back(S);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="comment">// Hook: dataTraverseStmtPost() is invoked by the AST visitor after visiting</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="comment">// an AST Stmt node.  MC/DC will use it to to signal when the top of a</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="comment">// logical operation (boolean expression) nest is encountered.</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordtype">bool</span> dataTraverseStmtPost(<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S) {<span class="comment"></span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    /// If MC/DC is not enabled, MCDCMaxCond will be set to 0. Do nothing.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span>    <span class="keywordflow">if</span> (MCDCMaxCond == 0)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *E = dyn_cast&lt;Expr&gt;(S)) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keyword">const</span> <a class="code" href="classclang_1_1BinaryOperator.html">BinaryOperator</a> *BinOp = dyn_cast&lt;BinaryOperator&gt;(E-&gt;IgnoreParens());</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">if</span> (BinOp &amp;&amp; BinOp-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#a0149731b48b397fabc77b60bca65c6c6">isLogicalOp</a>()) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        assert(LogOpStack.back() == BinOp);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        LogOpStack.pop_back();</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">        /// At the top of logical operator nest:</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"></span>        <span class="keywordflow">if</span> (LogOpStack.empty()) {<span class="comment"></span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">          /// Was the &quot;split-nested&quot; logical operator case encountered?</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment"></span>          <span class="keywordflow">if</span> (SplitNestedLogicalOp) {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordtype">unsigned</span> DiagID = <a class="code" href="LiteralSupport_8cpp.html#a5f4a4a29292c4a1697226abf1d22b9dd">Diag</a>.getCustomDiagID(</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <a class="code" href="classclang_1_1DiagnosticsEngine.html#a94e5078973aa3a34432e91f3b26263e0a43d23a1b8f299eab8b805b238407d3ae">DiagnosticsEngine::Warning</a>,</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="stringliteral">&quot;unsupported MC/DC boolean expression; &quot;</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="stringliteral">&quot;contains an operation with a nested boolean expression. &quot;</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <span class="stringliteral">&quot;Expression will not be covered&quot;</span>);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            <a class="code" href="LiteralSupport_8cpp.html#a5f4a4a29292c4a1697226abf1d22b9dd">Diag</a>.Report(S-&gt;getBeginLoc(), DiagID);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;          }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">          /// Was the maximum number of conditions encountered?</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"></span>          <span class="keywordflow">if</span> (NumCond &gt; MCDCMaxCond) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            <span class="keywordtype">unsigned</span> DiagID = <a class="code" href="LiteralSupport_8cpp.html#a5f4a4a29292c4a1697226abf1d22b9dd">Diag</a>.getCustomDiagID(</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <a class="code" href="classclang_1_1DiagnosticsEngine.html#a94e5078973aa3a34432e91f3b26263e0a43d23a1b8f299eab8b805b238407d3ae">DiagnosticsEngine::Warning</a>,</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="stringliteral">&quot;unsupported MC/DC boolean expression; &quot;</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <span class="stringliteral">&quot;number of conditions (%0) exceeds max (%1). &quot;</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="stringliteral">&quot;Expression will not be covered&quot;</span>);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            <a class="code" href="LiteralSupport_8cpp.html#a5f4a4a29292c4a1697226abf1d22b9dd">Diag</a>.Report(S-&gt;getBeginLoc(), DiagID) &lt;&lt; NumCond &lt;&lt; MCDCMaxCond;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          }</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;          <span class="comment">// Otherwise, allocate the number of bytes required for the bitmap</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;          <span class="comment">// based on the number of conditions. Must be at least 1-byte long.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;          MCDCState.<a class="code" href="structclang_1_1CodeGen_1_1MCDC_1_1State.html#a7f0ed383ba2a85013124d49c07206b40">DecisionByStmt</a>[BinOp].BitmapIdx = NextMCDCBitmapIdx;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;          <span class="keywordtype">unsigned</span> SizeInBits = std::max&lt;unsigned&gt;(1L &lt;&lt; NumCond, <a class="code" href="limits_8h.html#a308d9dd2c0028ddb184b455bbd7865de">CHAR_BIT</a>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;          NextMCDCBitmapIdx += SizeInBits / <a class="code" href="limits_8h.html#a308d9dd2c0028ddb184b455bbd7865de">CHAR_BIT</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160; </div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">if</span> (!LogOpStack.empty())</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      NonLogOpStack.pop_back();</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">  /// The RHS of all logical operators gets a fresh counter in order to count</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">  /// how many times the RHS evaluates to true or false, depending on the</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">  /// semantics of the operator. This is only valid for &quot;&gt;= v7&quot; of the profile</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">  /// version so that we facilitate backward compatibility. In addition, in</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">  /// order to use MC/DC, count the number of total LHS and RHS conditions.</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> VisitBinaryOperator(<a class="code" href="classclang_1_1BinaryOperator.html">BinaryOperator</a> *S) {</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (S-&gt;isLogicalOp()) {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a7166105d572c27fff3daa90912cbf25b">CodeGenFunction::isInstrumentedCondition</a>(S-&gt;getLHS()))</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        NumCond++;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a7166105d572c27fff3daa90912cbf25b">CodeGenFunction::isInstrumentedCondition</a>(S-&gt;getRHS())) {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keywordflow">if</span> (ProfileVersion &gt;= llvm::IndexedInstrProf::Version7)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;          CounterMap[S-&gt;getRHS()] = NextCounter++;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        NumCond++;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    }</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">return</span> Base::VisitBinaryOperator(S);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keywordtype">bool</span> VisitConditionalOperator(<a class="code" href="classclang_1_1ConditionalOperator.html">ConditionalOperator</a> *S) {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a> &amp;&amp; S-&gt;getTrueExpr())</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      CounterMap[S-&gt;getTrueExpr()] = NextCounter++;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a> &amp;&amp; S-&gt;getFalseExpr())</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      CounterMap[S-&gt;getFalseExpr()] = NextCounter++;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">return</span> Base::VisitConditionalOperator(S);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">  /// Include \p S in the function hash.</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> VisitStmt(<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keyword">auto</span> <a class="code" href="classclang_1_1Type.html">Type</a> = updateCounterMappings(S);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span> (Hash.getHashVersion() != <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a>)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="classclang_1_1Type.html">Type</a> = getHashType(Hash.getHashVersion(), S);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1Type.html">Type</a> != <a class="code" href="namespaceclang_1_1XRayInstrKind.html#a74957f939e9c2b26d53095846a926c34">PGOHash::None</a>)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      Hash.combine(<a class="code" href="classclang_1_1Type.html">Type</a>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordtype">bool</span> TraverseIfStmt(<a class="code" href="classclang_1_1IfStmt.html">IfStmt</a> *If) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// If we used the V1 hash, use the default traversal.</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span> (Hash.getHashVersion() == <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a>)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">return</span> Base::TraverseIfStmt(If);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="comment">// When single byte coverage mode is enabled, add a counter to then and</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// else.</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">bool</span> NoSingleByteCoverage = !<a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a>;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *CS : <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639">If</a>-&gt;children()) {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">if</span> (!CS || NoSingleByteCoverage)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">if</span> (CS == <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639">If</a>-&gt;getThen())</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        CounterMap[<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639">If</a>-&gt;getThen()] = NextCounter++;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CS == <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639">If</a>-&gt;getElse())</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        CounterMap[<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639">If</a>-&gt;getElse()] = NextCounter++;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="comment">// Otherwise, keep track of which branch we&#39;re in while traversing.</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    VisitStmt(If);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *CS : <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639">If</a>-&gt;children()) {</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <span class="keywordflow">if</span> (!CS)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <span class="keywordflow">if</span> (CS == <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639">If</a>-&gt;getThen())</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        Hash.combine(PGOHash::IfThenBranch);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CS == <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639">If</a>-&gt;getElse())</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        Hash.combine(PGOHash::IfElseBranch);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      TraverseStmt(CS);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    Hash.combine(PGOHash::EndOfScope);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160; </div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <span class="keywordtype">bool</span> TraverseWhileStmt(<a class="code" href="classclang_1_1WhileStmt.html">WhileStmt</a> *While) {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="comment">// When single byte coverage mode is enabled, add a counter to condition and</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="comment">// body.</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordtype">bool</span> NoSingleByteCoverage = !<a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a>;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *CS : While-&gt;<a class="code" href="classclang_1_1WhileStmt.html#af6d85151f919625c12bc24703f7d2d71">children</a>()) {</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <span class="keywordflow">if</span> (!CS || NoSingleByteCoverage)</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keywordflow">if</span> (CS == While-&gt;<a class="code" href="classclang_1_1WhileStmt.html#abd95f2d5428c8a78d0815130ca9f3f13">getCond</a>())</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        CounterMap[While-&gt;<a class="code" href="classclang_1_1WhileStmt.html#abd95f2d5428c8a78d0815130ca9f3f13">getCond</a>()] = NextCounter++;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CS == While-&gt;<a class="code" href="classclang_1_1WhileStmt.html#ab7929ea3f57d21b62e0027b757ff038c">getBody</a>())</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        CounterMap[While-&gt;<a class="code" href="classclang_1_1WhileStmt.html#ab7929ea3f57d21b62e0027b757ff038c">getBody</a>()] = NextCounter++;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    Base::TraverseWhileStmt(While);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">if</span> (Hash.getHashVersion() != <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a>)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      Hash.combine(PGOHash::EndOfScope);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  }</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="keywordtype">bool</span> TraverseDoStmt(<a class="code" href="classclang_1_1DoStmt.html">DoStmt</a> *Do) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="comment">// When single byte coverage mode is enabled, add a counter to condition and</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="comment">// body.</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordtype">bool</span> NoSingleByteCoverage = !<a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *CS : Do-&gt;<a class="code" href="classclang_1_1DoStmt.html#a941bd88854b8cd9f561a1cfd545af245">children</a>()) {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">if</span> (!CS || NoSingleByteCoverage)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">if</span> (CS == Do-&gt;<a class="code" href="classclang_1_1DoStmt.html#a0bb1ed03c538eb146c0bdbca4b5df5a3">getCond</a>())</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        CounterMap[Do-&gt;<a class="code" href="classclang_1_1DoStmt.html#a0bb1ed03c538eb146c0bdbca4b5df5a3">getCond</a>()] = NextCounter++;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CS == Do-&gt;<a class="code" href="classclang_1_1DoStmt.html#abe217d4623575f61d8bced562d1aaf39">getBody</a>())</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        CounterMap[Do-&gt;<a class="code" href="classclang_1_1DoStmt.html#abe217d4623575f61d8bced562d1aaf39">getBody</a>()] = NextCounter++;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    Base::TraverseDoStmt(Do);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (Hash.getHashVersion() != <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a>)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      Hash.combine(PGOHash::EndOfScope);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keywordtype">bool</span> TraverseForStmt(<a class="code" href="classclang_1_1ForStmt.html">ForStmt</a> *For) {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="comment">// When single byte coverage mode is enabled, add a counter to condition,</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">// increment and body.</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordtype">bool</span> NoSingleByteCoverage = !<a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a>;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *CS : For-&gt;<a class="code" href="classclang_1_1ForStmt.html#a13b75dcd0e241fa6f79856f25c3a9cb9">children</a>()) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">if</span> (!CS || NoSingleByteCoverage)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">if</span> (CS == For-&gt;<a class="code" href="classclang_1_1ForStmt.html#adfc65a829fed9bf7fdf39c1ad7c141fa">getCond</a>())</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        CounterMap[For-&gt;<a class="code" href="classclang_1_1ForStmt.html#adfc65a829fed9bf7fdf39c1ad7c141fa">getCond</a>()] = NextCounter++;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CS == For-&gt;<a class="code" href="classclang_1_1ForStmt.html#a1862e5a9ace98ddef0075b43820d9528">getInc</a>())</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        CounterMap[For-&gt;<a class="code" href="classclang_1_1ForStmt.html#a1862e5a9ace98ddef0075b43820d9528">getInc</a>()] = NextCounter++;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (CS == For-&gt;<a class="code" href="classclang_1_1ForStmt.html#a6f73f050185a05d2492a48d3e0673094">getBody</a>())</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        CounterMap[For-&gt;<a class="code" href="classclang_1_1ForStmt.html#a6f73f050185a05d2492a48d3e0673094">getBody</a>()] = NextCounter++;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    Base::TraverseForStmt(For);</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">if</span> (Hash.getHashVersion() != <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a>)</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      Hash.combine(PGOHash::EndOfScope);</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;  }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordtype">bool</span> TraverseCXXForRangeStmt(<a class="code" href="classclang_1_1CXXForRangeStmt.html">CXXForRangeStmt</a> *ForRange) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">// When single byte coverage mode is enabled, add a counter to body.</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordtype">bool</span> NoSingleByteCoverage = !<a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classclang_1_1Stmt.html">Stmt</a> *CS : ForRange-&gt;<a class="code" href="classclang_1_1CXXForRangeStmt.html#aec3476f9ce94c20510ebb54552b8c4c0">children</a>()) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="keywordflow">if</span> (!CS || NoSingleByteCoverage)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="keywordflow">if</span> (CS == ForRange-&gt;<a class="code" href="classclang_1_1CXXForRangeStmt.html#ada90abb7b743fcd5bc4a16a67ea6b55e">getBody</a>())</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        CounterMap[ForRange-&gt;<a class="code" href="classclang_1_1CXXForRangeStmt.html#ada90abb7b743fcd5bc4a16a67ea6b55e">getBody</a>()] = NextCounter++;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    Base::TraverseCXXForRangeStmt(ForRange);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordflow">if</span> (Hash.getHashVersion() != <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a>)</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      Hash.combine(PGOHash::EndOfScope);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160; </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">// If the statement type \p N is nestable, and its nesting impacts profile</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">// stability, define a custom traversal which tracks the end of the statement</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">// in the hash (provided we&#39;re not using the V1 hash).</span></div>
<div class="line"><a name="l00482"></a><span class="lineno"><a class="line" href="CodeGenPGO_8cpp.html#a20b66d4ae47b817de72c7afa8d2a4979">  482</a></span>&#160;<span class="preprocessor">#define DEFINE_NESTABLE_TRAVERSAL(N)                                           \</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="preprocessor">  bool Traverse##N(N *S) {                                                     \</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="preprocessor">    Base::Traverse##N(S);                                                      \</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="preprocessor">    if (Hash.getHashVersion() != PGO_HASH_V1)                                  \</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="preprocessor">      Hash.combine(PGOHash::EndOfScope);                                       \</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="preprocessor">    return true;                                                               \</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="preprocessor">  }</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#a20b66d4ae47b817de72c7afa8d2a4979">DEFINE_NESTABLE_TRAVERSAL</a>(<a class="code" href="classclang_1_1ObjCForCollectionStmt.html">ObjCForCollectionStmt</a>)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#a20b66d4ae47b817de72c7afa8d2a4979">DEFINE_NESTABLE_TRAVERSAL</a>(<a class="code" href="classclang_1_1CXXTryStmt.html">CXXTryStmt</a>)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#a20b66d4ae47b817de72c7afa8d2a4979">DEFINE_NESTABLE_TRAVERSAL</a>(<a class="code" href="classclang_1_1CXXCatchStmt.html">CXXCatchStmt</a>)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <span class="comment">/// Get version \p HashVersion of the PGO hash for \p S.</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  PGOHash::HashType getHashType(<a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">PGOHashVersion</a> HashVersion, <span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S) {</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">switch</span> (S-&gt;getStmtClass()) {</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">case</span> Stmt::LabelStmtClass:</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">return</span> PGOHash::LabelStmt;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">case</span> Stmt::WhileStmtClass:</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">return</span> PGOHash::WhileStmt;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <span class="keywordflow">case</span> Stmt::DoStmtClass:</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">return</span> PGOHash::DoStmt;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keywordflow">case</span> Stmt::ForStmtClass:</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">return</span> PGOHash::ForStmt;</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">case</span> Stmt::CXXForRangeStmtClass:</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordflow">return</span> PGOHash::CXXForRangeStmt;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">case</span> Stmt::ObjCForCollectionStmtClass:</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">return</span> PGOHash::ObjCForCollectionStmt;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">case</span> Stmt::SwitchStmtClass:</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <span class="keywordflow">return</span> PGOHash::SwitchStmt;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">case</span> Stmt::CaseStmtClass:</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keywordflow">return</span> PGOHash::CaseStmt;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">case</span> Stmt::DefaultStmtClass:</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <span class="keywordflow">return</span> PGOHash::DefaultStmt;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordflow">case</span> Stmt::IfStmtClass:</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <span class="keywordflow">return</span> PGOHash::IfStmt;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">case</span> Stmt::CXXTryStmtClass:</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">return</span> PGOHash::CXXTryStmt;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordflow">case</span> Stmt::CXXCatchStmtClass:</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <span class="keywordflow">return</span> PGOHash::CXXCatchStmt;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordflow">case</span> Stmt::ConditionalOperatorClass:</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="keywordflow">return</span> PGOHash::ConditionalOperator;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">case</span> Stmt::BinaryConditionalOperatorClass:</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keywordflow">return</span> PGOHash::BinaryConditionalOperator;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keywordflow">case</span> Stmt::BinaryOperatorClass: {</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keyword">const</span> <a class="code" href="classclang_1_1BinaryOperator.html">BinaryOperator</a> *BO = cast&lt;BinaryOperator&gt;(S);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">if</span> (BO-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#ac68857d85840e9f7b051ebd0d2e7b938">getOpcode</a>() == BO_LAnd)</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <span class="keywordflow">return</span> PGOHash::BinaryOperatorLAnd;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">if</span> (BO-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#ac68857d85840e9f7b051ebd0d2e7b938">getOpcode</a>() == BO_LOr)</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keywordflow">return</span> PGOHash::BinaryOperatorLOr;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">if</span> (HashVersion &gt;= <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15afccb5f2d78f540f3f2b2f1421bf63037">PGO_HASH_V2</a>) {</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">switch</span> (BO-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#ac68857d85840e9f7b051ebd0d2e7b938">getOpcode</a>()) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keywordflow">case</span> BO_LT:</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;          <span class="keywordflow">return</span> PGOHash::BinaryOperatorLT;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">case</span> BO_GT:</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;          <span class="keywordflow">return</span> PGOHash::BinaryOperatorGT;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">case</span> BO_LE:</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;          <span class="keywordflow">return</span> PGOHash::BinaryOperatorLE;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">case</span> BO_GE:</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;          <span class="keywordflow">return</span> PGOHash::BinaryOperatorGE;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">case</span> BO_EQ:</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;          <span class="keywordflow">return</span> PGOHash::BinaryOperatorEQ;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <span class="keywordflow">case</span> BO_NE:</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;          <span class="keywordflow">return</span> PGOHash::BinaryOperatorNE;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">if</span> (HashVersion &gt;= <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15afccb5f2d78f540f3f2b2f1421bf63037">PGO_HASH_V2</a>) {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">switch</span> (S-&gt;getStmtClass()) {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">case</span> Stmt::GotoStmtClass:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">return</span> PGOHash::GotoStmt;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">case</span> Stmt::IndirectGotoStmtClass:</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="keywordflow">return</span> PGOHash::IndirectGotoStmt;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">case</span> Stmt::BreakStmtClass:</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="keywordflow">return</span> PGOHash::BreakStmt;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">case</span> Stmt::ContinueStmtClass:</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">return</span> PGOHash::ContinueStmt;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">case</span> Stmt::ReturnStmtClass:</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">return</span> PGOHash::ReturnStmt;</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="keywordflow">case</span> Stmt::CXXThrowExprClass:</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">return</span> PGOHash::ThrowExpr;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">case</span> Stmt::UnaryOperatorClass: {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keyword">const</span> <a class="code" href="classclang_1_1UnaryOperator.html">UnaryOperator</a> *UO = cast&lt;UnaryOperator&gt;(S);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">if</span> (UO-&gt;<a class="code" href="classclang_1_1UnaryOperator.html#a7309fe0698496ead06f77065a8cb94a1">getOpcode</a>() == UO_LNot)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;          <span class="keywordflow">return</span> PGOHash::UnaryOperatorLNot;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160; </div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceclang_1_1XRayInstrKind.html#a74957f939e9c2b26d53095846a926c34">PGOHash::None</a>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;};</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">/// A StmtVisitor that propagates the raw counts through the AST and</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">/// records the count at statements where the value may change.</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment"></span><span class="keyword">struct </span>ComputeRegionCounts : <span class="keyword">public</span> <a class="code" href="classclang_1_1ConstStmtVisitor.html">ConstStmtVisitor</a>&lt;ComputeRegionCounts&gt; {<span class="comment"></span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">  /// PGO state.</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment"></span>  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html">CodeGenPGO</a> &amp;PGO;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">  /// A flag that is set when the current count should be recorded on the</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">  /// next statement, such as at the exit of a loop.</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment"></span>  <span class="keywordtype">bool</span> RecordNextStmtCount;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">  /// The count at the current location in the traversal.</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment"></span>  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> CurrentCount;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">  /// The map of statements to count values.</span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment"></span>  llvm::DenseMap&lt;const Stmt *, uint64_t&gt; &amp;<a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">  /// BreakContinueStack - Keep counts of breaks and continues inside loops.</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment"></span>  <span class="keyword">struct </span>BreakContinue {</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BreakCount = 0;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ContinueCount = 0;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    BreakContinue() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  };</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;BreakContinue, 8&gt;</a> BreakContinueStack;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  ComputeRegionCounts(llvm::DenseMap&lt;const Stmt *, uint64_t&gt; &amp;<a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>,</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                      <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html">CodeGenPGO</a> &amp;PGO)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      : PGO(PGO), RecordNextStmtCount(<a class="code" href="stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a>), <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>(<a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>) {}</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160; </div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordtype">void</span> RecordStmtCount(<span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S) {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">if</span> (RecordNextStmtCount) {</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S] = CurrentCount;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      RecordNextStmtCount = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    }</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  }</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">  /// Set and return the current count.</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"></span>  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> setCount(<a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> Count) {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    CurrentCount = Count;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">return</span> Count;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160; </div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordtype">void</span> VisitStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *Child : S-&gt;children())</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <span class="keywordflow">if</span> (Child)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        this-&gt;Visit(Child);</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160; </div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordtype">void</span> VisitFunctionDecl(<span class="keyword">const</span> <a class="code" href="classclang_1_1FunctionDecl.html">FunctionDecl</a> *D) {</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="comment">// Counter tracks entry to the function body.</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BodyCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(D-&gt;<a class="code" href="classclang_1_1FunctionDecl.html#a06987fa159c94bf40f8c716804e1dc27">getBody</a>()));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[D-&gt;<a class="code" href="classclang_1_1FunctionDecl.html#a06987fa159c94bf40f8c716804e1dc27">getBody</a>()] = BodyCount;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    Visit(D-&gt;<a class="code" href="classclang_1_1FunctionDecl.html#a06987fa159c94bf40f8c716804e1dc27">getBody</a>());</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="comment">// Skip lambda expressions. We visit these as FunctionDecls when we&#39;re</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="comment">// generating them and aren&#39;t interested in the body when generating a</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="comment">// parent context.</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordtype">void</span> VisitLambdaExpr(<span class="keyword">const</span> <a class="code" href="classclang_1_1LambdaExpr.html">LambdaExpr</a> *<a class="code" href="namespaceclang_1_1interp.html#a78c22da8b8a5d7be2b50556e77390657">LE</a>) {}</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordtype">void</span> VisitCapturedDecl(<span class="keyword">const</span> <a class="code" href="classclang_1_1CapturedDecl.html">CapturedDecl</a> *D) {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// Counter tracks entry to the capture body.</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BodyCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(D-&gt;<a class="code" href="classclang_1_1CapturedDecl.html#aec7be9a18c106e53a1d48a47df4b4ef8">getBody</a>()));</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[D-&gt;<a class="code" href="classclang_1_1CapturedDecl.html#aec7be9a18c106e53a1d48a47df4b4ef8">getBody</a>()] = BodyCount;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    Visit(D-&gt;<a class="code" href="classclang_1_1CapturedDecl.html#aec7be9a18c106e53a1d48a47df4b4ef8">getBody</a>());</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  }</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordtype">void</span> VisitObjCMethodDecl(<span class="keyword">const</span> <a class="code" href="classclang_1_1ObjCMethodDecl.html">ObjCMethodDecl</a> *D) {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="comment">// Counter tracks entry to the method body.</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BodyCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(D-&gt;<a class="code" href="classclang_1_1ObjCMethodDecl.html#a58c4c938a6a12859b46c8314136c652b">getBody</a>()));</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[D-&gt;<a class="code" href="classclang_1_1ObjCMethodDecl.html#a58c4c938a6a12859b46c8314136c652b">getBody</a>()] = BodyCount;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    Visit(D-&gt;<a class="code" href="classclang_1_1ObjCMethodDecl.html#a58c4c938a6a12859b46c8314136c652b">getBody</a>());</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordtype">void</span> VisitBlockDecl(<span class="keyword">const</span> <a class="code" href="classclang_1_1BlockDecl.html">BlockDecl</a> *D) {</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="comment">// Counter tracks entry to the block body.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BodyCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(D-&gt;<a class="code" href="classclang_1_1BlockDecl.html#a691f9584b643dc977abcd52bbe71d776">getBody</a>()));</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[D-&gt;<a class="code" href="classclang_1_1BlockDecl.html#a691f9584b643dc977abcd52bbe71d776">getBody</a>()] = BodyCount;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    Visit(D-&gt;<a class="code" href="classclang_1_1BlockDecl.html#a691f9584b643dc977abcd52bbe71d776">getBody</a>());</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordtype">void</span> VisitReturnStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1ReturnStmt.html">ReturnStmt</a> *S) {</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (S-&gt;getRetValue())</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      Visit(S-&gt;getRetValue());</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    CurrentCount = 0;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  }</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordtype">void</span> VisitCXXThrowExpr(<span class="keyword">const</span> <a class="code" href="classclang_1_1CXXThrowExpr.html">CXXThrowExpr</a> *E) {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    RecordStmtCount(E);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">if</span> (E-&gt;<a class="code" href="classclang_1_1CXXThrowExpr.html#a2e062dc13257996af7731d0beec7ef8c">getSubExpr</a>())</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      Visit(E-&gt;<a class="code" href="classclang_1_1CXXThrowExpr.html#a2e062dc13257996af7731d0beec7ef8c">getSubExpr</a>());</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    CurrentCount = 0;</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160; </div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordtype">void</span> VisitGotoStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1GotoStmt.html">GotoStmt</a> *S) {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    CurrentCount = 0;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  }</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160; </div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordtype">void</span> VisitLabelStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1LabelStmt.html">LabelStmt</a> *S) {</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    RecordNextStmtCount = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="comment">// Counter tracks the block following the label.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BlockCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S));</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S] = BlockCount;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    Visit(S-&gt;getSubStmt());</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  }</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160; </div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordtype">void</span> VisitBreakStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1BreakStmt.html">BreakStmt</a> *S) {</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    assert(!BreakContinueStack.empty() &amp;&amp; <span class="stringliteral">&quot;break not in a loop or switch!&quot;</span>);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    BreakContinueStack.back().BreakCount += CurrentCount;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    CurrentCount = 0;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordtype">void</span> VisitContinueStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1ContinueStmt.html">ContinueStmt</a> *S) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    assert(!BreakContinueStack.empty() &amp;&amp; <span class="stringliteral">&quot;continue stmt not in a loop!&quot;</span>);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    BreakContinueStack.back().ContinueCount += CurrentCount;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    CurrentCount = 0;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordtype">void</span> VisitWhileStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1WhileStmt.html">WhileStmt</a> *S) {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ParentCount = CurrentCount;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160; </div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    BreakContinueStack.push_back(BreakContinue());</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    <span class="comment">// Visit the body region first so the break/continue adjustments can be</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    <span class="comment">// included when visiting the condition.</span></div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BodyCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S));</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getBody()] = CurrentCount;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    Visit(S-&gt;getBody());</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BackedgeCount = CurrentCount;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="comment">// ...then go back and propagate counts through the condition. The count</span></div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">// at the start of the condition is the sum of the incoming edges,</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment">// the backedge from the end of the loop body, and the edges from</span></div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="comment">// continue statements.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    BreakContinue BC = BreakContinueStack.pop_back_val();</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> CondCount =</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        setCount(ParentCount + BackedgeCount + BC.ContinueCount);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getCond()] = CondCount;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    Visit(S-&gt;getCond());</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    setCount(BC.BreakCount + CondCount - BodyCount);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  }</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160; </div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordtype">void</span> VisitDoStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1DoStmt.html">DoStmt</a> *S) {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> LoopCount = PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    BreakContinueStack.push_back(BreakContinue());</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="comment">// The count doesn&#39;t include the fallthrough from the parent scope. Add it.</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BodyCount = setCount(LoopCount + CurrentCount);</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getBody()] = BodyCount;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    Visit(S-&gt;getBody());</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BackedgeCount = CurrentCount;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    BreakContinue BC = BreakContinueStack.pop_back_val();</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="comment">// The count at the start of the condition is equal to the count at the</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="comment">// end of the body, plus any continues.</span></div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> CondCount = setCount(BackedgeCount + BC.ContinueCount);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getCond()] = CondCount;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    Visit(S-&gt;getCond());</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    setCount(BC.BreakCount + CondCount - LoopCount);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;  }</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;  <span class="keywordtype">void</span> VisitForStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1ForStmt.html">ForStmt</a> *S) {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">if</span> (S-&gt;getInit())</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      Visit(S-&gt;getInit());</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160; </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ParentCount = CurrentCount;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160; </div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    BreakContinueStack.push_back(BreakContinue());</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="comment">// Visit the body region first. (This is basically the same as a while</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="comment">// loop; see further comments in VisitWhileStmt.)</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BodyCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S));</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getBody()] = BodyCount;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    Visit(S-&gt;getBody());</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BackedgeCount = CurrentCount;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;    BreakContinue BC = BreakContinueStack.pop_back_val();</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="comment">// The increment is essentially part of the body but it needs to include</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="comment">// the count for all the continue statements.</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">if</span> (S-&gt;getInc()) {</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> IncCount = setCount(BackedgeCount + BC.ContinueCount);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getInc()] = IncCount;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      Visit(S-&gt;getInc());</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="comment">// ...then go back and propagate counts through the condition.</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> CondCount =</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        setCount(ParentCount + BackedgeCount + BC.ContinueCount);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">if</span> (S-&gt;getCond()) {</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getCond()] = CondCount;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      Visit(S-&gt;getCond());</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    }</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    setCount(BC.BreakCount + CondCount - BodyCount);</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160; </div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <span class="keywordtype">void</span> VisitCXXForRangeStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1CXXForRangeStmt.html">CXXForRangeStmt</a> *S) {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (S-&gt;getInit())</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      Visit(S-&gt;getInit());</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    Visit(S-&gt;getLoopVarStmt());</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    Visit(S-&gt;getRangeStmt());</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    Visit(S-&gt;getBeginStmt());</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    Visit(S-&gt;getEndStmt());</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ParentCount = CurrentCount;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    BreakContinueStack.push_back(BreakContinue());</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="comment">// Visit the body region first. (This is basically the same as a while</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="comment">// loop; see further comments in VisitWhileStmt.)</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BodyCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S));</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getBody()] = BodyCount;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    Visit(S-&gt;getBody());</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BackedgeCount = CurrentCount;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    BreakContinue BC = BreakContinueStack.pop_back_val();</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="comment">// The increment is essentially part of the body but it needs to include</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="comment">// the count for all the continue statements.</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> IncCount = setCount(BackedgeCount + BC.ContinueCount);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getInc()] = IncCount;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    Visit(S-&gt;getInc());</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <span class="comment">// ...then go back and propagate counts through the condition.</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> CondCount =</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        setCount(ParentCount + BackedgeCount + BC.ContinueCount);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getCond()] = CondCount;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    Visit(S-&gt;getCond());</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    setCount(BC.BreakCount + CondCount - BodyCount);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;  }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160; </div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordtype">void</span> VisitObjCForCollectionStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1ObjCForCollectionStmt.html">ObjCForCollectionStmt</a> *S) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    Visit(S-&gt;getElement());</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ParentCount = CurrentCount;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    BreakContinueStack.push_back(BreakContinue());</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="comment">// Counter tracks the body of the loop.</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BodyCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S));</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getBody()] = BodyCount;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    Visit(S-&gt;getBody());</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> BackedgeCount = CurrentCount;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    BreakContinue BC = BreakContinueStack.pop_back_val();</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160; </div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    setCount(BC.BreakCount + ParentCount + BackedgeCount + BC.ContinueCount -</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;             BodyCount);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;  }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160; </div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keywordtype">void</span> VisitSwitchStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1SwitchStmt.html">SwitchStmt</a> *S) {</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keywordflow">if</span> (S-&gt;getInit())</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      Visit(S-&gt;getInit());</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    Visit(S-&gt;getCond());</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    CurrentCount = 0;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    BreakContinueStack.push_back(BreakContinue());</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    Visit(S-&gt;getBody());</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="comment">// If the switch is inside a loop, add the continue counts.</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    BreakContinue BC = BreakContinueStack.pop_back_val();</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <span class="keywordflow">if</span> (!BreakContinueStack.empty())</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      BreakContinueStack.back().ContinueCount += BC.ContinueCount;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="comment">// Counter tracks the exit block of the switch.</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S));</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  }</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;  <span class="keywordtype">void</span> VisitSwitchCase(<span class="keyword">const</span> <a class="code" href="classclang_1_1SwitchCase.html">SwitchCase</a> *S) {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    RecordNextStmtCount = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="comment">// Counter for this particular case. This counts only jumps from the</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="comment">// switch header and does not include fallthrough from the case before</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <span class="comment">// this one.</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> CaseCount = PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    setCount(CurrentCount + CaseCount);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <span class="comment">// We need the count without fallthrough in the mapping, so it&#39;s more useful</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="comment">// for branch probabilities.</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S] = CaseCount;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    Visit(S-&gt;getSubStmt());</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;  }</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordtype">void</span> VisitIfStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1IfStmt.html">IfStmt</a> *S) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">if</span> (S-&gt;isConsteval()) {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *Stm = S-&gt;isNegatedConsteval() ? S-&gt;getThen() : S-&gt;getElse();</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keywordflow">if</span> (Stm)</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        Visit(Stm);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160; </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ParentCount = CurrentCount;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keywordflow">if</span> (S-&gt;getInit())</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      Visit(S-&gt;getInit());</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    Visit(S-&gt;getCond());</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <span class="comment">// Counter tracks the &quot;then&quot; part of an if statement. The count for</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="comment">// the &quot;else&quot; part, if it exists, will be calculated from this counter.</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ThenCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S));</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getThen()] = ThenCount;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    Visit(S-&gt;getThen());</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> OutCount = CurrentCount;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160; </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ElseCount = ParentCount - ThenCount;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">if</span> (S-&gt;getElse()) {</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      setCount(ElseCount);</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S-&gt;getElse()] = ElseCount;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      Visit(S-&gt;getElse());</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      OutCount += CurrentCount;</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      OutCount += ElseCount;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    setCount(OutCount);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  }</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  <span class="keywordtype">void</span> VisitCXXTryStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1CXXTryStmt.html">CXXTryStmt</a> *S) {</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    RecordStmtCount(S);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    Visit(S-&gt;getTryBlock());</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 0, E = S-&gt;getNumHandlers(); I &lt; E; ++I)</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      Visit(S-&gt;getHandler(I));</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="comment">// Counter tracks the continuation block of the try statement.</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S));</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  }</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;  <span class="keywordtype">void</span> VisitCXXCatchStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1CXXCatchStmt.html">CXXCatchStmt</a> *S) {</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    RecordNextStmtCount = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="comment">// Counter tracks the catch statement&#39;s handler block.</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> CatchCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(S));</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[S] = CatchCount;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    Visit(S-&gt;getHandlerBlock());</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  }</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;  <span class="keywordtype">void</span> VisitAbstractConditionalOperator(<span class="keyword">const</span> <a class="code" href="classclang_1_1AbstractConditionalOperator.html">AbstractConditionalOperator</a> *E) {</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    RecordStmtCount(E);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ParentCount = CurrentCount;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    Visit(E-&gt;<a class="code" href="classclang_1_1AbstractConditionalOperator.html#a3f4ca662007d01732e94a745f2b7f48b">getCond</a>());</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// Counter tracks the &quot;true&quot; part of a conditional operator. The</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">// count in the &quot;false&quot; part will be calculated from this counter.</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> TrueCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(E));</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[E-&gt;<a class="code" href="classclang_1_1AbstractConditionalOperator.html#ab703ac625fdd9bf346d39800e8c65949">getTrueExpr</a>()] = TrueCount;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    Visit(E-&gt;<a class="code" href="classclang_1_1AbstractConditionalOperator.html#ab703ac625fdd9bf346d39800e8c65949">getTrueExpr</a>());</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> OutCount = CurrentCount;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> FalseCount = setCount(ParentCount - TrueCount);</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[E-&gt;<a class="code" href="classclang_1_1AbstractConditionalOperator.html#af5ba08d72a1e6aba9e1518b823fa5a2a">getFalseExpr</a>()] = FalseCount;</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    Visit(E-&gt;<a class="code" href="classclang_1_1AbstractConditionalOperator.html#af5ba08d72a1e6aba9e1518b823fa5a2a">getFalseExpr</a>());</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    OutCount += CurrentCount;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160; </div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    setCount(OutCount);</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  }</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160; </div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;  <span class="keywordtype">void</span> VisitBinLAnd(<span class="keyword">const</span> <a class="code" href="classclang_1_1BinaryOperator.html">BinaryOperator</a> *E) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    RecordStmtCount(E);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ParentCount = CurrentCount;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    Visit(E-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#aff30d9d23b3726d7458571237f098b34">getLHS</a>());</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;    <span class="comment">// Counter tracks the right hand side of a logical and operator.</span></div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> RHSCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(E));</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[E-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#aca01c980608d4f58ff567f8028f2594e">getRHS</a>()] = RHSCount;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    Visit(E-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#aca01c980608d4f58ff567f8028f2594e">getRHS</a>());</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    setCount(ParentCount + RHSCount - CurrentCount);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordtype">void</span> VisitBinLOr(<span class="keyword">const</span> <a class="code" href="classclang_1_1BinaryOperator.html">BinaryOperator</a> *E) {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    RecordStmtCount(E);</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ParentCount = CurrentCount;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    Visit(E-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#aff30d9d23b3726d7458571237f098b34">getLHS</a>());</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment">// Counter tracks the right hand side of a logical or operator.</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> RHSCount = setCount(PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(E));</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a>[E-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#aca01c980608d4f58ff567f8028f2594e">getRHS</a>()] = RHSCount;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    Visit(E-&gt;<a class="code" href="classclang_1_1BinaryOperator.html#aca01c980608d4f58ff567f8028f2594e">getRHS</a>());</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    setCount(ParentCount + RHSCount - CurrentCount);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    RecordNextStmtCount = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;  }</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;};</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;} <span class="comment">// end anonymous namespace</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="keywordtype">void</span> PGOHash::combine(HashType <a class="code" href="classclang_1_1Type.html">Type</a>) {</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// Check that we never combine 0 and only have six bits.</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  assert(<a class="code" href="classclang_1_1Type.html">Type</a> &amp;&amp; <span class="stringliteral">&quot;Hash is invalid: unexpected type 0&quot;</span>);</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  assert(<span class="keywordtype">unsigned</span>(<a class="code" href="classclang_1_1Type.html">Type</a>) &lt; TooBig &amp;&amp; <span class="stringliteral">&quot;Hash is invalid: too many types&quot;</span>);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="comment">// Pass through MD5 if enough work has built up.</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;  <span class="keywordflow">if</span> (Count &amp;&amp; Count % NumTypesPerWord == 0) {</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keyword">using namespace </span>llvm::support;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> Swapped =</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        endian::byte_swap&lt;uint64_t, llvm::endianness::little&gt;(Working);</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    MD5.update(<a class="code" href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a>((uint8_t *)&amp;Swapped, <span class="keyword">sizeof</span>(Swapped)));</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    Working = 0;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  }</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160; </div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="comment">// Accumulate the current type.</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  ++Count;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;  Working = Working &lt;&lt; NumBitsPerType | <a class="code" href="classclang_1_1Type.html">Type</a>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;}</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> <a class="code" href="namespaceclang.html#addb9e36a0528443df269a65ef2ed0634">PGOHash::finalize</a>() {</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  <span class="comment">// Use Working as the hash directly if we never used MD5.</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;  <span class="keywordflow">if</span> (Count &lt;= NumTypesPerWord)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="comment">// No need to byte swap here, since none of the math was endian-dependent.</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="comment">// This number will be byte-swapped as required on endianness transitions,</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="comment">// so we will see the same value on the other side.</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">return</span> Working;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="comment">// Check for remaining work in Working.</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="keywordflow">if</span> (Working) {</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="comment">// Keep the buggy behavior from v1 and v2 for backward-compatibility. This</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="comment">// is buggy because it converts a uint64_t into an array of uint8_t.</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">if</span> (HashVersion &lt; <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15ab67dbfd8a3de0ff97ef69a0fcd81c537">PGO_HASH_V3</a>) {</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      MD5.update({(uint8_t)Working});</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keyword">using namespace </span>llvm::support;</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> Swapped =</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;          endian::byte_swap&lt;uint64_t, llvm::endianness::little&gt;(Working);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      MD5.update(<a class="code" href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a>((uint8_t *)&amp;Swapped, <span class="keyword">sizeof</span>(Swapped)));</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    }</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;  }</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  <span class="comment">// Finalize the MD5 and return the hash.</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  llvm::MD5::MD5Result Result;</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  MD5.final(Result);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;  <span class="keywordflow">return</span> Result.low();</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;}</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160; </div>
<div class="line"><a name="l01020"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a02a7b7416e11d8fe9969d7b4096088d2"> 1020</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a02a7b7416e11d8fe9969d7b4096088d2">CodeGenPGO::assignRegionCounters</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a> GD, llvm::Function *Fn) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D = GD.<a class="code" href="classclang_1_1GlobalDecl.html#ac54ca7201b896719b4a54922363710af">getDecl</a>();</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">if</span> (!D-&gt;<a class="code" href="classclang_1_1Decl.html#a8bc38f5603b0c4d0221c541bea43faf2">hasBody</a>())</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160; </div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  <span class="comment">// Skip CUDA/HIP kernel launch stub functions.</span></div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  <span class="keywordflow">if</span> (CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().CUDA &amp;&amp; !CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().CUDAIsDevice &amp;&amp;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      D-&gt;<a class="code" href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">hasAttr</a>&lt;CUDAGlobalAttr&gt;())</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keywordtype">bool</span> InstrumentRegions = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().<a class="code" href="classclang_1_1CodeGenOptions.html#a669d55f4c690e9e5e6a5060468429955">hasProfileClangInstr</a>();</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;  llvm::IndexedInstrProfReader *PGOReader = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6aec167a8fbc040d3965669313df36c1">getPGOReader</a>();</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  <span class="keywordflow">if</span> (!InstrumentRegions &amp;&amp; !PGOReader)</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;  <span class="keywordflow">if</span> (D-&gt;<a class="code" href="classclang_1_1Decl.html#a258c0dc4a6961ba477c3f34caa8e5096">isImplicit</a>())</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  <span class="comment">// Constructors and destructors may be represented by several functions in IR.</span></div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  <span class="comment">// If so, instrument only base variant, others are implemented by delegation</span></div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;  <span class="comment">// to the base one, it would be counted twice otherwise.</span></div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;  <span class="keywordflow">if</span> (CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a09a815215ff67d2e52b7605af35c40cb">getTarget</a>().<a class="code" href="classclang_1_1TargetInfo.html#ac3e35c0783acc034fe5eae1462d84b17">getCXXABI</a>().<a class="code" href="classclang_1_1TargetCXXABI.html#a51a60c5d0e2bed76e57cad266d8abfd3">hasConstructorVariants</a>()) {</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *CCD = dyn_cast&lt;CXXConstructorDecl&gt;(D))</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">if</span> (GD.<a class="code" href="classclang_1_1GlobalDecl.html#a4f2e99a5345b81055db401024184f044">getCtorType</a>() != <a class="code" href="namespaceclang.html#a07c209a701587314a04d68c934e5a16da09d2d6db60ced3215694a5b6c13888be">Ctor_Base</a> &amp;&amp;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;          <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a43fdc4ac6e91724923dbb4080de1e316">CodeGenFunction::IsConstructorDelegationValid</a>(CCD))</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  }</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="keywordflow">if</span> (isa&lt;CXXDestructorDecl&gt;(D) &amp;&amp; GD.<a class="code" href="classclang_1_1GlobalDecl.html#ad050f972b2d6a8b74b1712db0370ef9d">getDtorType</a>() != <a class="code" href="namespaceclang.html#a8ce1c62f474552f6cfc7c340e573e157a642f2aa7faf76ed5f2ca52bb348a34e3">Dtor_Base</a>)</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160; </div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#af4ab63ab3cc6c554de2be2e26344ab7a">ClearUnusedCoverageMapping</a>(D);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordflow">if</span> (Fn-&gt;hasFnAttribute(llvm::Attribute::NoProfile))</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;  <span class="keywordflow">if</span> (Fn-&gt;hasFnAttribute(llvm::Attribute::SkipProfile))</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  setFuncName(Fn);</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160; </div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;  mapRegionCounters(D);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  <span class="keywordflow">if</span> (CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().CoverageMapping)</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    emitCounterRegionMapping(D);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  <span class="keywordflow">if</span> (PGOReader) {</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <a class="code" href="classclang_1_1SourceManager.html">SourceManager</a> &amp;<a class="code" href="Basic_2Cuda_8cpp.html#ab6882f8bbaa96cde60db40335e62eb2e">SM</a> = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a091e2575135f7f9f1aeb25ba0090bfde">getSourceManager</a>();</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    loadRegionCounts(PGOReader, <a class="code" href="Basic_2Cuda_8cpp.html#ab6882f8bbaa96cde60db40335e62eb2e">SM</a>.isInMainFile(D-&gt;<a class="code" href="classclang_1_1Decl.html#a9ac934b2f7ae95704682dc44da1f0867">getLocation</a>()));</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    computeRegionCounts(D);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    applyFunctionAttributes(PGOReader, Fn);</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  }</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;}</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="keywordtype">void</span> CodeGenPGO::mapRegionCounters(<span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D) {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;  <span class="comment">// Use the latest hash version when inserting instrumentation, but use the</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  <span class="comment">// version in the indexed profile if we&#39;re reading PGO data.</span></div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">PGOHashVersion</a> HashVersion = <a class="code" href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a3ebf516548cdd44420f7ff61749fc4df">PGO_HASH_LATEST</a>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ProfileVersion = llvm::IndexedInstrProf::Version;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> *PGOReader = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6aec167a8fbc040d3965669313df36c1">getPGOReader</a>()) {</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;    HashVersion = getPGOHashVersion(PGOReader, CGM);</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    ProfileVersion = PGOReader-&gt;getVersion();</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  }</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">// If MC/DC is enabled, set the MaxConditions to a preset value. Otherwise,</span></div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">// set it to zero. This value impacts the number of conditions accepted in a</span></div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="comment">// given boolean expression, which impacts the size of the bitmap used to</span></div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">// track test vector execution for that boolean expression.  Because the</span></div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="comment">// bitmap scales exponentially (2^n) based on the number of conditions seen,</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="comment">// the maximum value is hard-coded at 6 conditions, which is more than enough</span></div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">// for most embedded applications. Setting a maximum value prevents the</span></div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">// bitmap footprint from growing too large without the user&#39;s knowledge. In</span></div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">// the future, this value could be adjusted with a command-line option.</span></div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="keywordtype">unsigned</span> MCDCMaxConditions = (CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().MCDCCoverage) ? 6 : 0;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  RegionCounterMap.reset(<span class="keyword">new</span> llvm::DenseMap&lt;const Stmt *, unsigned&gt;);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  RegionMCDCState.reset(<span class="keyword">new</span> <a class="code" href="structclang_1_1CodeGen_1_1MCDC_1_1State.html">MCDC::State</a>);</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  MapRegionCounters Walker(HashVersion, ProfileVersion, *RegionCounterMap,</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                           *RegionMCDCState, MCDCMaxConditions, CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a9d831fbe47e43ffc4f06f74c705594fd">getDiags</a>());</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1FunctionDecl.html">FunctionDecl</a> *FD = dyn_cast_or_null&lt;FunctionDecl&gt;(D))</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;    Walker.TraverseDecl(<span class="keyword">const_cast&lt;</span><a class="code" href="classclang_1_1FunctionDecl.html">FunctionDecl</a> *<span class="keyword">&gt;</span>(FD));</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1ObjCMethodDecl.html">ObjCMethodDecl</a> *MD = dyn_cast_or_null&lt;ObjCMethodDecl&gt;(D))</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    Walker.TraverseDecl(<span class="keyword">const_cast&lt;</span><a class="code" href="classclang_1_1ObjCMethodDecl.html">ObjCMethodDecl</a> *<span class="keyword">&gt;</span>(MD));</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1BlockDecl.html">BlockDecl</a> *BD = dyn_cast_or_null&lt;BlockDecl&gt;(D))</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    Walker.TraverseDecl(<span class="keyword">const_cast&lt;</span><a class="code" href="classclang_1_1BlockDecl.html">BlockDecl</a> *<span class="keyword">&gt;</span>(BD));</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1CapturedDecl.html">CapturedDecl</a> *CD = dyn_cast_or_null&lt;CapturedDecl&gt;(D))</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    Walker.TraverseDecl(<span class="keyword">const_cast&lt;</span><a class="code" href="classclang_1_1CapturedDecl.html">CapturedDecl</a> *<span class="keyword">&gt;</span>(CD));</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;  assert(Walker.NextCounter &gt; 0 &amp;&amp; <span class="stringliteral">&quot;no entry counter mapped for decl&quot;</span>);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  NumRegionCounters = Walker.NextCounter;</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  RegionMCDCState-&gt;BitmapBytes = Walker.NextMCDCBitmapIdx;</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  FunctionHash = Walker.Hash.finalize();</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;}</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="keywordtype">bool</span> CodeGenPGO::skipRegionMappingForDecl(<span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D) {</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;  <span class="keywordflow">if</span> (!D-&gt;<a class="code" href="classclang_1_1Decl.html#a3fea7c6b02a9f1f5ef8b9a2f16f02342">getBody</a>())</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  <span class="comment">// Skip host-only functions in the CUDA device compilation and device-only</span></div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="comment">// functions in the host compilation. Just roughly filter them out based on</span></div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;  <span class="comment">// the function attributes. If there are effectively host-only or device-only</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;  <span class="comment">// ones, their coverage mapping may still be generated.</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;  <span class="keywordflow">if</span> (CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().CUDA &amp;&amp;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      ((CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().CUDAIsDevice &amp;&amp; !D-&gt;<a class="code" href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">hasAttr</a>&lt;CUDADeviceAttr&gt;() &amp;&amp;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;        !D-&gt;<a class="code" href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">hasAttr</a>&lt;CUDAGlobalAttr&gt;()) ||</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;       (!CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().CUDAIsDevice &amp;&amp;</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;        (D-&gt;<a class="code" href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">hasAttr</a>&lt;CUDAGlobalAttr&gt;() ||</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;         (!D-&gt;<a class="code" href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">hasAttr</a>&lt;CUDAHostAttr&gt;() &amp;&amp; D-&gt;<a class="code" href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">hasAttr</a>&lt;CUDADeviceAttr&gt;())))))</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;  <span class="comment">// Don&#39;t map the functions in system headers.</span></div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code" href="Basic_2Cuda_8cpp.html#ab6882f8bbaa96cde60db40335e62eb2e">SM</a> = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a091e2575135f7f9f1aeb25ba0090bfde">getSourceManager</a>();</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;  <span class="keyword">auto</span> Loc = D-&gt;<a class="code" href="classclang_1_1Decl.html#a3fea7c6b02a9f1f5ef8b9a2f16f02342">getBody</a>()-&gt;<a class="code" href="classclang_1_1Stmt.html#ae1bc6287562ce48c56562a69e7f637de">getBeginLoc</a>();</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="CodeGenPGO_8cpp.html#aac70704dede76a64b7347031e4fd990a">SystemHeadersCoverage</a> &amp;&amp; <a class="code" href="Basic_2Cuda_8cpp.html#ab6882f8bbaa96cde60db40335e62eb2e">SM</a>.isInSystemHeader(Loc);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;}</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160; </div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="keywordtype">void</span> CodeGenPGO::emitCounterRegionMapping(<span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D) {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;  <span class="keywordflow">if</span> (skipRegionMappingForDecl(D))</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160; </div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;  std::string CoverageMapping;</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  llvm::raw_string_ostream OS(CoverageMapping);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  RegionMCDCState-&gt;BranchByStmt.clear();</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CoverageMappingGen.html">CoverageMappingGen</a> MappingGen(</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      *CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5b756a696b231a852f44682b04fc677f">getCoverageMapping</a>(), CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a091e2575135f7f9f1aeb25ba0090bfde">getSourceManager</a>(),</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>(), RegionCounterMap.get(), RegionMCDCState.get());</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  MappingGen.emitCounterMapping(D, OS);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;  OS.flush();</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;  <span class="keywordflow">if</span> (CoverageMapping.empty())</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160; </div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5b756a696b231a852f44682b04fc677f">getCoverageMapping</a>()-&gt;<a class="code" href="classclang_1_1CodeGen_1_1CoverageMappingModuleGen.html#a22c40b9c6b59ac0a2cf15afc29d35be6">addFunctionMappingRecord</a>(</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      FuncNameVar, FuncName, FunctionHash, CoverageMapping);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;}</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l01149"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#aa52e8dab71aea532da0473b41f6fa345"> 1149</a></span>&#160;<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#aa52e8dab71aea532da0473b41f6fa345">CodeGenPGO::emitEmptyCounterMapping</a>(<span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D, StringRef Name,</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;                                    llvm::GlobalValue::LinkageTypes <a class="code" href="namespaceclang.html#a6cb4fc7755d8dccec57b672a2c83b5ce">Linkage</a>) {</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="keywordflow">if</span> (skipRegionMappingForDecl(D))</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160; </div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  std::string CoverageMapping;</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  llvm::raw_string_ostream OS(CoverageMapping);</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CoverageMappingGen.html">CoverageMappingGen</a> MappingGen(*CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5b756a696b231a852f44682b04fc677f">getCoverageMapping</a>(),</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                                CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a091e2575135f7f9f1aeb25ba0090bfde">getSourceManager</a>(),</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;                                CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>());</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;  MappingGen.<a class="code" href="classclang_1_1CodeGen_1_1CoverageMappingGen.html#a44270a4fbdf18860c6d1e9816ba2f375">emitEmptyMapping</a>(D, OS);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  OS.flush();</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160; </div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  <span class="keywordflow">if</span> (CoverageMapping.empty())</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160; </div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  setFuncName(Name, <a class="code" href="namespaceclang.html#a6cb4fc7755d8dccec57b672a2c83b5ce">Linkage</a>);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5b756a696b231a852f44682b04fc677f">getCoverageMapping</a>()-&gt;<a class="code" href="classclang_1_1CodeGen_1_1CoverageMappingModuleGen.html#a22c40b9c6b59ac0a2cf15afc29d35be6">addFunctionMappingRecord</a>(</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      FuncNameVar, FuncName, FunctionHash, CoverageMapping, <span class="keyword">false</span>);</div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;}</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160; </div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="keywordtype">void</span> CodeGenPGO::computeRegionCounts(<span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  StmtCountMap.reset(<span class="keyword">new</span> llvm::DenseMap&lt;const Stmt *, uint64_t&gt;);</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  ComputeRegionCounts Walker(*StmtCountMap, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1FunctionDecl.html">FunctionDecl</a> *FD = dyn_cast_or_null&lt;FunctionDecl&gt;(D))</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    Walker.VisitFunctionDecl(FD);</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1ObjCMethodDecl.html">ObjCMethodDecl</a> *MD = dyn_cast_or_null&lt;ObjCMethodDecl&gt;(D))</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    Walker.VisitObjCMethodDecl(MD);</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1BlockDecl.html">BlockDecl</a> *BD = dyn_cast_or_null&lt;BlockDecl&gt;(D))</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;    Walker.VisitBlockDecl(BD);</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1CapturedDecl.html">CapturedDecl</a> *CD = dyn_cast_or_null&lt;CapturedDecl&gt;(D))</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    Walker.VisitCapturedDecl(<span class="keyword">const_cast&lt;</span><a class="code" href="classclang_1_1CapturedDecl.html">CapturedDecl</a> *<span class="keyword">&gt;</span>(CD));</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;}</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160; </div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="keywordtype">void</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;CodeGenPGO::applyFunctionAttributes(llvm::IndexedInstrProfReader *PGOReader,</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                                    llvm::Function *Fn) {</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#ad799efab2341ef310821be50db6267a4">haveRegionCounts</a>())</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> FunctionCount = <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">getRegionCount</a>(<span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  Fn-&gt;setEntryCount(FunctionCount);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160; </div>
<div class="line"><a name="l01193"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#ae9fd00c393108add7c292e8f9dafc425"> 1193</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#ae9fd00c393108add7c292e8f9dafc425">CodeGenPGO::emitCounterSetOrIncrement</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Builder, <span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S,</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                                           llvm::Value *StepV) {</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  <span class="keywordflow">if</span> (!RegionCounterMap || !Builder.GetInsertBlock())</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;  <span class="keywordtype">unsigned</span> Counter = (*RegionCounterMap)[S];</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;  llvm::Value *Args[] = {FuncNameVar,</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                         Builder.getInt64(FunctionHash),</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                         Builder.getInt32(NumRegionCounters),</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                         Builder.getInt32(Counter), StepV};</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a>)</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;    Builder.CreateCall(CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#aec0fd9d10600050f1bd620f068ba52c6">getIntrinsic</a>(llvm::Intrinsic::instrprof_cover),</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                       <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>(Args, 4));</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">if</span> (!StepV)</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      Builder.CreateCall(CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#aec0fd9d10600050f1bd620f068ba52c6">getIntrinsic</a>(llvm::Intrinsic::instrprof_increment),</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                         <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>(Args, 4));</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;      Builder.CreateCall(</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;          CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#aec0fd9d10600050f1bd620f068ba52c6">getIntrinsic</a>(llvm::Intrinsic::instrprof_increment_step),</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;          <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef</a>(Args));</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;}</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160; </div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="keywordtype">bool</span> CodeGenPGO::canEmitMCDCCoverage(<span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Builder) {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="keywordflow">return</span> (CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().<a class="code" href="classclang_1_1CodeGenOptions.html#a669d55f4c690e9e5e6a5060468429955">hasProfileClangInstr</a>() &amp;&amp;</div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;          CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().MCDCCoverage &amp;&amp; Builder.GetInsertBlock());</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;}</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#aaf38f5b11df29ff591df5c71d8c32078"> 1224</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#aaf38f5b11df29ff591df5c71d8c32078">CodeGenPGO::emitMCDCParameters</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Builder) {</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  <span class="keywordflow">if</span> (!canEmitMCDCCoverage(Builder) || !RegionMCDCState)</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;  <span class="keyword">auto</span> *I8PtrTy = llvm::PointerType::getUnqual(CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6c8cff399ad98c730cce0907b1acd44e">getLLVMContext</a>());</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;  <span class="comment">// Emit intrinsic representing MCDC bitmap parameters at function entry.</span></div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;  <span class="comment">// This is used by the instrumentation pass, but it isn&#39;t actually lowered to</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;  <span class="comment">// anything.</span></div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;  llvm::Value *Args[3] = {llvm::ConstantExpr::getBitCast(FuncNameVar, I8PtrTy),</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                          Builder.getInt64(FunctionHash),</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                          Builder.getInt32(RegionMCDCState-&gt;BitmapBytes)};</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  Builder.CreateCall(</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#aec0fd9d10600050f1bd620f068ba52c6">getIntrinsic</a>(llvm::Intrinsic::instrprof_mcdc_parameters), Args);</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;}</div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160; </div>
<div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a13eb93800dc7c8a52d8d3358b84c8376"> 1240</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a13eb93800dc7c8a52d8d3358b84c8376">CodeGenPGO::emitMCDCTestVectorBitmapUpdate</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Builder,</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                                                <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *S,</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                                                <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> MCDCCondBitmapAddr,</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                                                <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;  <span class="keywordflow">if</span> (!canEmitMCDCCoverage(Builder) || !RegionMCDCState)</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;  S = S-&gt;IgnoreParens();</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;  <span class="keyword">auto</span> DecisionStateIter = RegionMCDCState-&gt;DecisionByStmt.find(S);</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;  <span class="keywordflow">if</span> (DecisionStateIter == RegionMCDCState-&gt;DecisionByStmt.end())</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;  <span class="comment">// Extract the offset of the global bitmap associated with this expression.</span></div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  <span class="keywordtype">unsigned</span> MCDCTestVectorBitmapOffset = DecisionStateIter-&gt;second.BitmapIdx;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;  <span class="keyword">auto</span> *I8PtrTy = llvm::PointerType::getUnqual(CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6c8cff399ad98c730cce0907b1acd44e">getLLVMContext</a>());</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160; </div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;  <span class="comment">// Emit intrinsic responsible for updating the global bitmap corresponding to</span></div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;  <span class="comment">// a boolean expression. The index being set is based on the value loaded</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;  <span class="comment">// from a pointer to a dedicated temporary value on the stack that is itself</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="comment">// updated via emitMCDCCondBitmapReset() and emitMCDCCondBitmapUpdate(). The</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;  <span class="comment">// index represents an executed test vector.</span></div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  llvm::Value *Args[5] = {llvm::ConstantExpr::getBitCast(FuncNameVar, I8PtrTy),</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                          Builder.getInt64(FunctionHash),</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                          Builder.getInt32(RegionMCDCState-&gt;BitmapBytes),</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                          Builder.getInt32(MCDCTestVectorBitmapOffset),</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                          MCDCCondBitmapAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF)};</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  Builder.CreateCall(</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#aec0fd9d10600050f1bd620f068ba52c6">getIntrinsic</a>(llvm::Intrinsic::instrprof_mcdc_tvbitmap_update), Args);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;}</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160; </div>
<div class="line"><a name="l01271"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a7556a0d4757eb6c794710c41c2845523"> 1271</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a7556a0d4757eb6c794710c41c2845523">CodeGenPGO::emitMCDCCondBitmapReset</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Builder, <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *S,</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;                                         <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> MCDCCondBitmapAddr) {</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  <span class="keywordflow">if</span> (!canEmitMCDCCoverage(Builder) || !RegionMCDCState)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;  S = S-&gt;IgnoreParens();</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;  <span class="keywordflow">if</span> (!RegionMCDCState-&gt;DecisionByStmt.contains(S))</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;  <span class="comment">// Emit intrinsic that resets a dedicated temporary value on the stack to 0.</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  Builder.CreateStore(Builder.getInt32(0), MCDCCondBitmapAddr);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160; </div>
<div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a67f5e195aaed5cc21399d7bf870d6e19"> 1285</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a67f5e195aaed5cc21399d7bf870d6e19">CodeGenPGO::emitMCDCCondBitmapUpdate</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Builder, <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *S,</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                                          <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> MCDCCondBitmapAddr,</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                                          llvm::Value *Val,</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;                                          <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  <span class="keywordflow">if</span> (!canEmitMCDCCoverage(Builder) || !RegionMCDCState)</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160; </div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;  <span class="comment">// Even though, for simplicity, parentheses and unary logical-NOT operators</span></div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;  <span class="comment">// are considered part of their underlying condition for both MC/DC and</span></div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;  <span class="comment">// branch coverage, the condition IDs themselves are assigned and tracked</span></div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;  <span class="comment">// using the underlying condition itself.  This is done solely for</span></div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;  <span class="comment">// consistency since parentheses and logical-NOTs are ignored when checking</span></div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;  <span class="comment">// whether the condition is actually an instrumentable condition. This can</span></div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  <span class="comment">// also make debugging a bit easier.</span></div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  S = <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa9ddde8ef27a50d815c2e5944d290942">CodeGenFunction::stripCond</a>(S);</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160; </div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;  <span class="keyword">auto</span> BranchStateIter = RegionMCDCState-&gt;BranchByStmt.find(S);</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;  <span class="keywordflow">if</span> (BranchStateIter == RegionMCDCState-&gt;BranchByStmt.end())</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160; </div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;  <span class="comment">// Extract the ID of the condition we are setting in the bitmap.</span></div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;Branch = BranchStateIter-&gt;second;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  assert(Branch.ID &gt;= 0 &amp;&amp; <span class="stringliteral">&quot;Condition has no ID!&quot;</span>);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160; </div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;  <span class="keyword">auto</span> *I8PtrTy = llvm::PointerType::getUnqual(CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6c8cff399ad98c730cce0907b1acd44e">getLLVMContext</a>());</div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160; </div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="comment">// Emit intrinsic that updates a dedicated temporary value on the stack after</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="comment">// a condition is evaluated. After the set of conditions has been updated,</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;  <span class="comment">// the resulting value is used to update the boolean expression&#39;s bitmap.</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  llvm::Value *Args[5] = {llvm::ConstantExpr::getBitCast(FuncNameVar, I8PtrTy),</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                          Builder.getInt64(FunctionHash),</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                          Builder.getInt32(Branch.ID),</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                          MCDCCondBitmapAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), Val};</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  Builder.CreateCall(</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#aec0fd9d10600050f1bd620f068ba52c6">getIntrinsic</a>(llvm::Intrinsic::instrprof_mcdc_condbitmap_update),</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      Args);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;}</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a276d9e3f0a7cef980d270053400a0fb3"> 1323</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a276d9e3f0a7cef980d270053400a0fb3">CodeGenPGO::setValueProfilingFlag</a>(llvm::Module &amp;M) {</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  <span class="keywordflow">if</span> (CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().<a class="code" href="classclang_1_1CodeGenOptions.html#a669d55f4c690e9e5e6a5060468429955">hasProfileClangInstr</a>())</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;    M.addModuleFlag(<a class="code" href="namespaceclang_1_1serialized__diags.html#aff3d77d6832f7e576d1f410a478997aaa707d0f3b9e326cb8771d3aaf21767236">llvm::Module::Warning</a>, <span class="stringliteral">&quot;EnableValueProfiling&quot;</span>,</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                    uint32_t(<a class="code" href="CodeGenPGO_8cpp.html#a89ab0f7404b3b6c4922fccc675c20b67">EnableValueProfiling</a>));</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;}</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160; </div>
<div class="line"><a name="l01329"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a84c17f8b1dace863b884da69f0138313"> 1329</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a84c17f8b1dace863b884da69f0138313">CodeGenPGO::setProfileVersion</a>(llvm::Module &amp;M) {</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keywordflow">if</span> (CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().<a class="code" href="classclang_1_1CodeGenOptions.html#a669d55f4c690e9e5e6a5060468429955">hasProfileClangInstr</a>() &amp;&amp;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      <a class="code" href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a>) {</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;    <span class="keyword">const</span> StringRef VarName(INSTR_PROF_QUOTE(INSTR_PROF_RAW_VERSION_VAR));</div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    llvm::Type *IntTy64 = llvm::Type::getInt64Ty(M.getContext());</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ProfileVersion =</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;        (INSTR_PROF_RAW_VERSION | VARIANT_MASK_BYTE_COVERAGE);</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;    <span class="keyword">auto</span> IRLevelVersionVariable = <span class="keyword">new</span> llvm::GlobalVariable(</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        M, IntTy64, <span class="keyword">true</span>, llvm::GlobalValue::WeakAnyLinkage,</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        llvm::Constant::getIntegerValue(IntTy64,</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;                                        <a class="code" href="namespaceclang_1_1interp.html#a16635f6b52b1f71a033528c95bc58274">llvm::APInt</a>(64, ProfileVersion)),</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        VarName);</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    IRLevelVersionVariable-&gt;setVisibility(<a class="code" href="namespaceclang.html#afbab15cd4aa598c4e6d9192f7ac4f102af3e12fac676a05b300d4bbb673d8fa5b">llvm::GlobalValue::DefaultVisibility</a>);</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    llvm::Triple TT(M.getTargetTriple());</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keywordflow">if</span> (TT.supportsCOMDAT()) {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      IRLevelVersionVariable-&gt;setLinkage(llvm::GlobalValue::ExternalLinkage);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      IRLevelVersionVariable-&gt;setComdat(M.getOrInsertComdat(VarName));</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;    }</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;    IRLevelVersionVariable-&gt;setDSOLocal(<span class="keyword">true</span>);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  }</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;}</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160; </div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">// This method either inserts a call to the profile run-time during</span></div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">// instrumentation or puts profile data into metadata for PGO use.</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a37336591d665e85819fe45a6e36d45ca"> 1355</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a37336591d665e85819fe45a6e36d45ca">CodeGenPGO::valueProfile</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Builder, uint32_t ValueKind,</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    llvm::Instruction *ValueSite, llvm::Value *ValuePtr) {</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160; </div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="CodeGenPGO_8cpp.html#a89ab0f7404b3b6c4922fccc675c20b67">EnableValueProfiling</a>)</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160; </div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  <span class="keywordflow">if</span> (!ValuePtr || !ValueSite || !Builder.GetInsertBlock())</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160; </div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <span class="keywordflow">if</span> (isa&lt;llvm::Constant&gt;(ValuePtr))</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160; </div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <span class="keywordtype">bool</span> InstrumentValueSites = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">getCodeGenOpts</a>().<a class="code" href="classclang_1_1CodeGenOptions.html#a669d55f4c690e9e5e6a5060468429955">hasProfileClangInstr</a>();</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  <span class="keywordflow">if</span> (InstrumentValueSites &amp;&amp; RegionCounterMap) {</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keyword">auto</span> BuilderInsertPoint = Builder.saveIP();</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    Builder.SetInsertPoint(ValueSite);</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    llvm::Value *Args[5] = {</div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;        FuncNameVar,</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        Builder.getInt64(FunctionHash),</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;        Builder.CreatePtrToInt(ValuePtr, Builder.getInt64Ty()),</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;        Builder.getInt32(ValueKind),</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;        Builder.getInt32(NumValueSites[ValueKind]++)</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;    };</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    Builder.CreateCall(</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;        CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#aec0fd9d10600050f1bd620f068ba52c6">getIntrinsic</a>(llvm::Intrinsic::instrprof_value_profile), Args);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    Builder.restoreIP(BuilderInsertPoint);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  }</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160; </div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  llvm::IndexedInstrProfReader *PGOReader = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6aec167a8fbc040d3965669313df36c1">getPGOReader</a>();</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="keywordflow">if</span> (PGOReader &amp;&amp; <a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#ad799efab2341ef310821be50db6267a4">haveRegionCounts</a>()) {</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    <span class="comment">// We record the top most called three functions at each call site.</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;    <span class="comment">// Profile metadata contains &quot;VP&quot; string identifying this metadata</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    <span class="comment">// as value profiling data, then a uint32_t value for the value profiling</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="comment">// kind, a uint64_t value for the total number of times the call is</span></div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="comment">// executed, followed by the function hash and execution count (uint64_t)</span></div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <span class="comment">// pairs for each function.</span></div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <span class="keywordflow">if</span> (NumValueSites[ValueKind] &gt;= ProfRecord-&gt;getNumValueSites(ValueKind))</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160; </div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    llvm::annotateValueSite(CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), *ValueSite, *ProfRecord,</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;                            (llvm::InstrProfValueKind)ValueKind,</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;                            NumValueSites[ValueKind]);</div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160; </div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    NumValueSites[ValueKind]++;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;  }</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;}</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160; </div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="keywordtype">void</span> CodeGenPGO::loadRegionCounts(llvm::IndexedInstrProfReader *PGOReader,</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                                  <span class="keywordtype">bool</span> IsInMainFile) {</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1e2fd46592b7b364f6877ed196a55cff">getPGOStats</a>().<a class="code" href="classclang_1_1CodeGen_1_1InstrProfStats.html#a8e43d3915fa56b4ee85f57aa97790e49">addVisited</a>(IsInMainFile);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;  RegionCounts.clear();</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <a class="code" href="classllvm_1_1Expected.html">llvm::Expected&lt;llvm::InstrProfRecord&gt;</a> RecordExpected =</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      PGOReader-&gt;getInstrProfRecord(FuncName, FunctionHash);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">auto</span> E = RecordExpected.takeError()) {</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    <span class="keyword">auto</span> IPE = std::get&lt;0&gt;(llvm::InstrProfError::take(std::move(E)));</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;    <span class="keywordflow">if</span> (IPE == llvm::instrprof_error::unknown_function)</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1e2fd46592b7b364f6877ed196a55cff">getPGOStats</a>().<a class="code" href="classclang_1_1CodeGen_1_1InstrProfStats.html#a623e5a9819bf9e664a8192dd3b6238e4">addMissing</a>(IsInMainFile);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IPE == llvm::instrprof_error::hash_mismatch)</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1e2fd46592b7b364f6877ed196a55cff">getPGOStats</a>().<a class="code" href="classclang_1_1CodeGen_1_1InstrProfStats.html#a8d39131388d43dc07d08487249d38d63">addMismatched</a>(IsInMainFile);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (IPE == llvm::instrprof_error::malformed)</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;      <span class="comment">// TODO: Consider a more specific warning for this case.</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1e2fd46592b7b364f6877ed196a55cff">getPGOStats</a>().<a class="code" href="classclang_1_1CodeGen_1_1InstrProfStats.html#a8d39131388d43dc07d08487249d38d63">addMismatched</a>(IsInMainFile);</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  }</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  ProfRecord =</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      std::make_unique&lt;llvm::InstrProfRecord&gt;(std::move(RecordExpected.get()));</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  RegionCounts = ProfRecord-&gt;Counts;</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;}</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;<span class="comment">/// Calculate what to divide by to scale weights.</span></div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">/// Given the maximum weight, calculate a divisor that will scale all the</span></div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;<span class="comment">/// weights to strictly less than UINT32_MAX.</span></div>
<div class="line"><a name="l01429"></a><span class="lineno"><a class="line" href="CodeGenPGO_8cpp.html#acb4898d9398194e3995daeb632f209cf"> 1429</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> <a class="code" href="CodeGenPGO_8cpp.html#acb4898d9398194e3995daeb632f209cf">calculateWeightScale</a>(<a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> MaxWeight) {</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="keywordflow">return</span> MaxWeight &lt; UINT32_MAX ? 1 : MaxWeight / UINT32_MAX + 1;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;}</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;<span class="comment">/// Scale an individual branch weight (and add 1).</span></div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;<span class="comment">/// Scale a 64-bit weight down to 32-bits using \c Scale.</span></div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment">/// According to Laplace&#39;s Rule of Succession, it is better to compute the</span></div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">/// weight based on the count plus 1, so universally add 1 to the value.</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">/// \pre \c Scale was calculated by \a calculateWeightScale() with a weight no</span></div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">/// greater than \c Weight.</span></div>
<div class="line"><a name="l01442"></a><span class="lineno"><a class="line" href="CodeGenPGO_8cpp.html#afb7cd5eb3f9d2e483224d9e5ad96480f"> 1442</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> uint32_t <a class="code" href="CodeGenPGO_8cpp.html#afb7cd5eb3f9d2e483224d9e5ad96480f">scaleBranchWeight</a>(<a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> Weight, <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> Scale) {</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  assert(Scale &amp;&amp; <span class="stringliteral">&quot;scale by 0?&quot;</span>);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> Scaled = Weight / Scale + 1;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  assert(Scaled &lt;= UINT32_MAX &amp;&amp; <span class="stringliteral">&quot;overflow 32-bits&quot;</span>);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="keywordflow">return</span> Scaled;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;}</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;llvm::MDNode *CodeGenFunction::createProfileWeights(<a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> TrueCount,</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;                                                    <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> FalseCount)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <span class="comment">// Check for empty weights.</span></div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  <span class="keywordflow">if</span> (!TrueCount &amp;&amp; !FalseCount)</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  <span class="comment">// Calculate how to scale down to 32-bits.</span></div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> Scale = <a class="code" href="CodeGenPGO_8cpp.html#acb4898d9398194e3995daeb632f209cf">calculateWeightScale</a>(<a class="code" href="____clang__cuda__math_8h.html#ae6bb573e13e3bd5738c8faa552b6a129">std::max</a>(TrueCount, FalseCount));</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160; </div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;  llvm::MDBuilder MDHelper(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6c8cff399ad98c730cce0907b1acd44e">getLLVMContext</a>());</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="keywordflow">return</span> MDHelper.createBranchWeights(<a class="code" href="CodeGenPGO_8cpp.html#afb7cd5eb3f9d2e483224d9e5ad96480f">scaleBranchWeight</a>(TrueCount, Scale),</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                                      <a class="code" href="CodeGenPGO_8cpp.html#afb7cd5eb3f9d2e483224d9e5ad96480f">scaleBranchWeight</a>(FalseCount, Scale));</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;}</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;llvm::MDNode *</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;CodeGenFunction::createProfileWeights(<a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;uint64_t&gt;</a> Weights)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  <span class="comment">// We need at least two elements to create meaningful weights.</span></div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  <span class="keywordflow">if</span> (Weights.size() &lt; 2)</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160; </div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;  <span class="comment">// Check for empty weights.</span></div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> MaxWeight = *std::max_element(Weights.begin(), Weights.end());</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;  <span class="keywordflow">if</span> (MaxWeight == 0)</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;  <span class="comment">// Calculate how to scale down to 32-bits.</span></div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> Scale = <a class="code" href="CodeGenPGO_8cpp.html#acb4898d9398194e3995daeb632f209cf">calculateWeightScale</a>(MaxWeight);</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160; </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;uint32_t, 16&gt;</a> ScaledWeights;</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  ScaledWeights.reserve(Weights.size());</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> W : Weights)</div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    ScaledWeights.push_back(<a class="code" href="CodeGenPGO_8cpp.html#afb7cd5eb3f9d2e483224d9e5ad96480f">scaleBranchWeight</a>(W, Scale));</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160; </div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  llvm::MDBuilder MDHelper(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6c8cff399ad98c730cce0907b1acd44e">getLLVMContext</a>());</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keywordflow">return</span> MDHelper.createBranchWeights(ScaledWeights);</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;}</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160; </div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;llvm::MDNode *</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;CodeGenFunction::createProfileWeightsForLoop(<span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *Cond,</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                                             <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> LoopCount)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <span class="keywordflow">if</span> (!PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#ad799efab2341ef310821be50db6267a4">haveRegionCounts</a>())</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  std::optional&lt;uint64_t&gt; CondCount = PGO.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a0afc67fedbb35ba68531702243784c9f">getStmtCount</a>(Cond);</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="keywordflow">if</span> (!CondCount || *CondCount == 0)</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="keywordflow">return</span> createProfileWeights(LoopCount,</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;                              <a class="code" href="____clang__cuda__math_8h.html#ae6bb573e13e3bd5738c8faa552b6a129">std::max</a>(*CondCount, LoopCount) - LoopCount);</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;}</div>
<div class="ttc" id="aBasic_2Cuda_8cpp_html_ab6882f8bbaa96cde60db40335e62eb2e"><div class="ttname"><a href="Basic_2Cuda_8cpp.html#ab6882f8bbaa96cde60db40335e62eb2e">SM</a></div><div class="ttdeci">#define SM(sm)</div><div class="ttdef"><b>Definition:</b> <a href="Basic_2Cuda_8cpp_source.html#l00082">Cuda.cpp:82</a></div></div>
<div class="ttc" id="aBlockCounter_8cpp_html_a842cba5b91938652791eecb9d362fa18"><div class="ttname"><a href="BlockCounter_8cpp.html#a842cba5b91938652791eecb9d362fa18">CountMap</a></div><div class="ttdeci">llvm::ImmutableMap&lt; CountKey, unsigned &gt; CountMap</div><div class="ttdef"><b>Definition:</b> <a href="BlockCounter_8cpp_source.html#l00047">BlockCounter.cpp:47</a></div></div>
<div class="ttc" id="aCodeGenFunction_8h_html"><div class="ttname"><a href="CodeGenFunction_8h.html">CodeGenFunction.h</a></div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_a20b66d4ae47b817de72c7afa8d2a4979"><div class="ttname"><a href="CodeGenPGO_8cpp.html#a20b66d4ae47b817de72c7afa8d2a4979">DEFINE_NESTABLE_TRAVERSAL</a></div><div class="ttdeci">#define DEFINE_NESTABLE_TRAVERSAL(N)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l00482">CodeGenPGO.cpp:482</a></div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_a89ab0f7404b3b6c4922fccc675c20b67"><div class="ttname"><a href="CodeGenPGO_8cpp.html#a89ab0f7404b3b6c4922fccc675c20b67">EnableValueProfiling</a></div><div class="ttdeci">static llvm::cl::opt&lt; bool &gt; EnableValueProfiling(&quot;enable-value-profiling&quot;, llvm::cl::desc(&quot;Enable value profiling&quot;), llvm::cl::Hidden, llvm::cl::init(false))</div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_aac70704dede76a64b7347031e4fd990a"><div class="ttname"><a href="CodeGenPGO_8cpp.html#aac70704dede76a64b7347031e4fd990a">SystemHeadersCoverage</a></div><div class="ttdeci">llvm::cl::opt&lt; bool &gt; SystemHeadersCoverage</div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_ac0bbe5b34f6a8abc9ef05e0314c09f15"><div class="ttname"><a href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15">PGOHashVersion</a></div><div class="ttdeci">PGOHashVersion</div><div class="ttdoc">The version of the PGO hash algorithm.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l00059">CodeGenPGO.cpp:59</a></div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_ac0bbe5b34f6a8abc9ef05e0314c09f15a3ebf516548cdd44420f7ff61749fc4df"><div class="ttname"><a href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a3ebf516548cdd44420f7ff61749fc4df">PGO_HASH_LATEST</a></div><div class="ttdeci">@ PGO_HASH_LATEST</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l00066">CodeGenPGO.cpp:65</a></div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285"><div class="ttname"><a href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15a6c5876000e4c8c20d93933add1511285">PGO_HASH_V1</a></div><div class="ttdeci">@ PGO_HASH_V1</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l00060">CodeGenPGO.cpp:60</a></div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_ac0bbe5b34f6a8abc9ef05e0314c09f15ab67dbfd8a3de0ff97ef69a0fcd81c537"><div class="ttname"><a href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15ab67dbfd8a3de0ff97ef69a0fcd81c537">PGO_HASH_V3</a></div><div class="ttdeci">@ PGO_HASH_V3</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l00062">CodeGenPGO.cpp:62</a></div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_ac0bbe5b34f6a8abc9ef05e0314c09f15afccb5f2d78f540f3f2b2f1421bf63037"><div class="ttname"><a href="CodeGenPGO_8cpp.html#ac0bbe5b34f6a8abc9ef05e0314c09f15afccb5f2d78f540f3f2b2f1421bf63037">PGO_HASH_V2</a></div><div class="ttdeci">@ PGO_HASH_V2</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l00061">CodeGenPGO.cpp:61</a></div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_acb4898d9398194e3995daeb632f209cf"><div class="ttname"><a href="CodeGenPGO_8cpp.html#acb4898d9398194e3995daeb632f209cf">calculateWeightScale</a></div><div class="ttdeci">static uint64_t calculateWeightScale(uint64_t MaxWeight)</div><div class="ttdoc">Calculate what to divide by to scale weights.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01429">CodeGenPGO.cpp:1429</a></div></div>
<div class="ttc" id="aCodeGenPGO_8cpp_html_afb7cd5eb3f9d2e483224d9e5ad96480f"><div class="ttname"><a href="CodeGenPGO_8cpp.html#afb7cd5eb3f9d2e483224d9e5ad96480f">scaleBranchWeight</a></div><div class="ttdeci">static uint32_t scaleBranchWeight(uint64_t Weight, uint64_t Scale)</div><div class="ttdoc">Scale an individual branch weight (and add 1).</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01442">CodeGenPGO.cpp:1442</a></div></div>
<div class="ttc" id="aCodeGenPGO_8h_html"><div class="ttname"><a href="CodeGenPGO_8h.html">CodeGenPGO.h</a></div></div>
<div class="ttc" id="aCoverageMappingGen_8h_html"><div class="ttname"><a href="CoverageMappingGen_8h.html">CoverageMappingGen.h</a></div></div>
<div class="ttc" id="aHTMLLogger_8cpp_html_a25544cda03353a1bf51de8223e358ae8"><div class="ttname"><a href="HTMLLogger_8cpp.html#a25544cda03353a1bf51de8223e358ae8">Block</a></div><div class="ttdeci">const CFGBlock * Block</div><div class="ttdef"><b>Definition:</b> <a href="HTMLLogger_8cpp_source.html#l00153">HTMLLogger.cpp:153</a></div></div>
<div class="ttc" id="aLiteralSupport_8cpp_html_a5f4a4a29292c4a1697226abf1d22b9dd"><div class="ttname"><a href="LiteralSupport_8cpp.html#a5f4a4a29292c4a1697226abf1d22b9dd">Diag</a></div><div class="ttdeci">static DiagnosticBuilder Diag(DiagnosticsEngine *Diags, const LangOptions &amp;Features, FullSourceLoc TokLoc, const char *TokBegin, const char *TokRangeBegin, const char *TokRangeEnd, unsigned DiagID)</div><div class="ttdoc">Produce a diagnostic highlighting some portion of a literal.</div><div class="ttdef"><b>Definition:</b> <a href="LiteralSupport_8cpp_source.html#l00099">LiteralSupport.cpp:99</a></div></div>
<div class="ttc" id="aRecursiveASTVisitor_8h_html"><div class="ttname"><a href="RecursiveASTVisitor_8h.html">RecursiveASTVisitor.h</a></div></div>
<div class="ttc" id="aStmtVisitor_8h_html"><div class="ttname"><a href="StmtVisitor_8h.html">StmtVisitor.h</a></div></div>
<div class="ttc" id="a____clang__cuda__math_8h_html_ae6bb573e13e3bd5738c8faa552b6a129"><div class="ttname"><a href="____clang__cuda__math_8h.html#ae6bb573e13e3bd5738c8faa552b6a129">max</a></div><div class="ttdeci">__DEVICE__ int max(int __a, int __b)</div><div class="ttdef"><b>Definition:</b> <a href="____clang__cuda__math_8h_source.html#l00196">__clang_cuda_math.h:196</a></div></div>
<div class="ttc" id="aclassBase_html"><div class="ttname"><a href="classBase.html">Base</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a091e2575135f7f9f1aeb25ba0090bfde"><div class="ttname"><a href="classclang_1_1ASTContext.html#a091e2575135f7f9f1aeb25ba0090bfde">clang::ASTContext::getSourceManager</a></div><div class="ttdeci">SourceManager &amp; getSourceManager()</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l00705">ASTContext.h:705</a></div></div>
<div class="ttc" id="aclassclang_1_1AbstractConditionalOperator_html"><div class="ttname"><a href="classclang_1_1AbstractConditionalOperator.html">clang::AbstractConditionalOperator</a></div><div class="ttdoc">AbstractConditionalOperator - An abstract base class for ConditionalOperator and BinaryConditionalOpe...</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l04193">Expr.h:4193</a></div></div>
<div class="ttc" id="aclassclang_1_1AbstractConditionalOperator_html_a3f4ca662007d01732e94a745f2b7f48b"><div class="ttname"><a href="classclang_1_1AbstractConditionalOperator.html#a3f4ca662007d01732e94a745f2b7f48b">clang::AbstractConditionalOperator::getCond</a></div><div class="ttdeci">Expr * getCond() const</div><div class="ttdoc">getCond - Return the expression representing the condition for the ?: operator.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l04371">Expr.h:4371</a></div></div>
<div class="ttc" id="aclassclang_1_1AbstractConditionalOperator_html_ab703ac625fdd9bf346d39800e8c65949"><div class="ttname"><a href="classclang_1_1AbstractConditionalOperator.html#ab703ac625fdd9bf346d39800e8c65949">clang::AbstractConditionalOperator::getTrueExpr</a></div><div class="ttdeci">Expr * getTrueExpr() const</div><div class="ttdoc">getTrueExpr - Return the subexpression representing the value of the expression if the condition eval...</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l04377">Expr.h:4377</a></div></div>
<div class="ttc" id="aclassclang_1_1AbstractConditionalOperator_html_af5ba08d72a1e6aba9e1518b823fa5a2a"><div class="ttname"><a href="classclang_1_1AbstractConditionalOperator.html#af5ba08d72a1e6aba9e1518b823fa5a2a">clang::AbstractConditionalOperator::getFalseExpr</a></div><div class="ttdeci">Expr * getFalseExpr() const</div><div class="ttdoc">getFalseExpr - Return the subexpression representing the value of the expression if the condition eva...</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l04383">Expr.h:4383</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryConditionalOperator_html"><div class="ttname"><a href="classclang_1_1BinaryConditionalOperator.html">clang::BinaryConditionalOperator</a></div><div class="ttdoc">BinaryConditionalOperator - The GNU extension to the conditional operator which allows the middle ope...</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l04293">Expr.h:4293</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html"><div class="ttname"><a href="classclang_1_1BinaryOperator.html">clang::BinaryOperator</a></div><div class="ttdoc">A builtin binary operation expression such as &quot;x + y&quot; or &quot;x &lt;= y&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03892">Expr.h:3892</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html_a0149731b48b397fabc77b60bca65c6c6"><div class="ttname"><a href="classclang_1_1BinaryOperator.html#a0149731b48b397fabc77b60bca65c6c6">clang::BinaryOperator::isLogicalOp</a></div><div class="ttdeci">static bool isLogicalOp(Opcode Opc)</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l04024">Expr.h:4024</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html_ac68857d85840e9f7b051ebd0d2e7b938"><div class="ttname"><a href="classclang_1_1BinaryOperator.html#ac68857d85840e9f7b051ebd0d2e7b938">clang::BinaryOperator::getOpcode</a></div><div class="ttdeci">Opcode getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03936">Expr.h:3936</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html_aca01c980608d4f58ff567f8028f2594e"><div class="ttname"><a href="classclang_1_1BinaryOperator.html#aca01c980608d4f58ff567f8028f2594e">clang::BinaryOperator::getRHS</a></div><div class="ttdeci">Expr * getRHS() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03943">Expr.h:3943</a></div></div>
<div class="ttc" id="aclassclang_1_1BinaryOperator_html_aff30d9d23b3726d7458571237f098b34"><div class="ttname"><a href="classclang_1_1BinaryOperator.html#aff30d9d23b3726d7458571237f098b34">clang::BinaryOperator::getLHS</a></div><div class="ttdeci">Expr * getLHS() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03941">Expr.h:3941</a></div></div>
<div class="ttc" id="aclassclang_1_1BlockDecl_html"><div class="ttname"><a href="classclang_1_1BlockDecl.html">clang::BlockDecl</a></div><div class="ttdoc">Represents a block literal declaration, which is like an unnamed FunctionDecl.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l04496">Decl.h:4496</a></div></div>
<div class="ttc" id="aclassclang_1_1BlockDecl_html_a691f9584b643dc977abcd52bbe71d776"><div class="ttname"><a href="classclang_1_1BlockDecl.html#a691f9584b643dc977abcd52bbe71d776">clang::BlockDecl::getBody</a></div><div class="ttdeci">Stmt * getBody() const override</div><div class="ttdoc">getBody - If this Decl represents a declaration for a body of code, such as a function or method defi...</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l04575">Decl.h:4575</a></div></div>
<div class="ttc" id="aclassclang_1_1BlockExpr_html"><div class="ttname"><a href="classclang_1_1BlockExpr.html">clang::BlockExpr</a></div><div class="ttdoc">BlockExpr - Adaptor class for mixing a BlockDecl with expressions.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l06214">Expr.h:6214</a></div></div>
<div class="ttc" id="aclassclang_1_1BreakStmt_html"><div class="ttname"><a href="classclang_1_1BreakStmt.html">clang::BreakStmt</a></div><div class="ttdoc">BreakStmt - This represents a break.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02980">Stmt.h:2980</a></div></div>
<div class="ttc" id="aclassclang_1_1CXXCatchStmt_html"><div class="ttname"><a href="classclang_1_1CXXCatchStmt.html">clang::CXXCatchStmt</a></div><div class="ttdoc">CXXCatchStmt - This represents a C++ catch block.</div><div class="ttdef"><b>Definition:</b> <a href="StmtCXX_8h_source.html#l00028">StmtCXX.h:28</a></div></div>
<div class="ttc" id="aclassclang_1_1CXXForRangeStmt_html"><div class="ttname"><a href="classclang_1_1CXXForRangeStmt.html">clang::CXXForRangeStmt</a></div><div class="ttdoc">CXXForRangeStmt - This represents C++0x [stmt.ranged]'s ranged for statement, represented as 'for (ra...</div><div class="ttdef"><b>Definition:</b> <a href="StmtCXX_8h_source.html#l00135">StmtCXX.h:135</a></div></div>
<div class="ttc" id="aclassclang_1_1CXXForRangeStmt_html_ada90abb7b743fcd5bc4a16a67ea6b55e"><div class="ttname"><a href="classclang_1_1CXXForRangeStmt.html#ada90abb7b743fcd5bc4a16a67ea6b55e">clang::CXXForRangeStmt::getBody</a></div><div class="ttdeci">Stmt * getBody()</div><div class="ttdef"><b>Definition:</b> <a href="StmtCXX_8h_source.html#l00170">StmtCXX.h:170</a></div></div>
<div class="ttc" id="aclassclang_1_1CXXForRangeStmt_html_aec3476f9ce94c20510ebb54552b8c4c0"><div class="ttname"><a href="classclang_1_1CXXForRangeStmt.html#aec3476f9ce94c20510ebb54552b8c4c0">clang::CXXForRangeStmt::children</a></div><div class="ttdeci">child_range children()</div><div class="ttdef"><b>Definition:</b> <a href="StmtCXX_8h_source.html#l00217">StmtCXX.h:217</a></div></div>
<div class="ttc" id="aclassclang_1_1CXXThrowExpr_html"><div class="ttname"><a href="classclang_1_1CXXThrowExpr.html">clang::CXXThrowExpr</a></div><div class="ttdoc">A C++ throw-expression (C++ [except.throw]).</div><div class="ttdef"><b>Definition:</b> <a href="ExprCXX_8h_source.html#l01202">ExprCXX.h:1202</a></div></div>
<div class="ttc" id="aclassclang_1_1CXXThrowExpr_html_a2e062dc13257996af7731d0beec7ef8c"><div class="ttname"><a href="classclang_1_1CXXThrowExpr.html#a2e062dc13257996af7731d0beec7ef8c">clang::CXXThrowExpr::getSubExpr</a></div><div class="ttdeci">const Expr * getSubExpr() const</div><div class="ttdef"><b>Definition:</b> <a href="ExprCXX_8h_source.html#l01222">ExprCXX.h:1222</a></div></div>
<div class="ttc" id="aclassclang_1_1CXXTryStmt_html"><div class="ttname"><a href="classclang_1_1CXXTryStmt.html">clang::CXXTryStmt</a></div><div class="ttdoc">CXXTryStmt - A C++ try block, including all handlers.</div><div class="ttdef"><b>Definition:</b> <a href="StmtCXX_8h_source.html#l00068">StmtCXX.h:69</a></div></div>
<div class="ttc" id="aclassclang_1_1CapturedDecl_html"><div class="ttname"><a href="classclang_1_1CapturedDecl.html">clang::CapturedDecl</a></div><div class="ttdoc">Represents the body of a CapturedStmt, and serves as its DeclContext.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l04685">Decl.h:4688</a></div></div>
<div class="ttc" id="aclassclang_1_1CapturedDecl_html_aec7be9a18c106e53a1d48a47df4b4ef8"><div class="ttname"><a href="classclang_1_1CapturedDecl.html#aec7be9a18c106e53a1d48a47df4b4ef8">clang::CapturedDecl::getBody</a></div><div class="ttdeci">Stmt * getBody() const override</div><div class="ttdoc">getBody - If this Decl represents a declaration for a body of code, such as a function or method defi...</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8cpp_source.html#l05445">Decl.cpp:5445</a></div></div>
<div class="ttc" id="aclassclang_1_1CapturedStmt_html"><div class="ttname"><a href="classclang_1_1CapturedStmt.html">clang::CapturedStmt</a></div><div class="ttdoc">This captures a statement into a function.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l03757">Stmt.h:3757</a></div></div>
<div class="ttc" id="aclassclang_1_1CaseStmt_html"><div class="ttname"><a href="classclang_1_1CaseStmt.html">clang::CaseStmt</a></div><div class="ttdoc">CaseStmt - Represent a case statement.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l01799">Stmt.h:1801</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGenOptions_html_a669d55f4c690e9e5e6a5060468429955"><div class="ttname"><a href="classclang_1_1CodeGenOptions.html#a669d55f4c690e9e5e6a5060468429955">clang::CodeGenOptions::hasProfileClangInstr</a></div><div class="ttdeci">bool hasProfileClangInstr() const</div><div class="ttdoc">Check if Clang profile instrumenation is on.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenOptions_8h_source.html#l00498">CodeGenOptions.h:498</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGenOptions_html_a7c94a9c3d9c6708972867f4aba7ffe33"><div class="ttname"><a href="classclang_1_1CodeGenOptions.html#a7c94a9c3d9c6708972867f4aba7ffe33">clang::CodeGenOptions::MainFileName</a></div><div class="ttdeci">std::string MainFileName</div><div class="ttdoc">The user provided name for the &quot;main file&quot;, if non-empty.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenOptions_8h_source.html#l00255">CodeGenOptions.h:255</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1Address_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1Address.html">clang::CodeGen::Address</a></div><div class="ttdoc">Like RawAddress, an abstract representation of an aligned address, but the pointer contained in this ...</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00111">Address.h:111</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1Address_html_a2617fe6f1d7899bd6ad99e9053072f24"><div class="ttname"><a href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">clang::CodeGen::Address::emitRawPointer</a></div><div class="ttdeci">llvm::Value * emitRawPointer(CodeGenFunction &amp;CGF) const</div><div class="ttdoc">Return the pointer contained in this class after authenticating it and adding offset to it if necessa...</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00220">Address.h:220</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html">clang::CodeGen::CGBuilderTy</a></div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00050">CGBuilder.h:50</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html">clang::CodeGen::CodeGenFunction</a></div><div class="ttdoc">CodeGenFunction - This class organizes the per-function state that is used while generating LLVM code...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00256">CodeGenFunction.h:256</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a43fdc4ac6e91724923dbb4080de1e316"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a43fdc4ac6e91724923dbb4080de1e316">clang::CodeGen::CodeGenFunction::IsConstructorDelegationValid</a></div><div class="ttdeci">static bool IsConstructorDelegationValid(const CXXConstructorDecl *Ctor)</div><div class="ttdoc">Checks whether the given constructor is a valid subject for the complete-to-base constructor delegati...</div><div class="ttdef"><b>Definition:</b> <a href="CGClass_8cpp_source.html#l00730">CGClass.cpp:730</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a7166105d572c27fff3daa90912cbf25b"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a7166105d572c27fff3daa90912cbf25b">clang::CodeGen::CodeGenFunction::isInstrumentedCondition</a></div><div class="ttdeci">static bool isInstrumentedCondition(const Expr *C)</div><div class="ttdoc">isInstrumentedCondition - Determine whether the given condition is an instrumentable condition (i....</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l01955">CodeGenFunction.cpp:1955</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_aa9ddde8ef27a50d815c2e5944d290942"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa9ddde8ef27a50d815c2e5944d290942">clang::CodeGen::CodeGenFunction::stripCond</a></div><div class="ttdeci">static const Expr * stripCond(const Expr *C)</div><div class="ttdoc">Ignore parentheses and logical-NOT to track conditions consistently.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l01944">CodeGenFunction.cpp:1944</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ac90e716619f634d438c02ba73caaafeb"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">clang::CodeGen::CodeGenFunction::CGM</a></div><div class="ttdeci">CodeGenModule &amp; CGM</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00286">CodeGenFunction.h:286</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html">clang::CodeGen::CodeGenModule</a></div><div class="ttdoc">This class organizes the cross-function state that is used while generating LLVM code.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00281">CodeGenModule.h:281</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a09a815215ff67d2e52b7605af35c40cb"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a09a815215ff67d2e52b7605af35c40cb">clang::CodeGen::CodeGenModule::getTarget</a></div><div class="ttdeci">const TargetInfo &amp; getTarget() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00776">CodeGenModule.h:776</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a1e2fd46592b7b364f6877ed196a55cff"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1e2fd46592b7b364f6877ed196a55cff">clang::CodeGen::CodeGenModule::getPGOStats</a></div><div class="ttdeci">InstrProfStats &amp; getPGOStats()</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00696">CodeGenModule.h:696</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a39ec0b0e947ef63c1ee7346afbed83bf"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">clang::CodeGen::CodeGenModule::getModule</a></div><div class="ttdeci">llvm::Module &amp; getModule() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00771">CodeGenModule.h:771</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a5012e3315238d7f13994a844a1587ee8"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">clang::CodeGen::CodeGenModule::getLangOpts</a></div><div class="ttdeci">const LangOptions &amp; getLangOpts() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00762">CodeGenModule.h:762</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a5b756a696b231a852f44682b04fc677f"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5b756a696b231a852f44682b04fc677f">clang::CodeGen::CodeGenModule::getCoverageMapping</a></div><div class="ttdeci">CoverageMappingModuleGen * getCoverageMapping() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00699">CodeGenModule.h:699</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a6aec167a8fbc040d3965669313df36c1"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6aec167a8fbc040d3965669313df36c1">clang::CodeGen::CodeGenModule::getPGOReader</a></div><div class="ttdeci">llvm::IndexedInstrProfReader * getPGOReader() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00697">CodeGenModule.h:697</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a6c8cff399ad98c730cce0907b1acd44e"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6c8cff399ad98c730cce0907b1acd44e">clang::CodeGen::CodeGenModule::getLLVMContext</a></div><div class="ttdeci">llvm::LLVMContext &amp; getLLVMContext()</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00782">CodeGenModule.h:782</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a9d831fbe47e43ffc4f06f74c705594fd"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a9d831fbe47e43ffc4f06f74c705594fd">clang::CodeGen::CodeGenModule::getDiags</a></div><div class="ttdeci">DiagnosticsEngine &amp; getDiags() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00772">CodeGenModule.h:772</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_ac72bf04603a604d7dea6f51739445a76"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">clang::CodeGen::CodeGenModule::getContext</a></div><div class="ttdeci">ASTContext &amp; getContext() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00761">CodeGenModule.h:761</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_ad8f48c532840e4acbf14579fd8b6f6cf"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#ad8f48c532840e4acbf14579fd8b6f6cf">clang::CodeGen::CodeGenModule::getCodeGenOpts</a></div><div class="ttdeci">const CodeGenOptions &amp; getCodeGenOpts() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00770">CodeGenModule.h:770</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_aec0fd9d10600050f1bd620f068ba52c6"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#aec0fd9d10600050f1bd620f068ba52c6">clang::CodeGen::CodeGenModule::getIntrinsic</a></div><div class="ttdeci">llvm::Function * getIntrinsic(unsigned IID, ArrayRef&lt; llvm::Type * &gt; Tys=std::nullopt)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8cpp_source.html#l06663">CodeGenModule.cpp:6663</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_af4ab63ab3cc6c554de2be2e26344ab7a"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#af4ab63ab3cc6c554de2be2e26344ab7a">clang::CodeGen::CodeGenModule::ClearUnusedCoverageMapping</a></div><div class="ttdeci">void ClearUnusedCoverageMapping(const Decl *D)</div><div class="ttdoc">Remove the deferred empty coverage mapping as this declaration is actually instrumented.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8cpp_source.html#l07706">CodeGenModule.cpp:7706</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html">clang::CodeGen::CodeGenPGO</a></div><div class="ttdoc">Per-function PGO state.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8h_source.html#l00029">CodeGenPGO.h:29</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_a02a7b7416e11d8fe9969d7b4096088d2"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a02a7b7416e11d8fe9969d7b4096088d2">clang::CodeGen::CodeGenPGO::assignRegionCounters</a></div><div class="ttdeci">void assignRegionCounters(GlobalDecl GD, llvm::Function *Fn)</div><div class="ttdoc">Assign counters to regions and configure them for PGO of a given function.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01020">CodeGenPGO.cpp:1020</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_a0afc67fedbb35ba68531702243784c9f"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a0afc67fedbb35ba68531702243784c9f">clang::CodeGen::CodeGenPGO::getStmtCount</a></div><div class="ttdeci">std::optional&lt; uint64_t &gt; getStmtCount(const Stmt *S) const</div><div class="ttdoc">Check if an execution count is known for a given statement.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8h_source.html#l00065">CodeGenPGO.h:65</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_a13eb93800dc7c8a52d8d3358b84c8376"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a13eb93800dc7c8a52d8d3358b84c8376">clang::CodeGen::CodeGenPGO::emitMCDCTestVectorBitmapUpdate</a></div><div class="ttdeci">void emitMCDCTestVectorBitmapUpdate(CGBuilderTy &amp;Builder, const Expr *S, Address MCDCCondBitmapAddr, CodeGenFunction &amp;CGF)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01240">CodeGenPGO.cpp:1240</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_a25f33bcd010b170fa98a1042f2970af9"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a25f33bcd010b170fa98a1042f2970af9">clang::CodeGen::CodeGenPGO::getRegionCount</a></div><div class="ttdeci">uint64_t getRegionCount(const Stmt *S)</div><div class="ttdoc">Return the region count for the counter at the given index.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8h_source.html#l00126">CodeGenPGO.h:126</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_a276d9e3f0a7cef980d270053400a0fb3"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a276d9e3f0a7cef980d270053400a0fb3">clang::CodeGen::CodeGenPGO::setValueProfilingFlag</a></div><div class="ttdeci">void setValueProfilingFlag(llvm::Module &amp;M)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01323">CodeGenPGO.cpp:1323</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_a37336591d665e85819fe45a6e36d45ca"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a37336591d665e85819fe45a6e36d45ca">clang::CodeGen::CodeGenPGO::valueProfile</a></div><div class="ttdeci">void valueProfile(CGBuilderTy &amp;Builder, uint32_t ValueKind, llvm::Instruction *ValueSite, llvm::Value *ValuePtr)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01355">CodeGenPGO.cpp:1355</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_a67f5e195aaed5cc21399d7bf870d6e19"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a67f5e195aaed5cc21399d7bf870d6e19">clang::CodeGen::CodeGenPGO::emitMCDCCondBitmapUpdate</a></div><div class="ttdeci">void emitMCDCCondBitmapUpdate(CGBuilderTy &amp;Builder, const Expr *S, Address MCDCCondBitmapAddr, llvm::Value *Val, CodeGenFunction &amp;CGF)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01285">CodeGenPGO.cpp:1285</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_a7556a0d4757eb6c794710c41c2845523"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a7556a0d4757eb6c794710c41c2845523">clang::CodeGen::CodeGenPGO::emitMCDCCondBitmapReset</a></div><div class="ttdeci">void emitMCDCCondBitmapReset(CGBuilderTy &amp;Builder, const Expr *S, Address MCDCCondBitmapAddr)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01271">CodeGenPGO.cpp:1271</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_a84c17f8b1dace863b884da69f0138313"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#a84c17f8b1dace863b884da69f0138313">clang::CodeGen::CodeGenPGO::setProfileVersion</a></div><div class="ttdeci">void setProfileVersion(llvm::Module &amp;M)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01329">CodeGenPGO.cpp:1329</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_aa52e8dab71aea532da0473b41f6fa345"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#aa52e8dab71aea532da0473b41f6fa345">clang::CodeGen::CodeGenPGO::emitEmptyCounterMapping</a></div><div class="ttdeci">void emitEmptyCounterMapping(const Decl *D, StringRef FuncName, llvm::GlobalValue::LinkageTypes Linkage)</div><div class="ttdoc">Emit a coverage mapping range with a counter zero for an unused declaration.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01149">CodeGenPGO.cpp:1149</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_aaf38f5b11df29ff591df5c71d8c32078"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#aaf38f5b11df29ff591df5c71d8c32078">clang::CodeGen::CodeGenPGO::emitMCDCParameters</a></div><div class="ttdeci">void emitMCDCParameters(CGBuilderTy &amp;Builder)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01224">CodeGenPGO.cpp:1224</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_ad799efab2341ef310821be50db6267a4"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#ad799efab2341ef310821be50db6267a4">clang::CodeGen::CodeGenPGO::haveRegionCounts</a></div><div class="ttdeci">bool haveRegionCounts() const</div><div class="ttdoc">Whether or not we have PGO region data for the current function.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8h_source.html#l00053">CodeGenPGO.h:53</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenPGO_html_ae9fd00c393108add7c292e8f9dafc425"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenPGO.html#ae9fd00c393108add7c292e8f9dafc425">clang::CodeGen::CodeGenPGO::emitCounterSetOrIncrement</a></div><div class="ttdeci">void emitCounterSetOrIncrement(CGBuilderTy &amp;Builder, const Stmt *S, llvm::Value *StepV)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenPGO_8cpp_source.html#l01193">CodeGenPGO.cpp:1193</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CoverageMappingGen_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CoverageMappingGen.html">clang::CodeGen::CoverageMappingGen</a></div><div class="ttdoc">Organizes the per-function state that is used while generating code coverage mapping data.</div><div class="ttdef"><b>Definition:</b> <a href="CoverageMappingGen_8h_source.html#l00152">CoverageMappingGen.h:152</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CoverageMappingGen_html_a44270a4fbdf18860c6d1e9816ba2f375"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CoverageMappingGen.html#a44270a4fbdf18860c6d1e9816ba2f375">clang::CodeGen::CoverageMappingGen::emitEmptyMapping</a></div><div class="ttdeci">void emitEmptyMapping(const Decl *D, llvm::raw_ostream &amp;OS)</div><div class="ttdoc">Emit the coverage mapping data for an unused function.</div><div class="ttdef"><b>Definition:</b> <a href="CoverageMappingGen_8cpp_source.html#l02456">CoverageMappingGen.cpp:2456</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CoverageMappingModuleGen_html_a22c40b9c6b59ac0a2cf15afc29d35be6"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CoverageMappingModuleGen.html#a22c40b9c6b59ac0a2cf15afc29d35be6">clang::CodeGen::CoverageMappingModuleGen::addFunctionMappingRecord</a></div><div class="ttdeci">void addFunctionMappingRecord(llvm::GlobalVariable *FunctionName, StringRef FunctionNameValue, uint64_t FunctionHash, const std::string &amp;CoverageMapping, bool IsUsed=true)</div><div class="ttdoc">Add a function's coverage mapping record to the collection of the function mapping records.</div><div class="ttdef"><b>Definition:</b> <a href="CoverageMappingGen_8cpp_source.html#l02332">CoverageMappingGen.cpp:2332</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1InstrProfStats_html_a623e5a9819bf9e664a8192dd3b6238e4"><div class="ttname"><a href="classclang_1_1CodeGen_1_1InstrProfStats.html#a623e5a9819bf9e664a8192dd3b6238e4">clang::CodeGen::InstrProfStats::addMissing</a></div><div class="ttdeci">void addMissing(bool MainFile)</div><div class="ttdoc">Record that a function we've visited has no profile data.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00235">CodeGenModule.h:235</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1InstrProfStats_html_a8d39131388d43dc07d08487249d38d63"><div class="ttname"><a href="classclang_1_1CodeGen_1_1InstrProfStats.html#a8d39131388d43dc07d08487249d38d63">clang::CodeGen::InstrProfStats::addMismatched</a></div><div class="ttdeci">void addMismatched(bool MainFile)</div><div class="ttdoc">Record that a function we've visited has mismatched profile data.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00241">CodeGenModule.h:241</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1InstrProfStats_html_a8e43d3915fa56b4ee85f57aa97790e49"><div class="ttname"><a href="classclang_1_1CodeGen_1_1InstrProfStats.html#a8e43d3915fa56b4ee85f57aa97790e49">clang::CodeGen::InstrProfStats::addVisited</a></div><div class="ttdeci">void addVisited(bool MainFile)</div><div class="ttdoc">Record that we've visited a function and whether or not that function was in the main source file.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00229">CodeGenModule.h:229</a></div></div>
<div class="ttc" id="aclassclang_1_1ConditionalOperator_html"><div class="ttname"><a href="classclang_1_1ConditionalOperator.html">clang::ConditionalOperator</a></div><div class="ttdoc">ConditionalOperator - The ?: ternary operator.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l04231">Expr.h:4231</a></div></div>
<div class="ttc" id="aclassclang_1_1ConstStmtVisitor_html"><div class="ttname"><a href="classclang_1_1ConstStmtVisitor.html">clang::ConstStmtVisitor</a></div><div class="ttdoc">ConstStmtVisitor - This class implements a simple visitor for Stmt subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="StmtVisitor_8h_source.html#l00194">StmtVisitor.h:195</a></div></div>
<div class="ttc" id="aclassclang_1_1ContinueStmt_html"><div class="ttname"><a href="classclang_1_1ContinueStmt.html">clang::ContinueStmt</a></div><div class="ttdoc">ContinueStmt - This represents a continue.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02950">Stmt.h:2950</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html"><div class="ttname"><a href="classclang_1_1Decl.html">clang::Decl</a></div><div class="ttdoc">Decl - This represents one declaration (or definition), e.g.</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00085">DeclBase.h:85</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a258c0dc4a6961ba477c3f34caa8e5096"><div class="ttname"><a href="classclang_1_1Decl.html#a258c0dc4a6961ba477c3f34caa8e5096">clang::Decl::isImplicit</a></div><div class="ttdeci">bool isImplicit() const</div><div class="ttdoc">isImplicit - Indicates whether the declaration was implicitly generated by the implementation.</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00601">DeclBase.h:601</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a3fea7c6b02a9f1f5ef8b9a2f16f02342"><div class="ttname"><a href="classclang_1_1Decl.html#a3fea7c6b02a9f1f5ef8b9a2f16f02342">clang::Decl::getBody</a></div><div class="ttdeci">virtual Stmt * getBody() const</div><div class="ttdoc">getBody - If this Decl represents a declaration for a body of code, such as a function or method defi...</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l01079">DeclBase.h:1079</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a8bc38f5603b0c4d0221c541bea43faf2"><div class="ttname"><a href="classclang_1_1Decl.html#a8bc38f5603b0c4d0221c541bea43faf2">clang::Decl::hasBody</a></div><div class="ttdeci">virtual bool hasBody() const</div><div class="ttdoc">Returns true if this Decl represents a declaration for a body of code, such as a function or method d...</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l01085">DeclBase.h:1085</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a9ac934b2f7ae95704682dc44da1f0867"><div class="ttname"><a href="classclang_1_1Decl.html#a9ac934b2f7ae95704682dc44da1f0867">clang::Decl::getLocation</a></div><div class="ttdeci">SourceLocation getLocation() const</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00447">DeclBase.h:447</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_ae7a63b99398864d86f53afd8a03c359b"><div class="ttname"><a href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">clang::Decl::hasAttr</a></div><div class="ttdeci">bool hasAttr() const</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00585">DeclBase.h:585</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_aedd1ee920162f9a35e8d249a4926d9d5"><div class="ttname"><a href="classclang_1_1Decl.html#aedd1ee920162f9a35e8d249a4926d9d5">clang::Decl::getKind</a></div><div class="ttdeci">Kind getKind() const</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00450">DeclBase.h:450</a></div></div>
<div class="ttc" id="aclassclang_1_1DefaultStmt_html"><div class="ttname"><a href="classclang_1_1DefaultStmt.html">clang::DefaultStmt</a></div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l01955">Stmt.h:1955</a></div></div>
<div class="ttc" id="aclassclang_1_1DiagnosticsEngine_html"><div class="ttname"><a href="classclang_1_1DiagnosticsEngine.html">clang::DiagnosticsEngine</a></div><div class="ttdoc">Concrete class used by the front-end to report problems and issues.</div><div class="ttdef"><b>Definition:</b> <a href="Basic_2Diagnostic_8h_source.html#l00193">Diagnostic.h:193</a></div></div>
<div class="ttc" id="aclassclang_1_1DiagnosticsEngine_html_a94e5078973aa3a34432e91f3b26263e0a43d23a1b8f299eab8b805b238407d3ae"><div class="ttname"><a href="classclang_1_1DiagnosticsEngine.html#a94e5078973aa3a34432e91f3b26263e0a43d23a1b8f299eab8b805b238407d3ae">clang::DiagnosticsEngine::Warning</a></div><div class="ttdeci">@ Warning</div><div class="ttdef"><b>Definition:</b> <a href="Basic_2Diagnostic_8h_source.html#l00200">Diagnostic.h:200</a></div></div>
<div class="ttc" id="aclassclang_1_1DoStmt_html"><div class="ttname"><a href="classclang_1_1DoStmt.html">clang::DoStmt</a></div><div class="ttdoc">DoStmt - This represents a 'do/while' stmt.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02725">Stmt.h:2725</a></div></div>
<div class="ttc" id="aclassclang_1_1DoStmt_html_a0bb1ed03c538eb146c0bdbca4b5df5a3"><div class="ttname"><a href="classclang_1_1DoStmt.html#a0bb1ed03c538eb146c0bdbca4b5df5a3">clang::DoStmt::getCond</a></div><div class="ttdeci">Expr * getCond()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02743">Stmt.h:2743</a></div></div>
<div class="ttc" id="aclassclang_1_1DoStmt_html_a941bd88854b8cd9f561a1cfd545af245"><div class="ttname"><a href="classclang_1_1DoStmt.html#a941bd88854b8cd9f561a1cfd545af245">clang::DoStmt::children</a></div><div class="ttdeci">child_range children()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02769">Stmt.h:2769</a></div></div>
<div class="ttc" id="aclassclang_1_1DoStmt_html_abe217d4623575f61d8bced562d1aaf39"><div class="ttname"><a href="classclang_1_1DoStmt.html#abe217d4623575f61d8bced562d1aaf39">clang::DoStmt::getBody</a></div><div class="ttdeci">Stmt * getBody()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02750">Stmt.h:2750</a></div></div>
<div class="ttc" id="aclassclang_1_1Expr_html"><div class="ttname"><a href="classclang_1_1Expr.html">clang::Expr</a></div><div class="ttdoc">This represents one expression.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l00110">Expr.h:110</a></div></div>
<div class="ttc" id="aclassclang_1_1ForStmt_html"><div class="ttname"><a href="classclang_1_1ForStmt.html">clang::ForStmt</a></div><div class="ttdoc">ForStmt - This represents a 'for (init;cond;inc)' stmt.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02781">Stmt.h:2781</a></div></div>
<div class="ttc" id="aclassclang_1_1ForStmt_html_a13b75dcd0e241fa6f79856f25c3a9cb9"><div class="ttname"><a href="classclang_1_1ForStmt.html#a13b75dcd0e241fa6f79856f25c3a9cb9">clang::ForStmt::children</a></div><div class="ttdeci">child_range children()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02852">Stmt.h:2852</a></div></div>
<div class="ttc" id="aclassclang_1_1ForStmt_html_a1862e5a9ace98ddef0075b43820d9528"><div class="ttname"><a href="classclang_1_1ForStmt.html#a1862e5a9ace98ddef0075b43820d9528">clang::ForStmt::getInc</a></div><div class="ttdeci">Expr * getInc()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02824">Stmt.h:2824</a></div></div>
<div class="ttc" id="aclassclang_1_1ForStmt_html_a6f73f050185a05d2492a48d3e0673094"><div class="ttname"><a href="classclang_1_1ForStmt.html#a6f73f050185a05d2492a48d3e0673094">clang::ForStmt::getBody</a></div><div class="ttdeci">Stmt * getBody()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02825">Stmt.h:2825</a></div></div>
<div class="ttc" id="aclassclang_1_1ForStmt_html_adfc65a829fed9bf7fdf39c1ad7c141fa"><div class="ttname"><a href="classclang_1_1ForStmt.html#adfc65a829fed9bf7fdf39c1ad7c141fa">clang::ForStmt::getCond</a></div><div class="ttdeci">Expr * getCond()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02823">Stmt.h:2823</a></div></div>
<div class="ttc" id="aclassclang_1_1FunctionDecl_html"><div class="ttname"><a href="classclang_1_1FunctionDecl.html">clang::FunctionDecl</a></div><div class="ttdoc">Represents a function declaration or definition.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l01970">Decl.h:1972</a></div></div>
<div class="ttc" id="aclassclang_1_1FunctionDecl_html_a06987fa159c94bf40f8c716804e1dc27"><div class="ttname"><a href="classclang_1_1FunctionDecl.html#a06987fa159c94bf40f8c716804e1dc27">clang::FunctionDecl::getBody</a></div><div class="ttdeci">Stmt * getBody(const FunctionDecl *&amp;Definition) const</div><div class="ttdoc">Retrieve the body (definition) of the function.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8cpp_source.html#l03240">Decl.cpp:3240</a></div></div>
<div class="ttc" id="aclassclang_1_1GlobalDecl_html"><div class="ttname"><a href="classclang_1_1GlobalDecl.html">clang::GlobalDecl</a></div><div class="ttdoc">GlobalDecl - represents a global declaration.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalDecl_8h_source.html#l00056">GlobalDecl.h:56</a></div></div>
<div class="ttc" id="aclassclang_1_1GlobalDecl_html_a4f2e99a5345b81055db401024184f044"><div class="ttname"><a href="classclang_1_1GlobalDecl.html#a4f2e99a5345b81055db401024184f044">clang::GlobalDecl::getCtorType</a></div><div class="ttdeci">CXXCtorType getCtorType() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalDecl_8h_source.html#l00105">GlobalDecl.h:105</a></div></div>
<div class="ttc" id="aclassclang_1_1GlobalDecl_html_ac54ca7201b896719b4a54922363710af"><div class="ttname"><a href="classclang_1_1GlobalDecl.html#ac54ca7201b896719b4a54922363710af">clang::GlobalDecl::getDecl</a></div><div class="ttdeci">const Decl * getDecl() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalDecl_8h_source.html#l00103">GlobalDecl.h:103</a></div></div>
<div class="ttc" id="aclassclang_1_1GlobalDecl_html_ad050f972b2d6a8b74b1712db0370ef9d"><div class="ttname"><a href="classclang_1_1GlobalDecl.html#ad050f972b2d6a8b74b1712db0370ef9d">clang::GlobalDecl::getDtorType</a></div><div class="ttdeci">CXXDtorType getDtorType() const</div><div class="ttdef"><b>Definition:</b> <a href="GlobalDecl_8h_source.html#l00110">GlobalDecl.h:110</a></div></div>
<div class="ttc" id="aclassclang_1_1GotoStmt_html"><div class="ttname"><a href="classclang_1_1GotoStmt.html">clang::GotoStmt</a></div><div class="ttdoc">GotoStmt - This represents a direct goto.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02862">Stmt.h:2862</a></div></div>
<div class="ttc" id="aclassclang_1_1IfStmt_html"><div class="ttname"><a href="classclang_1_1IfStmt.html">clang::IfStmt</a></div><div class="ttdoc">IfStmt - This represents an if/then/else.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02136">Stmt.h:2138</a></div></div>
<div class="ttc" id="aclassclang_1_1IndirectGotoStmt_html"><div class="ttname"><a href="classclang_1_1IndirectGotoStmt.html">clang::IndirectGotoStmt</a></div><div class="ttdoc">IndirectGotoStmt - This represents an indirect goto.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02901">Stmt.h:2901</a></div></div>
<div class="ttc" id="aclassclang_1_1LabelStmt_html"><div class="ttname"><a href="classclang_1_1LabelStmt.html">clang::LabelStmt</a></div><div class="ttdoc">LabelStmt - Represents a label, which has a substatement.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02031">Stmt.h:2031</a></div></div>
<div class="ttc" id="aclassclang_1_1LambdaExpr_html"><div class="ttname"><a href="classclang_1_1LambdaExpr.html">clang::LambdaExpr</a></div><div class="ttdoc">A C++ lambda expression, which produces a function object (of unspecified type) that can be invoked l...</div><div class="ttdef"><b>Definition:</b> <a href="ExprCXX_8h_source.html#l01947">ExprCXX.h:1948</a></div></div>
<div class="ttc" id="aclassclang_1_1ObjCForCollectionStmt_html"><div class="ttname"><a href="classclang_1_1ObjCForCollectionStmt.html">clang::ObjCForCollectionStmt</a></div><div class="ttdoc">Represents Objective-C's collection statement.</div><div class="ttdef"><b>Definition:</b> <a href="StmtObjC_8h_source.html#l00023">StmtObjC.h:23</a></div></div>
<div class="ttc" id="aclassclang_1_1ObjCMethodDecl_html"><div class="ttname"><a href="classclang_1_1ObjCMethodDecl.html">clang::ObjCMethodDecl</a></div><div class="ttdoc">ObjCMethodDecl - Represents an instance or class method declaration.</div><div class="ttdef"><b>Definition:</b> <a href="DeclObjC_8h_source.html#l00140">DeclObjC.h:140</a></div></div>
<div class="ttc" id="aclassclang_1_1ObjCMethodDecl_html_a58c4c938a6a12859b46c8314136c652b"><div class="ttname"><a href="classclang_1_1ObjCMethodDecl.html#a58c4c938a6a12859b46c8314136c652b">clang::ObjCMethodDecl::getBody</a></div><div class="ttdeci">Stmt * getBody() const override</div><div class="ttdoc">Retrieve the body of this method, if it has one.</div><div class="ttdef"><b>Definition:</b> <a href="DeclObjC_8cpp_source.html#l00908">DeclObjC.cpp:908</a></div></div>
<div class="ttc" id="aclassclang_1_1RecursiveASTVisitor_html"><div class="ttname"><a href="classclang_1_1RecursiveASTVisitor.html">clang::RecursiveASTVisitor</a></div><div class="ttdoc">A class that does preorder or postorder depth-first traversal on the entire Clang AST and visits each...</div><div class="ttdef"><b>Definition:</b> <a href="RecursiveASTVisitor_8h_source.html#l00153">RecursiveASTVisitor.h:153</a></div></div>
<div class="ttc" id="aclassclang_1_1ReturnStmt_html"><div class="ttname"><a href="classclang_1_1ReturnStmt.html">clang::ReturnStmt</a></div><div class="ttdoc">ReturnStmt - This represents a return, optionally of an expression: return; return 4;.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l03017">Stmt.h:3019</a></div></div>
<div class="ttc" id="aclassclang_1_1SourceManager_html"><div class="ttname"><a href="classclang_1_1SourceManager.html">clang::SourceManager</a></div><div class="ttdoc">This class handles loading and caching of source files into memory.</div><div class="ttdef"><b>Definition:</b> <a href="SourceManager_8h_source.html#l00659">SourceManager.h:659</a></div></div>
<div class="ttc" id="aclassclang_1_1Stmt_html"><div class="ttname"><a href="classclang_1_1Stmt.html">clang::Stmt</a></div><div class="ttdoc">Stmt - This represents one statement.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l00084">Stmt.h:84</a></div></div>
<div class="ttc" id="aclassclang_1_1Stmt_html_ae1bc6287562ce48c56562a69e7f637de"><div class="ttname"><a href="classclang_1_1Stmt.html#ae1bc6287562ce48c56562a69e7f637de">clang::Stmt::getBeginLoc</a></div><div class="ttdeci">SourceLocation getBeginLoc() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8cpp_source.html#l00338">Stmt.cpp:338</a></div></div>
<div class="ttc" id="aclassclang_1_1SwitchCase_html"><div class="ttname"><a href="classclang_1_1SwitchCase.html">clang::SwitchCase</a></div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l01754">Stmt.h:1754</a></div></div>
<div class="ttc" id="aclassclang_1_1SwitchStmt_html"><div class="ttname"><a href="classclang_1_1SwitchStmt.html">clang::SwitchStmt</a></div><div class="ttdoc">SwitchStmt - This represents a 'switch' stmt.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02387">Stmt.h:2388</a></div></div>
<div class="ttc" id="aclassclang_1_1TargetCXXABI_html_a51a60c5d0e2bed76e57cad266d8abfd3"><div class="ttname"><a href="classclang_1_1TargetCXXABI.html#a51a60c5d0e2bed76e57cad266d8abfd3">clang::TargetCXXABI::hasConstructorVariants</a></div><div class="ttdeci">bool hasConstructorVariants() const</div><div class="ttdoc">Does this ABI have different entrypoints for complete-object and base-subobject constructors?</div><div class="ttdef"><b>Definition:</b> <a href="TargetCXXABI_8h_source.html#l00194">TargetCXXABI.h:194</a></div></div>
<div class="ttc" id="aclassclang_1_1TargetInfo_html_ac3e35c0783acc034fe5eae1462d84b17"><div class="ttname"><a href="classclang_1_1TargetInfo.html#ac3e35c0783acc034fe5eae1462d84b17">clang::TargetInfo::getCXXABI</a></div><div class="ttdeci">TargetCXXABI getCXXABI() const</div><div class="ttdoc">Get the C++ ABI currently in use.</div><div class="ttdef"><b>Definition:</b> <a href="include_2clang_2Basic_2TargetInfo_8h_source.html#l01306">TargetInfo.h:1306</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html"><div class="ttname"><a href="classclang_1_1Type.html">clang::Type</a></div><div class="ttdoc">The base class of the type hierarchy.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l01607">Type.h:1607</a></div></div>
<div class="ttc" id="aclassclang_1_1UnaryOperator_html"><div class="ttname"><a href="classclang_1_1UnaryOperator.html">clang::UnaryOperator</a></div><div class="ttdoc">UnaryOperator - This represents the unary-expression's (except sizeof and alignof),...</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l02233">Expr.h:2235</a></div></div>
<div class="ttc" id="aclassclang_1_1UnaryOperator_html_a7309fe0698496ead06f77065a8cb94a1"><div class="ttname"><a href="classclang_1_1UnaryOperator.html#a7309fe0698496ead06f77065a8cb94a1">clang::UnaryOperator::getOpcode</a></div><div class="ttdeci">Opcode getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l02275">Expr.h:2275</a></div></div>
<div class="ttc" id="aclassclang_1_1WhileStmt_html"><div class="ttname"><a href="classclang_1_1WhileStmt.html">clang::WhileStmt</a></div><div class="ttdoc">WhileStmt - This represents a 'while' stmt.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02583">Stmt.h:2584</a></div></div>
<div class="ttc" id="aclassclang_1_1WhileStmt_html_ab7929ea3f57d21b62e0027b757ff038c"><div class="ttname"><a href="classclang_1_1WhileStmt.html#ab7929ea3f57d21b62e0027b757ff038c">clang::WhileStmt::getBody</a></div><div class="ttdeci">Stmt * getBody()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02648">Stmt.h:2648</a></div></div>
<div class="ttc" id="aclassclang_1_1WhileStmt_html_abd95f2d5428c8a78d0815130ca9f3f13"><div class="ttname"><a href="classclang_1_1WhileStmt.html#abd95f2d5428c8a78d0815130ca9f3f13">clang::WhileStmt::getCond</a></div><div class="ttdeci">Expr * getCond()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02636">Stmt.h:2636</a></div></div>
<div class="ttc" id="aclassclang_1_1WhileStmt_html_af6d85151f919625c12bc24703f7d2d71"><div class="ttname"><a href="classclang_1_1WhileStmt.html#af6d85151f919625c12bc24703f7d2d71">clang::WhileStmt::children</a></div><div class="ttdeci">child_range children()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l02711">Stmt.h:2711</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVM_8h_source.html#l00031">LLVM.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1Expected_html"><div class="ttname"><a href="classllvm_1_1Expected.html">llvm::Expected</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVM_8h_source.html#l00037">LLVM.h:37</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVM_8h_source.html#l00035">LLVM.h:35</a></div></div>
<div class="ttc" id="alimits_8h_html_a308d9dd2c0028ddb184b455bbd7865de"><div class="ttname"><a href="limits_8h.html#a308d9dd2c0028ddb184b455bbd7865de">CHAR_BIT</a></div><div class="ttdeci">#define CHAR_BIT</div><div class="ttdef"><b>Definition:</b> <a href="limits_8h_source.html#l00067">limits.h:67</a></div></div>
<div class="ttc" id="anamespaceclang_1_1XRayInstrKind_html_a74957f939e9c2b26d53095846a926c34"><div class="ttname"><a href="namespaceclang_1_1XRayInstrKind.html#a74957f939e9c2b26d53095846a926c34">clang::XRayInstrKind::None</a></div><div class="ttdeci">constexpr XRayInstrMask None</div><div class="ttdef"><b>Definition:</b> <a href="XRayInstr_8h_source.html#l00038">XRayInstr.h:38</a></div></div>
<div class="ttc" id="anamespaceclang_1_1interp_html_a16635f6b52b1f71a033528c95bc58274"><div class="ttname"><a href="namespaceclang_1_1interp.html#a16635f6b52b1f71a033528c95bc58274">clang::interp::APInt</a></div><div class="ttdeci">llvm::APInt APInt</div><div class="ttdef"><b>Definition:</b> <a href="Integral_8h_source.html#l00029">Integral.h:29</a></div></div>
<div class="ttc" id="anamespaceclang_1_1interp_html_a78c22da8b8a5d7be2b50556e77390657"><div class="ttname"><a href="namespaceclang_1_1interp.html#a78c22da8b8a5d7be2b50556e77390657">clang::interp::LE</a></div><div class="ttdeci">bool LE(InterpState &amp;S, CodePtr OpPC)</div><div class="ttdef"><b>Definition:</b> <a href="Interp_8h_source.html#l00882">Interp.h:882</a></div></div>
<div class="ttc" id="anamespaceclang_1_1serialized__diags_html_aff3d77d6832f7e576d1f410a478997aaa707d0f3b9e326cb8771d3aaf21767236"><div class="ttname"><a href="namespaceclang_1_1serialized__diags.html#aff3d77d6832f7e576d1f410a478997aaa707d0f3b9e326cb8771d3aaf21767236">clang::serialized_diags::Warning</a></div><div class="ttdeci">@ Warning</div><div class="ttdef"><b>Definition:</b> <a href="SerializedDiagnostics_8h_source.html#l00046">SerializedDiagnostics.h:46</a></div></div>
<div class="ttc" id="anamespaceclang_html"><div class="ttname"><a href="namespaceclang.html">clang</a></div><div class="ttdoc">The JSON file list parser is used to communicate input to InstallAPI.</div><div class="ttdef"><b>Definition:</b> <a href="CalledOnceCheck_8h_source.html#l00017">CalledOnceCheck.h:17</a></div></div>
<div class="ttc" id="anamespaceclang_html_a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639"><div class="ttname"><a href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca786887572f6ef1c20f2d8177cb2f1639">clang::OpenACCClauseKind::If</a></div><div class="ttdeci">@ If</div><div class="ttdoc">'if' clause, allowed on all the Compute Constructs, Data Constructs, Executable Constructs,...</div></div>
<div class="ttc" id="anamespaceclang_html_a07c209a701587314a04d68c934e5a16da09d2d6db60ced3215694a5b6c13888be"><div class="ttname"><a href="namespaceclang.html#a07c209a701587314a04d68c934e5a16da09d2d6db60ced3215694a5b6c13888be">clang::Ctor_Base</a></div><div class="ttdeci">@ Ctor_Base</div><div class="ttdoc">Base object ctor.</div><div class="ttdef"><b>Definition:</b> <a href="ABI_8h_source.html#l00026">ABI.h:26</a></div></div>
<div class="ttc" id="anamespaceclang_html_a6cb4fc7755d8dccec57b672a2c83b5ce"><div class="ttname"><a href="namespaceclang.html#a6cb4fc7755d8dccec57b672a2c83b5ce">clang::Linkage</a></div><div class="ttdeci">Linkage</div><div class="ttdoc">Describes the different kinds of linkage (C++ [basic.link], C99 6.2.2) that an entity may have.</div><div class="ttdef"><b>Definition:</b> <a href="include_2clang_2Basic_2Linkage_8h_source.html#l00024">Linkage.h:24</a></div></div>
<div class="ttc" id="anamespaceclang_html_a8ce1c62f474552f6cfc7c340e573e157a642f2aa7faf76ed5f2ca52bb348a34e3"><div class="ttname"><a href="namespaceclang.html#a8ce1c62f474552f6cfc7c340e573e157a642f2aa7faf76ed5f2ca52bb348a34e3">clang::Dtor_Base</a></div><div class="ttdeci">@ Dtor_Base</div><div class="ttdoc">Base object dtor.</div><div class="ttdef"><b>Definition:</b> <a href="ABI_8h_source.html#l00036">ABI.h:36</a></div></div>
<div class="ttc" id="anamespaceclang_html_addb9e36a0528443df269a65ef2ed0634"><div class="ttname"><a href="namespaceclang.html#addb9e36a0528443df269a65ef2ed0634">clang::finalize</a></div><div class="ttdeci">void finalize(TemplateInstantiationCallbackPtrs &amp;Callbacks, const Sema &amp;TheSema)</div><div class="ttdef"><b>Definition:</b> <a href="TemplateInstCallback_8h_source.html#l00052">TemplateInstCallback.h:52</a></div></div>
<div class="ttc" id="anamespaceclang_html_afbab15cd4aa598c4e6d9192f7ac4f102af3e12fac676a05b300d4bbb673d8fa5b"><div class="ttname"><a href="namespaceclang.html#afbab15cd4aa598c4e6d9192f7ac4f102af3e12fac676a05b300d4bbb673d8fa5b">clang::DefaultVisibility</a></div><div class="ttdeci">@ DefaultVisibility</div><div class="ttdoc">Objects with &quot;default&quot; visibility are seen by the dynamic linker and act like normal objects.</div><div class="ttdef"><b>Definition:</b> <a href="Visibility_8h_source.html#l00047">Visibility.h:46</a></div></div>
<div class="ttc" id="anamespacehlsl_html_a4d0646486ed9e3296180e1692dc3e921"><div class="ttname"><a href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">hlsl::uint64_t</a></div><div class="ttdeci">unsigned long uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="hlsl__basic__types_8h_source.html#l00032">hlsl_basic_types.h:32</a></div></div>
<div class="ttc" id="anamespacellvm_html"><div class="ttname"><a href="namespacellvm.html">llvm</a></div><div class="ttdoc">Diagnostic wrappers for TextAPI types for error reporting.</div><div class="ttdef"><b>Definition:</b> <a href="Dominators_8h_source.html#l00030">Dominators.h:30</a></div></div>
<div class="ttc" id="anamespacellvm_html_a56622ffc2ba406ac537095076d7fb07f"><div class="ttname"><a href="namespacellvm.html#a56622ffc2ba406ac537095076d7fb07f">llvm::EnableSingleByteCoverage</a></div><div class="ttdeci">cl::opt&lt; bool &gt; EnableSingleByteCoverage</div><div class="ttdef"><b>Definition:</b> <a href="CGExprComplex_8cpp_source.html#l00032">CGExprComplex.cpp:32</a></div></div>
<div class="ttc" id="astdbool_8h_html_a65e9886d74aaee76545e83dd09011727"><div class="ttname"><a href="stdbool_8h.html#a65e9886d74aaee76545e83dd09011727">false</a></div><div class="ttdeci">#define false</div><div class="ttdef"><b>Definition:</b> <a href="stdbool_8h_source.html#l00022">stdbool.h:22</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1MCDC_1_1State_html"><div class="ttname"><a href="structclang_1_1CodeGen_1_1MCDC_1_1State.html">clang::CodeGen::MCDC::State</a></div><div class="ttdoc">Per-Function MC/DC state.</div><div class="ttdef"><b>Definition:</b> <a href="MCDCState_8h_source.html#l00028">MCDCState.h:28</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1MCDC_1_1State_html_a7f0ed383ba2a85013124d49c07206b40"><div class="ttname"><a href="structclang_1_1CodeGen_1_1MCDC_1_1State.html#a7f0ed383ba2a85013124d49c07206b40">clang::CodeGen::MCDC::State::DecisionByStmt</a></div><div class="ttdeci">llvm::DenseMap&lt; const Stmt *, Decision &gt; DecisionByStmt</div><div class="ttdef"><b>Definition:</b> <a href="MCDCState_8h_source.html#l00035">MCDCState.h:35</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 3 2024 01:35:06 for clang by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
