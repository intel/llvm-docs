<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>clang: lib/CodeGen/CGOpenMPRuntimeGPU.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">clang
   &#160;<span id="projectnumber">19.0.0git</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_1e8ad0574bd6e387992681ee57691a07.html">CodeGen</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CGOpenMPRuntimeGPU.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="CGOpenMPRuntimeGPU_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//===---- CGOpenMPRuntimeGPU.cpp - Interface to OpenMP GPU Runtimes ----===//</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// See https://llvm.org/LICENSE.txt for license information.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// This provides a generalized class for OpenMP runtime code generation</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// specialized by GPU targets NVPTX and AMDGCN.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//===----------------------------------------------------------------------===//</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CGOpenMPRuntimeGPU_8h.html">CGOpenMPRuntimeGPU.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="CodeGenFunction_8h.html">CodeGenFunction.h</a>&quot;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Attr_8h.html">clang/AST/Attr.h</a>&quot;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="DeclOpenMP_8h.html">clang/AST/DeclOpenMP.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="OpenMPClause_8h.html">clang/AST/OpenMPClause.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StmtOpenMP_8h.html">clang/AST/StmtOpenMP.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="StmtVisitor_8h.html">clang/AST/StmtVisitor.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="include_2clang_2Basic_2Cuda_8h.html">clang/Basic/Cuda.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;llvm/ADT/SmallPtrSet.h&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;llvm/Frontend/OpenMP/OMPGridValues.h&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;llvm/Support/MathExtras.h&quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespaceclang.html">clang</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">using namespace </span>CodeGen;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">using namespace </span>llvm::omp;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160; </div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">namespace </span>{<span class="comment"></span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment">/// Pre(post)-action for different OpenMP constructs specialized for NVPTX.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment"></span><span class="keyword">class </span>NVPTXActionTy final : <span class="keyword">public</span> <a class="code" href="classclang_1_1CodeGen_1_1PrePostActionTy.html">PrePostActionTy</a> {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  llvm::FunctionCallee EnterCallee = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> EnterArgs;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  llvm::FunctionCallee ExitCallee = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> ExitArgs;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffac169fcf9bffce025b0554c2e64025a43">Conditional</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  llvm::BasicBlock *ContBlock = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160; </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  NVPTXActionTy(llvm::FunctionCallee EnterCallee,</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> EnterArgs,</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                llvm::FunctionCallee ExitCallee,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> ExitArgs, <span class="keywordtype">bool</span> <a class="code" href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffac169fcf9bffce025b0554c2e64025a43">Conditional</a> = <span class="keyword">false</span>)</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;      : EnterCallee(EnterCallee), EnterArgs(EnterArgs), ExitCallee(ExitCallee),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        ExitArgs(ExitArgs), <a class="code" href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffac169fcf9bffce025b0554c2e64025a43">Conditional</a>(<a class="code" href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffac169fcf9bffce025b0554c2e64025a43">Conditional</a>) {}</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordtype">void</span> Enter(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    llvm::Value *EnterRes = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(EnterCallee, EnterArgs);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffac169fcf9bffce025b0554c2e64025a43">Conditional</a>) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      llvm::Value *CallBool = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateIsNotNull(EnterRes);</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <span class="keyword">auto</span> *ThenBlock = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;omp_if.then&quot;</span>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      ContBlock = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;omp_if.end&quot;</span>);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;      <span class="comment">// Generate the branch (If-stmt)</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateCondBr(CallBool, ThenBlock, ContBlock);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ThenBlock);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    }</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  }</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">void</span> Done(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// Emit the rest of blocks/branches</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acd75804886d9542735d748f04de9efa1">EmitBranch</a>(ContBlock);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ContBlock, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  }</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordtype">void</span> Exit(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(ExitCallee, ExitArgs);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;};</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">/// A class to track the execution mode when codegening directives within</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">/// a target region. The appropriate mode (SPMD|NON-SPMD) is set on entry</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">/// to the target region and used by containing directives such as &#39;parallel&#39;</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">/// to emit optimized code.</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span><span class="keyword">class </span>ExecutionRuntimeModesRAII {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0c">CGOpenMPRuntimeGPU::ExecutionMode</a> SavedExecMode =</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0ca7747411110365a07a15d5b82858c40a3">CGOpenMPRuntimeGPU::EM_Unknown</a>;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0c">CGOpenMPRuntimeGPU::ExecutionMode</a> &amp;ExecMode;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  ExecutionRuntimeModesRAII(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0c">CGOpenMPRuntimeGPU::ExecutionMode</a> &amp;ExecMode,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                            <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0c">CGOpenMPRuntimeGPU::ExecutionMode</a> EntryMode)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      : ExecMode(ExecMode) {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    SavedExecMode = ExecMode;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    ExecMode = EntryMode;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  ~ExecutionRuntimeModesRAII() { ExecMode = SavedExecMode; }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;};</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *<a class="code" href="SemaOpenMP_8cpp.html#a85553ac942b29ac2b24340f19f29ab7d">getPrivateItem</a>(<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *RefExpr) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  RefExpr = RefExpr-&gt;<a class="code" href="classclang_1_1Expr.html#a6128786ad6c6ad61b66ad4ddf09b1bd8">IgnoreParens</a>();</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *ASE = dyn_cast&lt;ArraySubscriptExpr&gt;(RefExpr)) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *<a class="code" href="classBase.html">Base</a> = ASE-&gt;getBase()-&gt;IgnoreParenImpCasts();</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *TempASE = dyn_cast&lt;ArraySubscriptExpr&gt;(<a class="code" href="classBase.html">Base</a>))</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      <a class="code" href="classBase.html">Base</a> = TempASE-&gt;getBase()-&gt;IgnoreParenImpCasts();</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    RefExpr = <a class="code" href="namespaceclang_1_1format.html#a8a233e0f1d8dde41312def6c10a76038">Base</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">auto</span> *OASE = dyn_cast&lt;OMPArraySectionExpr&gt;(RefExpr)) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *<a class="code" href="classBase.html">Base</a> = OASE-&gt;getBase()-&gt;IgnoreParenImpCasts();</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *TempOASE = dyn_cast&lt;OMPArraySectionExpr&gt;(<a class="code" href="classBase.html">Base</a>))</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <a class="code" href="classBase.html">Base</a> = TempOASE-&gt;getBase()-&gt;IgnoreParenImpCasts();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">while</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *TempASE = dyn_cast&lt;ArraySubscriptExpr&gt;(<a class="code" href="classBase.html">Base</a>))</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <a class="code" href="classBase.html">Base</a> = TempASE-&gt;getBase()-&gt;IgnoreParenImpCasts();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    RefExpr = <a class="code" href="namespaceclang_1_1format.html#a8a233e0f1d8dde41312def6c10a76038">Base</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  RefExpr = RefExpr-&gt;<a class="code" href="classclang_1_1Expr.html#a54036c75e73ecdf081729210fa53e582">IgnoreParenImpCasts</a>();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *DE = dyn_cast&lt;DeclRefExpr&gt;(RefExpr))</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">return</span> cast&lt;ValueDecl&gt;(DE-&gt;getDecl()-&gt;getCanonicalDecl());</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *ME = cast&lt;MemberExpr&gt;(RefExpr);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordflow">return</span> cast&lt;ValueDecl&gt;(ME-&gt;getMemberDecl()-&gt;getCanonicalDecl());</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="keyword">static</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *buildRecordForGlobalizedVars(</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;C, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const ValueDecl *&gt;</a> EscapedDecls,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const ValueDecl *&gt;</a> EscapedDeclsForTeams,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        &amp;MappedDeclsFields,</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">int</span> BufSize) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <span class="keyword">using</span> VarsDataTy = std::pair&lt;<a class="code" href="classclang_1_1CharUnits.html">CharUnits</a> <span class="comment">/*Align*/</span>, <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *&gt;;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordflow">if</span> (EscapedDecls.empty() &amp;&amp; EscapedDeclsForTeams.empty())</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;VarsDataTy, 4&gt;</a> GlobalizedVars;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *D : EscapedDecls)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    GlobalizedVars.emplace_back(<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getDeclAlign(D), D);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *D : EscapedDeclsForTeams)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    GlobalizedVars.emplace_back(<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getDeclAlign(D), D);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="comment">// Build struct _globalized_locals_ty {</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="comment">//         /*  globalized vars  */[WarSize] align (decl_align)</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="comment">//         /*  globalized vars  */ for EscapedDeclsForTeams</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  <span class="comment">//       };</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *GlobalizedRD = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.buildImplicitRecord(<span class="stringliteral">&quot;_globalized_locals_ty&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  GlobalizedRD-&gt;<a class="code" href="classclang_1_1TagDecl.html#a5a54066831bd4af8a720ca33d3fc46da">startDefinition</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt;const ValueDecl *, 16&gt;</a> SingleEscaped(</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      EscapedDeclsForTeams.begin(), EscapedDeclsForTeams.end());</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : GlobalizedVars) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = Pair.second;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> <a class="code" href="classclang_1_1Type.html">Type</a> = VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1Type.html">Type</a>-&gt;<a class="code" href="classclang_1_1Type.html#a66aac439c2d7e5c462415a6d31502b62">isLValueReferenceType</a>())</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <a class="code" href="classclang_1_1Type.html">Type</a> = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getPointerType(<a class="code" href="classclang_1_1Type.html">Type</a>.getNonReferenceType());</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <a class="code" href="classclang_1_1Type.html">Type</a> = <a class="code" href="classclang_1_1Type.html">Type</a>.getNonReferenceType();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc = VD-&gt;<a class="code" href="classclang_1_1Decl.html#a9ac934b2f7ae95704682dc44da1f0867">getLocation</a>();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *<a class="code" href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">Field</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (SingleEscaped.count(VD)) {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <a class="code" href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">Field</a> = <a class="code" href="classclang_1_1FieldDecl.html#aa67f7d522fa70461f5f8ee134bc0888f">FieldDecl::Create</a>(</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;          C, GlobalizedRD, Loc, Loc, VD-&gt;<a class="code" href="classclang_1_1NamedDecl.html#a7fab32caa3b7d601128265248260fd37">getIdentifier</a>(), <a class="code" href="classclang_1_1Type.html">Type</a>,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getTrivialTypeSourceInfo(<a class="code" href="classclang_1_1Type.html">Type</a>, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>()),</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          <span class="comment">/*BW=*/</span><span class="keyword">nullptr</span>, <span class="comment">/*Mutable=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;          <span class="comment">/*InitStyle=*/</span><a class="code" href="namespaceclang.html#a38631de947cb87dc51f30d539410a786aa7e7fcec7cfb08e0975e5fc01e88fb44">ICIS_NoInit</a>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">Field</a>-&gt;setAccess(<a class="code" href="namespaceclang.html#afc8aabd1f46cf32e805cd0d970ef988fa163ae3a419460301961bc458f8f01fd3">AS_public</a>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">if</span> (VD-&gt;<a class="code" href="classclang_1_1Decl.html#a1e0b6223e2547ac65ddbf4802117998b">hasAttrs</a>()) {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classclang_1_1specific__attr__iterator.html">specific_attr_iterator&lt;AlignedAttr&gt;</a> I(VD-&gt;<a class="code" href="classclang_1_1Decl.html#a59463d45ab90b696a368b58d23eb49aa">getAttrs</a>().begin()),</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;             E(VD-&gt;<a class="code" href="classclang_1_1Decl.html#a59463d45ab90b696a368b58d23eb49aa">getAttrs</a>().end());</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;             I != E; ++I)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;          <a class="code" href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">Field</a>-&gt;addAttr(*I);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keywordflow">if</span> (BufSize &gt; 1) {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <a class="code" href="namespaceclang_1_1interp.html#a16635f6b52b1f71a033528c95bc58274">llvm::APInt</a> ArraySize(32, BufSize);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="classclang_1_1Type.html">Type</a> = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getConstantArrayType(<a class="code" href="classclang_1_1Type.html">Type</a>, ArraySize, <span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                      <a class="code" href="namespaceclang.html#a7aa7eb06045794431129ae08e43c0ea2a960b44c579bc2f6818d2daaf9e4c16f0">ArraySizeModifier::Normal</a>, 0);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <a class="code" href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">Field</a> = <a class="code" href="classclang_1_1FieldDecl.html#aa67f7d522fa70461f5f8ee134bc0888f">FieldDecl::Create</a>(</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;          C, GlobalizedRD, Loc, Loc, VD-&gt;<a class="code" href="classclang_1_1NamedDecl.html#a7fab32caa3b7d601128265248260fd37">getIdentifier</a>(), <a class="code" href="classclang_1_1Type.html">Type</a>,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;          <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getTrivialTypeSourceInfo(<a class="code" href="classclang_1_1Type.html">Type</a>, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>()),</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;          <span class="comment">/*BW=*/</span><span class="keyword">nullptr</span>, <span class="comment">/*Mutable=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;          <span class="comment">/*InitStyle=*/</span><a class="code" href="namespaceclang.html#a38631de947cb87dc51f30d539410a786aa7e7fcec7cfb08e0975e5fc01e88fb44">ICIS_NoInit</a>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <a class="code" href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">Field</a>-&gt;setAccess(<a class="code" href="namespaceclang.html#afc8aabd1f46cf32e805cd0d970ef988fa163ae3a419460301961bc458f8f01fd3">AS_public</a>);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <a class="code" href="namespaceclang_1_1interp.html#a16635f6b52b1f71a033528c95bc58274">llvm::APInt</a> Align(32, Pair.first.getQuantity());</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <a class="code" href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">Field</a>-&gt;addAttr(AlignedAttr::CreateImplicit(</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;          C, <span class="comment">/*IsAlignmentExpr=*/</span><span class="keyword">true</span>,</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;          <a class="code" href="classclang_1_1IntegerLiteral.html#a68782c17506bd26183c21aa2bf9dc1d7">IntegerLiteral::Create</a>(C, Align,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                 <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getIntTypeForBitwidth(32, <span class="comment">/*Signed=*/</span>0),</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                 <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>()),</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;          {}, AlignedAttr::GNU_aligned));</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    GlobalizedRD-&gt;<a class="code" href="classclang_1_1DeclContext.html#a86d2d92d17fbed1a41461bef1ec5cef8">addDecl</a>(Field);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    MappedDeclsFields.try_emplace(VD, Field);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  GlobalizedRD-&gt;<a class="code" href="classclang_1_1RecordDecl.html#acc8668f235e310c30c64285c46c640be">completeDefinition</a>();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <span class="keywordflow">return</span> GlobalizedRD;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">/// Get the list of variables that can escape their declaration context.</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"></span><span class="keyword">class </span>CheckVarsEscapingDeclContext final</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    : <span class="keyword">public</span> <a class="code" href="classclang_1_1ConstStmtVisitor.html">ConstStmtVisitor</a>&lt;CheckVarsEscapingDeclContext&gt; {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  llvm::SetVector&lt;const ValueDecl *&gt; EscapedDecls;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  llvm::SetVector&lt;const ValueDecl *&gt; EscapedVariableLengthDecls;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  llvm::SetVector&lt;const ValueDecl *&gt; DelayedVariableLengthDecls;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <a class="code" href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet&lt;const Decl *, 4&gt;</a> EscapedParameters;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *GlobalizedRD = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt; MappedDeclsFields;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordtype">bool</span> AllEscaped = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordtype">bool</span> IsForCombinedParallelRegion = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keywordtype">void</span> markAsEscaped(<span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// Do not globalize declare target variables.</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span> (!isa&lt;VarDecl&gt;(VD) ||</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        OMPDeclareTargetDeclAttr::isDeclareTargetDeclaration(VD))</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    VD = cast&lt;ValueDecl&gt;(VD-&gt;<a class="code" href="classclang_1_1Decl.html#a8dc8c86b18af77eba9afe42e4f429fdc">getCanonicalDecl</a>());</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// Use user-specified allocation.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">if</span> (VD-&gt;<a class="code" href="classclang_1_1Decl.html#a1e0b6223e2547ac65ddbf4802117998b">hasAttrs</a>() &amp;&amp; VD-&gt;<a class="code" href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">hasAttr</a>&lt;OMPAllocateDeclAttr&gt;())</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">// Variables captured by value must be globalized.</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">bool</span> IsCaptured = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *CSI = CGF.CapturedStmtInfo) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *FD = CSI-&gt;lookup(cast&lt;VarDecl&gt;(VD))) {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="comment">// Check if need to capture the variable that was already captured by</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="comment">// value in the outer region.</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        IsCaptured = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> (!IsForCombinedParallelRegion) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          <span class="keywordflow">if</span> (!FD-&gt;hasAttrs())</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          <span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="classclang_1_1Attr.html">Attr</a> = FD-&gt;getAttr&lt;OMPCaptureKindAttr&gt;();</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;          <span class="keywordflow">if</span> (!<a class="code" href="classclang_1_1Attr.html">Attr</a>)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;          <span class="keywordflow">if</span> (((<a class="code" href="classclang_1_1Attr.html">Attr</a>-&gt;getCaptureKind() != OMPC_map) &amp;&amp;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;               !<a class="code" href="namespaceclang.html#a564fc2445fc2bfb47590dfaf884fc476">isOpenMPPrivate</a>(<a class="code" href="classclang_1_1Attr.html">Attr</a>-&gt;getCaptureKind())) ||</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;              ((<a class="code" href="classclang_1_1Attr.html">Attr</a>-&gt;getCaptureKind() == OMPC_map) &amp;&amp;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;               !FD-&gt;getType()-&gt;isAnyPointerType()))</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">if</span> (!FD-&gt;getType()-&gt;isReferenceType()) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;          assert(!VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a96d0cb0fe011209ffcc3dd1ebf150194">isVariablyModifiedType</a>() &amp;&amp;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                 <span class="stringliteral">&quot;Parameter captured by value with variably modified type&quot;</span>);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          EscapedParameters.insert(VD);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!IsForCombinedParallelRegion) {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;          <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">if</span> ((!CGF.CapturedStmtInfo ||</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         (IsForCombinedParallelRegion &amp;&amp; CGF.CapturedStmtInfo)) &amp;&amp;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a48b2c2b1c98a1800de465320ee70badc">isReferenceType</a>())</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="comment">// Do not globalize variables with reference type.</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a96d0cb0fe011209ffcc3dd1ebf150194">isVariablyModifiedType</a>()) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="comment">// If not captured at the target region level then mark the escaped</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="comment">// variable as delayed.</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">if</span> (IsCaptured)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        EscapedVariableLengthDecls.insert(VD);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        DelayedVariableLengthDecls.insert(VD);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      EscapedDecls.insert(VD);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  }</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keywordtype">void</span> VisitValueDecl(<span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span> (VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a66aac439c2d7e5c462415a6d31502b62">isLValueReferenceType</a>())</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      markAsEscaped(VD);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *VarD = dyn_cast&lt;VarDecl&gt;(VD)) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">if</span> (!isa&lt;ParmVarDecl&gt;(VarD) &amp;&amp; VarD-&gt;hasInit()) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> SavedAllEscaped = AllEscaped;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        AllEscaped = VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a66aac439c2d7e5c462415a6d31502b62">isLValueReferenceType</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        Visit(VarD-&gt;getInit());</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        AllEscaped = SavedAllEscaped;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="keywordtype">void</span> VisitOpenMPCapturedStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1CapturedStmt.html">CapturedStmt</a> *S,</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                               <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;OMPClause *&gt;</a> Clauses,</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                               <span class="keywordtype">bool</span> IsCombinedParallelRegion) {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (!S)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1CapturedStmt_1_1Capture.html">CapturedStmt::Capture</a> &amp;C : S-&gt;captures()) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.capturesVariable() &amp;&amp; !<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.capturesVariableByCopy()) {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getCapturedVar();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordtype">bool</span> SavedIsForCombinedParallelRegion = IsForCombinedParallelRegion;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">if</span> (IsCombinedParallelRegion) {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;          <span class="comment">// Check if the variable is privatized in the combined construct and</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;          <span class="comment">// those private copies must be shared in the inner parallel</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;          <span class="comment">// directive.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;          IsForCombinedParallelRegion = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1OMPClause.html">OMPClause</a> *C : Clauses) {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="namespaceclang.html#a564fc2445fc2bfb47590dfaf884fc476">isOpenMPPrivate</a>(<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>-&gt;getClauseKind()) ||</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>-&gt;getClauseKind() == OMPC_reduction ||</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>-&gt;getClauseKind() == OMPC_linear ||</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>-&gt;getClauseKind() == OMPC_private)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;              <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> Vars;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *PC = dyn_cast&lt;OMPFirstprivateClause&gt;(C))</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;              Vars = PC-&gt;getVarRefs();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *PC = dyn_cast&lt;OMPLastprivateClause&gt;(C))</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;              Vars = PC-&gt;getVarRefs();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;              llvm_unreachable(<span class="stringliteral">&quot;Unexpected clause.&quot;</span>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *E : Vars) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;              <span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D =</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                  cast&lt;DeclRefExpr&gt;(E)-&gt;getDecl()-&gt;<a class="code" href="classclang_1_1Decl.html#a8dc8c86b18af77eba9afe42e4f429fdc">getCanonicalDecl</a>();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;              <span class="keywordflow">if</span> (D == VD-&gt;<a class="code" href="classclang_1_1Decl.html#a8dc8c86b18af77eba9afe42e4f429fdc">getCanonicalDecl</a>()) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                IsForCombinedParallelRegion = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;              }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="keywordflow">if</span> (IsForCombinedParallelRegion)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;          }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        markAsEscaped(VD);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keywordflow">if</span> (isa&lt;OMPCapturedExprDecl&gt;(VD))</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          VisitValueDecl(VD);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        IsForCombinedParallelRegion = SavedIsForCombinedParallelRegion;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="keywordtype">void</span> buildRecordForGlobalizedVars(<span class="keywordtype">bool</span> IsInTTDRegion) {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    assert(!GlobalizedRD &amp;&amp;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;           <span class="stringliteral">&quot;Record for globalized variables is built already.&quot;</span>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const ValueDecl *&gt;</a> EscapedDeclsForParallel, EscapedDeclsForTeams;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordtype">unsigned</span> WarpSize = CGF.getTarget().getGridValue().GV_Warp_Size;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (IsInTTDRegion)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      EscapedDeclsForTeams = EscapedDecls.getArrayRef();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      EscapedDeclsForParallel = EscapedDecls.getArrayRef();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    GlobalizedRD = ::buildRecordForGlobalizedVars(</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        CGF.getContext(), EscapedDeclsForParallel, EscapedDeclsForTeams,</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        MappedDeclsFields, WarpSize);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  CheckVarsEscapingDeclContext(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                               <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const ValueDecl *&gt;</a> TeamsReductions)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      : CGF(CGF), EscapedDecls(TeamsReductions.begin(), TeamsReductions.end()) {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keyword">virtual</span> ~CheckVarsEscapingDeclContext() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordtype">void</span> VisitDeclStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1DeclStmt.html">DeclStmt</a> *S) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">if</span> (!S)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D : S-&gt;decls())</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *VD = dyn_cast_or_null&lt;ValueDecl&gt;(D))</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        VisitValueDecl(VD);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordtype">void</span> VisitOMPExecutableDirective(<span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> *D) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span> (!D)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (!D-&gt;<a class="code" href="classclang_1_1OMPExecutableDirective.html#a1c8fb64de627234c00125b9ff6bafed4">hasAssociatedStmt</a>())</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *S =</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            dyn_cast_or_null&lt;CapturedStmt&gt;(D-&gt;<a class="code" href="classclang_1_1OMPExecutableDirective.html#af43ffb5d76e7022f8d96d74d2c556ca3">getAssociatedStmt</a>())) {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <span class="comment">// Do not analyze directives that do not actually require capturing,</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="comment">// like `omp for` or `omp simd` directives.</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt;OpenMPDirectiveKind, 4&gt;</a> CaptureRegions;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <a class="code" href="namespaceclang.html#ad3806b3677cb49b203db8df6515b54f7">getOpenMPCaptureRegions</a>(CaptureRegions, D-&gt;<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>());</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">if</span> (CaptureRegions.size() == 1 &amp;&amp; CaptureRegions.back() == OMPD_unknown) {</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        VisitStmt(S-&gt;getCapturedStmt());</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      VisitOpenMPCapturedStmt(</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;          S, D-&gt;<a class="code" href="classclang_1_1OMPExecutableDirective.html#a91f7698117747dc9b8886f6e3bee6a0f">clauses</a>(),</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;          CaptureRegions.back() == OMPD_parallel &amp;&amp;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;              <a class="code" href="namespaceclang.html#a42d4e3b439cfc085b7db7b8a30718af0">isOpenMPDistributeDirective</a>(D-&gt;<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>()));</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <span class="keywordtype">void</span> VisitCapturedStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1CapturedStmt.html">CapturedStmt</a> *S) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (!S)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1CapturedStmt_1_1Capture.html">CapturedStmt::Capture</a> &amp;C : S-&gt;captures()) {</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.capturesVariable() &amp;&amp; !<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.capturesVariableByCopy()) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getCapturedVar();</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        markAsEscaped(VD);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <span class="keywordflow">if</span> (isa&lt;OMPCapturedExprDecl&gt;(VD))</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;          VisitValueDecl(VD);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordtype">void</span> VisitLambdaExpr(<span class="keyword">const</span> <a class="code" href="classclang_1_1LambdaExpr.html">LambdaExpr</a> *E) {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span> (!E)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1LambdaCapture.html">LambdaCapture</a> &amp;C : E-&gt;<a class="code" href="classclang_1_1LambdaExpr.html#af67062fcaab4dc77808e7487048e58a2">captures</a>()) {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.capturesVariable()) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getCaptureKind() == <a class="code" href="namespaceclang.html#a4302d73c34f84f339015be4a88d5645ea041ff48e466d5940c068be89fe439e23">LCK_ByRef</a>) {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;          <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getCapturedVar();</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;          markAsEscaped(VD);</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;          <span class="keywordflow">if</span> (E-&gt;<a class="code" href="classclang_1_1LambdaExpr.html#a683e2c4c34cff42faa2c387d281e3f1d">isInitCapture</a>(&amp;C) || isa&lt;OMPCapturedExprDecl&gt;(VD))</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            VisitValueDecl(VD);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        }</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="keywordtype">void</span> VisitBlockExpr(<span class="keyword">const</span> <a class="code" href="classclang_1_1BlockExpr.html">BlockExpr</a> *E) {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keywordflow">if</span> (!E)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1BlockDecl_1_1Capture.html">BlockDecl::Capture</a> &amp;C : E-&gt;<a class="code" href="classclang_1_1BlockExpr.html#ab1123558a2bed73c9016a52281912cea">getBlockDecl</a>()-&gt;<a class="code" href="classclang_1_1BlockDecl.html#a6d59881fb427be537ab4cc332352d554">captures</a>()) {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.isByRef()) {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *VD = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getVariable();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        markAsEscaped(VD);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">if</span> (isa&lt;OMPCapturedExprDecl&gt;(VD) || VD-&gt;<a class="code" href="classclang_1_1VarDecl.html#a467213c46a275a47908744321d3d9f75">isInitCapture</a>())</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;          VisitValueDecl(VD);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  <span class="keywordtype">void</span> VisitCallExpr(<span class="keyword">const</span> <a class="code" href="classclang_1_1CallExpr.html">CallExpr</a> *E) {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">if</span> (!E)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *Arg : E-&gt;<a class="code" href="classclang_1_1CallExpr.html#aac613bb62328f34f8fbd8876eac3e30f">arguments</a>()) {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">if</span> (!Arg)</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">if</span> (Arg-&gt;isLValue()) {</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> SavedAllEscaped = AllEscaped;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        AllEscaped = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        Visit(Arg);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        AllEscaped = SavedAllEscaped;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        Visit(Arg);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    Visit(E-&gt;<a class="code" href="classclang_1_1CallExpr.html#ab4a8390212bdfd96c41f5451af3fb701">getCallee</a>());</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordtype">void</span> VisitDeclRefExpr(<span class="keyword">const</span> <a class="code" href="classclang_1_1DeclRefExpr.html">DeclRefExpr</a> *E) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (!E)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = E-&gt;<a class="code" href="classclang_1_1DeclRefExpr.html#a22eec021070f5d0733e90b6c5c127a25">getDecl</a>();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">if</span> (AllEscaped)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      markAsEscaped(VD);</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">if</span> (isa&lt;OMPCapturedExprDecl&gt;(VD))</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      VisitValueDecl(VD);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#adc193cd881d3e18cd0fd830ba765d66e">isInitCapture</a>())</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      VisitValueDecl(VD);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  }</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <span class="keywordtype">void</span> VisitUnaryOperator(<span class="keyword">const</span> <a class="code" href="classclang_1_1UnaryOperator.html">UnaryOperator</a> *E) {</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (!E)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (E-&gt;<a class="code" href="classclang_1_1UnaryOperator.html#a7309fe0698496ead06f77065a8cb94a1">getOpcode</a>() == UO_AddrOf) {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> SavedAllEscaped = AllEscaped;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      AllEscaped = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      Visit(E-&gt;<a class="code" href="classclang_1_1UnaryOperator.html#a804929b99cee522ce0fe5b33fa544e77">getSubExpr</a>());</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      AllEscaped = SavedAllEscaped;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      Visit(E-&gt;<a class="code" href="classclang_1_1UnaryOperator.html#a804929b99cee522ce0fe5b33fa544e77">getSubExpr</a>());</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  }</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keywordtype">void</span> VisitImplicitCastExpr(<span class="keyword">const</span> <a class="code" href="classclang_1_1ImplicitCastExpr.html">ImplicitCastExpr</a> *E) {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (!E)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (E-&gt;<a class="code" href="classclang_1_1CastExpr.html#a2e40241b31a75137d192af1ec626f9d8">getCastKind</a>() == CK_ArrayToPointerDecay) {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> SavedAllEscaped = AllEscaped;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      AllEscaped = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      Visit(E-&gt;<a class="code" href="classclang_1_1CastExpr.html#a37e3d80c4ca590eadbe49e400c50134b">getSubExpr</a>());</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      AllEscaped = SavedAllEscaped;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      Visit(E-&gt;<a class="code" href="classclang_1_1CastExpr.html#a37e3d80c4ca590eadbe49e400c50134b">getSubExpr</a>());</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordtype">void</span> VisitExpr(<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *E) {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">if</span> (!E)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordtype">bool</span> SavedAllEscaped = AllEscaped;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">if</span> (!E-&gt;<a class="code" href="classclang_1_1Expr.html#a7ca271e78c095346d73202fcee93964c">isLValue</a>())</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      AllEscaped = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *Child : E-&gt;<a class="code" href="classclang_1_1Stmt.html#a489148e5d234a5a7f00d8b02981bcee5">children</a>())</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">if</span> (Child)</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        Visit(Child);</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    AllEscaped = SavedAllEscaped;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  }</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="keywordtype">void</span> VisitStmt(<span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S) {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordflow">if</span> (!S)</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *Child : S-&gt;children())</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">if</span> (Child)</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        Visit(Child);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">  /// Returns the record that handles all the escaped local variables and used</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">  /// instead of their original storage.</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *getGlobalizedRecord(<span class="keywordtype">bool</span> IsInTTDRegion) {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (!GlobalizedRD)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      buildRecordForGlobalizedVars(IsInTTDRegion);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">return</span> GlobalizedRD;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;  }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">  /// Returns the field in the globalized record for the escaped variable.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *getFieldForGlobalizedVar(<span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    assert(GlobalizedRD &amp;&amp;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;           <span class="stringliteral">&quot;Record for globalized variables must be generated already.&quot;</span>);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> MappedDeclsFields.lookup(VD);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">  /// Returns the list of the escaped local variables/parameters.</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const ValueDecl *&gt;</a> getEscapedDecls()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">return</span> EscapedDecls.getArrayRef();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">  /// Checks if the escaped local variable is actually a parameter passed by</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">  /// value.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"></span>  <span class="keyword">const</span> llvm::SmallPtrSetImpl&lt;const Decl *&gt; &amp;getEscapedParameters()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">return</span> EscapedParameters;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">  /// Returns the list of the escaped variables with the variably modified</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">  /// types.</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const ValueDecl *&gt;</a> getEscapedVariableLengthDecls()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">return</span> EscapedVariableLengthDecls.getArrayRef();</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">  /// Returns the list of the delayed variables with the variably modified</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">  /// types.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment"></span>  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const ValueDecl *&gt;</a> getDelayedVariableLengthDecls()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">return</span> DelayedVariableLengthDecls.getArrayRef();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  }</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;};</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;} <span class="comment">// anonymous namespace</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">/// Get the id of the warp in the block.</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">/// We assume that the warp size is 32, which is always the case</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">/// on the NVPTX device, to generate more efficient code.</span></div>
<div class="line"><a name="l00507"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a95092577e143858c43bbcc8928e1ffa8">  507</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Value *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a95092577e143858c43bbcc8928e1ffa8">getNVPTXWarpID</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;  <span class="keywordtype">unsigned</span> LaneIDBits =</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      llvm::Log2_32(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a9340d803527eb2c2164d7ff1721bc98d">getTarget</a>().<a class="code" href="classclang_1_1TargetInfo.html#acba9bb0bf5c834141c5d2a65ca273d2a">getGridValue</a>().GV_Warp_Size);</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  <span class="keyword">auto</span> &amp;RT = <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>());</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">return</span> Bld.CreateAShr(RT.getGPUThreadID(CGF), LaneIDBits, <span class="stringliteral">&quot;nvptx_warp_id&quot;</span>);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">/// Get the id of the current lane in the Warp.</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">/// We assume that the warp size is 32, which is always the case</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">/// on the NVPTX device, to generate more efficient code.</span></div>
<div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a5c706b93ab05dff7677da9fa481a4b25">  518</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Value *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a5c706b93ab05dff7677da9fa481a4b25">getNVPTXLaneID</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <span class="keywordtype">unsigned</span> LaneIDBits =</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      llvm::Log2_32(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a9340d803527eb2c2164d7ff1721bc98d">getTarget</a>().<a class="code" href="classclang_1_1TargetInfo.html#acba9bb0bf5c834141c5d2a65ca273d2a">getGridValue</a>().GV_Warp_Size);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  assert(LaneIDBits &lt; 32 &amp;&amp; <span class="stringliteral">&quot;Invalid LaneIDBits size in NVPTX device.&quot;</span>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  <span class="keywordtype">unsigned</span> LaneIDMask = ~0u &gt;&gt; (32u - LaneIDBits);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="keyword">auto</span> &amp;RT = <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>());</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">return</span> Bld.CreateAnd(RT.getGPUThreadID(CGF), Bld.getInt32(LaneIDMask),</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                       <span class="stringliteral">&quot;nvptx_lane_id&quot;</span>);</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;}</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0c">CGOpenMPRuntimeGPU::ExecutionMode</a></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;CGOpenMPRuntimeGPU::getExecutionMode()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  <span class="keywordflow">return</span> CurrentExecutionMode;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0901452f843e26962262cde69855966c">CGOpenMPRuntimeGPU::DataSharingMode</a></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;CGOpenMPRuntimeGPU::getDataSharingMode()<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  <span class="keywordflow">return</span> CurrentDataSharingMode;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;}</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/// Check for inner (nested) SPMD construct, if any</span></div>
<div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a867a24bcff7e64a500c6ea7c18db7403">  540</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a867a24bcff7e64a500c6ea7c18db7403">hasNestedSPMDDirective</a>(<a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;Ctx,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                   <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *CS = D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a65fd6c1771ce206aea971592c4cacc97">getInnermostCapturedStmt</a>();</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *Body =</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      CS-&gt;<a class="code" href="classclang_1_1CapturedStmt.html#ae8ade9cc59759ca1e39d7bb9d0a76f9f">getCapturedStmt</a>()-&gt;<a class="code" href="classclang_1_1Stmt.html#ad5a9ae52b5b303a59d40032b0c76b544">IgnoreContainers</a>(<span class="comment">/*IgnoreCaptured=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *ChildStmt = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a34deac6afc54d401ea44e65d13b17be6">CGOpenMPRuntime::getSingleCompoundChild</a>(Ctx, Body);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *NestedDir =</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;          dyn_cast_or_null&lt;OMPExecutableDirective&gt;(ChildStmt)) {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="namespaceclang.html#a21f16842ce2d008fa5dabb179319a3f9">OpenMPDirectiveKind</a> DKind = NestedDir-&gt;getDirectiveKind();</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="keywordflow">switch</span> (D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>()) {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">case</span> OMPD_target:</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="namespaceclang.html#a56341f29c8efb590dd2db805c8dca624">isOpenMPParallelDirective</a>(DKind))</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">if</span> (DKind == OMPD_teams) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        Body = NestedDir-&gt;getInnermostCapturedStmt()-&gt;IgnoreContainers(</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            <span class="comment">/*IgnoreCaptured=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">if</span> (!Body)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;          <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        ChildStmt = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a34deac6afc54d401ea44e65d13b17be6">CGOpenMPRuntime::getSingleCompoundChild</a>(Ctx, Body);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *NND =</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                dyn_cast_or_null&lt;OMPExecutableDirective&gt;(ChildStmt)) {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;          DKind = NND-&gt;getDirectiveKind();</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;          <span class="keywordflow">if</span> (<a class="code" href="namespaceclang.html#a56341f29c8efb590dd2db805c8dca624">isOpenMPParallelDirective</a>(DKind))</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        }</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      }</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">case</span> OMPD_target_teams:</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="namespaceclang.html#a56341f29c8efb590dd2db805c8dca624">isOpenMPParallelDirective</a>(DKind);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">case</span> OMPD_target_simd:</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">case</span> OMPD_target_parallel:</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">case</span> OMPD_target_parallel_for:</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordflow">case</span> OMPD_target_parallel_for_simd:</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">case</span> OMPD_target_teams_distribute:</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">case</span> OMPD_target_teams_distribute_simd:</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordflow">case</span> OMPD_target_teams_distribute_parallel_for:</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordflow">case</span> OMPD_target_teams_distribute_parallel_for_simd:</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">case</span> OMPD_parallel:</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordflow">case</span> OMPD_for:</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordflow">case</span> OMPD_parallel_for:</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">case</span> OMPD_parallel_master:</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">case</span> OMPD_parallel_sections:</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <span class="keywordflow">case</span> OMPD_for_simd:</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">case</span> OMPD_parallel_for_simd:</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">case</span> OMPD_cancel:</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">case</span> OMPD_cancellation_point:</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">case</span> OMPD_ordered:</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">case</span> OMPD_threadprivate:</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">case</span> OMPD_allocate:</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">case</span> OMPD_task:</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keywordflow">case</span> OMPD_simd:</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">case</span> OMPD_sections:</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">case</span> OMPD_section:</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">case</span> OMPD_single:</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">case</span> OMPD_master:</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">case</span> OMPD_critical:</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">case</span> OMPD_taskyield:</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">case</span> OMPD_barrier:</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="keywordflow">case</span> OMPD_taskwait:</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="keywordflow">case</span> OMPD_taskgroup:</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="keywordflow">case</span> OMPD_atomic:</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">case</span> OMPD_flush:</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">case</span> OMPD_depobj:</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">case</span> OMPD_scan:</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">case</span> OMPD_teams:</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">case</span> OMPD_target_data:</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">case</span> OMPD_target_exit_data:</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">case</span> OMPD_target_enter_data:</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">case</span> OMPD_distribute:</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordflow">case</span> OMPD_distribute_simd:</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">case</span> OMPD_distribute_parallel_for:</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">case</span> OMPD_distribute_parallel_for_simd:</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordflow">case</span> OMPD_teams_distribute:</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">case</span> OMPD_teams_distribute_simd:</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">case</span> OMPD_teams_distribute_parallel_for:</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">case</span> OMPD_teams_distribute_parallel_for_simd:</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">case</span> OMPD_target_update:</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">case</span> OMPD_declare_simd:</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">case</span> OMPD_declare_variant:</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="keywordflow">case</span> OMPD_begin_declare_variant:</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">case</span> OMPD_end_declare_variant:</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keywordflow">case</span> OMPD_declare_target:</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    <span class="keywordflow">case</span> OMPD_end_declare_target:</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">case</span> OMPD_declare_reduction:</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">case</span> OMPD_declare_mapper:</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">case</span> OMPD_taskloop:</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">case</span> OMPD_taskloop_simd:</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">case</span> OMPD_master_taskloop:</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">case</span> OMPD_master_taskloop_simd:</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">case</span> OMPD_parallel_master_taskloop:</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">case</span> OMPD_parallel_master_taskloop_simd:</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">case</span> OMPD_requires:</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">case</span> OMPD_unknown:</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      llvm_unreachable(<span class="stringliteral">&quot;Unexpected directive.&quot;</span>);</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    }</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  }</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160; </div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#aa0476a4f321d90fb780333ee3f8de29b">  642</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#aa0476a4f321d90fb780333ee3f8de29b">supportsSPMDExecutionMode</a>(<a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;Ctx,</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                                      <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D) {</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="namespaceclang.html#a21f16842ce2d008fa5dabb179319a3f9">OpenMPDirectiveKind</a> <a class="code" href="namespaceclang_1_1dependency__directives__scan.html#a41c77692d1d7ec7f9f86528d1f36202f">DirectiveKind</a> = D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>();</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <span class="keywordflow">switch</span> (<a class="code" href="namespaceclang_1_1dependency__directives__scan.html#a41c77692d1d7ec7f9f86528d1f36202f">DirectiveKind</a>) {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordflow">case</span> OMPD_target:</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;  <span class="keywordflow">case</span> OMPD_target_teams:</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a867a24bcff7e64a500c6ea7c18db7403">hasNestedSPMDDirective</a>(Ctx, D);</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordflow">case</span> OMPD_target_parallel_loop:</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">case</span> OMPD_target_parallel:</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">case</span> OMPD_target_parallel_for:</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">case</span> OMPD_target_parallel_for_simd:</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="keywordflow">case</span> OMPD_target_teams_distribute_parallel_for:</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">case</span> OMPD_target_teams_distribute_parallel_for_simd:</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">case</span> OMPD_target_simd:</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  <span class="keywordflow">case</span> OMPD_target_teams_distribute_simd:</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="keywordflow">case</span> OMPD_target_teams_distribute:</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">case</span> OMPD_target_teams_loop:</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment">// Whether this is true or not depends on how the directive will</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="comment">// eventually be emitted.</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *TTLD = dyn_cast&lt;OMPTargetTeamsGenericLoopDirective&gt;(&amp;D))</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">return</span> TTLD-&gt;canBeParallelFor();</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordflow">case</span> OMPD_parallel:</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordflow">case</span> OMPD_for:</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordflow">case</span> OMPD_parallel_for:</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">case</span> OMPD_parallel_master:</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">case</span> OMPD_parallel_sections:</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">case</span> OMPD_for_simd:</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordflow">case</span> OMPD_parallel_for_simd:</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordflow">case</span> OMPD_cancel:</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keywordflow">case</span> OMPD_cancellation_point:</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">case</span> OMPD_ordered:</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">case</span> OMPD_threadprivate:</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">case</span> OMPD_allocate:</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordflow">case</span> OMPD_task:</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  <span class="keywordflow">case</span> OMPD_simd:</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">case</span> OMPD_sections:</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  <span class="keywordflow">case</span> OMPD_section:</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">case</span> OMPD_single:</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  <span class="keywordflow">case</span> OMPD_master:</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">case</span> OMPD_critical:</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordflow">case</span> OMPD_taskyield:</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">case</span> OMPD_barrier:</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordflow">case</span> OMPD_taskwait:</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">case</span> OMPD_taskgroup:</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">case</span> OMPD_atomic:</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">case</span> OMPD_flush:</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">case</span> OMPD_depobj:</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">case</span> OMPD_scan:</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;  <span class="keywordflow">case</span> OMPD_teams:</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;  <span class="keywordflow">case</span> OMPD_target_data:</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordflow">case</span> OMPD_target_exit_data:</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  <span class="keywordflow">case</span> OMPD_target_enter_data:</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">case</span> OMPD_distribute:</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">case</span> OMPD_distribute_simd:</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  <span class="keywordflow">case</span> OMPD_distribute_parallel_for:</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;  <span class="keywordflow">case</span> OMPD_distribute_parallel_for_simd:</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;  <span class="keywordflow">case</span> OMPD_teams_distribute:</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keywordflow">case</span> OMPD_teams_distribute_simd:</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;  <span class="keywordflow">case</span> OMPD_teams_distribute_parallel_for:</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  <span class="keywordflow">case</span> OMPD_teams_distribute_parallel_for_simd:</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordflow">case</span> OMPD_target_update:</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordflow">case</span> OMPD_declare_simd:</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordflow">case</span> OMPD_declare_variant:</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <span class="keywordflow">case</span> OMPD_begin_declare_variant:</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keywordflow">case</span> OMPD_end_declare_variant:</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;  <span class="keywordflow">case</span> OMPD_declare_target:</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <span class="keywordflow">case</span> OMPD_end_declare_target:</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;  <span class="keywordflow">case</span> OMPD_declare_reduction:</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keywordflow">case</span> OMPD_declare_mapper:</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">case</span> OMPD_taskloop:</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;  <span class="keywordflow">case</span> OMPD_taskloop_simd:</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;  <span class="keywordflow">case</span> OMPD_master_taskloop:</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  <span class="keywordflow">case</span> OMPD_master_taskloop_simd:</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">case</span> OMPD_parallel_master_taskloop:</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  <span class="keywordflow">case</span> OMPD_parallel_master_taskloop_simd:</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;  <span class="keywordflow">case</span> OMPD_requires:</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  <span class="keywordflow">case</span> OMPD_unknown:</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  }</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  llvm_unreachable(</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="stringliteral">&quot;Unknown programming model for OpenMP directive on NVPTX target.&quot;</span>);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="keywordtype">void</span> CGOpenMPRuntimeGPU::emitNonSPMDKernel(<span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D,</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                                             StringRef ParentName,</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                                             llvm::Function *&amp;OutlinedFn,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                             llvm::Constant *&amp;OutlinedFnID,</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                                             <span class="keywordtype">bool</span> IsOffloadEntry,</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                             <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html">RegionCodeGenTy</a> &amp;CodeGen) {</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  ExecutionRuntimeModesRAII ModeRAII(CurrentExecutionMode, EM_NonSPMD);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  EntryFunctionState EST;</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;  WrapperFunctionsMap.clear();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160; </div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  [[maybe_unused]] <span class="keywordtype">bool</span> IsBareKernel = D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#ae1b5a0e3119bfac66fc55e154af1baff">getSingleClause</a>&lt;<a class="code" href="classclang_1_1OMPXBareClause.html">OMPXBareClause</a>&gt;();</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  assert(!IsBareKernel &amp;&amp; <span class="stringliteral">&quot;bare kernel should not be at generic mode&quot;</span>);</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="comment">// Emit target region as a standalone region.</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keyword">class </span>NVPTXPrePostActionTy : <span class="keyword">public</span> <a class="code" href="classclang_1_1CodeGen_1_1PrePostActionTy.html">PrePostActionTy</a> {</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    CGOpenMPRuntimeGPU::EntryFunctionState &amp;EST;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D;</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160; </div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    NVPTXPrePostActionTy(CGOpenMPRuntimeGPU::EntryFunctionState &amp;EST,</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D)</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        : EST(EST), D(D) {}</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordtype">void</span> Enter(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keyword">auto</span> &amp;RT = <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>());</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      RT.emitKernelInit(D, CGF, EST, <span class="comment">/* IsSPMD */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="comment">// Skip target region initialization.</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      RT.setLocThreadIdInsertPt(CGF, <span class="comment">/*AtCurrentPoint=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <span class="keywordtype">void</span> Exit(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keyword">auto</span> &amp;RT = <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>());</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      RT.<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a7ad29b68e3f94284eec6f66a572236b1">clearLocThreadIdInsertPt</a>(CGF);</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      RT.emitKernelDeinit(CGF, EST, <span class="comment">/* IsSPMD */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    }</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  } Action(EST, D);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  CodeGen.<a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html#a8eac2ee18b8f08f2458d6348adfe9b2e">setAction</a>(Action);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  IsInTTDRegion = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  emitTargetOutlinedFunctionHelper(D, ParentName, OutlinedFn, OutlinedFnID,</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                                   IsOffloadEntry, CodeGen);</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  IsInTTDRegion = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;}</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="keywordtype">void</span> CGOpenMPRuntimeGPU::emitKernelInit(<span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D,</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                                        <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                                        EntryFunctionState &amp;EST, <span class="keywordtype">bool</span> IsSPMD) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;  int32_t MinThreadsVal = 1, MaxThreadsVal = -1, MinTeamsVal = 1,</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;          MaxTeamsVal = -1;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  computeMinAndMaxThreadsAndTeams(D, CGF, MinThreadsVal, MaxThreadsVal,</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                                  MinTeamsVal, MaxTeamsVal);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  Bld.restoreIP(OMPBuilder.createTargetInit(</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      Bld, IsSPMD, MinThreadsVal, MaxThreadsVal, MinTeamsVal, MaxTeamsVal));</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;  <span class="keywordflow">if</span> (!IsSPMD)</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    emitGenericVarsProlog(CGF, EST.Loc);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;}</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160; </div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="keywordtype">void</span> CGOpenMPRuntimeGPU::emitKernelDeinit(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                                          EntryFunctionState &amp;EST,</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                                          <span class="keywordtype">bool</span> IsSPMD) {</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordflow">if</span> (!IsSPMD)</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    emitGenericVarsEpilog(CGF);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="comment">// This is temporary until we remove the fixed sized buffer.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a> = CGM.getContext();</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;  <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *StaticRD = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.buildImplicitRecord(</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="stringliteral">&quot;_openmp_teams_reduction_type_$_&quot;</span>, <a class="code" href="namespaceclang.html#a9237bdb3cf715b9bff8bcb3172635548aaef12e903e606a4895a16b393bfdec8c">RecordDecl::TagKind::Union</a>);</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;  StaticRD-&gt;<a class="code" href="classclang_1_1TagDecl.html#a5a54066831bd4af8a720ca33d3fc46da">startDefinition</a>();</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *TeamReductionRec : TeamsReductions) {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> RecTy = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getRecordType(TeamReductionRec);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;    <span class="keyword">auto</span> *<a class="code" href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">Field</a> = <a class="code" href="classclang_1_1FieldDecl.html#aa67f7d522fa70461f5f8ee134bc0888f">FieldDecl::Create</a>(</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        C, StaticRD, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>(), <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>(), <span class="keyword">nullptr</span>, RecTy,</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getTrivialTypeSourceInfo(RecTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>()),</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="comment">/*BW=*/</span><span class="keyword">nullptr</span>, <span class="comment">/*Mutable=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="comment">/*InitStyle=*/</span><a class="code" href="namespaceclang.html#a38631de947cb87dc51f30d539410a786aa7e7fcec7cfb08e0975e5fc01e88fb44">ICIS_NoInit</a>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <a class="code" href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">Field</a>-&gt;setAccess(<a class="code" href="namespaceclang.html#afc8aabd1f46cf32e805cd0d970ef988fa163ae3a419460301961bc458f8f01fd3">AS_public</a>);</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    StaticRD-&gt;<a class="code" href="classclang_1_1DeclContext.html#a86d2d92d17fbed1a41461bef1ec5cef8">addDecl</a>(Field);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;  }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  StaticRD-&gt;<a class="code" href="classclang_1_1RecordDecl.html#acc8668f235e310c30c64285c46c640be">completeDefinition</a>();</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> StaticTy = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getRecordType(StaticRD);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  llvm::Type *LLVMReductionsBufferTy =</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      CGM.getTypes().ConvertTypeForMem(StaticTy);</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;DL = CGM.getModule().getDataLayout();</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <a class="code" href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">uint64_t</a> ReductionDataSize =</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      TeamsReductions.empty()</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;          ? 0</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;          : DL.getTypeAllocSize(LLVMReductionsBufferTy).getFixedValue();</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  OMPBuilder.createTargetDeinit(Bld, ReductionDataSize,</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                                <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getLangOpts().OpenMPCUDAReductionBufNum);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  TeamsReductions.clear();</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;}</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160; </div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="keywordtype">void</span> CGOpenMPRuntimeGPU::emitSPMDKernel(<span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D,</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                                          StringRef ParentName,</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                                          llvm::Function *&amp;OutlinedFn,</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                                          llvm::Constant *&amp;OutlinedFnID,</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                                          <span class="keywordtype">bool</span> IsOffloadEntry,</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html">RegionCodeGenTy</a> &amp;CodeGen) {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  ExecutionRuntimeModesRAII ModeRAII(CurrentExecutionMode, EM_SPMD);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  EntryFunctionState EST;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordtype">bool</span> IsBareKernel = D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#ae1b5a0e3119bfac66fc55e154af1baff">getSingleClause</a>&lt;<a class="code" href="classclang_1_1OMPXBareClause.html">OMPXBareClause</a>&gt;();</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="comment">// Emit target region as a standalone region.</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;  <span class="keyword">class </span>NVPTXPrePostActionTy : <span class="keyword">public</span> <a class="code" href="classclang_1_1CodeGen_1_1PrePostActionTy.html">PrePostActionTy</a> {</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;RT;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    CGOpenMPRuntimeGPU::EntryFunctionState &amp;EST;</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordtype">bool</span> IsBareKernel;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;    DataSharingMode Mode;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    NVPTXPrePostActionTy(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;RT,</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                         CGOpenMPRuntimeGPU::EntryFunctionState &amp;EST,</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                         <span class="keywordtype">bool</span> IsBareKernel, <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D)</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        : RT(RT), EST(EST), IsBareKernel(IsBareKernel),</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;          Mode(RT.CurrentDataSharingMode), D(D) {}</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordtype">void</span> Enter(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keywordflow">if</span> (IsBareKernel) {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        RT.CurrentDataSharingMode = DataSharingMode::DS_CUDA;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      }</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      RT.emitKernelInit(D, CGF, EST, <span class="comment">/* IsSPMD */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="comment">// Skip target region initialization.</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      RT.setLocThreadIdInsertPt(CGF, <span class="comment">/*AtCurrentPoint=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordtype">void</span> Exit(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <span class="keywordflow">if</span> (IsBareKernel) {</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        RT.CurrentDataSharingMode = Mode;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      }</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      RT.clearLocThreadIdInsertPt(CGF);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      RT.emitKernelDeinit(CGF, EST, <span class="comment">/* IsSPMD */</span> <span class="keyword">true</span>);</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  } Action(*<span class="keyword">this</span>, EST, IsBareKernel, D);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  CodeGen.<a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html#a8eac2ee18b8f08f2458d6348adfe9b2e">setAction</a>(Action);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  IsInTTDRegion = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  emitTargetOutlinedFunctionHelper(D, ParentName, OutlinedFn, OutlinedFnID,</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                                   IsOffloadEntry, CodeGen);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  IsInTTDRegion = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160; </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="keywordtype">void</span> CGOpenMPRuntimeGPU::emitTargetOutlinedFunction(</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D, StringRef ParentName,</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    llvm::Function *&amp;OutlinedFn, llvm::Constant *&amp;OutlinedFnID,</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;    <span class="keywordtype">bool</span> IsOffloadEntry, <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html">RegionCodeGenTy</a> &amp;CodeGen) {</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">if</span> (!IsOffloadEntry) <span class="comment">// Nothing to do.</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160; </div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;  assert(!ParentName.empty() &amp;&amp; <span class="stringliteral">&quot;Invalid target region parent name!&quot;</span>);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;  <span class="keywordtype">bool</span> Mode = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#aa0476a4f321d90fb780333ee3f8de29b">supportsSPMDExecutionMode</a>(CGM.getContext(), D);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  <span class="keywordtype">bool</span> IsBareKernel = D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#ae1b5a0e3119bfac66fc55e154af1baff">getSingleClause</a>&lt;<a class="code" href="classclang_1_1OMPXBareClause.html">OMPXBareClause</a>&gt;();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;  <span class="keywordflow">if</span> (Mode || IsBareKernel)</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    emitSPMDKernel(D, ParentName, OutlinedFn, OutlinedFnID, IsOffloadEntry,</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                   CodeGen);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    emitNonSPMDKernel(D, ParentName, OutlinedFn, OutlinedFnID, IsOffloadEntry,</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                      CodeGen);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;}</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a5f3d80a1309ae938a3b132672fd438ec">  890</a></span>&#160;<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a5f3d80a1309ae938a3b132672fd438ec">CGOpenMPRuntimeGPU::CGOpenMPRuntimeGPU</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM)</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    : <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html">CGOpenMPRuntime</a>(CGM) {</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  llvm::OpenMPIRBuilderConfig Config(</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().OpenMPIsTargetDevice, <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ac9be0d9fe786cc93c866e2ac7c458999">isGPU</a>(),</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().OpenMPOffloadMandatory,</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      <span class="comment">/*HasRequiresReverseOffload*/</span> <span class="keyword">false</span>, <span class="comment">/*HasRequiresUnifiedAddress*/</span> <span class="keyword">false</span>,</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a6e80064fefd39b7477510caaf7d44bee">hasRequiresUnifiedSharedMemory</a>(), <span class="comment">/*HasRequiresDynamicAllocators*/</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.setConfig(Config);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160; </div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().OpenMPIsTargetDevice)</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    llvm_unreachable(<span class="stringliteral">&quot;OpenMP can only handle device code.&quot;</span>);</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160; </div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().OpenMPCUDAMode)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    CurrentDataSharingMode = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0901452f843e26962262cde69855966cabaf08fec9367dd94dc6fe6e626b412d0">CGOpenMPRuntimeGPU::DS_CUDA</a>;</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;  llvm::OpenMPIRBuilder &amp;<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a> = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a3e3402fcb44557e2abeadd35a7e7238e">getOMPBuilder</a>();</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().NoGPULib || <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().<a class="code" href="classclang_1_1LangOptions.html#a91cf07350cc57571a829786c8fc2f163">OMPHostIRFile</a>.empty())</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.createGlobalFlag(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().OpenMPTargetDebug,</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                              <span class="stringliteral">&quot;__omp_rtl_debug_kind&quot;</span>);</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.createGlobalFlag(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().OpenMPTeamSubscription,</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                              <span class="stringliteral">&quot;__omp_rtl_assume_teams_oversubscription&quot;</span>);</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.createGlobalFlag(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().OpenMPThreadSubscription,</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                              <span class="stringliteral">&quot;__omp_rtl_assume_threads_oversubscription&quot;</span>);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.createGlobalFlag(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().OpenMPNoThreadState,</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                              <span class="stringliteral">&quot;__omp_rtl_assume_no_thread_state&quot;</span>);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.createGlobalFlag(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">getLangOpts</a>().OpenMPNoNestedParallelism,</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                              <span class="stringliteral">&quot;__omp_rtl_assume_no_nested_parallelism&quot;</span>);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;}</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a05ca3966a8de7baf36b32d6f743b2266">  921</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a05ca3966a8de7baf36b32d6f743b2266">CGOpenMPRuntimeGPU::emitProcBindClause</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                                              ProcBindKind ProcBind,</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                                              <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc) {</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="comment">// Nothing to do.</span></div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;}</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ad6468b8c95a5c025aadcac34787d19d7">  927</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ad6468b8c95a5c025aadcac34787d19d7">CGOpenMPRuntimeGPU::emitNumThreadsClause</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                                                llvm::Value *NumThreads,</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                                                <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc) {</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;  <span class="comment">// Nothing to do.</span></div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;}</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a336c7c1159ff2b47325b4fff0c63794b">  933</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a336c7c1159ff2b47325b4fff0c63794b">CGOpenMPRuntimeGPU::emitNumTeamsClause</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *NumTeams,</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *ThreadLimit,</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                                              <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc) {}</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a600990069fa4059ad332f29e1c80e976">  938</a></span>&#160;llvm::Function *<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a600990069fa4059ad332f29e1c80e976">CGOpenMPRuntimeGPU::emitParallelOutlinedFunction</a>(</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D,</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *ThreadIDVar, <a class="code" href="namespaceclang.html#a21f16842ce2d008fa5dabb179319a3f9">OpenMPDirectiveKind</a> InnermostKind,</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html">RegionCodeGenTy</a> &amp;CodeGen) {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;  <span class="comment">// Emit target region as a standalone region.</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;  <span class="keywordtype">bool</span> PrevIsInTTDRegion = IsInTTDRegion;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  IsInTTDRegion = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;  <span class="keyword">auto</span> *OutlinedFun =</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      cast&lt;llvm::Function&gt;(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a9f395abd345c2908a00bd665d478fd9a">CGOpenMPRuntime::emitParallelOutlinedFunction</a>(</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;          CGF, D, ThreadIDVar, InnermostKind, CodeGen));</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  IsInTTDRegion = PrevIsInTTDRegion;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;  <span class="keywordflow">if</span> (getExecutionMode() != <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0caede34f8e39ca7329156d28f1859d1bf7">CGOpenMPRuntimeGPU::EM_SPMD</a>) {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    llvm::Function *WrapperFun =</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        createParallelDataSharingWrapper(OutlinedFun, D);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    WrapperFunctionsMap[OutlinedFun] = WrapperFun;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  }</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordflow">return</span> OutlinedFun;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;}</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">/// Get list of lastprivate variables from the teams distribute ... or</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">/// teams {distribute ...} directives.</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00961"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a6d875dc8bd6f0a26d625f3f85418c811">  961</a></span>&#160;<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a6d875dc8bd6f0a26d625f3f85418c811">getDistributeLastprivateVars</a>(<a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;Ctx, <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D,</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                             <a class="code" href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt;const ValueDecl *&gt;</a> &amp;Vars) {</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;  assert(<a class="code" href="namespaceclang.html#a7689d02af684f7ecf00477bbc8dd14bc">isOpenMPTeamsDirective</a>(D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>()) &amp;&amp;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;         <span class="stringliteral">&quot;expected teams directive.&quot;</span>);</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> *Dir = &amp;D;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="namespaceclang.html#a42d4e3b439cfc085b7db7b8a30718af0">isOpenMPDistributeDirective</a>(D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>())) {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *S = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a34deac6afc54d401ea44e65d13b17be6">CGOpenMPRuntime::getSingleCompoundChild</a>(</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;            Ctx,</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;            D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a65fd6c1771ce206aea971592c4cacc97">getInnermostCapturedStmt</a>()-&gt;<a class="code" href="classclang_1_1CapturedStmt.html#ae8ade9cc59759ca1e39d7bb9d0a76f9f">getCapturedStmt</a>()-&gt;<a class="code" href="classclang_1_1Stmt.html#ad5a9ae52b5b303a59d40032b0c76b544">IgnoreContainers</a>(</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                <span class="comment">/*IgnoreCaptured=*/</span><span class="keyword">true</span>))) {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      Dir = dyn_cast_or_null&lt;OMPExecutableDirective&gt;(S);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <span class="keywordflow">if</span> (Dir &amp;&amp; !<a class="code" href="namespaceclang.html#a42d4e3b439cfc085b7db7b8a30718af0">isOpenMPDistributeDirective</a>(Dir-&gt;<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>()))</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        Dir = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    }</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  }</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  <span class="keywordflow">if</span> (!Dir)</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *C : Dir-&gt;<a class="code" href="classclang_1_1OMPExecutableDirective.html#ab6926c2d778083e65823350e8cf3b974">getClausesOfKind</a>&lt;<a class="code" href="classclang_1_1OMPLastprivateClause.html">OMPLastprivateClause</a>&gt;()) {</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *E : C-&gt;getVarRefs())</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      Vars.push_back(<a class="code" href="SemaOpenMP_8cpp.html#a85553ac942b29ac2b24340f19f29ab7d">getPrivateItem</a>(E));</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;  }</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;}</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">/// Get list of reduction variables from the teams ... directives.</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line"><a name="l00986"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a49b6bfd18b729f44dfa67a2a783d34c1">  986</a></span>&#160;<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a49b6bfd18b729f44dfa67a2a783d34c1">getTeamsReductionVars</a>(<a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;Ctx, <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D,</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                      <a class="code" href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl&lt;const ValueDecl *&gt;</a> &amp;Vars) {</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;  assert(<a class="code" href="namespaceclang.html#a7689d02af684f7ecf00477bbc8dd14bc">isOpenMPTeamsDirective</a>(D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>()) &amp;&amp;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;         <span class="stringliteral">&quot;expected teams directive.&quot;</span>);</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *C : D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#ab6926c2d778083e65823350e8cf3b974">getClausesOfKind</a>&lt;<a class="code" href="classclang_1_1OMPReductionClause.html">OMPReductionClause</a>&gt;()) {</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *E : C-&gt;privates())</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      Vars.push_back(<a class="code" href="SemaOpenMP_8cpp.html#a85553ac942b29ac2b24340f19f29ab7d">getPrivateItem</a>(E));</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;  }</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;}</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a01f9a1d9f303aa6fdabcb85153f1096c">  996</a></span>&#160;llvm::Function *<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a01f9a1d9f303aa6fdabcb85153f1096c">CGOpenMPRuntimeGPU::emitTeamsOutlinedFunction</a>(</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D,</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *ThreadIDVar, <a class="code" href="namespaceclang.html#a21f16842ce2d008fa5dabb179319a3f9">OpenMPDirectiveKind</a> InnermostKind,</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html">RegionCodeGenTy</a> &amp;CodeGen) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc = D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a6a93ab60ed9eaf3c67305ba6b203c884">getBeginLoc</a>();</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *GlobalizedRD = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt;const ValueDecl *, 4&gt;</a> LastPrivatesReductions;</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt; MappedDeclsFields;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="keywordtype">unsigned</span> WarpSize = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a09a815215ff67d2e52b7605af35c40cb">getTarget</a>().<a class="code" href="classclang_1_1TargetInfo.html#acba9bb0bf5c834141c5d2a65ca273d2a">getGridValue</a>().GV_Warp_Size;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// Globalize team reductions variable unconditionally in all modes.</span></div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="keywordflow">if</span> (getExecutionMode() != <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0caede34f8e39ca7329156d28f1859d1bf7">CGOpenMPRuntimeGPU::EM_SPMD</a>)</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a49b6bfd18b729f44dfa67a2a783d34c1">getTeamsReductionVars</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>(), D, LastPrivatesReductions);</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="keywordflow">if</span> (getExecutionMode() == <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0caede34f8e39ca7329156d28f1859d1bf7">CGOpenMPRuntimeGPU::EM_SPMD</a>) {</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a6d875dc8bd6f0a26d625f3f85418c811">getDistributeLastprivateVars</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>(), D, LastPrivatesReductions);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    <span class="keywordflow">if</span> (!LastPrivatesReductions.empty()) {</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      GlobalizedRD = ::buildRecordForGlobalizedVars(</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;          <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>(), std::nullopt, LastPrivatesReductions,</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;          MappedDeclsFields, WarpSize);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    }</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!LastPrivatesReductions.empty()) {</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    assert(!TeamAndReductions.first &amp;&amp;</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;           <span class="stringliteral">&quot;Previous team declaration is not expected.&quot;</span>);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    TeamAndReductions.first = D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#ac639a6cbe96ac4fda549d182a44ba8c3">getCapturedStmt</a>(OMPD_teams)-&gt;<a class="code" href="classclang_1_1CapturedStmt.html#a443b15961510278fa7b880763608bd90">getCapturedDecl</a>();</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    std::swap(TeamAndReductions.second, LastPrivatesReductions);</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  }</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160; </div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;  <span class="comment">// Emit target region as a standalone region.</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;  <span class="keyword">class </span>NVPTXPrePostActionTy : <span class="keyword">public</span> <a class="code" href="classclang_1_1CodeGen_1_1PrePostActionTy.html">PrePostActionTy</a> {</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> &amp;Loc;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *GlobalizedRD;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt;</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        &amp;MappedDeclsFields;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160; </div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    NVPTXPrePostActionTy(</div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> &amp;Loc, <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *GlobalizedRD,</div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt;</div>
<div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            &amp;MappedDeclsFields)</div>
<div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;        : Loc(Loc), GlobalizedRD(GlobalizedRD),</div>
<div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;          MappedDeclsFields(MappedDeclsFields) {}</div>
<div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordtype">void</span> Enter(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keyword">auto</span> &amp;Rt =</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;          <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>());</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <span class="keywordflow">if</span> (GlobalizedRD) {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;        <span class="keyword">auto</span> I = Rt.FunctionGlobalizedDecls.try_emplace(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">CurFn</a>).first;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        I-&gt;getSecond().MappedParams =</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            std::make_unique&lt;CodeGenFunction::OMPMapVars&gt;();</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        DeclToAddrMapTy &amp;<a class="code" href="StandardLibrary_8cpp.html#a925665d73bcb5b100927b8c74472687b">Data</a> = I-&gt;getSecond().LocalVarData;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Pair : MappedDeclsFields) {</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;          assert(Pair.getFirst()-&gt;isCanonicalDecl() &amp;&amp;</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                 <span class="stringliteral">&quot;Expected canonical declaration&quot;</span>);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;          <a class="code" href="StandardLibrary_8cpp.html#a925665d73bcb5b100927b8c74472687b">Data</a>.insert(std::make_pair(Pair.getFirst(), MappedVarData()));</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      }</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      Rt.emitGenericVarsProlog(CGF, Loc);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordtype">void</span> Exit(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>())</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;          .emitGenericVarsEpilog(CGF);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;  } Action(Loc, GlobalizedRD, MappedDeclsFields);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;  CodeGen.<a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html#a8eac2ee18b8f08f2458d6348adfe9b2e">setAction</a>(Action);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;  llvm::Function *OutlinedFun = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4c1dd7002cc1d577055dd57885f11be6">CGOpenMPRuntime::emitTeamsOutlinedFunction</a>(</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      CGF, D, ThreadIDVar, InnermostKind, CodeGen);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160; </div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  <span class="keywordflow">return</span> OutlinedFun;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;}</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160; </div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="keywordtype">void</span> CGOpenMPRuntimeGPU::emitGenericVarsProlog(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                                               <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc) {</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">if</span> (getDataSharingMode() != <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0901452f843e26962262cde69855966caeb169e1878130b03e9abd3844ed9d24c">CGOpenMPRuntimeGPU::DS_Generic</a>)</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> I = FunctionGlobalizedDecls.find(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">CurFn</a>);</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <span class="keywordflow">if</span> (I == FunctionGlobalizedDecls.end())</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160; </div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Rec : I-&gt;getSecond().LocalVarData) {</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *VD = cast&lt;VarDecl&gt;(Rec.first);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordtype">bool</span> EscapedParam = I-&gt;getSecond().EscapedParameters.count(Rec.first);</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> VarTy = VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>();</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="comment">// Get the local allocation of a firstprivate variable before sharing</span></div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    llvm::Value *ParValue;</div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (EscapedParam) {</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> ParLVal =</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(VD), VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>());</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      ParValue = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(ParLVal, Loc);</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;    }</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160; </div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;    <span class="comment">// Allocate space for the variable to be globalized</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    llvm::Value *AllocArgs[] = {CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a8c0fcfd20bf12f8746d76d7cb8cc1604">getTypeSize</a>(VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>())};</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;    llvm::CallBase *VoidPtr =</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                                <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_alloc_shared),</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                            AllocArgs, VD-&gt;<a class="code" href="classclang_1_1NamedDecl.html#a350fd0415d5f387716d5a970b9de4c29">getName</a>());</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <span class="comment">// FIXME: We should use the variables actual alignment as an argument.</span></div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;    VoidPtr-&gt;addRetAttr(llvm::Attribute::get(</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6c8cff399ad98c730cce0907b1acd44e">getLLVMContext</a>(), llvm::Attribute::Alignment,</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#ac052b2e7614712bb410e01756f9669e9">getTargetInfo</a>().<a class="code" href="classclang_1_1TargetInfo.html#a01403a5106161d4d3cd0c50c43150f89">getNewAlign</a>() / 8));</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160; </div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="comment">// Cast the void pointer and get the address of the globalized variable.</span></div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    llvm::PointerType *VarPtrTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(VarTy)-&gt;getPointerTo();</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    llvm::Value *CastedVoidPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        VoidPtr, VarPtrTy, VD-&gt;<a class="code" href="classclang_1_1NamedDecl.html#a350fd0415d5f387716d5a970b9de4c29">getName</a>() + <span class="stringliteral">&quot;_on_stack&quot;</span>);</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> VarAddr =</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a4c6cd74c3ad46fdf2094512686b10cbc">MakeNaturalAlignPointeeRawAddrLValue</a>(CastedVoidPtr, VarTy);</div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    Rec.second.PrivateAddr = VarAddr.<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#a7f4854b60c6f7626344f156dad6e77c9">getAddress</a>(CGF);</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;    Rec.second.GlobalizedVal = VoidPtr;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="comment">// Assign the local allocation to the newly globalized location.</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">if</span> (EscapedParam) {</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(ParValue, VarAddr);</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      I-&gt;getSecond().MappedParams-&gt;setVarAddr(CGF, VD, VarAddr.<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#a7f4854b60c6f7626344f156dad6e77c9">getAddress</a>(CGF));</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    }</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> *DI = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aae2a6ad5f0ab2ff7b94e717a18352512">getDebugInfo</a>())</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      VoidPtr-&gt;setDebugLoc(DI-&gt;SourceLocToDebugLoc(VD-&gt;<a class="code" href="classclang_1_1Decl.html#a9ac934b2f7ae95704682dc44da1f0867">getLocation</a>()));</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  }</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160; </div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *ValueD : I-&gt;getSecond().EscapedVariableLengthDecls) {</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *VD = cast&lt;VarDecl&gt;(ValueD);</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    std::pair&lt;llvm::Value *, llvm::Value *&gt; AddrSizePair =</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ac6746ae1835bf3909cdfdb2108b9ea77">getKmpcAllocShared</a>(CGF, VD);</div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    I-&gt;getSecond().EscapedVariableLengthDeclsAddrs.emplace_back(AddrSizePair);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> <a class="code" href="classBase.html">Base</a> = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(AddrSizePair.first, VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>(),</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                                     <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a963551b2d662d6ee39a7f4942e37b016">getDeclAlign</a>(VD),</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                                     <a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17ac02172f092142d31f6b3d06ff4eca48c">AlignmentSource::Decl</a>);</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;    I-&gt;getSecond().MappedParams-&gt;setVarAddr(CGF, VD, <a class="code" href="classBase.html">Base</a>.getAddress(CGF));</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  }</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  I-&gt;getSecond().MappedParams-&gt;apply(CGF);</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160; </div>
<div class="line"><a name="l01131"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9f1d9c8e36c2d5d72fb9cb18e083a8c7"> 1131</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9f1d9c8e36c2d5d72fb9cb18e083a8c7">CGOpenMPRuntimeGPU::isDelayedVariableLengthDecl</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *VD)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> I = FunctionGlobalizedDecls.find(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">CurFn</a>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;  <span class="keywordflow">if</span> (I == FunctionGlobalizedDecls.end())</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160; </div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;  <span class="comment">// Check variable declaration is delayed:</span></div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;  <span class="keywordflow">return</span> llvm::is_contained(I-&gt;getSecond().DelayedVariableLengthDecls, VD);</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;}</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160; </div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;std::pair&lt;llvm::Value *, llvm::Value *&gt;</div>
<div class="line"><a name="l01142"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ac6746ae1835bf3909cdfdb2108b9ea77"> 1142</a></span>&#160;<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ac6746ae1835bf3909cdfdb2108b9ea77">CGOpenMPRuntimeGPU::getKmpcAllocShared</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *VD) {</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;  <span class="comment">// Compute size and alignment.</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  llvm::Value *Size = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a8c0fcfd20bf12f8746d76d7cb8cc1604">getTypeSize</a>(VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>());</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;  <a class="code" href="classclang_1_1CharUnits.html">CharUnits</a> Align = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a963551b2d662d6ee39a7f4942e37b016">getDeclAlign</a>(VD);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  Size = Bld.CreateNUWAdd(</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      Size, llvm::ConstantInt::get(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>, Align.<a class="code" href="classclang_1_1CharUnits.html#a968b1a66a449ab256c4dd176bd663c07">getQuantity</a>() - 1));</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  llvm::Value *AlignVal =</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      llvm::ConstantInt::get(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>, Align.<a class="code" href="classclang_1_1CharUnits.html#a968b1a66a449ab256c4dd176bd663c07">getQuantity</a>());</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  Size = Bld.CreateUDiv(Size, AlignVal);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;  Size = Bld.CreateNUWMul(Size, AlignVal);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160; </div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="comment">// Allocate space for this VLA object to be globalized.</span></div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;  llvm::Value *AllocArgs[] = {Size};</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;  llvm::CallBase *VoidPtr =</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;                              <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_alloc_shared),</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;                          AllocArgs, VD-&gt;<a class="code" href="classclang_1_1NamedDecl.html#a350fd0415d5f387716d5a970b9de4c29">getName</a>());</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;  VoidPtr-&gt;addRetAttr(llvm::Attribute::get(</div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6c8cff399ad98c730cce0907b1acd44e">getLLVMContext</a>(), llvm::Attribute::Alignment, Align.<a class="code" href="classclang_1_1CharUnits.html#a968b1a66a449ab256c4dd176bd663c07">getQuantity</a>()));</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160; </div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  <span class="keywordflow">return</span> std::make_pair(VoidPtr, Size);</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;}</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a5db59671b797ac20480321889b323d25"> 1168</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a5db59671b797ac20480321889b323d25">CGOpenMPRuntimeGPU::getKmpcFreeShared</a>(</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="keyword">const</span> std::pair&lt;llvm::Value *, llvm::Value *&gt; &amp;AddrSizePair) {</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;  <span class="comment">// Deallocate the memory for each globalized VLA object</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;                          <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_free_shared),</div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                      {AddrSizePair.first, AddrSizePair.second});</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;}</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="keywordtype">void</span> CGOpenMPRuntimeGPU::emitGenericVarsEpilog(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  <span class="keywordflow">if</span> (getDataSharingMode() != <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0901452f843e26962262cde69855966caeb169e1878130b03e9abd3844ed9d24c">CGOpenMPRuntimeGPU::DS_Generic</a>)</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160; </div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> I = FunctionGlobalizedDecls.find(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">CurFn</a>);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;  <span class="keywordflow">if</span> (I != FunctionGlobalizedDecls.end()) {</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="comment">// Deallocate the memory for each globalized VLA object that was</span></div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="comment">// globalized in the prolog (i.e. emitGenericVarsProlog).</span></div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;AddrSizePair :</div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;         llvm::reverse(I-&gt;getSecond().EscapedVariableLengthDeclsAddrs)) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                              <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_free_shared),</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                          {AddrSizePair.first, AddrSizePair.second});</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    }</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="comment">// Deallocate the memory for each globalized value</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;Rec : llvm::reverse(I-&gt;getSecond().LocalVarData)) {</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      <span class="keyword">const</span> <span class="keyword">auto</span> *VD = cast&lt;VarDecl&gt;(Rec.first);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;      I-&gt;getSecond().MappedParams-&gt;restore(CGF);</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      llvm::Value *FreeArgs[] = {Rec.second.GlobalizedVal,</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                                 CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a8c0fcfd20bf12f8746d76d7cb8cc1604">getTypeSize</a>(VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>())};</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                              <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_free_shared),</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                          FreeArgs);</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  }</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;}</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160; </div>
<div class="line"><a name="l01205"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a521affafbffe2049118e934abee07fc7"> 1205</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a521affafbffe2049118e934abee07fc7">CGOpenMPRuntimeGPU::emitTeamsCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                                         <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D,</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;                                         <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc,</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                                         llvm::Function *OutlinedFn,</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                                         <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> CapturedVars) {</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="keywordflow">if</span> (!CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a84fe1f7899f73123e897b6945c4d135e">HaveInsertPoint</a>())</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <span class="keywordtype">bool</span> IsBareKernel = D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#ae1b5a0e3119bfac66fc55e154af1baff">getSingleClause</a>&lt;<a class="code" href="classclang_1_1OMPXBareClause.html">OMPXBareClause</a>&gt;();</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160; </div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1RawAddress.html">RawAddress</a> ZeroAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a65706fb353ad8c19024c1d3e48a839b0">CreateDefaultAlignTempAlloca</a>(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>,</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                                                         <span class="comment">/*Name=*/</span><span class="stringliteral">&quot;.zero.addr&quot;</span>);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a5f8f00a84115fa0de7ec827e117f5a8a">CreateStore</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.getInt32(<span class="comment">/*C*/</span> 0), ZeroAddr);</div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt;llvm::Value *, 16&gt;</a> OutlinedFnArgs;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="comment">// We don&#39;t emit any thread id function call in bare kernel, but because the</span></div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;  <span class="comment">// outlined function has a pointer argument, we emit a nullptr here.</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">if</span> (IsBareKernel)</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    OutlinedFnArgs.push_back(llvm::ConstantPointerNull::get(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>));</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    OutlinedFnArgs.push_back(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a013c8313e33d0c4e027822d270d08ac4">emitThreadIDAddress</a>(CGF, Loc).<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF));</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;  OutlinedFnArgs.push_back(ZeroAddr.getPointer());</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;  OutlinedFnArgs.append(CapturedVars.begin(), CapturedVars.end());</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9e42d0cd9ecf8445265b6df0aa5f5fbe">emitOutlinedFunctionCall</a>(CGF, Loc, OutlinedFn, OutlinedFnArgs);</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a01d9e3e6f1818a945bd51b28ffeb6f21"> 1230</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a01d9e3e6f1818a945bd51b28ffeb6f21">CGOpenMPRuntimeGPU::emitParallelCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                                          <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc,</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                                          llvm::Function *OutlinedFn,</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                                          <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> CapturedVars,</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *IfCond,</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                                          llvm::Value *NumThreads) {</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;  <span class="keywordflow">if</span> (!CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a84fe1f7899f73123e897b6945c4d135e">HaveInsertPoint</a>())</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;  <span class="keyword">auto</span> &amp;&amp;ParallelGen = [<span class="keyword">this</span>, Loc, OutlinedFn, CapturedVars, IfCond,</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                        NumThreads](<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                                    <a class="code" href="classclang_1_1CodeGen_1_1PrePostActionTy.html">PrePostActionTy</a> &amp;Action) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    llvm::Value *NumThreadsVal = NumThreads;</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    llvm::Function *WFn = WrapperFunctionsMap[OutlinedFn];</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    llvm::Value *<a class="code" href="Arena_8cpp.html#a595f6ff5c8c7b1538e28f9b6cb97113f">ID</a> = llvm::ConstantPointerNull::get(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#ac3ec7e3938996c5354dbee1a103ed4d2">Int8PtrTy</a>);</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;    <span class="keywordflow">if</span> (WFn)</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <a class="code" href="Arena_8cpp.html#a595f6ff5c8c7b1538e28f9b6cb97113f">ID</a> = Bld.CreateBitOrPointerCast(WFn, <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#ac3ec7e3938996c5354dbee1a103ed4d2">Int8PtrTy</a>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    llvm::Value *FnPtr = Bld.CreateBitOrPointerCast(OutlinedFn, <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#ac3ec7e3938996c5354dbee1a103ed4d2">Int8PtrTy</a>);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    <span class="comment">// Create a private scope that will globalize the arguments</span></div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <span class="comment">// passed from the outside of the target region.</span></div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    <span class="comment">// TODO: Is that needed?</span></div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction_1_1OMPPrivateScope.html">CodeGenFunction::OMPPrivateScope</a> PrivateArgScope(CGF);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> CapturedVarsAddrs = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a65706fb353ad8c19024c1d3e48a839b0">CreateDefaultAlignTempAlloca</a>(</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        llvm::ArrayType::get(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>, CapturedVars.size()),</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        <span class="stringliteral">&quot;captured_vars_addrs&quot;</span>);</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    <span class="comment">// There&#39;s something to share.</span></div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    <span class="keywordflow">if</span> (!CapturedVars.empty()) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="comment">// Prepare for parallel region. Indicate the outlined function.</span></div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;Ctx = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>();</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="keywordflow">for</span> (llvm::Value *<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a> : CapturedVars) {</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> Dst = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(CapturedVarsAddrs, Idx);</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        llvm::Value *PtrV;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>-&gt;getType()-&gt;isIntegerTy())</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;          PtrV = Bld.CreateIntToPtr(<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>);</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;          PtrV = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>);</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(PtrV, Dst, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                              Ctx.<a class="code" href="classclang_1_1ASTContext.html#a41483c42a2f92e8cb7737cf20661a92c">getPointerType</a>(Ctx.<a class="code" href="classclang_1_1ASTContext.html#a485732164c40553bb323c58f5e8bf7a7">VoidPtrTy</a>));</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        ++Idx;</div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;      }</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    }</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    llvm::Value *IfCondVal = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">if</span> (IfCond)</div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      IfCondVal = Bld.CreateIntCast(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a7b8c7e5a5818ebcdea197df5db92153c">EvaluateExprAsBool</a>(IfCond), CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>,</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                                    <span class="comment">/* isSigned */</span> <span class="keyword">false</span>);</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      IfCondVal = llvm::ConstantInt::get(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>, 1);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160; </div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    <span class="keywordflow">if</span> (!NumThreadsVal)</div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      NumThreadsVal = llvm::ConstantInt::get(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>, -1);</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      NumThreadsVal = Bld.CreateZExtOrTrunc(NumThreadsVal, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>),</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160; </div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      assert(IfCondVal &amp;&amp; <span class="stringliteral">&quot;Expected a value&quot;</span>);</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    llvm::Value *RTLoc = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a3b70e2e3825d7f69be6a179bf90b5583">emitUpdateLocation</a>(CGF, Loc);</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    llvm::Value *Args[] = {</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        RTLoc,</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a77456971682b73c927c7f76aa5ad3ac0">getThreadID</a>(CGF, Loc),</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        IfCondVal,</div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;        NumThreadsVal,</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        llvm::ConstantInt::get(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>, -1),</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;        FnPtr,</div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;        <a class="code" href="Arena_8cpp.html#a595f6ff5c8c7b1538e28f9b6cb97113f">ID</a>,</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        Bld.CreateBitOrPointerCast(CapturedVarsAddrs.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF),</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;                                   CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9542d45208ac69c5061bfc569e76f40a">VoidPtrPtrTy</a>),</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;        llvm::ConstantInt::get(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>, CapturedVars.size())};</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                            <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_parallel_51),</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;                        Args);</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  };</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html">RegionCodeGenTy</a> RCG(ParallelGen);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;  RCG(CGF);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;}</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="keywordtype">void</span> CGOpenMPRuntimeGPU::syncCTAThreads(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;  <span class="comment">// Always emit simple barriers!</span></div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;  <span class="keywordflow">if</span> (!CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a84fe1f7899f73123e897b6945c4d135e">HaveInsertPoint</a>())</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  <span class="comment">// Build call __kmpc_barrier_simple_spmd(nullptr, 0);</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="comment">// This function does not use parameters, so we can emit just default values.</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;  llvm::Value *Args[] = {</div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      llvm::ConstantPointerNull::get(</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;          cast&lt;llvm::PointerType&gt;(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#ac663d61a452955e716c3f917c6b20221">getIdentTyPointerTy</a>())),</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      llvm::ConstantInt::get(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>, <span class="comment">/*V=*/</span>0, <span class="comment">/*isSigned=*/</span><span class="keyword">true</span>)};</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                          <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_barrier_simple_spmd),</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                      Args);</div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;}</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab97c3a1b79696c76113390f7f0f570bf"> 1325</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab97c3a1b79696c76113390f7f0f570bf">CGOpenMPRuntimeGPU::emitBarrierCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;                                           <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc,</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;                                           <a class="code" href="namespaceclang.html#a21f16842ce2d008fa5dabb179319a3f9">OpenMPDirectiveKind</a> <a class="code" href="namespaceclang_1_1ObjCPropertyAttribute.html#a5cee046f95725089d626e8e3c42bf60c">Kind</a>, <span class="keywordtype">bool</span>,</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                                           <span class="keywordtype">bool</span>) {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;  <span class="comment">// Always emit simple barriers!</span></div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;  <span class="keywordflow">if</span> (!CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a84fe1f7899f73123e897b6945c4d135e">HaveInsertPoint</a>())</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="comment">// Build call __kmpc_cancel_barrier(loc, thread_id);</span></div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;  <span class="keywordtype">unsigned</span> Flags = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a8e61596f2b501281bd70649d262aa13c">getDefaultFlagsForBarriers</a>(<a class="code" href="namespaceclang_1_1ObjCPropertyAttribute.html#a5cee046f95725089d626e8e3c42bf60c">Kind</a>);</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  llvm::Value *Args[] = {<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a3b70e2e3825d7f69be6a179bf90b5583">emitUpdateLocation</a>(CGF, Loc, Flags),</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;                         <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a77456971682b73c927c7f76aa5ad3ac0">getThreadID</a>(CGF, Loc)};</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160; </div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                          <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_barrier),</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;                      Args);</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;}</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160; </div>
<div class="line"><a name="l01342"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a35e2468898e38e663654af3f25fc561f"> 1342</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a35e2468898e38e663654af3f25fc561f">CGOpenMPRuntimeGPU::emitCriticalRegion</a>(</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, StringRef CriticalName,</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html">RegionCodeGenTy</a> &amp;CriticalOpGen, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc,</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *Hint) {</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;  llvm::BasicBlock *LoopBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;omp.critical.loop&quot;</span>);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;  llvm::BasicBlock *TestBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;omp.critical.test&quot;</span>);</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;  llvm::BasicBlock *SyncBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;omp.critical.sync&quot;</span>);</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  llvm::BasicBlock *BodyBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;omp.critical.body&quot;</span>);</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  llvm::BasicBlock *ExitBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;omp.critical.exit&quot;</span>);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keyword">auto</span> &amp;RT = <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>());</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  <span class="comment">// Get the mask of active threads in the warp.</span></div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;  llvm::Value *Mask = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_warp_active_thread_mask));</div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="comment">// Fetch team-local id of the thread.</span></div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  llvm::Value *ThreadID = RT.getGPUThreadID(CGF);</div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160; </div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;  <span class="comment">// Get the width of the team.</span></div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;  llvm::Value *TeamWidth = RT.getGPUNumThreads(CGF);</div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160; </div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;  <span class="comment">// Initialize the counter variable for the loop.</span></div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> Int32Ty =</div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a6b50b44b241ecee20c8b4fb9d3747ef2">getIntTypeForBitwidth</a>(<span class="comment">/*DestWidth=*/</span>32, <span class="comment">/*Signed=*/</span>0);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> Counter = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">CreateMemTemp</a>(Int32Ty, <span class="stringliteral">&quot;critical_counter&quot;</span>);</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> CounterLVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(Counter, Int32Ty);</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(llvm::Constant::getNullValue(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>), CounterLVal,</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                        <span class="comment">/*isInit=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160; </div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;  <span class="comment">// Block checks if loop counter exceeds upper bound.</span></div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(LoopBB);</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  llvm::Value *CounterVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(CounterLVal, Loc);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  llvm::Value *CmpLoopBound = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateICmpSLT(CounterVal, TeamWidth);</div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateCondBr(CmpLoopBound, TestBB, ExitBB);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160; </div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="comment">// Block tests which single thread should execute region, and which threads</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;  <span class="comment">// should go straight to synchronisation point.</span></div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(TestBB);</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  CounterVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(CounterLVal, Loc);</div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  llvm::Value *CmpThreadToCounter =</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateICmpEQ(ThreadID, CounterVal);</div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateCondBr(CmpThreadToCounter, BodyBB, SyncBB);</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160; </div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="comment">// Block emits the body of the critical region.</span></div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(BodyBB);</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160; </div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;  <span class="comment">// Output the critical statement.</span></div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#acfb6312269a11c93e9f0f5f2f0b817ac">CGOpenMPRuntime::emitCriticalRegion</a>(CGF, CriticalName, CriticalOpGen, Loc,</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                                      Hint);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="comment">// After the body surrounded by the critical region, the single executing</span></div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="comment">// thread will jump to the synchronisation point.</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="comment">// Block waits for all threads in current team to finish then increments the</span></div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="comment">// counter variable and returns to the loop.</span></div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(SyncBB);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <span class="comment">// Reconverge active threads in the warp.</span></div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  (void)CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;                                <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_syncwarp),</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                            Mask);</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;  llvm::Value *IncCounterVal =</div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateNSWAdd(CounterVal, CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.getInt32(1));</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(IncCounterVal, CounterLVal);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acd75804886d9542735d748f04de9efa1">EmitBranch</a>(LoopBB);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160; </div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;  <span class="comment">// Block that is reached when  all threads in the team complete the region.</span></div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ExitBB, <span class="comment">/*IsFinished=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;}</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;<span class="comment">/// Cast value to the specified type.</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#ab86a56b8b7119050e5e1dbc990e46848"> 1412</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Value *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#ab86a56b8b7119050e5e1dbc990e46848">castValueToType</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, llvm::Value *Val,</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;                                    <a class="code" href="classclang_1_1QualType.html">QualType</a> ValTy, <a class="code" href="classclang_1_1QualType.html">QualType</a> CastTy,</div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                                    <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc) {</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;  assert(!CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#aa8c44e88d6ce9b3cce885b62d3cd5dff">getTypeSizeInChars</a>(CastTy).<a class="code" href="classclang_1_1CharUnits.html#a58e175e680629d64f2b880a104058ecc">isZero</a>() &amp;&amp;</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;         <span class="stringliteral">&quot;Cast type must sized.&quot;</span>);</div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;  assert(!CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#aa8c44e88d6ce9b3cce885b62d3cd5dff">getTypeSizeInChars</a>(ValTy).<a class="code" href="classclang_1_1CharUnits.html#a58e175e680629d64f2b880a104058ecc">isZero</a>() &amp;&amp;</div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;         <span class="stringliteral">&quot;Val type must sized.&quot;</span>);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;  llvm::Type *LLVMCastTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(CastTy);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;  <span class="keywordflow">if</span> (ValTy == CastTy)</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;    <span class="keywordflow">return</span> Val;</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;  <span class="keywordflow">if</span> (CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#aa8c44e88d6ce9b3cce885b62d3cd5dff">getTypeSizeInChars</a>(ValTy) ==</div>
<div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#aa8c44e88d6ce9b3cce885b62d3cd5dff">getTypeSizeInChars</a>(CastTy))</div>
<div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;    <span class="keywordflow">return</span> CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateBitCast(Val, LLVMCastTy);</div>
<div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  <span class="keywordflow">if</span> (CastTy-&gt;<a class="code" href="classclang_1_1Type.html#a3b8d0cdfe0bdd8b98296b84ae9d438c5">isIntegerType</a>() &amp;&amp; ValTy-&gt;<a class="code" href="classclang_1_1Type.html#a3b8d0cdfe0bdd8b98296b84ae9d438c5">isIntegerType</a>())</div>
<div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    <span class="keywordflow">return</span> CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateIntCast(Val, LLVMCastTy,</div>
<div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;                                     CastTy-&gt;<a class="code" href="classclang_1_1Type.html#a7e6c7b9a94ee115f7d550fd56a0ba5ba">hasSignedIntegerRepresentation</a>());</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> CastItem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">CreateMemTemp</a>(CastTy);</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ValCastItem = CastItem.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a49782c568ba73ee265a502b43646e5da">withElementType</a>(Val-&gt;getType());</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(Val, ValCastItem, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, ValTy,</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;                        <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>),</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;                        <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;  <span class="keywordflow">return</span> CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(CastItem, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, CastTy, Loc,</div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;                              <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>),</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;                              <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;}</div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;<span class="comment">/// This function creates calls to one of two shuffle functions to copy</span></div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="comment">/// variables between lanes in a warp.</span></div>
<div class="line"><a name="l01440"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#aa57830284ce7f6b0c33632649c956fd3"> 1440</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Value *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#aa57830284ce7f6b0c33632649c956fd3">createRuntimeShuffleFunction</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;                                                 llvm::Value *Elem,</div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;                                                 <a class="code" href="classclang_1_1QualType.html">QualType</a> ElemType,</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;                                                 llvm::Value *<a class="code" href="Format_8cpp.html#a9fcf84dffafb0ea03c0f9b686ddbf2b3">Offset</a>,</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;                                                 <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc) {</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>;</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;RT =</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      *(<span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> *<span class="keyword">&gt;</span>(&amp;CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>()));</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;  llvm::OpenMPIRBuilder &amp;OMPBuilder = RT.<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a3e3402fcb44557e2abeadd35a7e7238e">getOMPBuilder</a>();</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160; </div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;  <a class="code" href="classclang_1_1CharUnits.html">CharUnits</a> Size = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#aa8c44e88d6ce9b3cce885b62d3cd5dff">getTypeSizeInChars</a>(ElemType);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  assert(Size.getQuantity() &lt;= 8 &amp;&amp;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;         <span class="stringliteral">&quot;Unsupported bitwidth in shuffle instruction.&quot;</span>);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  RuntimeFunction ShuffleFn = Size.getQuantity() &lt;= 4</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                                  ? OMPRTL___kmpc_shuffle_int32</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                                  : OMPRTL___kmpc_shuffle_int64;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160; </div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  <span class="comment">// Cast all types to 32- or 64-bit values before calling shuffle routines.</span></div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> CastTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a6b50b44b241ecee20c8b4fb9d3747ef2">getIntTypeForBitwidth</a>(</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      Size.getQuantity() &lt;= 4 ? 32 : 64, <span class="comment">/*Signed=*/</span>1);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;  llvm::Value *ElemCast = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#ab86a56b8b7119050e5e1dbc990e46848">castValueToType</a>(CGF, Elem, ElemType, CastTy, Loc);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;  llvm::Value *WarpSize =</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      Bld.CreateIntCast(RT.<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a72a0f50977ffff3f0c29f961dc237ed5">getGPUWarpSize</a>(CGF), CGM.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#aa5aa690f05d199fd0cbc08bae591354e">Int16Ty</a>, <span class="comment">/*isSigned=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160; </div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;  llvm::Value *ShuffledVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      OMPBuilder.getOrCreateRuntimeFunction(CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), ShuffleFn),</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      {ElemCast, Offset, WarpSize});</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#ab86a56b8b7119050e5e1dbc990e46848">castValueToType</a>(CGF, ShuffledVal, CastTy, ElemType, Loc);</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;}</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160; </div>
<div class="line"><a name="l01473"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a828e607d0ae9ffa0f7b7fe47e79363ca"> 1473</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a828e607d0ae9ffa0f7b7fe47e79363ca">shuffleAndStore</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> SrcAddr,</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                            <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> DestAddr, <a class="code" href="classclang_1_1QualType.html">QualType</a> ElemType,</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                            llvm::Value *<a class="code" href="Format_8cpp.html#a9fcf84dffafb0ea03c0f9b686ddbf2b3">Offset</a>, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc) {</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  <a class="code" href="classclang_1_1CharUnits.html">CharUnits</a> Size = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#aa8c44e88d6ce9b3cce885b62d3cd5dff">getTypeSizeInChars</a>(ElemType);</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;  <span class="comment">// Create the loop over the big sized data.</span></div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="comment">// ptr = (void*)Elem;</span></div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;  <span class="comment">// ptrEnd = (void*) Elem + 1;</span></div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;  <span class="comment">// Step = 8;</span></div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="comment">// while (ptr + Step &lt; ptrEnd)</span></div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  <span class="comment">//   shuffle((int64_t)*ptr);</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <span class="comment">// Step = 4;</span></div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;  <span class="comment">// while (ptr + Step &lt; ptrEnd)</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  <span class="comment">//   shuffle((int32_t)*ptr);</span></div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;  <span class="comment">// ...</span></div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ElemPtr = DestAddr;</div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> Ptr = SrcAddr;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> PtrEnd = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#acbfef79ff48d4d3b14d84a8696192e2d">CreateConstGEP</a>(SrcAddr, 1), CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a329e1a1ea4a981895ad14b70611e163b">Int8Ty</a>);</div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> IntSize = 8; IntSize &gt;= 1; IntSize /= 2) {</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    <span class="keywordflow">if</span> (Size &lt; <a class="code" href="classclang_1_1CharUnits.html#adf6d3a79993b58285a0626b61c2c6c82">CharUnits::fromQuantity</a>(IntSize))</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> IntType = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a6b50b44b241ecee20c8b4fb9d3747ef2">getIntTypeForBitwidth</a>(</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a97247f7ac314132665272482cb220e68">toBits</a>(<a class="code" href="classclang_1_1CharUnits.html#adf6d3a79993b58285a0626b61c2c6c82">CharUnits::fromQuantity</a>(IntSize)),</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        <span class="comment">/*Signed=*/</span>1);</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    llvm::Type *IntTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(IntType);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    Ptr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(Ptr, IntTy-&gt;getPointerTo(),</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                                                  IntTy);</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    ElemPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;        ElemPtr, IntTy-&gt;getPointerTo(), IntTy);</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordflow">if</span> (Size.getQuantity() / IntSize &gt; 1) {</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      llvm::BasicBlock *PreCondBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;.shuffle.pre_cond&quot;</span>);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      llvm::BasicBlock *ThenBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;.shuffle.then&quot;</span>);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;      llvm::BasicBlock *ExitBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;.shuffle.exit&quot;</span>);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      llvm::BasicBlock *CurrentBB = Bld.GetInsertBlock();</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(PreCondBB);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      llvm::PHINode *PhiSrc =</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;          Bld.CreatePHI(Ptr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a6b6ef60870f8aa6542e665c9ffd325d8">getType</a>(), <span class="comment">/*NumReservedValues=*/</span>2);</div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      PhiSrc-&gt;addIncoming(Ptr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), CurrentBB);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      llvm::PHINode *PhiDest =</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;          Bld.CreatePHI(ElemPtr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a6b6ef60870f8aa6542e665c9ffd325d8">getType</a>(), <span class="comment">/*NumReservedValues=*/</span>2);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      PhiDest-&gt;addIncoming(ElemPtr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), CurrentBB);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      Ptr = <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a>(PhiSrc, Ptr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a3974dea79c7629e4cf2db5dfc96867ae">getElementType</a>(), Ptr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a34953de03f6c979659e4262c00c1f9ee">getAlignment</a>());</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;      ElemPtr =</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;          <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a>(PhiDest, ElemPtr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a3974dea79c7629e4cf2db5dfc96867ae">getElementType</a>(), ElemPtr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a34953de03f6c979659e4262c00c1f9ee">getAlignment</a>());</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;      llvm::Value *PtrEndRaw = PtrEnd.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF);</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      llvm::Value *PtrRaw = Ptr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF);</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      llvm::Value *PtrDiff = Bld.CreatePtrDiff(</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;          CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a329e1a1ea4a981895ad14b70611e163b">Int8Ty</a>, PtrEndRaw,</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;          Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(PtrRaw, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>));</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      Bld.CreateCondBr(Bld.CreateICmpSGT(PtrDiff, Bld.getInt64(IntSize - 1)),</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;                       ThenBB, ExitBB);</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ThenBB);</div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      llvm::Value *Res = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#aa57830284ce7f6b0c33632649c956fd3">createRuntimeShuffleFunction</a>(</div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;          CGF,</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(Ptr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, IntType, Loc,</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                               <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>),</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                               <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>()),</div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;          IntType, <a class="code" href="Format_8cpp.html#a9fcf84dffafb0ea03c0f9b686ddbf2b3">Offset</a>, Loc);</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(Res, ElemPtr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, IntType,</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;                            <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>),</div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;                            <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> LocalPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#acbfef79ff48d4d3b14d84a8696192e2d">CreateConstGEP</a>(Ptr, 1);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> LocalElemPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#acbfef79ff48d4d3b14d84a8696192e2d">CreateConstGEP</a>(ElemPtr, 1);</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      PhiSrc-&gt;addIncoming(LocalPtr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), ThenBB);</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      PhiDest-&gt;addIncoming(LocalElemPtr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), ThenBB);</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acd75804886d9542735d748f04de9efa1">EmitBranch</a>(PreCondBB);</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ExitBB);</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      llvm::Value *Res = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#aa57830284ce7f6b0c33632649c956fd3">createRuntimeShuffleFunction</a>(</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;          CGF,</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(Ptr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, IntType, Loc,</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                               <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>),</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;                               <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>()),</div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;          IntType, <a class="code" href="Format_8cpp.html#a9fcf84dffafb0ea03c0f9b686ddbf2b3">Offset</a>, Loc);</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(Res, ElemPtr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, IntType,</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;                            <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>),</div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;                            <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;      Ptr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#acbfef79ff48d4d3b14d84a8696192e2d">CreateConstGEP</a>(Ptr, 1);</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;      ElemPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#acbfef79ff48d4d3b14d84a8696192e2d">CreateConstGEP</a>(ElemPtr, 1);</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    }</div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;    Size = Size % IntSize;</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;  }</div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;}</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160; </div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="keyword">namespace </span>{</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="keyword">enum</span> CopyAction : <span class="keywordtype">unsigned</span> {</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;  <span class="comment">// RemoteLaneToThread: Copy over a Reduce list from a remote lane in</span></div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;  <span class="comment">// the warp using shuffle instructions.</span></div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;  RemoteLaneToThread,</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;  <span class="comment">// ThreadCopy: Make a copy of a Reduce list on the thread&#39;s stack.</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;  ThreadCopy,</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;};</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;} <span class="comment">// namespace</span></div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160; </div>
<div class="line"><a name="l01569"></a><span class="lineno"><a class="line" href="structCopyOptionsTy.html"> 1569</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structCopyOptionsTy.html">CopyOptionsTy</a> {</div>
<div class="line"><a name="l01570"></a><span class="lineno"><a class="line" href="structCopyOptionsTy.html#ab5086c8b0c85477cdef57a67801a50a4"> 1570</a></span>&#160;  llvm::Value *<a class="code" href="structCopyOptionsTy.html#ab5086c8b0c85477cdef57a67801a50a4">RemoteLaneOffset</a>;</div>
<div class="line"><a name="l01571"></a><span class="lineno"><a class="line" href="structCopyOptionsTy.html#a0603689bd7d66bb9bdd3e94756d335e4"> 1571</a></span>&#160;  llvm::Value *<a class="code" href="structCopyOptionsTy.html#a0603689bd7d66bb9bdd3e94756d335e4">ScratchpadIndex</a>;</div>
<div class="line"><a name="l01572"></a><span class="lineno"><a class="line" href="structCopyOptionsTy.html#a4a4759cb9a9167587f68d43da87fe62b"> 1572</a></span>&#160;  llvm::Value *<a class="code" href="structCopyOptionsTy.html#a4a4759cb9a9167587f68d43da87fe62b">ScratchpadWidth</a>;</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;};</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="comment">/// Emit instructions to copy a Reduce list, which contains partially</span></div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="comment">/// aggregated values, in the specified direction.</span></div>
<div class="line"><a name="l01577"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a5a004688c83feec0eb5b4b30d5e4e4a1"> 1577</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a5a004688c83feec0eb5b4b30d5e4e4a1">emitReductionListCopy</a>(</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;    CopyAction Action, <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <a class="code" href="classclang_1_1QualType.html">QualType</a> ReductionArrayTy,</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> Privates, <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> SrcBase, <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> DestBase,</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;    <a class="code" href="structCopyOptionsTy.html">CopyOptionsTy</a> CopyOptions = {<span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>}) {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160; </div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;<a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a> = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>();</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;  llvm::Value *RemoteLaneOffset = CopyOptions.RemoteLaneOffset;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  <span class="comment">// Iterates, element-by-element, through the source Reduce list and</span></div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  <span class="comment">// make a copy.</span></div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *Private : Privates) {</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> SrcElementAddr = <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> DestElementAddr = <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> DestElementPtrAddr = <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    <span class="comment">// Should we shuffle in an element from a remote lane?</span></div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordtype">bool</span> ShuffleInElement = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="comment">// Set to true to update the pointer in the dest Reduce list to a</span></div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    <span class="comment">// newly created element.</span></div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="keywordtype">bool</span> UpdateDestListPtr = <span class="keyword">false</span>;</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> PrivatePtrType = <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.getPointerType(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType());</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;    llvm::Type *PrivateLlvmPtrType = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a1ccd343226e5bdfd99c6017f0ddfda20">ConvertType</a>(PrivatePtrType);</div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160; </div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    <span class="keywordflow">switch</span> (Action) {</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;    <span class="keywordflow">case</span> RemoteLaneToThread: {</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <span class="comment">// Step 1.1: Get the address for the src element in the Reduce list.</span></div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> SrcElementPtrAddr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(SrcBase, Idx);</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      SrcElementAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a4c20fadb4446090e59fcd468aa82e981">EmitLoadOfPointer</a>(</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;          SrcElementPtrAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a49782c568ba73ee265a502b43646e5da">withElementType</a>(PrivateLlvmPtrType),</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;          PrivatePtrType-&gt;<a class="code" href="classclang_1_1Type.html#a436b8b08ae7f2404b4712d37986194ce">castAs</a>&lt;<a class="code" href="classclang_1_1PointerType.html">PointerType</a>&gt;());</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160; </div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="comment">// Step 1.2: Create a temporary to store the element in the destination</span></div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="comment">// Reduce list.</span></div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      DestElementPtrAddr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(DestBase, Idx);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;      DestElementAddr =</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">CreateMemTemp</a>(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType(), <span class="stringliteral">&quot;.omp.reduction.element&quot;</span>);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      ShuffleInElement = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      UpdateDestListPtr = <span class="keyword">true</span>;</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    }</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">case</span> ThreadCopy: {</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <span class="comment">// Step 1.1: Get the address for the src element in the Reduce list.</span></div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> SrcElementPtrAddr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(SrcBase, Idx);</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      SrcElementAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a4c20fadb4446090e59fcd468aa82e981">EmitLoadOfPointer</a>(</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;          SrcElementPtrAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a49782c568ba73ee265a502b43646e5da">withElementType</a>(PrivateLlvmPtrType),</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;          PrivatePtrType-&gt;<a class="code" href="classclang_1_1Type.html#a436b8b08ae7f2404b4712d37986194ce">castAs</a>&lt;<a class="code" href="classclang_1_1PointerType.html">PointerType</a>&gt;());</div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160; </div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      <span class="comment">// Step 1.2: Get the address for dest element.  The destination</span></div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <span class="comment">// element has already been created on the thread&#39;s stack.</span></div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      DestElementPtrAddr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(DestBase, Idx);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      DestElementAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a4c20fadb4446090e59fcd468aa82e981">EmitLoadOfPointer</a>(</div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;          DestElementPtrAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a49782c568ba73ee265a502b43646e5da">withElementType</a>(PrivateLlvmPtrType),</div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;          PrivatePtrType-&gt;<a class="code" href="classclang_1_1Type.html#a436b8b08ae7f2404b4712d37986194ce">castAs</a>&lt;<a class="code" href="classclang_1_1PointerType.html">PointerType</a>&gt;());</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    }</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;    }</div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160; </div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;    <span class="comment">// Regardless of src and dest of copy, we emit the load of src</span></div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;    <span class="comment">// element as this is required in all directions</span></div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    SrcElementAddr = SrcElementAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a49782c568ba73ee265a502b43646e5da">withElementType</a>(</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()));</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    DestElementAddr =</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        DestElementAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a49782c568ba73ee265a502b43646e5da">withElementType</a>(SrcElementAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a3974dea79c7629e4cf2db5dfc96867ae">getElementType</a>());</div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160; </div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;    <span class="comment">// Now that all active lanes have read the element in the</span></div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <span class="comment">// Reduce list, shuffle over the value from the remote lane.</span></div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;    <span class="keywordflow">if</span> (ShuffleInElement) {</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a828e607d0ae9ffa0f7b7fe47e79363ca">shuffleAndStore</a>(CGF, SrcElementAddr, DestElementAddr, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType(),</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;                      RemoteLaneOffset, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getExprLoc());</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <span class="keywordflow">switch</span> (CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac1be3afe566ffd19818efe9f6b07a8ea">getEvaluationKind</a>(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType())) {</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9aa4a7b0b5cf5c3854e35ca0c172e93269">TEK_Scalar</a>: {</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;        llvm::Value *Elem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;            SrcElementAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType(),</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;            <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getExprLoc(), <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>),</div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;            <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;        <span class="comment">// Store the source element value to the dest element address.</span></div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;            Elem, DestElementAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType(),</div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>), <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      }</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9ad0c74fbe072df321c2078f52f052d07c">TEK_Complex</a>: {</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae417ed4971c18c5ce0607e1be62ec117">CodeGenFunction::ComplexPairTy</a> Elem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a26d8547dd8e031970116491629669c39">EmitLoadOfComplex</a>(</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;            CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(SrcElementAddr, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()),</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getExprLoc());</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa903765558c8982b2d81d97e637adda1">EmitStoreOfComplex</a>(</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            Elem, CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(DestElementAddr, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()),</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;            <span class="comment">/*isInit=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      }</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9a6bdd6972cc7f7a6326c359a2a07df29a">TEK_Aggregate</a>:</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a63fc9c5b566f21e623bd6c15515b8688">EmitAggregateCopy</a>(</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(DestElementAddr, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()),</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(SrcElementAddr, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()),</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType(), <a class="code" href="classclang_1_1CodeGen_1_1AggValueSlot.html#a0a3d1078f85b36699f59bdf81f20319aa9df550c4985c3c2c3156657c8c840297">AggValueSlot::DoesNotOverlap</a>);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      }</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    }</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160; </div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="comment">// Step 3.1: Modify reference in dest Reduce list as needed.</span></div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;    <span class="comment">// Modifying the reference in Reduce list to point to the newly</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="comment">// created element.  The element is live in the current function</span></div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    <span class="comment">// scope and that of functions it invokes (i.e., reduce_function).</span></div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="comment">// RemoteReduceData[i] = (void*)&amp;RemoteElem</span></div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">if</span> (UpdateDestListPtr) {</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(</div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;          Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;              DestElementAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>),</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;          DestElementPtrAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, <a class="code" href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">C</a>.VoidPtrTy);</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    }</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160; </div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    ++Idx;</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  }</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;}</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment">/// This function emits a helper that gathers Reduce lists from the first</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment">/// lane of every active warp to lanes in the first warp.</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment">/// void inter_warp_copy_func(void* reduce_data, num_warps)</span></div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment">///   shared smem[warp_size];</span></div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment">///   For all data entries D in reduce_data:</span></div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment">///     sync</span></div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment">///     If (I am the first lane in each warp)</span></div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment">///       Copy my local D to smem[warp_id]</span></div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment">///     sync</span></div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment">///     if (I am the first warp)</span></div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment">///       Copy smem[thread_id] to my local D</span></div>
<div class="line"><a name="l01708"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a42bb1f4448293d5411b60d83feffd370"> 1708</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Value *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a42bb1f4448293d5411b60d83feffd370">emitInterWarpCopyFunction</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM,</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;                                              <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> Privates,</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;                                              <a class="code" href="classclang_1_1QualType.html">QualType</a> ReductionArrayTy,</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;                                              <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc) {</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;C = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>();</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;  llvm::Module &amp;M = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>();</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160; </div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="comment">// ReduceList: thread local Reduce list.</span></div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;  <span class="comment">// At the stage of the computation when this function is called, partially</span></div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <span class="comment">// aggregated values reside in the first lane of every active warp.</span></div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> ReduceListArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;                                  C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;  <span class="comment">// NumWarps: number of warps active in the parallel region.  This could</span></div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;  <span class="comment">// be smaller than 32 (max warps in a CTA) for partial block reduction.</span></div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> NumWarpsArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;                                C.getIntTypeForBitwidth(32, <span class="comment">/* Signed */</span> <span class="keyword">true</span>),</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;                                <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1FunctionArgList.html">FunctionArgList</a> Args;</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  Args.push_back(&amp;ReduceListArg);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;  Args.push_back(&amp;NumWarpsArg);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160; </div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1CGFunctionInfo.html">CGFunctionInfo</a> &amp;CGFI =</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a6e2a1179e9475f17f7db1e6e642a43ec">arrangeBuiltinFunctionDeclaration</a>(C.VoidTy, Args);</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="keyword">auto</span> *Fn = llvm::Function::Create(CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a5e6c7473f14643c5a5b45ac9c0bb2ef8">GetFunctionType</a>(CGFI),</div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                                    llvm::GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;                                    <span class="stringliteral">&quot;_omp_reduction_inter_warp_copy_func&quot;</span>, &amp;M);</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a0d41184ca8693cab4ed36a55a348bf86">SetInternalFunctionAttributes</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), Fn, CGFI);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;  Fn-&gt;setDoesNotRecurse();</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> CGF(CGM);</div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a773426ce113953ed0e3e75885b61d9a8">StartFunction</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), C.VoidTy, Fn, CGFI, Args, Loc, Loc);</div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160; </div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;  <span class="comment">// This array is used as a medium to transfer, one reduce element at a time,</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;  <span class="comment">// the data from the first lane of every warp to lanes in the first warp</span></div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;  <span class="comment">// in order to perform the final step of a reduction in a parallel region</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;  <span class="comment">// (reduction across warps).  The array is placed in NVPTX __shared__ memory</span></div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;  <span class="comment">// for reduced latency, as well as to have a distinct copy for concurrently</span></div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;  <span class="comment">// executing target regions.  The array is declared with common linkage so</span></div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;  <span class="comment">// as to be shared across compilation units.</span></div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;  StringRef TransferMediumName =</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <span class="stringliteral">&quot;__openmp_nvptx_data_transfer_temporary_storage&quot;</span>;</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  llvm::GlobalVariable *TransferMedium =</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      M.getGlobalVariable(TransferMediumName);</div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;  <span class="keywordtype">unsigned</span> WarpSize = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a9340d803527eb2c2164d7ff1721bc98d">getTarget</a>().<a class="code" href="classclang_1_1TargetInfo.html#acba9bb0bf5c834141c5d2a65ca273d2a">getGridValue</a>().GV_Warp_Size;</div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;  <span class="keywordflow">if</span> (!TransferMedium) {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;    <span class="keyword">auto</span> *Ty = llvm::ArrayType::get(CGM.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>, WarpSize);</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    <span class="keywordtype">unsigned</span> SharedAddressSpace = C.getTargetAddressSpace(<a class="code" href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa290073a3c242d08d952a80f7007cfca5">LangAS::cuda_shared</a>);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    TransferMedium = <span class="keyword">new</span> llvm::GlobalVariable(</div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        M, Ty, <span class="comment">/*isConstant=*/</span><span class="keyword">false</span>, llvm::GlobalVariable::WeakAnyLinkage,</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        llvm::UndefValue::get(Ty), TransferMediumName,</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <span class="comment">/*InsertBefore=*/</span><span class="keyword">nullptr</span>, llvm::GlobalVariable::NotThreadLocal,</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        SharedAddressSpace);</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a14d6c53710b0ea9878d0fa4e7e9d4978">addCompilerUsedGlobal</a>(TransferMedium);</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;  }</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  <span class="keyword">auto</span> &amp;RT = <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>());</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;  <span class="comment">// Get the CUDA thread id of the current OpenMP thread on the GPU.</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  llvm::Value *ThreadID = RT.<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a6b7f0061aae68808348ed9e5e5cc81ac">getGPUThreadID</a>(CGF);</div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;  <span class="comment">// nvptx_lane_id = nvptx_id % warpsize</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;  llvm::Value *LaneID = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a5c706b93ab05dff7677da9fa481a4b25">getNVPTXLaneID</a>(CGF);</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;  <span class="comment">// nvptx_warp_id = nvptx_id / warpsize</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  llvm::Value *WarpID = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a95092577e143858c43bbcc8928e1ffa8">getNVPTXWarpID</a>(CGF);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160; </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrReduceListArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;ReduceListArg);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;  llvm::Type *ElemTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(ReductionArrayTy);</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> LocalReduceList(</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;              AddrReduceListArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, Loc,</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;              <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>), <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>()),</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;          ElemTy-&gt;getPointerTo()),</div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      ElemTy, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#ada1b89da70bd71382c681e4254874e1a">getPointerAlign</a>());</div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a> : Privates) {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;    <span class="comment">// Warp master copies reduce element to transfer medium in __shared__</span></div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;    <span class="comment">// memory.</span></div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;    <span class="keywordtype">unsigned</span> RealTySize =</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        C.getTypeSizeInChars(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType())</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            .alignTo(C.getTypeAlignInChars(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()))</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            .getQuantity();</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> TySize = 4; TySize &gt; 0 &amp;&amp; RealTySize &gt; 0; TySize /=2) {</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <span class="keywordtype">unsigned</span> NumIters = RealTySize / TySize;</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;      <span class="keywordflow">if</span> (NumIters == 0)</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <a class="code" href="classclang_1_1QualType.html">QualType</a> CType = C.getIntTypeForBitwidth(</div>
<div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;          C.toBits(<a class="code" href="classclang_1_1CharUnits.html#adf6d3a79993b58285a0626b61c2c6c82">CharUnits::fromQuantity</a>(TySize)), <span class="comment">/*Signed=*/</span>1);</div>
<div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      llvm::Type *CopyType = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(CType);</div>
<div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <a class="code" href="classclang_1_1CharUnits.html">CharUnits</a> Align = <a class="code" href="classclang_1_1CharUnits.html#adf6d3a79993b58285a0626b61c2c6c82">CharUnits::fromQuantity</a>(TySize);</div>
<div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      llvm::Value *Cnt = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> CntAddr = <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      llvm::BasicBlock *PrecondBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      llvm::BasicBlock *ExitBB = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <span class="keywordflow">if</span> (NumIters &gt; 1) {</div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;        CntAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">CreateMemTemp</a>(C.IntTy, <span class="stringliteral">&quot;.cnt.addr&quot;</span>);</div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(llvm::Constant::getNullValue(CGM.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#aa0d14821b268a724ecc3a9add2f290e6">IntTy</a>), CntAddr,</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;                              <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.IntTy);</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;        PrecondBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;precond&quot;</span>);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;        ExitBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;exit&quot;</span>);</div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        llvm::BasicBlock *BodyBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;body&quot;</span>);</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;        <span class="comment">// There is no need to emit line number for unconditional branch.</span></div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        (void)<a class="code" href="classclang_1_1CodeGen_1_1ApplyDebugLocation.html#aa90c4f07b6d82797622594c49f4f022e">ApplyDebugLocation::CreateEmpty</a>(CGF);</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(PrecondBB);</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;        Cnt = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(CntAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.IntTy, Loc);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;        llvm::Value *Cmp =</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            Bld.CreateICmpULT(Cnt, llvm::ConstantInt::get(CGM.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#aa0d14821b268a724ecc3a9add2f290e6">IntTy</a>, NumIters));</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;        Bld.CreateCondBr(Cmp, BodyBB, ExitBB);</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(BodyBB);</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      }</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      <span class="comment">// kmpc_barrier.</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>().<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a8ccc3e674e91675658b9f62746e419c6">emitBarrierCall</a>(CGF, Loc, OMPD_unknown,</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;                                             <span class="comment">/*EmitChecks=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;                                             <span class="comment">/*ForceSimpleCall=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      llvm::BasicBlock *ThenBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;then&quot;</span>);</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      llvm::BasicBlock *ElseBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;else&quot;</span>);</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      llvm::BasicBlock *MergeBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;ifcont&quot;</span>);</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      <span class="comment">// if (lane_id == 0)</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;      llvm::Value *IsWarpMaster = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#aa44627a34670f3a2fe50f38596e21428">CreateIsNull</a>(LaneID, <span class="stringliteral">&quot;warp_master&quot;</span>);</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      Bld.CreateCondBr(IsWarpMaster, ThenBB, ElseBB);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ThenBB);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <span class="comment">// Reduce element = LocalReduceList[i]</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ElemPtrPtrAddr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(LocalReduceList, Idx);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      llvm::Value *ElemPtrPtr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;          ElemPtrPtrAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>());</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      <span class="comment">// elemptr = ((CopyType*)(elemptrptr)) + I</span></div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ElemPtr(ElemPtrPtr, CopyType, Align);</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keywordflow">if</span> (NumIters &gt; 1)</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;        ElemPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a31c4f06bfbc1c841bb0d6707212d7354">CreateGEP</a>(CGF, ElemPtr, Cnt);</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160; </div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <span class="comment">// Get pointer to location in transfer medium.</span></div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      <span class="comment">// MediumPtr = &amp;medium[warp_id]</span></div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      llvm::Value *MediumPtrVal = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae7975a7578d12fa84314158c91421f9d">CreateInBoundsGEP</a>(</div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;          TransferMedium-&gt;getValueType(), TransferMedium,</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;          {llvm::Constant::getNullValue(CGM.Int64Ty), WarpID});</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <span class="comment">// Casting to actual data type.</span></div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      <span class="comment">// MediumPtr = (CopyType*)MediumPtrAddr;</span></div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> MediumPtr(MediumPtrVal, CopyType, Align);</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160; </div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      <span class="comment">// elem = *elemptr</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      <span class="comment">//*MediumPtr = elem</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      llvm::Value *Elem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;          ElemPtr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, CType, Loc,</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;          <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>), <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      <span class="comment">// Store the source element value to the dest element address.</span></div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(Elem, MediumPtr, <span class="comment">/*Volatile=*/</span><span class="keyword">true</span>, CType,</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                            <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>),</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;                            <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      Bld.CreateBr(MergeBB);</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160; </div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ElseBB);</div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      Bld.CreateBr(MergeBB);</div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160; </div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(MergeBB);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <span class="comment">// kmpc_barrier.</span></div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>().<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a8ccc3e674e91675658b9f62746e419c6">emitBarrierCall</a>(CGF, Loc, OMPD_unknown,</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                                             <span class="comment">/*EmitChecks=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                                             <span class="comment">/*ForceSimpleCall=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;      <span class="comment">// Warp 0 copies reduce element from transfer medium.</span></div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <span class="comment">//</span></div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      llvm::BasicBlock *W0ThenBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;then&quot;</span>);</div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      llvm::BasicBlock *W0ElseBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;else&quot;</span>);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      llvm::BasicBlock *W0MergeBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;ifcont&quot;</span>);</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160; </div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrNumWarpsArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;NumWarpsArg);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      llvm::Value *NumWarpsVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;          AddrNumWarpsArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.IntTy, Loc);</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160; </div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      <span class="comment">// Up to 32 threads in warp 0 are active.</span></div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      llvm::Value *IsActiveThread =</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;          Bld.CreateICmpULT(ThreadID, NumWarpsVal, <span class="stringliteral">&quot;is_active_thread&quot;</span>);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      Bld.CreateCondBr(IsActiveThread, W0ThenBB, W0ElseBB);</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160; </div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(W0ThenBB);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160; </div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <span class="comment">// SrcMediumPtr = &amp;medium[tid]</span></div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;      llvm::Value *SrcMediumPtrVal = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae7975a7578d12fa84314158c91421f9d">CreateInBoundsGEP</a>(</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;          TransferMedium-&gt;getValueType(), TransferMedium,</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;          {llvm::Constant::getNullValue(CGM.Int64Ty), ThreadID});</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <span class="comment">// SrcMediumVal = *SrcMediumPtr;</span></div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> SrcMediumPtr(SrcMediumPtrVal, CopyType, Align);</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160; </div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <span class="comment">// TargetElemPtr = (CopyType*)(SrcDataAddr[i]) + I</span></div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> TargetElemPtrPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(LocalReduceList, Idx);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      llvm::Value *TargetElemPtrVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;          TargetElemPtrPtr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, Loc);</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> TargetElemPtr(TargetElemPtrVal, CopyType, Align);</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;      <span class="keywordflow">if</span> (NumIters &gt; 1)</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        TargetElemPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a31c4f06bfbc1c841bb0d6707212d7354">CreateGEP</a>(CGF, TargetElemPtr, Cnt);</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160; </div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;      <span class="comment">// *TargetElemPtr = SrcMediumVal;</span></div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;      llvm::Value *SrcMediumValue =</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(SrcMediumPtr, <span class="comment">/*Volatile=*/</span><span class="keyword">true</span>, CType, Loc);</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(SrcMediumValue, TargetElemPtr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;                            CType);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      Bld.CreateBr(W0MergeBB);</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(W0ElseBB);</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      Bld.CreateBr(W0MergeBB);</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160; </div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(W0MergeBB);</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160; </div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;      <span class="keywordflow">if</span> (NumIters &gt; 1) {</div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;        Cnt = Bld.CreateNSWAdd(Cnt, llvm::ConstantInt::get(CGM.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#aa0d14821b268a724ecc3a9add2f290e6">IntTy</a>, <span class="comment">/*V=*/</span>1));</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(Cnt, CntAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.IntTy);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acd75804886d9542735d748f04de9efa1">EmitBranch</a>(PrecondBB);</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        (void)<a class="code" href="classclang_1_1CodeGen_1_1ApplyDebugLocation.html#aa90c4f07b6d82797622594c49f4f022e">ApplyDebugLocation::CreateEmpty</a>(CGF);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ExitBB);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;      }</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;      RealTySize %= TySize;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    }</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    ++Idx;</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  }</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#adefc925f9c3921cc89f39663e2b2379e">FinishFunction</a>();</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;}</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="comment">/// Emit a helper that reduces data across two OpenMP threads (lanes)</span></div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="comment">/// in the same warp.  It uses shuffle instructions to copy over data from</span></div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="comment">/// a remote lane&#39;s stack.  The reduction algorithm performed is specified</span></div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="comment">/// by the fourth parameter.</span></div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<span class="comment">/// Algorithm Versions.</span></div>
<div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;<span class="comment">/// Full Warp Reduce (argument value 0):</span></div>
<div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;<span class="comment">///   This algorithm assumes that all 32 lanes are active and gathers</span></div>
<div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="comment">///   data from these 32 lanes, producing a single resultant value.</span></div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="comment">/// Contiguous Partial Warp Reduce (argument value 1):</span></div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="comment">///   This algorithm assumes that only a *contiguous* subset of lanes</span></div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="comment">///   are active.  This happens for the last warp in a parallel region</span></div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="comment">///   when the user specified num_threads is not an integer multiple of</span></div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="comment">///   32.  This contiguous subset always starts with the zeroth lane.</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment">/// Partial Warp Reduce (argument value 2):</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="comment">///   This algorithm gathers data from any number of lanes at any position.</span></div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment">/// All reduced values are stored in the lowest possible lane.  The set</span></div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment">/// of problems every algorithm addresses is a super set of those</span></div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment">/// addressable by algorithms with a lower version number.  Overhead</span></div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="comment">/// increases as algorithm version increases.</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="comment">/// Terminology</span></div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="comment">/// Reduce element:</span></div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">///   Reduce element refers to the individual data field with primitive</span></div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment">///   data types to be combined and reduced across threads.</span></div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="comment">/// Reduce list:</span></div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="comment">///   Reduce list refers to a collection of local, thread-private</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="comment">///   reduce elements.</span></div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="comment">/// Remote Reduce list:</span></div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="comment">///   Remote Reduce list refers to a collection of remote (relative to</span></div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment">///   the current thread) reduce elements.</span></div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="comment">/// We distinguish between three states of threads that are important to</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="comment">/// the implementation of this function.</span></div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="comment">/// Alive threads:</span></div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;<span class="comment">///   Threads in a warp executing the SIMT instruction, as distinguished from</span></div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;<span class="comment">///   threads that are inactive due to divergent control flow.</span></div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="comment">/// Active threads:</span></div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="comment">///   The minimal set of threads that has to be alive upon entry to this</span></div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="comment">///   function.  The computation is correct iff active threads are alive.</span></div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="comment">///   Some threads are alive but they are not active because they do not</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="comment">///   contribute to the computation in any useful manner.  Turning them off</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="comment">///   may introduce control flow overheads without any tangible benefits.</span></div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="comment">/// Effective threads:</span></div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="comment">///   In order to comply with the argument requirements of the shuffle</span></div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="comment">///   function, we must keep all lanes holding data alive.  But at most</span></div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="comment">///   half of them perform value aggregation; we refer to this half of</span></div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;<span class="comment">///   threads as effective. The other half is simply handing off their</span></div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;<span class="comment">///   data.</span></div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;<span class="comment">/// Procedure</span></div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="comment">/// Value shuffle:</span></div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="comment">///   In this step active threads transfer data from higher lane positions</span></div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="comment">///   in the warp to lower lane positions, creating Remote Reduce list.</span></div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="comment">/// Value aggregation:</span></div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="comment">///   In this step, effective threads combine their thread local Reduce list</span></div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;<span class="comment">///   with Remote Reduce list and store the result in the thread local</span></div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;<span class="comment">///   Reduce list.</span></div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;<span class="comment">/// Value copy:</span></div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="comment">///   In this step, we deal with the assumption made by algorithm 2</span></div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="comment">///   (i.e. contiguity assumption).  When we have an odd number of lanes</span></div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="comment">///   active, say 2k+1, only k threads will be effective and therefore k</span></div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="comment">///   new values will be produced.  However, the Reduce list owned by the</span></div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="comment">///   (2k+1)th thread is ignored in the value aggregation.  Therefore</span></div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;<span class="comment">///   we copy the Reduce list from the (2k+1)th lane to (k+1)th lane so</span></div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment">///   that the contiguity assumption still holds.</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#aeceb0b491954f710d711164d4a0568db"> 2000</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Function *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#aeceb0b491954f710d711164d4a0568db">emitShuffleAndReduceFunction</a>(</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> Privates,</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> ReductionArrayTy, llvm::Function *ReduceFn, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc) {</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;C = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>();</div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160; </div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;  <span class="comment">// Thread local Reduce list used to host the values of data to be reduced.</span></div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> ReduceListArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                                  C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="comment">// Current lane id; could be logical.</span></div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> LaneIDArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>, C.ShortTy,</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                              <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;  <span class="comment">// Offset of the remote source lane relative to the current lane.</span></div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> RemoteLaneOffsetArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                                        C.ShortTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  <span class="comment">// Algorithm version.  This is expected to be known at compile time.</span></div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> AlgoVerArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                               C.ShortTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1FunctionArgList.html">FunctionArgList</a> Args;</div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;  Args.push_back(&amp;ReduceListArg);</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  Args.push_back(&amp;LaneIDArg);</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  Args.push_back(&amp;RemoteLaneOffsetArg);</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;  Args.push_back(&amp;AlgoVerArg);</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160; </div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1CGFunctionInfo.html">CGFunctionInfo</a> &amp;CGFI =</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a6e2a1179e9475f17f7db1e6e642a43ec">arrangeBuiltinFunctionDeclaration</a>(C.VoidTy, Args);</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;  <span class="keyword">auto</span> *Fn = llvm::Function::Create(</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a5e6c7473f14643c5a5b45ac9c0bb2ef8">GetFunctionType</a>(CGFI), llvm::GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      <span class="stringliteral">&quot;_omp_reduction_shuffle_and_reduce_func&quot;</span>, &amp;CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>());</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a0d41184ca8693cab4ed36a55a348bf86">SetInternalFunctionAttributes</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), Fn, CGFI);</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  Fn-&gt;setDoesNotRecurse();</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160; </div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> CGF(CGM);</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a773426ce113953ed0e3e75885b61d9a8">StartFunction</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), C.VoidTy, Fn, CGFI, Args, Loc, Loc);</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160; </div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrReduceListArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;ReduceListArg);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;  llvm::Type *ElemTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(ReductionArrayTy);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> LocalReduceList(</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;      Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(AddrReduceListArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                               C.VoidPtrTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>()),</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;          ElemTy-&gt;getPointerTo()),</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      ElemTy, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#ada1b89da70bd71382c681e4254874e1a">getPointerAlign</a>());</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160; </div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrLaneIDArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;LaneIDArg);</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;  llvm::Value *LaneIDArgVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      AddrLaneIDArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.ShortTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>());</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160; </div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrRemoteLaneOffsetArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;RemoteLaneOffsetArg);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;  llvm::Value *RemoteLaneOffsetArgVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      AddrRemoteLaneOffsetArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.ShortTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>());</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160; </div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrAlgoVerArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;AlgoVerArg);</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;  llvm::Value *AlgoVerArgVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      AddrAlgoVerArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.ShortTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>());</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160; </div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="comment">// Create a local thread-private variable to host the Reduce list</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="comment">// from a remote lane.</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> RemoteReduceList =</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">CreateMemTemp</a>(ReductionArrayTy, <span class="stringliteral">&quot;.omp.reduction.remote_reduce_list&quot;</span>);</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160; </div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="comment">// This loop iterates through the list of reduce elements and copies,</span></div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;  <span class="comment">// element by element, from a remote lane in the warp to RemoteReduceList,</span></div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="comment">// hosted on the thread&#39;s stack.</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a5a004688c83feec0eb5b4b30d5e4e4a1">emitReductionListCopy</a>(RemoteLaneToThread, CGF, ReductionArrayTy, Privates,</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;                        LocalReduceList, RemoteReduceList,</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;                        {<span class="comment">/*RemoteLaneOffset=*/</span>RemoteLaneOffsetArgVal,</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;                         <span class="comment">/*ScratchpadIndex=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;                         <span class="comment">/*ScratchpadWidth=*/</span><span class="keyword">nullptr</span>});</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160; </div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;  <span class="comment">// The actions to be performed on the Remote Reduce list is dependent</span></div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;  <span class="comment">// on the algorithm version.</span></div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;  <span class="comment">//  if (AlgoVer==0) || (AlgoVer==1 &amp;&amp; (LaneId &lt; Offset)) || (AlgoVer==2 &amp;&amp;</span></div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;  <span class="comment">//  LaneId % 2 == 0 &amp;&amp; Offset &gt; 0):</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;  <span class="comment">//    do the reduction value aggregation</span></div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;  <span class="comment">//  The thread local variable Reduce list is mutated in place to host the</span></div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;  <span class="comment">//  reduced data, which is the aggregated value produced from local and</span></div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;  <span class="comment">//  remote lanes.</span></div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;  <span class="comment">//</span></div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;  <span class="comment">//  Note that AlgoVer is expected to be a constant integer known at compile</span></div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;  <span class="comment">//  time.</span></div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;  <span class="comment">//  When AlgoVer==0, the first conjunction evaluates to true, making</span></div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;  <span class="comment">//    the entire predicate true during compile time.</span></div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;  <span class="comment">//  When AlgoVer==1, the second conjunction has only the second part to be</span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;  <span class="comment">//    evaluated during runtime.  Other conjunctions evaluates to false</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;  <span class="comment">//    during compile time.</span></div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;  <span class="comment">//  When AlgoVer==2, the third conjunction has only the second part to be</span></div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;  <span class="comment">//    evaluated during runtime.  Other conjunctions evaluates to false</span></div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;  <span class="comment">//    during compile time.</span></div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  llvm::Value *CondAlgo0 = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#aa44627a34670f3a2fe50f38596e21428">CreateIsNull</a>(AlgoVerArgVal);</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160; </div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;  llvm::Value *Algo1 = Bld.CreateICmpEQ(AlgoVerArgVal, Bld.getInt16(1));</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;  llvm::Value *CondAlgo1 = Bld.CreateAnd(</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      Algo1, Bld.CreateICmpULT(LaneIDArgVal, RemoteLaneOffsetArgVal));</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160; </div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;  llvm::Value *Algo2 = Bld.CreateICmpEQ(AlgoVerArgVal, Bld.getInt16(2));</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;  llvm::Value *CondAlgo2 = Bld.CreateAnd(</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      Algo2, Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#aa44627a34670f3a2fe50f38596e21428">CreateIsNull</a>(Bld.CreateAnd(LaneIDArgVal, Bld.getInt16(1))));</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;  CondAlgo2 = Bld.CreateAnd(</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      CondAlgo2, Bld.CreateICmpSGT(RemoteLaneOffsetArgVal, Bld.getInt16(0)));</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160; </div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;  llvm::Value *CondReduce = Bld.CreateOr(CondAlgo0, CondAlgo1);</div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;  CondReduce = Bld.CreateOr(CondReduce, CondAlgo2);</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160; </div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;  llvm::BasicBlock *ThenBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;then&quot;</span>);</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;  llvm::BasicBlock *ElseBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;else&quot;</span>);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;  llvm::BasicBlock *MergeBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;ifcont&quot;</span>);</div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;  Bld.CreateCondBr(CondReduce, ThenBB, ElseBB);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160; </div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ThenBB);</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;  <span class="comment">// reduce_function(LocalReduceList, RemoteReduceList)</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;  llvm::Value *LocalReduceListPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      LocalReduceList.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>);</div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;  llvm::Value *RemoteReduceListPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      RemoteReduceList.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>);</div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>().<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#af546e72839c4357b485a7f41348b755a">emitOutlinedFunctionCall</a>(</div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      CGF, Loc, ReduceFn, {LocalReduceListPtr, RemoteReduceListPtr});</div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  Bld.CreateBr(MergeBB);</div>
<div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160; </div>
<div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ElseBB);</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;  Bld.CreateBr(MergeBB);</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160; </div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(MergeBB);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160; </div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;  <span class="comment">// if (AlgoVer==1 &amp;&amp; (LaneId &gt;= Offset)) copy Remote Reduce list to local</span></div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;  <span class="comment">// Reduce list.</span></div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;  Algo1 = Bld.CreateICmpEQ(AlgoVerArgVal, Bld.getInt16(1));</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;  llvm::Value *CondCopy = Bld.CreateAnd(</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      Algo1, Bld.CreateICmpUGE(LaneIDArgVal, RemoteLaneOffsetArgVal));</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  llvm::BasicBlock *CpyThenBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;then&quot;</span>);</div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;  llvm::BasicBlock *CpyElseBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;else&quot;</span>);</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;  llvm::BasicBlock *CpyMergeBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;ifcont&quot;</span>);</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;  Bld.CreateCondBr(CondCopy, CpyThenBB, CpyElseBB);</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160; </div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(CpyThenBB);</div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;  <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a5a004688c83feec0eb5b4b30d5e4e4a1">emitReductionListCopy</a>(ThreadCopy, CGF, ReductionArrayTy, Privates,</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                        RemoteReduceList, LocalReduceList);</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  Bld.CreateBr(CpyMergeBB);</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160; </div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(CpyElseBB);</div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  Bld.CreateBr(CpyMergeBB);</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160; </div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(CpyMergeBB);</div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160; </div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#adefc925f9c3921cc89f39663e2b2379e">FinishFunction</a>();</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;}</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="comment">/// This function emits a helper that copies all the reduction variables from</span></div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="comment">/// the team into the provided global buffer for the reduction variables.</span></div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;<span class="comment">/// void list_to_global_copy_func(void *buffer, int Idx, void *reduce_data)</span></div>
<div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;<span class="comment">///   For all data entries D in reduce_data:</span></div>
<div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment">///     Copy local D to buffer.D[Idx]</span></div>
<div class="line"><a name="l02158"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#af8ef22468ed9a3f441665f533c8f6285"> 2158</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Value *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#af8ef22468ed9a3f441665f533c8f6285">emitListToGlobalCopyFunction</a>(</div>
<div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> Privates,</div>
<div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> ReductionArrayTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc,</div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *TeamReductionRec,</div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keyword">const</span> llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt;</div>
<div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        &amp;VarFieldMap) {</div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;C = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>();</div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160; </div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="comment">// Buffer: global reduction buffer.</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> BufferArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                              C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;  <span class="comment">// Idx: index of the buffer.</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> IdxArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>, C.IntTy,</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                           <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="comment">// ReduceList: thread local Reduce list.</span></div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> ReduceListArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                                  C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1FunctionArgList.html">FunctionArgList</a> Args;</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  Args.push_back(&amp;BufferArg);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  Args.push_back(&amp;IdxArg);</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  Args.push_back(&amp;ReduceListArg);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160; </div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1CGFunctionInfo.html">CGFunctionInfo</a> &amp;CGFI =</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a6e2a1179e9475f17f7db1e6e642a43ec">arrangeBuiltinFunctionDeclaration</a>(C.VoidTy, Args);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;  <span class="keyword">auto</span> *Fn = llvm::Function::Create(</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a5e6c7473f14643c5a5b45ac9c0bb2ef8">GetFunctionType</a>(CGFI), llvm::GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      <span class="stringliteral">&quot;_omp_reduction_list_to_global_copy_func&quot;</span>, &amp;CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>());</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a0d41184ca8693cab4ed36a55a348bf86">SetInternalFunctionAttributes</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), Fn, CGFI);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;  Fn-&gt;setDoesNotRecurse();</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> CGF(CGM);</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a773426ce113953ed0e3e75885b61d9a8">StartFunction</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), C.VoidTy, Fn, CGFI, Args, Loc, Loc);</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160; </div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrReduceListArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;ReduceListArg);</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrBufferArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;BufferArg);</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  llvm::Type *ElemTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(ReductionArrayTy);</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> LocalReduceList(</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;      Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(AddrReduceListArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;                               C.VoidPtrTy, Loc),</div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;          ElemTy-&gt;getPointerTo()),</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      ElemTy, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#ada1b89da70bd71382c681e4254874e1a">getPointerAlign</a>());</div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> StaticTy = C.getRecordType(TeamReductionRec);</div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  llvm::Type *LLVMReductionsBufferTy =</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#addbcd8ec171784107b51a74441182bb7">ConvertTypeForMem</a>(StaticTy);</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  llvm::Value *BufferArrPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(AddrBufferArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, Loc),</div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;      LLVMReductionsBufferTy-&gt;getPointerTo());</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;  llvm::Value *Idxs[] = {CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;IdxArg),</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;                                              <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.IntTy,</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;                                              Loc)};</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a> : Privates) {</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="comment">// Reduce element = LocalReduceList[i]</span></div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ElemPtrPtrAddr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(LocalReduceList, Idx);</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    llvm::Value *ElemPtrPtr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        ElemPtrPtrAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>());</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="comment">// elemptr = ((CopyType*)(elemptrptr)) + I</span></div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    ElemTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType());</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    ElemPtrPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;        ElemPtrPtr, ElemTy-&gt;getPointerTo());</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ElemPtr =</div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a>(ElemPtrPtr, ElemTy, C.getTypeAlignInChars(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()));</div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = cast&lt;DeclRefExpr&gt;(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>)-&gt;getDecl();</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <span class="comment">// Global = Buffer.VD[Idx];</span></div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *FD = VarFieldMap.lookup(VD);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    llvm::Value *BufferPtr =</div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;        Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae7975a7578d12fa84314158c91421f9d">CreateInBoundsGEP</a>(LLVMReductionsBufferTy, BufferArrPtr, Idxs);</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> GlobLVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a0fe5273873e8ce1fab483cd99ed84000">EmitLValueForField</a>(</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afe567899b7e344def2c522f57d57e655">MakeNaturalAlignRawAddrLValue</a>(BufferPtr, StaticTy), FD);</div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> GlobAddr = GlobLVal.<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#a7f4854b60c6f7626344f156dad6e77c9">getAddress</a>(CGF);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;    GlobLVal.<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#af7cae892f32a136f4c8163d6e2f1963b">setAddress</a>(<a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a>(GlobAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF),</div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                                CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()),</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                                GlobAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a34953de03f6c979659e4262c00c1f9ee">getAlignment</a>()));</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="keywordflow">switch</span> (CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac1be3afe566ffd19818efe9f6b07a8ea">getEvaluationKind</a>(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType())) {</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9aa4a7b0b5cf5c3854e35ca0c172e93269">TEK_Scalar</a>: {</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;      llvm::Value *<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a> = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;          ElemPtr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType(), Loc,</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;          <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>), <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>, GlobLVal);</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    }</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9ad0c74fbe072df321c2078f52f052d07c">TEK_Complex</a>: {</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae417ed4971c18c5ce0607e1be62ec117">CodeGenFunction::ComplexPairTy</a> <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a> = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a26d8547dd8e031970116491629669c39">EmitLoadOfComplex</a>(</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(ElemPtr, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()), Loc);</div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa903765558c8982b2d81d97e637adda1">EmitStoreOfComplex</a>(<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>, GlobLVal, <span class="comment">/*isInit=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    }</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9a6bdd6972cc7f7a6326c359a2a07df29a">TEK_Aggregate</a>:</div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a63fc9c5b566f21e623bd6c15515b8688">EmitAggregateCopy</a>(GlobLVal,</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                            CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(ElemPtr, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()),</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                            <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType(), <a class="code" href="classclang_1_1CodeGen_1_1AggValueSlot.html#a0a3d1078f85b36699f59bdf81f20319aa9df550c4985c3c2c3156657c8c840297">AggValueSlot::DoesNotOverlap</a>);</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    }</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    ++Idx;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;  }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160; </div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#adefc925f9c3921cc89f39663e2b2379e">FinishFunction</a>();</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;}</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;<span class="comment">/// This function emits a helper that reduces all the reduction variables from</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<span class="comment">/// the team into the provided global buffer for the reduction variables.</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;<span class="comment">/// void list_to_global_reduce_func(void *buffer, int Idx, void *reduce_data)</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="comment">///  void *GlobPtrs[];</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;<span class="comment">///  GlobPtrs[0] = (void*)&amp;buffer.D0[Idx];</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment">///  ...</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<span class="comment">///  GlobPtrs[N] = (void*)&amp;buffer.DN[Idx];</span></div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<span class="comment">///  reduce_function(GlobPtrs, reduce_data);</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a732ee718e2149694c12e45397432b170"> 2269</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Value *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a732ee718e2149694c12e45397432b170">emitListToGlobalReduceFunction</a>(</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> Privates,</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> ReductionArrayTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc,</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *TeamReductionRec,</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;    <span class="keyword">const</span> llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt;</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;        &amp;VarFieldMap,</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;    llvm::Function *ReduceFn) {</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;C = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>();</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160; </div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  <span class="comment">// Buffer: global reduction buffer.</span></div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> BufferArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;                              C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;  <span class="comment">// Idx: index of the buffer.</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> IdxArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>, C.IntTy,</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                           <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;  <span class="comment">// ReduceList: thread local Reduce list.</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> ReduceListArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                                  C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1FunctionArgList.html">FunctionArgList</a> Args;</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;  Args.push_back(&amp;BufferArg);</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;  Args.push_back(&amp;IdxArg);</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;  Args.push_back(&amp;ReduceListArg);</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160; </div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1CGFunctionInfo.html">CGFunctionInfo</a> &amp;CGFI =</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a6e2a1179e9475f17f7db1e6e642a43ec">arrangeBuiltinFunctionDeclaration</a>(C.VoidTy, Args);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;  <span class="keyword">auto</span> *Fn = llvm::Function::Create(</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a5e6c7473f14643c5a5b45ac9c0bb2ef8">GetFunctionType</a>(CGFI), llvm::GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;      <span class="stringliteral">&quot;_omp_reduction_list_to_global_reduce_func&quot;</span>, &amp;CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>());</div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a0d41184ca8693cab4ed36a55a348bf86">SetInternalFunctionAttributes</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), Fn, CGFI);</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  Fn-&gt;setDoesNotRecurse();</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> CGF(CGM);</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a773426ce113953ed0e3e75885b61d9a8">StartFunction</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), C.VoidTy, Fn, CGFI, Args, Loc, Loc);</div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160; </div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160; </div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrBufferArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;BufferArg);</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> StaticTy = C.getRecordType(TeamReductionRec);</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;  llvm::Type *LLVMReductionsBufferTy =</div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#addbcd8ec171784107b51a74441182bb7">ConvertTypeForMem</a>(StaticTy);</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  llvm::Value *BufferArrPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(AddrBufferArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, Loc),</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      LLVMReductionsBufferTy-&gt;getPointerTo());</div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160; </div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="comment">// 1. Build a list of reduction variables.</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;  <span class="comment">// void *RedList[&lt;n&gt;] = {&lt;ReductionVars&gt;[0], ..., &lt;ReductionVars&gt;[&lt;n&gt;-1]};</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1RawAddress.html">RawAddress</a> ReductionList =</div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">CreateMemTemp</a>(ReductionArrayTy, <span class="stringliteral">&quot;.omp.reduction.red_list&quot;</span>);</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;  <span class="keyword">auto</span> IPriv = Privates.begin();</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;  llvm::Value *Idxs[] = {CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;IdxArg),</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;                                              <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.IntTy,</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;                                              Loc)};</div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 0, E = Privates.size(); I &lt; E; ++I, ++IPriv, ++Idx) {</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> Elem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(ReductionList, Idx);</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="comment">// Global = Buffer.VD[Idx];</span></div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = cast&lt;DeclRefExpr&gt;(*IPriv)-&gt;getDecl();</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *FD = VarFieldMap.lookup(VD);</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    llvm::Value *BufferPtr =</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;        Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae7975a7578d12fa84314158c91421f9d">CreateInBoundsGEP</a>(LLVMReductionsBufferTy, BufferArrPtr, Idxs);</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> GlobLVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a0fe5273873e8ce1fab483cd99ed84000">EmitLValueForField</a>(</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afe567899b7e344def2c522f57d57e655">MakeNaturalAlignRawAddrLValue</a>(BufferPtr, StaticTy), FD);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> GlobAddr = GlobLVal.<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#a7f4854b60c6f7626344f156dad6e77c9">getAddress</a>(CGF);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(GlobAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), Elem,</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                          <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy);</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;    <span class="keywordflow">if</span> ((*IPriv)-&gt;getType()-&gt;isVariablyModifiedType()) {</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;      <span class="comment">// Store array size.</span></div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      ++Idx;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;      Elem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(ReductionList, Idx);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;      llvm::Value *Size = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateIntCast(</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa0df047a8374a7b5e1696adb2d71a72c">getVLASize</a>(</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                 CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a6ff315a5c1e14dc775fe14c5356f3777">getAsVariableArrayType</a>((*IPriv)-&gt;getType()))</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;              .<a class="code" href="structclang_1_1CodeGen_1_1CodeGenFunction_1_1VlaSizePair.html#a519c4b03a5e4d4da34f59ae14fd25a03">NumElts</a>,</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;          CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>, <span class="comment">/*isSigned=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a5f8f00a84115fa0de7ec827e117f5a8a">CreateStore</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateIntToPtr(Size, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>),</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                              Elem);</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    }</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  }</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160; </div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;  <span class="comment">// Call reduce_function(GlobalReduceList, ReduceList)</span></div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;  llvm::Value *GlobalReduceList = ReductionList.<a class="code" href="classclang_1_1CodeGen_1_1RawAddress.html#a370668e6a9f843207d88820c26193cc9">getPointer</a>();</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrReduceListArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;ReduceListArg);</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;  llvm::Value *ReducedPtr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      AddrReduceListArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, Loc);</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>().<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#af546e72839c4357b485a7f41348b755a">emitOutlinedFunctionCall</a>(</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      CGF, Loc, ReduceFn, {GlobalReduceList, ReducedPtr});</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#adefc925f9c3921cc89f39663e2b2379e">FinishFunction</a>();</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;}</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;<span class="comment">/// This function emits a helper that copies all the reduction variables from</span></div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;<span class="comment">/// the team into the provided global buffer for the reduction variables.</span></div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;<span class="comment">/// void list_to_global_copy_func(void *buffer, int Idx, void *reduce_data)</span></div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;<span class="comment">///   For all data entries D in reduce_data:</span></div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;<span class="comment">///     Copy buffer.D[Idx] to local D;</span></div>
<div class="line"><a name="l02364"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a2745f124cc3313823419744fc4957610"> 2364</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Value *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a2745f124cc3313823419744fc4957610">emitGlobalToListCopyFunction</a>(</div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> Privates,</div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> ReductionArrayTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc,</div>
<div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *TeamReductionRec,</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <span class="keyword">const</span> llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt;</div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        &amp;VarFieldMap) {</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;C = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>();</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160; </div>
<div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;  <span class="comment">// Buffer: global reduction buffer.</span></div>
<div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> BufferArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;                              C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;  <span class="comment">// Idx: index of the buffer.</span></div>
<div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> IdxArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>, C.IntTy,</div>
<div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;                           <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;  <span class="comment">// ReduceList: thread local Reduce list.</span></div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> ReduceListArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;                                  C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1FunctionArgList.html">FunctionArgList</a> Args;</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  Args.push_back(&amp;BufferArg);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;  Args.push_back(&amp;IdxArg);</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  Args.push_back(&amp;ReduceListArg);</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160; </div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1CGFunctionInfo.html">CGFunctionInfo</a> &amp;CGFI =</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a6e2a1179e9475f17f7db1e6e642a43ec">arrangeBuiltinFunctionDeclaration</a>(C.VoidTy, Args);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;  <span class="keyword">auto</span> *Fn = llvm::Function::Create(</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a5e6c7473f14643c5a5b45ac9c0bb2ef8">GetFunctionType</a>(CGFI), llvm::GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;      <span class="stringliteral">&quot;_omp_reduction_global_to_list_copy_func&quot;</span>, &amp;CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>());</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a0d41184ca8693cab4ed36a55a348bf86">SetInternalFunctionAttributes</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), Fn, CGFI);</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;  Fn-&gt;setDoesNotRecurse();</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> CGF(CGM);</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a773426ce113953ed0e3e75885b61d9a8">StartFunction</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), C.VoidTy, Fn, CGFI, Args, Loc, Loc);</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160; </div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160; </div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrReduceListArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;ReduceListArg);</div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrBufferArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;BufferArg);</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  llvm::Type *ElemTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(ReductionArrayTy);</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> LocalReduceList(</div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(AddrReduceListArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                               C.VoidPtrTy, Loc),</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;          ElemTy-&gt;getPointerTo()),</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      ElemTy, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#ada1b89da70bd71382c681e4254874e1a">getPointerAlign</a>());</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> StaticTy = C.getRecordType(TeamReductionRec);</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;  llvm::Type *LLVMReductionsBufferTy =</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#addbcd8ec171784107b51a74441182bb7">ConvertTypeForMem</a>(StaticTy);</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;  llvm::Value *BufferArrPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(AddrBufferArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, Loc),</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;      LLVMReductionsBufferTy-&gt;getPointerTo());</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160; </div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  llvm::Value *Idxs[] = {CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;IdxArg),</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                                              <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.IntTy,</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                                              Loc)};</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a> : Privates) {</div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="comment">// Reduce element = LocalReduceList[i]</span></div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ElemPtrPtrAddr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(LocalReduceList, Idx);</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    llvm::Value *ElemPtrPtr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;        ElemPtrPtrAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>());</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <span class="comment">// elemptr = ((CopyType*)(elemptrptr)) + I</span></div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;    ElemTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType());</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    ElemPtrPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        ElemPtrPtr, ElemTy-&gt;getPointerTo());</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ElemPtr =</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a>(ElemPtrPtr, ElemTy, C.getTypeAlignInChars(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()));</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = cast&lt;DeclRefExpr&gt;(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>)-&gt;getDecl();</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;    <span class="comment">// Global = Buffer.VD[Idx];</span></div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *FD = VarFieldMap.lookup(VD);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    llvm::Value *BufferPtr =</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;        Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae7975a7578d12fa84314158c91421f9d">CreateInBoundsGEP</a>(LLVMReductionsBufferTy, BufferArrPtr, Idxs);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> GlobLVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a0fe5273873e8ce1fab483cd99ed84000">EmitLValueForField</a>(</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afe567899b7e344def2c522f57d57e655">MakeNaturalAlignRawAddrLValue</a>(BufferPtr, StaticTy), FD);</div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> GlobAddr = GlobLVal.<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#a7f4854b60c6f7626344f156dad6e77c9">getAddress</a>(CGF);</div>
<div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;    GlobLVal.<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#af7cae892f32a136f4c8163d6e2f1963b">setAddress</a>(<a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a>(GlobAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF),</div>
<div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;                                CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()),</div>
<div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;                                GlobAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a34953de03f6c979659e4262c00c1f9ee">getAlignment</a>()));</div>
<div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <span class="keywordflow">switch</span> (CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac1be3afe566ffd19818efe9f6b07a8ea">getEvaluationKind</a>(<a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType())) {</div>
<div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9aa4a7b0b5cf5c3854e35ca0c172e93269">TEK_Scalar</a>: {</div>
<div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      llvm::Value *<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a> = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(GlobLVal, Loc);</div>
<div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>, ElemPtr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType(),</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;                            <a class="code" href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">LValueBaseInfo</a>(<a class="code" href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">AlignmentSource::Type</a>),</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;                            <a class="code" href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">TBAAAccessInfo</a>());</div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    }</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9ad0c74fbe072df321c2078f52f052d07c">TEK_Complex</a>: {</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae417ed4971c18c5ce0607e1be62ec117">CodeGenFunction::ComplexPairTy</a> <a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a> = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a26d8547dd8e031970116491629669c39">EmitLoadOfComplex</a>(GlobLVal, Loc);</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa903765558c8982b2d81d97e637adda1">EmitStoreOfComplex</a>(<a class="code" href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a>, CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(ElemPtr, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()),</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;                             <span class="comment">/*isInit=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    }</div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9a6bdd6972cc7f7a6326c359a2a07df29a">TEK_Aggregate</a>:</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a63fc9c5b566f21e623bd6c15515b8688">EmitAggregateCopy</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(ElemPtr, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType()),</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;                            GlobLVal, <a class="code" href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">Private</a>-&gt;getType(),</div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;                            <a class="code" href="classclang_1_1CodeGen_1_1AggValueSlot.html#a0a3d1078f85b36699f59bdf81f20319aa9df550c4985c3c2c3156657c8c840297">AggValueSlot::DoesNotOverlap</a>);</div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    }</div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    ++Idx;</div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;  }</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160; </div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#adefc925f9c3921cc89f39663e2b2379e">FinishFunction</a>();</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;}</div>
<div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;<span class="comment">/// This function emits a helper that reduces all the reduction variables from</span></div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;<span class="comment">/// the team into the provided global buffer for the reduction variables.</span></div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;<span class="comment">/// void global_to_list_reduce_func(void *buffer, int Idx, void *reduce_data)</span></div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;<span class="comment">///  void *GlobPtrs[];</span></div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;<span class="comment">///  GlobPtrs[0] = (void*)&amp;buffer.D0[Idx];</span></div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;<span class="comment">///  ...</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="comment">///  GlobPtrs[N] = (void*)&amp;buffer.DN[Idx];</span></div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="comment">///  reduce_function(reduce_data, GlobPtrs);</span></div>
<div class="line"><a name="l02476"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#abbea910f67c50b061024e583f7a8d411"> 2476</a></span>&#160;<span class="comment"></span><span class="keyword">static</span> llvm::Value *<a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#abbea910f67c50b061024e583f7a8d411">emitGlobalToListReduceFunction</a>(</div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> Privates,</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    <a class="code" href="classclang_1_1QualType.html">QualType</a> ReductionArrayTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc,</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *TeamReductionRec,</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="keyword">const</span> llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt;</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;        &amp;VarFieldMap,</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    llvm::Function *ReduceFn) {</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;C = CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>();</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160; </div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;  <span class="comment">// Buffer: global reduction buffer.</span></div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> BufferArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;                              C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;  <span class="comment">// Idx: index of the buffer.</span></div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> IdxArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>, C.IntTy,</div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;                           <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  <span class="comment">// ReduceList: thread local Reduce list.</span></div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> ReduceListArg(C, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, Loc, <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>,</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;                                  C.VoidPtrTy, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1FunctionArgList.html">FunctionArgList</a> Args;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  Args.push_back(&amp;BufferArg);</div>
<div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;  Args.push_back(&amp;IdxArg);</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  Args.push_back(&amp;ReduceListArg);</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160; </div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1CGFunctionInfo.html">CGFunctionInfo</a> &amp;CGFI =</div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a6e2a1179e9475f17f7db1e6e642a43ec">arrangeBuiltinFunctionDeclaration</a>(C.VoidTy, Args);</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;  <span class="keyword">auto</span> *Fn = llvm::Function::Create(</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a5e6c7473f14643c5a5b45ac9c0bb2ef8">GetFunctionType</a>(CGFI), llvm::GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      <span class="stringliteral">&quot;_omp_reduction_global_to_list_reduce_func&quot;</span>, &amp;CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>());</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a0d41184ca8693cab4ed36a55a348bf86">SetInternalFunctionAttributes</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), Fn, CGFI);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  Fn-&gt;setDoesNotRecurse();</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> CGF(CGM);</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a773426ce113953ed0e3e75885b61d9a8">StartFunction</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), C.VoidTy, Fn, CGFI, Args, Loc, Loc);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160; </div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160; </div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrBufferArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;BufferArg);</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> StaticTy = C.getRecordType(TeamReductionRec);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;  llvm::Type *LLVMReductionsBufferTy =</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#addbcd8ec171784107b51a74441182bb7">ConvertTypeForMem</a>(StaticTy);</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  llvm::Value *BufferArrPtr = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(AddrBufferArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, Loc),</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;      LLVMReductionsBufferTy-&gt;getPointerTo());</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160; </div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  <span class="comment">// 1. Build a list of reduction variables.</span></div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  <span class="comment">// void *RedList[&lt;n&gt;] = {&lt;ReductionVars&gt;[0], ..., &lt;ReductionVars&gt;[&lt;n&gt;-1]};</span></div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ReductionList =</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">CreateMemTemp</a>(ReductionArrayTy, <span class="stringliteral">&quot;.omp.reduction.red_list&quot;</span>);</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="keyword">auto</span> IPriv = Privates.begin();</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  llvm::Value *Idxs[] = {CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;IdxArg),</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                                              <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.IntTy,</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                                              Loc)};</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 0, E = Privates.size(); I &lt; E; ++I, ++IPriv, ++Idx) {</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> Elem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(ReductionList, Idx);</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;    <span class="comment">// Global = Buffer.VD[Idx];</span></div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = cast&lt;DeclRefExpr&gt;(*IPriv)-&gt;getDecl();</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *FD = VarFieldMap.lookup(VD);</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;    llvm::Value *BufferPtr =</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae7975a7578d12fa84314158c91421f9d">CreateInBoundsGEP</a>(LLVMReductionsBufferTy, BufferArrPtr, Idxs);</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> GlobLVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a0fe5273873e8ce1fab483cd99ed84000">EmitLValueForField</a>(</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afe567899b7e344def2c522f57d57e655">MakeNaturalAlignRawAddrLValue</a>(BufferPtr, StaticTy), FD);</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> GlobAddr = GlobLVal.<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#a7f4854b60c6f7626344f156dad6e77c9">getAddress</a>(CGF);</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;    CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(GlobAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), Elem,</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;                          <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="keywordflow">if</span> ((*IPriv)-&gt;getType()-&gt;isVariablyModifiedType()) {</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;      <span class="comment">// Store array size.</span></div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      ++Idx;</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;      Elem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(ReductionList, Idx);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      llvm::Value *Size = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateIntCast(</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa0df047a8374a7b5e1696adb2d71a72c">getVLASize</a>(</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;                 CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a6ff315a5c1e14dc775fe14c5356f3777">getAsVariableArrayType</a>((*IPriv)-&gt;getType()))</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;              .<a class="code" href="structclang_1_1CodeGen_1_1CodeGenFunction_1_1VlaSizePair.html#a519c4b03a5e4d4da34f59ae14fd25a03">NumElts</a>,</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;          CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>, <span class="comment">/*isSigned=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a5f8f00a84115fa0de7ec827e117f5a8a">CreateStore</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateIntToPtr(Size, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>),</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;                              Elem);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    }</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  }</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160; </div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <span class="comment">// Call reduce_function(ReduceList, GlobalReduceList)</span></div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  llvm::Value *GlobalReduceList = ReductionList.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF);</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> AddrReduceListArg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;ReduceListArg);</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;  llvm::Value *ReducedPtr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      AddrReduceListArg, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>, C.VoidPtrTy, Loc);</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>().<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#af546e72839c4357b485a7f41348b755a">emitOutlinedFunctionCall</a>(</div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;      CGF, Loc, ReduceFn, {ReducedPtr, GlobalReduceList});</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#adefc925f9c3921cc89f39663e2b2379e">FinishFunction</a>();</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;}</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;<span class="comment">/// Design of OpenMP reductions on the GPU</span></div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;<span class="comment">/// Consider a typical OpenMP program with one or more reduction</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;<span class="comment">/// clauses:</span></div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;<span class="comment">/// float foo;</span></div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="comment">/// double bar;</span></div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="comment">/// #pragma omp target teams distribute parallel for \</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;<span class="comment">///             reduction(+:foo) reduction(*:bar)</span></div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;<span class="comment">/// for (int i = 0; i &lt; N; i++) {</span></div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;<span class="comment">///   foo += A[i]; bar *= B[i];</span></div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;<span class="comment">/// }</span></div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="comment">/// where &#39;foo&#39; and &#39;bar&#39; are reduced across all OpenMP threads in</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="comment">/// all teams.  In our OpenMP implementation on the NVPTX device an</span></div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="comment">/// OpenMP team is mapped to a CUDA threadblock and OpenMP threads</span></div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;<span class="comment">/// within a team are mapped to CUDA threads within a threadblock.</span></div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;<span class="comment">/// Our goal is to efficiently aggregate values across all OpenMP</span></div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<span class="comment">/// threads such that:</span></div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;<span class="comment">///   - the compiler and runtime are logically concise, and</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="comment">///   - the reduction is performed efficiently in a hierarchical</span></div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;<span class="comment">///     manner as follows: within OpenMP threads in the same warp,</span></div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;<span class="comment">///     across warps in a threadblock, and finally across teams on</span></div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="comment">///     the NVPTX device.</span></div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;<span class="comment">/// Introduction to Decoupling</span></div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;<span class="comment">/// We would like to decouple the compiler and the runtime so that the</span></div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;<span class="comment">/// latter is ignorant of the reduction variables (number, data types)</span></div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;<span class="comment">/// and the reduction operators.  This allows a simpler interface</span></div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;<span class="comment">/// and implementation while still attaining good performance.</span></div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;<span class="comment">/// Pseudocode for the aforementioned OpenMP program generated by the</span></div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;<span class="comment">/// compiler is as follows:</span></div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;<span class="comment">/// 1. Create private copies of reduction variables on each OpenMP</span></div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;<span class="comment">///    thread: &#39;foo_private&#39;, &#39;bar_private&#39;</span></div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;<span class="comment">/// 2. Each OpenMP thread reduces the chunk of &#39;A&#39; and &#39;B&#39; assigned</span></div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;<span class="comment">///    to it and writes the result in &#39;foo_private&#39; and &#39;bar_private&#39;</span></div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;<span class="comment">///    respectively.</span></div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;<span class="comment">/// 3. Call the OpenMP runtime on the GPU to reduce within a team</span></div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;<span class="comment">///    and store the result on the team master:</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;<span class="comment">///     __kmpc_nvptx_parallel_reduce_nowait_v2(...,</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="comment">///        reduceData, shuffleReduceFn, interWarpCpyFn)</span></div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="comment">///     where:</span></div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;<span class="comment">///       struct ReduceData {</span></div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="comment">///         double *foo;</span></div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="comment">///         double *bar;</span></div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="comment">///       } reduceData</span></div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment">///       reduceData.foo = &amp;foo_private</span></div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment">///       reduceData.bar = &amp;bar_private</span></div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;<span class="comment">///     &#39;shuffleReduceFn&#39; and &#39;interWarpCpyFn&#39; are pointers to two</span></div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;<span class="comment">///     auxiliary functions generated by the compiler that operate on</span></div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;<span class="comment">///     variables of type &#39;ReduceData&#39;.  They aid the runtime perform</span></div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;<span class="comment">///     algorithmic steps in a data agnostic manner.</span></div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;<span class="comment">///     &#39;shuffleReduceFn&#39; is a pointer to a function that reduces data</span></div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;<span class="comment">///     of type &#39;ReduceData&#39; across two OpenMP threads (lanes) in the</span></div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;<span class="comment">///     same warp.  It takes the following arguments as input:</span></div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;<span class="comment">///     a. variable of type &#39;ReduceData&#39; on the calling lane,</span></div>
<div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="comment">///     b. its lane_id,</span></div>
<div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;<span class="comment">///     c. an offset relative to the current lane_id to generate a</span></div>
<div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;<span class="comment">///        remote_lane_id.  The remote lane contains the second</span></div>
<div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<span class="comment">///        variable of type &#39;ReduceData&#39; that is to be reduced.</span></div>
<div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;<span class="comment">///     d. an algorithm version parameter determining which reduction</span></div>
<div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;<span class="comment">///        algorithm to use.</span></div>
<div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;<span class="comment">///     &#39;shuffleReduceFn&#39; retrieves data from the remote lane using</span></div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;<span class="comment">///     efficient GPU shuffle intrinsics and reduces, using the</span></div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;<span class="comment">///     algorithm specified by the 4th parameter, the two operands</span></div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;<span class="comment">///     element-wise.  The result is written to the first operand.</span></div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;<span class="comment">///     Different reduction algorithms are implemented in different</span></div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;<span class="comment">///     runtime functions, all calling &#39;shuffleReduceFn&#39; to perform</span></div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;<span class="comment">///     the essential reduction step.  Therefore, based on the 4th</span></div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;<span class="comment">///     parameter, this function behaves slightly differently to</span></div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;<span class="comment">///     cooperate with the runtime to ensure correctness under</span></div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;<span class="comment">///     different circumstances.</span></div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;<span class="comment">///     &#39;InterWarpCpyFn&#39; is a pointer to a function that transfers</span></div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;<span class="comment">///     reduced variables across warps.  It tunnels, through CUDA</span></div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;<span class="comment">///     shared memory, the thread-private data of type &#39;ReduceData&#39;</span></div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;<span class="comment">///     from lane 0 of each warp to a lane in the first warp.</span></div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;<span class="comment">/// 4. Call the OpenMP runtime on the GPU to reduce across teams.</span></div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;<span class="comment">///    The last team writes the global reduced value to memory.</span></div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;<span class="comment">///     ret = __kmpc_nvptx_teams_reduce_nowait(...,</span></div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="comment">///             reduceData, shuffleReduceFn, interWarpCpyFn,</span></div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;<span class="comment">///             scratchpadCopyFn, loadAndReduceFn)</span></div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;<span class="comment">///     &#39;scratchpadCopyFn&#39; is a helper that stores reduced</span></div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;<span class="comment">///     data from the team master to a scratchpad array in</span></div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;<span class="comment">///     global memory.</span></div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;<span class="comment">///     &#39;loadAndReduceFn&#39; is a helper that loads data from</span></div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;<span class="comment">///     the scratchpad array and reduces it with the input</span></div>
<div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="comment">///     operand.</span></div>
<div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="comment">///     These compiler generated functions hide address</span></div>
<div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="comment">///     calculation and alignment information from the runtime.</span></div>
<div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;<span class="comment">/// 5. if ret == 1:</span></div>
<div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="comment">///     The team master of the last team stores the reduced</span></div>
<div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;<span class="comment">///     result to the globals in memory.</span></div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;<span class="comment">///     foo += reduceData.foo; bar *= reduceData.bar</span></div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;<span class="comment">/// Warp Reduction Algorithms</span></div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;<span class="comment">/// On the warp level, we have three algorithms implemented in the</span></div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;<span class="comment">/// OpenMP runtime depending on the number of active lanes:</span></div>
<div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;<span class="comment">/// Full Warp Reduction</span></div>
<div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="comment">/// The reduce algorithm within a warp where all lanes are active</span></div>
<div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;<span class="comment">/// is implemented in the runtime as follows:</span></div>
<div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;<span class="comment">/// full_warp_reduce(void *reduce_data,</span></div>
<div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;<span class="comment">///                  kmp_ShuffleReductFctPtr ShuffleReduceFn) {</span></div>
<div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;<span class="comment">///   for (int offset = WARPSIZE/2; offset &gt; 0; offset /= 2)</span></div>
<div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;<span class="comment">///     ShuffleReduceFn(reduce_data, 0, offset, 0);</span></div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;<span class="comment">/// }</span></div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;<span class="comment">/// The algorithm completes in log(2, WARPSIZE) steps.</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;<span class="comment">/// &#39;ShuffleReduceFn&#39; is used here with lane_id set to 0 because it is</span></div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;<span class="comment">/// not used therefore we save instructions by not retrieving lane_id</span></div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;<span class="comment">/// from the corresponding special registers.  The 4th parameter, which</span></div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;<span class="comment">/// represents the version of the algorithm being used, is set to 0 to</span></div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;<span class="comment">/// signify full warp reduction.</span></div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;<span class="comment">/// In this version, &#39;ShuffleReduceFn&#39; behaves, per element, as follows:</span></div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;<span class="comment">/// #reduce_elem refers to an element in the local lane&#39;s data structure</span></div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;<span class="comment">/// #remote_elem is retrieved from a remote lane</span></div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;<span class="comment">/// remote_elem = shuffle_down(reduce_elem, offset, WARPSIZE);</span></div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;<span class="comment">/// reduce_elem = reduce_elem REDUCE_OP remote_elem;</span></div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;<span class="comment">/// Contiguous Partial Warp Reduction</span></div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;<span class="comment">/// This reduce algorithm is used within a warp where only the first</span></div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;<span class="comment">/// &#39;n&#39; (n &lt;= WARPSIZE) lanes are active.  It is typically used when the</span></div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;<span class="comment">/// number of OpenMP threads in a parallel region is not a multiple of</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;<span class="comment">/// WARPSIZE.  The algorithm is implemented in the runtime as follows:</span></div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;<span class="comment">/// void</span></div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;<span class="comment">/// contiguous_partial_reduce(void *reduce_data,</span></div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;<span class="comment">///                           kmp_ShuffleReductFctPtr ShuffleReduceFn,</span></div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;<span class="comment">///                           int size, int lane_id) {</span></div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;<span class="comment">///   int curr_size;</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;<span class="comment">///   int offset;</span></div>
<div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;<span class="comment">///   curr_size = size;</span></div>
<div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;<span class="comment">///   mask = curr_size/2;</span></div>
<div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;<span class="comment">///   while (offset&gt;0) {</span></div>
<div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;<span class="comment">///     ShuffleReduceFn(reduce_data, lane_id, offset, 1);</span></div>
<div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;<span class="comment">///     curr_size = (curr_size+1)/2;</span></div>
<div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;<span class="comment">///     offset = curr_size/2;</span></div>
<div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;<span class="comment">///   }</span></div>
<div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;<span class="comment">/// }</span></div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;<span class="comment">/// In this version, &#39;ShuffleReduceFn&#39; behaves, per element, as follows:</span></div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;<span class="comment">/// remote_elem = shuffle_down(reduce_elem, offset, WARPSIZE);</span></div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;<span class="comment">/// if (lane_id &lt; offset)</span></div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;<span class="comment">///     reduce_elem = reduce_elem REDUCE_OP remote_elem</span></div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;<span class="comment">/// else</span></div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;<span class="comment">///     reduce_elem = remote_elem</span></div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;<span class="comment">/// This algorithm assumes that the data to be reduced are located in a</span></div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;<span class="comment">/// contiguous subset of lanes starting from the first.  When there is</span></div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;<span class="comment">/// an odd number of active lanes, the data in the last lane is not</span></div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;<span class="comment">/// aggregated with any other lane&#39;s dat but is instead copied over.</span></div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;<span class="comment">/// Dispersed Partial Warp Reduction</span></div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;<span class="comment">/// This algorithm is used within a warp when any discontiguous subset of</span></div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;<span class="comment">/// lanes are active.  It is used to implement the reduction operation</span></div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;<span class="comment">/// across lanes in an OpenMP simd region or in a nested parallel region.</span></div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;<span class="comment">/// void</span></div>
<div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;<span class="comment">/// dispersed_partial_reduce(void *reduce_data,</span></div>
<div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;<span class="comment">///                          kmp_ShuffleReductFctPtr ShuffleReduceFn) {</span></div>
<div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;<span class="comment">///   int size, remote_id;</span></div>
<div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;<span class="comment">///   int logical_lane_id = number_of_active_lanes_before_me() * 2;</span></div>
<div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;<span class="comment">///   do {</span></div>
<div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="comment">///       remote_id = next_active_lane_id_right_after_me();</span></div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="comment">///       # the above function returns 0 of no active lane</span></div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="comment">///       # is present right after the current lane.</span></div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;<span class="comment">///       size = number_of_active_lanes_in_this_warp();</span></div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;<span class="comment">///       logical_lane_id /= 2;</span></div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="comment">///       ShuffleReduceFn(reduce_data, logical_lane_id,</span></div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;<span class="comment">///                       remote_id-1-threadIdx.x, 2);</span></div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="comment">///   } while (logical_lane_id % 2 == 0 &amp;&amp; size &gt; 1);</span></div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="comment">/// }</span></div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;<span class="comment">/// There is no assumption made about the initial state of the reduction.</span></div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;<span class="comment">/// Any number of lanes (&gt;=1) could be active at any position.  The reduction</span></div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;<span class="comment">/// result is returned in the first active lane.</span></div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;<span class="comment">/// In this version, &#39;ShuffleReduceFn&#39; behaves, per element, as follows:</span></div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;<span class="comment">/// remote_elem = shuffle_down(reduce_elem, offset, WARPSIZE);</span></div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;<span class="comment">/// if (lane_id % 2 == 0 &amp;&amp; offset &gt; 0)</span></div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;<span class="comment">///     reduce_elem = reduce_elem REDUCE_OP remote_elem</span></div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;<span class="comment">/// else</span></div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;<span class="comment">///     reduce_elem = remote_elem</span></div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;<span class="comment">/// Intra-Team Reduction</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;<span class="comment">/// This function, as implemented in the runtime call</span></div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;<span class="comment">/// &#39;__kmpc_nvptx_parallel_reduce_nowait_v2&#39;, aggregates data across OpenMP</span></div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;<span class="comment">/// threads in a team.  It first reduces within a warp using the</span></div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="comment">/// aforementioned algorithms.  We then proceed to gather all such</span></div>
<div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;<span class="comment">/// reduced values at the first warp.</span></div>
<div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;<span class="comment">/// The runtime makes use of the function &#39;InterWarpCpyFn&#39;, which copies</span></div>
<div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;<span class="comment">/// data from each of the &quot;warp master&quot; (zeroth lane of each warp, where</span></div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;<span class="comment">/// warp-reduced data is held) to the zeroth warp.  This step reduces (in</span></div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;<span class="comment">/// a mathematical sense) the problem of reduction across warp masters in</span></div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;<span class="comment">/// a block to the problem of warp reduction.</span></div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="comment">/// Inter-Team Reduction</span></div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="comment">/// Once a team has reduced its data to a single value, it is stored in</span></div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;<span class="comment">/// a global scratchpad array.  Since each team has a distinct slot, this</span></div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="comment">/// can be done without locking.</span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="comment">/// The last team to write to the scratchpad array proceeds to reduce the</span></div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;<span class="comment">/// scratchpad array.  One or more workers in the last team use the helper</span></div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;<span class="comment">/// &#39;loadAndReduceDataFn&#39; to load and reduce values from the array, i.e.,</span></div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;<span class="comment">/// the k&#39;th worker reduces every k&#39;th element.</span></div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;<span class="comment">/// Finally, a call is made to &#39;__kmpc_nvptx_parallel_reduce_nowait_v2&#39; to</span></div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="comment">/// reduce across workers and compute a globally reduced value.</span></div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="comment">///</span></div>
<div class="line"><a name="l02807"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a06dcb970113cbba5bd3d545fb61dddc7"> 2807</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a06dcb970113cbba5bd3d545fb61dddc7">CGOpenMPRuntimeGPU::emitReduction</a>(</div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> Privates,</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> LHSExprs, <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> RHSExprs,</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const Expr *&gt;</a> ReductionOps, <a class="code" href="structclang_1_1CodeGen_1_1CGOpenMPRuntime_1_1ReductionOptionsTy.html">ReductionOptionsTy</a> Options) {</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;  <span class="keywordflow">if</span> (!CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a84fe1f7899f73123e897b6945c4d135e">HaveInsertPoint</a>())</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160; </div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;  <span class="keywordtype">bool</span> ParallelReduction = <a class="code" href="namespaceclang.html#a56341f29c8efb590dd2db805c8dca624">isOpenMPParallelDirective</a>(Options.ReductionKind);</div>
<div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;  <span class="keywordtype">bool</span> TeamsReduction = <a class="code" href="namespaceclang.html#a7689d02af684f7ecf00477bbc8dd14bc">isOpenMPTeamsDirective</a>(Options.ReductionKind);</div>
<div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160; </div>
<div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <span class="keywordflow">if</span> (Options.SimpleReduction) {</div>
<div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    assert(!TeamsReduction &amp;&amp; !ParallelReduction &amp;&amp;</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;           <span class="stringliteral">&quot;Invalid reduction selection in emitReduction.&quot;</span>);</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#aed149fe9e2ab879c0f48912064e95f92">CGOpenMPRuntime::emitReduction</a>(CGF, Loc, Privates, LHSExprs, RHSExprs,</div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;                                   ReductionOps, Options);</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  }</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160; </div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  assert((TeamsReduction || ParallelReduction) &amp;&amp;</div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;         <span class="stringliteral">&quot;Invalid reduction selection in emitReduction.&quot;</span>);</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160; </div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  llvm::SmallDenseMap&lt;const ValueDecl *, const FieldDecl *&gt; VarFieldMap;</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">llvm::SmallVector&lt;const ValueDecl *, 4&gt;</a> PrivatesReductions(Privates.size());</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  <span class="keywordtype">int</span> Cnt = 0;</div>
<div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *DRE : Privates) {</div>
<div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;    PrivatesReductions[Cnt] = cast&lt;DeclRefExpr&gt;(DRE)-&gt;getDecl();</div>
<div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    ++Cnt;</div>
<div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  }</div>
<div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160; </div>
<div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;C = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>();</div>
<div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *ReductionRec = ::buildRecordForGlobalizedVars(</div>
<div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>(), PrivatesReductions, std::nullopt, VarFieldMap, 1);</div>
<div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160; </div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;  <span class="comment">// Build res = __kmpc_reduce{_nowait}(&lt;gtid&gt;, &lt;n&gt;, sizeof(RedList),</span></div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  <span class="comment">// RedList, shuffle_reduce_func, interwarp_copy_func);</span></div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  <span class="comment">// or</span></div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  <span class="comment">// Build res = __kmpc_reduce_teams_nowait_simple(&lt;loc&gt;, &lt;gtid&gt;, &lt;lck&gt;);</span></div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  llvm::Value *RTLoc = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a3b70e2e3825d7f69be6a179bf90b5583">emitUpdateLocation</a>(CGF, Loc);</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160; </div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  llvm::Value *Res;</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  <span class="comment">// 1. Build a list of reduction variables.</span></div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  <span class="comment">// void *RedList[&lt;n&gt;] = {&lt;ReductionVars&gt;[0], ..., &lt;ReductionVars&gt;[&lt;n&gt;-1]};</span></div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <span class="keyword">auto</span> Size = RHSExprs.size();</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *E : Privates) {</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <span class="keywordflow">if</span> (E-&gt;<a class="code" href="classclang_1_1Expr.html#ac9bfcc699442f2093723cfcf703d9f47">getType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a96d0cb0fe011209ffcc3dd1ebf150194">isVariablyModifiedType</a>())</div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;      <span class="comment">// Reserve place for array size.</span></div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;      ++Size;</div>
<div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  }</div>
<div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  <a class="code" href="namespaceclang_1_1interp.html#a16635f6b52b1f71a033528c95bc58274">llvm::APInt</a> ArraySize(<span class="comment">/*unsigned int numBits=*/</span>32, Size);</div>
<div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> ReductionArrayTy = C.getConstantArrayType(</div>
<div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      C.VoidPtrTy, ArraySize, <span class="keyword">nullptr</span>, <a class="code" href="namespaceclang.html#a7aa7eb06045794431129ae08e43c0ea2a960b44c579bc2f6818d2daaf9e4c16f0">ArraySizeModifier::Normal</a>,</div>
<div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;      <span class="comment">/*IndexTypeQuals=*/</span>0);</div>
<div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ReductionList =</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">CreateMemTemp</a>(ReductionArrayTy, <span class="stringliteral">&quot;.omp.reduction.red_list&quot;</span>);</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  <span class="keyword">auto</span> IPriv = Privates.begin();</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 0, E = RHSExprs.size(); I &lt; E; ++I, ++IPriv, ++Idx) {</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> Elem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(ReductionList, Idx);</div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a5f8f00a84115fa0de7ec827e117f5a8a">CreateStore</a>(</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;            CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae541f30aa5aabcc74b8d843f4efd7b17">EmitLValue</a>(RHSExprs[I]).<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#adfdbeccf2814d95fe299aeae6ac127b4">getPointer</a>(CGF), CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>),</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        Elem);</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">if</span> ((*IPriv)-&gt;getType()-&gt;isVariablyModifiedType()) {</div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;      <span class="comment">// Store array size.</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;      ++Idx;</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;      Elem = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">CreateConstArrayGEP</a>(ReductionList, Idx);</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;      llvm::Value *Size = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateIntCast(</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa0df047a8374a7b5e1696adb2d71a72c">getVLASize</a>(</div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;                 CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a6ff315a5c1e14dc775fe14c5356f3777">getAsVariableArrayType</a>((*IPriv)-&gt;getType()))</div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;              .<a class="code" href="structclang_1_1CodeGen_1_1CodeGenFunction_1_1VlaSizePair.html#a519c4b03a5e4d4da34f59ae14fd25a03">NumElts</a>,</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;          CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>, <span class="comment">/*isSigned=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a5f8f00a84115fa0de7ec827e117f5a8a">CreateStore</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateIntToPtr(Size, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>),</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;                              Elem);</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    }</div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  }</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160; </div>
<div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;  llvm::Value *RL = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;      ReductionList.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">VoidPtrTy</a>);</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  llvm::Function *ReductionFn = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#aff641facc0a6d677637723df7e5cae2f">emitReductionFunction</a>(</div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">CurFn</a>-&gt;getName(), Loc, CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(ReductionArrayTy),</div>
<div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      Privates, LHSExprs, RHSExprs, ReductionOps);</div>
<div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;  llvm::Value *ReductionDataSize =</div>
<div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a8c0fcfd20bf12f8746d76d7cb8cc1604">getTypeSize</a>(C.getRecordType(ReductionRec));</div>
<div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  ReductionDataSize =</div>
<div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateSExtOrTrunc(ReductionDataSize, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a06114f0bc840b61c0b2c60bb284e46fb">Int64Ty</a>);</div>
<div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;  llvm::Function *ShuffleAndReduceFn = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#aeceb0b491954f710d711164d4a0568db">emitShuffleAndReduceFunction</a>(</div>
<div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>, Privates, ReductionArrayTy, ReductionFn, Loc);</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  llvm::Value *InterWarpCopyFn =</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;      <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a42bb1f4448293d5411b60d83feffd370">emitInterWarpCopyFunction</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>, Privates, ReductionArrayTy, Loc);</div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160; </div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  <span class="keywordflow">if</span> (ParallelReduction) {</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    llvm::Value *Args[] = {RTLoc, ReductionDataSize, RL, ShuffleAndReduceFn,</div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;                           InterWarpCopyFn};</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160; </div>
<div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    Res = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(</div>
<div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;            <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_nvptx_parallel_reduce_nowait_v2),</div>
<div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;        Args);</div>
<div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    assert(TeamsReduction &amp;&amp; <span class="stringliteral">&quot;expected teams reduction.&quot;</span>);</div>
<div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;    TeamsReductions.push_back(ReductionRec);</div>
<div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;    <span class="keyword">auto</span> *KernelTeamsReductionPtr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(</div>
<div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;            <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_reduction_get_fixed_buffer),</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;        {}, <span class="stringliteral">&quot;_openmp_teams_reductions_buffer_$_$ptr&quot;</span>);</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    llvm::Value *GlobalToBufferCpyFn = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#af8ef22468ed9a3f441665f533c8f6285">::emitListToGlobalCopyFunction</a>(</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>, Privates, ReductionArrayTy, Loc, ReductionRec, VarFieldMap);</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    llvm::Value *GlobalToBufferRedFn = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a732ee718e2149694c12e45397432b170">::emitListToGlobalReduceFunction</a>(</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>, Privates, ReductionArrayTy, Loc, ReductionRec, VarFieldMap,</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;        ReductionFn);</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    llvm::Value *BufferToGlobalCpyFn = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a2745f124cc3313823419744fc4957610">::emitGlobalToListCopyFunction</a>(</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>, Privates, ReductionArrayTy, Loc, ReductionRec, VarFieldMap);</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    llvm::Value *BufferToGlobalRedFn = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#abbea910f67c50b061024e583f7a8d411">::emitGlobalToListReduceFunction</a>(</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>, Privates, ReductionArrayTy, Loc, ReductionRec, VarFieldMap,</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;        ReductionFn);</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160; </div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    llvm::Value *Args[] = {</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;        RTLoc,</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;        KernelTeamsReductionPtr,</div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.getInt32(C.getLangOpts().OpenMPCUDAReductionBufNum),</div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;        ReductionDataSize,</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        RL,</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;        ShuffleAndReduceFn,</div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        InterWarpCopyFn,</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;        GlobalToBufferCpyFn,</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;        GlobalToBufferRedFn,</div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;        BufferToGlobalCpyFn,</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;        BufferToGlobalRedFn};</div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160; </div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    Res = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;            <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_nvptx_teams_reduce_nowait_v2),</div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;        Args);</div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;  }</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160; </div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  <span class="comment">// 5. Build if (res == 1)</span></div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  llvm::BasicBlock *ExitBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;.omp.reduction.done&quot;</span>);</div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;  llvm::BasicBlock *ThenBB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">createBasicBlock</a>(<span class="stringliteral">&quot;.omp.reduction.then&quot;</span>);</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;  llvm::Value *Cond = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateICmpEQ(</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;      Res, llvm::ConstantInt::get(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>, <span class="comment">/*V=*/</span>1));</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.CreateCondBr(Cond, ThenBB, ExitBB);</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160; </div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;  <span class="comment">// 6. Build then branch: where we have reduced values in the master</span></div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;  <span class="comment">//    thread in each team.</span></div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  <span class="comment">//    __kmpc_end_reduce{_nowait}(&lt;gtid&gt;);</span></div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  <span class="comment">//    break;</span></div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ThenBB);</div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160; </div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  <span class="comment">// Add emission of __kmpc_end_reduce{_nowait}(&lt;gtid&gt;);</span></div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;  <span class="keyword">auto</span> &amp;&amp;CodeGen = [Privates, LHSExprs, RHSExprs, ReductionOps,</div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;                    <span class="keyword">this</span>](<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <a class="code" href="classclang_1_1CodeGen_1_1PrePostActionTy.html">PrePostActionTy</a> &amp;Action) {</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;    <span class="keyword">auto</span> IPriv = Privates.begin();</div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    <span class="keyword">auto</span> ILHS = LHSExprs.begin();</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;    <span class="keyword">auto</span> IRHS = RHSExprs.begin();</div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *E : ReductionOps) {</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#ac70a33b6ed0026bb2a9f40ba4dd96b0d">emitSingleReductionCombiner</a>(CGF, E, *IPriv, cast&lt;DeclRefExpr&gt;(*ILHS),</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;                                  cast&lt;DeclRefExpr&gt;(*IRHS));</div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;      ++IPriv;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      ++ILHS;</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;      ++IRHS;</div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    }</div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  };</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html">RegionCodeGenTy</a> RCG(CodeGen);</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  RCG(CGF);</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;  <span class="comment">// There is no need to emit line number for unconditional branch.</span></div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  (void)<a class="code" href="classclang_1_1CodeGen_1_1ApplyDebugLocation.html#aa90c4f07b6d82797622594c49f4f022e">ApplyDebugLocation::CreateEmpty</a>(CGF);</div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">EmitBlock</a>(ExitBB, <span class="comment">/*IsFinished=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;}</div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160; </div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;<span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *</div>
<div class="line"><a name="l02979"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#abffc64bff273d21ad4bd205a2829c4eb"> 2979</a></span>&#160;<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#abffc64bff273d21ad4bd205a2829c4eb">CGOpenMPRuntimeGPU::translateParameter</a>(<span class="keyword">const</span> <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *FD,</div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *NativeParam)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  <span class="keywordflow">if</span> (!NativeParam-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a48b2c2b1c98a1800de465320ee70badc">isReferenceType</a>())</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;    <span class="keywordflow">return</span> NativeParam;</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> ArgType = NativeParam-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>();</div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;  <a class="code" href="classclang_1_1QualifierCollector.html">QualifierCollector</a> QC;</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1Type.html">Type</a> *NonQualTy = QC.<a class="code" href="classclang_1_1QualifierCollector.html#a0d384a2acd12cac66c6b9efec3a2f6af">strip</a>(ArgType);</div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> PointeeTy = cast&lt;ReferenceType&gt;(NonQualTy)-&gt;<a class="code" href="classclang_1_1Type.html#a56c474868f4027b847f181f99b226f47">getPointeeType</a>();</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *<a class="code" href="classclang_1_1Attr.html">Attr</a> = FD-&gt;<a class="code" href="classclang_1_1Decl.html#aef0e4b06e995dbc54de3cc99993edf5b">getAttr</a>&lt;OMPCaptureKindAttr&gt;()) {</div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classclang_1_1Attr.html">Attr</a>-&gt;getCaptureKind() == OMPC_map) {</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      PointeeTy = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#ad98f6467d6c7f3b536fe0be5f70cf8de">getAddrSpaceQualType</a>(PointeeTy,</div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;                                                        <a class="code" href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa274f845648dd88aca9f1eb414d323784">LangAS::opencl_global</a>);</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;    }</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;  }</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;  ArgType = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a41483c42a2f92e8cb7737cf20661a92c">getPointerType</a>(PointeeTy);</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;  QC.<a class="code" href="classclang_1_1Qualifiers.html#a515f21f2ce2cc21c59b47967ca77c83b">addRestrict</a>();</div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;  <span class="keyword">enum</span> { NVPTX_local_addr = 5 };</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  QC.<a class="code" href="classclang_1_1Qualifiers.html#ab344dfe26d89a97ad5b50ca5d73f4ef4">addAddressSpace</a>(<a class="code" href="namespaceclang.html#aebfaef149b8e8767fe07a380264b3f94">getLangASFromTargetAS</a>(NVPTX_local_addr));</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  ArgType = QC.<a class="code" href="classclang_1_1QualifierCollector.html#ab10692c3f54cddee7c5675cc7dd7d2dd">apply</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>(), ArgType);</div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  <span class="keywordflow">if</span> (isa&lt;ImplicitParamDecl&gt;(NativeParam))</div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classclang_1_1ImplicitParamDecl.html#ab640a59be970445db638fb4dc77fce49">ImplicitParamDecl::Create</a>(</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>(), <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, NativeParam-&gt;<a class="code" href="classclang_1_1Decl.html#a9ac934b2f7ae95704682dc44da1f0867">getLocation</a>(),</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;        NativeParam-&gt;<a class="code" href="classclang_1_1NamedDecl.html#a7fab32caa3b7d601128265248260fd37">getIdentifier</a>(), ArgType, <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classclang_1_1ParmVarDecl.html#a88e29dc261acd541e0b1676c38e2f892">ParmVarDecl::Create</a>(</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>(),</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;      <span class="keyword">const_cast&lt;</span><a class="code" href="classclang_1_1DeclContext.html">DeclContext</a> *<span class="keyword">&gt;</span>(NativeParam-&gt;<a class="code" href="classclang_1_1Decl.html#af67e1a1d24dcc51093b95dbcf68d4288">getDeclContext</a>()),</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;      NativeParam-&gt;<a class="code" href="classclang_1_1DeclaratorDecl.html#a73cead379a984c4b4ddb6e0d308725f6">getBeginLoc</a>(), NativeParam-&gt;<a class="code" href="classclang_1_1Decl.html#a9ac934b2f7ae95704682dc44da1f0867">getLocation</a>(),</div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;      NativeParam-&gt;<a class="code" href="classclang_1_1NamedDecl.html#a7fab32caa3b7d601128265248260fd37">getIdentifier</a>(), ArgType,</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;      <span class="comment">/*TInfo=*/</span><span class="keyword">nullptr</span>, <a class="code" href="namespaceclang.html#a56dabc7d0ce7d72b9a35f6f5c3f89370aebf74ba707605e744f1303f997b2477f">SC_None</a>, <span class="comment">/*DefArg=*/</span><span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;}</div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160; </div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;<a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a></div>
<div class="line"><a name="l03011"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#aa3b8482eb573e08cb45c62b92b97ddd7"> 3011</a></span>&#160;<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#aa3b8482eb573e08cb45c62b92b97ddd7">CGOpenMPRuntimeGPU::getParameterAddress</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *NativeParam,</div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *TargetParam)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  assert(NativeParam != TargetParam &amp;&amp;</div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;         NativeParam-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a48b2c2b1c98a1800de465320ee70badc">isReferenceType</a>() &amp;&amp;</div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;         <span class="stringliteral">&quot;Native arg must not be the same as target arg.&quot;</span>);</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> LocalAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(TargetParam);</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> NativeParamType = NativeParam-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>();</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;  <a class="code" href="classclang_1_1QualifierCollector.html">QualifierCollector</a> QC;</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1Type.html">Type</a> *NonQualTy = QC.<a class="code" href="classclang_1_1QualifierCollector.html#a0d384a2acd12cac66c6b9efec3a2f6af">strip</a>(NativeParamType);</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> NativePointeeTy = cast&lt;ReferenceType&gt;(NonQualTy)-&gt;<a class="code" href="classclang_1_1Type.html#a56c474868f4027b847f181f99b226f47">getPointeeType</a>();</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  <span class="keywordtype">unsigned</span> NativePointeeAddrSpace =</div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae8fc4625f419a76656332581eb63d6b2">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a95e345a2d8e3d724926243cdea0f2533">getTargetAddressSpace</a>(NativePointeeTy);</div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> TargetTy = TargetParam-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>();</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;  llvm::Value *TargetAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(LocalAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;                                                 TargetTy, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>());</div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;  <span class="comment">// Cast to native address space.</span></div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;  TargetAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;      TargetAddr,</div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;      llvm::PointerType::get(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a3ab38e48e9cabd4b9b64555c6c825f06">getLLVMContext</a>(), NativePointeeAddrSpace));</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> NativeParamAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">CreateMemTemp</a>(NativeParamType);</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(TargetAddr, NativeParamAddr, <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;                        NativeParamType);</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;  <span class="keywordflow">return</span> NativeParamAddr;</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;}</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160; </div>
<div class="line"><a name="l03037"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9e42d0cd9ecf8445265b6df0aa5f5fbe"> 3037</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9e42d0cd9ecf8445265b6df0aa5f5fbe">CGOpenMPRuntimeGPU::emitOutlinedFunctionCall</a>(</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a> Loc, llvm::FunctionCallee OutlinedFn,</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;    <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> Args)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;llvm::Value *, 4&gt;</a> TargetArgs;</div>
<div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;  TargetArgs.reserve(Args.size());</div>
<div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;  <span class="keyword">auto</span> *FnType = OutlinedFn.getFunctionType();</div>
<div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 0, E = Args.size(); I &lt; E; ++I) {</div>
<div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;    <span class="keywordflow">if</span> (FnType-&gt;isVarArg() &amp;&amp; FnType-&gt;getNumParams() &lt;= I) {</div>
<div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;      TargetArgs.append(std::next(Args.begin(), I), Args.end());</div>
<div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;    }</div>
<div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    llvm::Type *TargetType = FnType-&gt;getParamType(I);</div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;    llvm::Value *NativeArg = Args[I];</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    <span class="keywordflow">if</span> (!TargetType-&gt;isPointerTy()) {</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      TargetArgs.emplace_back(NativeArg);</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;    }</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;    TargetArgs.emplace_back(</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(NativeArg, TargetType));</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  }</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#af546e72839c4357b485a7f41348b755a">CGOpenMPRuntime::emitOutlinedFunctionCall</a>(CGF, Loc, OutlinedFn, TargetArgs);</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;}</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;<span class="comment">/// Emit function which wraps the outline parallel region</span></div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="comment">/// and controls the arguments which are passed to this function.</span></div>
<div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;<span class="comment">/// The wrapper ensures that the outlined function is called</span></div>
<div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="comment">/// with the correct arguments when data is shared.</span></div>
<div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;<span class="comment"></span>llvm::Function *CGOpenMPRuntimeGPU::createParallelDataSharingWrapper(</div>
<div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;    llvm::Function *OutlinedParallelFn, <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D) {</div>
<div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;Ctx = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>();</div>
<div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> &amp;CS = *D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#ac639a6cbe96ac4fda549d182a44ba8c3">getCapturedStmt</a>(OMPD_parallel);</div>
<div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160; </div>
<div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  <span class="comment">// Create a function that takes as argument the source thread.</span></div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1FunctionArgList.html">FunctionArgList</a> WrapperArgs;</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> Int16QTy =</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      Ctx.<a class="code" href="classclang_1_1ASTContext.html#a6b50b44b241ecee20c8b4fb9d3747ef2">getIntTypeForBitwidth</a>(<span class="comment">/*DestWidth=*/</span>16, <span class="comment">/*Signed=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  <a class="code" href="classclang_1_1QualType.html">QualType</a> Int32QTy =</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;      Ctx.<a class="code" href="classclang_1_1ASTContext.html#a6b50b44b241ecee20c8b4fb9d3747ef2">getIntTypeForBitwidth</a>(<span class="comment">/*DestWidth=*/</span>32, <span class="comment">/*Signed=*/</span><span class="keyword">false</span>);</div>
<div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> ParallelLevelArg(Ctx, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a6a93ab60ed9eaf3c67305ba6b203c884">getBeginLoc</a>(),</div>
<div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;                                     <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>, Int16QTy,</div>
<div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;                                     <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;  <a class="code" href="classclang_1_1ImplicitParamDecl.html">ImplicitParamDecl</a> WrapperArg(Ctx, <span class="comment">/*DC=*/</span><span class="keyword">nullptr</span>, D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a6a93ab60ed9eaf3c67305ba6b203c884">getBeginLoc</a>(),</div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;                               <span class="comment">/*Id=*/</span><span class="keyword">nullptr</span>, Int32QTy,</div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;                               <a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">ImplicitParamKind::Other</a>);</div>
<div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  WrapperArgs.emplace_back(&amp;ParallelLevelArg);</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;  WrapperArgs.emplace_back(&amp;WrapperArg);</div>
<div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160; </div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1CodeGen_1_1CGFunctionInfo.html">CGFunctionInfo</a> &amp;CGFI =</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a6e2a1179e9475f17f7db1e6e642a43ec">arrangeBuiltinFunctionDeclaration</a>(Ctx.<a class="code" href="classclang_1_1ASTContext.html#aaa9dd0ebd4ff2e55c572f5718b7af508">VoidTy</a>, WrapperArgs);</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160; </div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="keyword">auto</span> *Fn = llvm::Function::Create(</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">getTypes</a>().<a class="code" href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a5e6c7473f14643c5a5b45ac9c0bb2ef8">GetFunctionType</a>(CGFI), llvm::GlobalValue::InternalLinkage,</div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      Twine(OutlinedParallelFn-&gt;getName(), <span class="stringliteral">&quot;_wrapper&quot;</span>), &amp;<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>());</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160; </div>
<div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;  <span class="comment">// Ensure we do not inline the function. This is trivially true for the ones</span></div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;  <span class="comment">// passed to __kmpc_fork_call but the ones calles in serialized regions</span></div>
<div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <span class="comment">// could be inlined. This is not a perfect but it is closer to the invariant</span></div>
<div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  <span class="comment">// we want, namely, every data environment starts with a new function.</span></div>
<div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  <span class="comment">// TODO: We should pass the if condition to the runtime function and do the</span></div>
<div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;  <span class="comment">//       handling there. Much cleaner code.</span></div>
<div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;  Fn-&gt;addFnAttr(llvm::Attribute::NoInline);</div>
<div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160; </div>
<div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a0d41184ca8693cab4ed36a55a348bf86">SetInternalFunctionAttributes</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), Fn, CGFI);</div>
<div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  Fn-&gt;setLinkage(llvm::GlobalValue::InternalLinkage);</div>
<div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;  Fn-&gt;setDoesNotRecurse();</div>
<div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160; </div>
<div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> CGF(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>, <span class="comment">/*suppressNewContext=*/</span><span class="keyword">true</span>);</div>
<div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a773426ce113953ed0e3e75885b61d9a8">StartFunction</a>(<a class="code" href="classclang_1_1GlobalDecl.html">GlobalDecl</a>(), Ctx.<a class="code" href="classclang_1_1ASTContext.html#aaa9dd0ebd4ff2e55c572f5718b7af508">VoidTy</a>, Fn, CGFI, WrapperArgs,</div>
<div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;                    D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a6a93ab60ed9eaf3c67305ba6b203c884">getBeginLoc</a>(), D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a6a93ab60ed9eaf3c67305ba6b203c884">getBeginLoc</a>());</div>
<div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160; </div>
<div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *RD = CS.getCapturedRecordDecl();</div>
<div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;  <span class="keyword">auto</span> CurField = RD-&gt;field_begin();</div>
<div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160; </div>
<div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> ZeroAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a65706fb353ad8c19024c1d3e48a839b0">CreateDefaultAlignTempAlloca</a>(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>,</div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;                                                      <span class="comment">/*Name=*/</span><span class="stringliteral">&quot;.zero.addr&quot;</span>);</div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a5f8f00a84115fa0de7ec827e117f5a8a">CreateStore</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.getInt32(<span class="comment">/*C*/</span> 0), ZeroAddr);</div>
<div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;  <span class="comment">// Get the array of arguments.</span></div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;  <a class="code" href="classllvm_1_1SmallVector.html">SmallVector&lt;llvm::Value *, 8&gt;</a> Args;</div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160; </div>
<div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;  Args.emplace_back(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(&amp;WrapperArg).<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF));</div>
<div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;  Args.emplace_back(ZeroAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF));</div>
<div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160; </div>
<div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  <span class="keyword">auto</span> CI = CS.capture_begin();</div>
<div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160; </div>
<div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;  <span class="comment">// Use global memory for data sharing.</span></div>
<div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;  <span class="comment">// Handle passing of global args to workers.</span></div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1RawAddress.html">RawAddress</a> GlobalArgs =</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a65706fb353ad8c19024c1d3e48a839b0">CreateDefaultAlignTempAlloca</a>(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9542d45208ac69c5061bfc569e76f40a">VoidPtrPtrTy</a>, <span class="stringliteral">&quot;global_args&quot;</span>);</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;  llvm::Value *GlobalArgsPtr = GlobalArgs.<a class="code" href="classclang_1_1CodeGen_1_1RawAddress.html#a370668e6a9f843207d88820c26193cc9">getPointer</a>();</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;  llvm::Value *DataSharingArgs[] = {GlobalArgsPtr};</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;                          <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_get_shared_variables),</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;                      DataSharingArgs);</div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160; </div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;  <span class="comment">// Retrieve the shared variables from the list of references returned</span></div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;  <span class="comment">// by the runtime. Pass the variables to the outlined function.</span></div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> SharedArgListAddress = <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;  <span class="keywordflow">if</span> (CS.capture_size() &gt; 0 ||</div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <a class="code" href="namespaceclang.html#aa3127862988e2c241fb39f5329ddfa87">isOpenMPLoopBoundSharingDirective</a>(D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>())) {</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;    SharedArgListAddress = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a4c20fadb4446090e59fcd468aa82e981">EmitLoadOfPointer</a>(</div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        GlobalArgs, CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>()</div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;                        .<a class="code" href="classclang_1_1ASTContext.html#a41483c42a2f92e8cb7737cf20661a92c">getPointerType</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a485732164c40553bb323c58f5e8bf7a7">VoidPtrTy</a>)</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;                        .castAs&lt;<a class="code" href="classclang_1_1PointerType.html">PointerType</a>&gt;());</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;  }</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;  <span class="keywordtype">unsigned</span> Idx = 0;</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="namespaceclang.html#aa3127862988e2c241fb39f5329ddfa87">isOpenMPLoopBoundSharingDirective</a>(D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>())) {</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> Src = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae58592c031a9400b3fbfeecfd18d1e33">CreateConstInBoundsGEP</a>(SharedArgListAddress, Idx);</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> TypedAddress = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;        Src, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>-&gt;getPointerTo(), CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>);</div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;    llvm::Value *LB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        TypedAddress,</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;        <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a41483c42a2f92e8cb7737cf20661a92c">getPointerType</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a7c89acd533ffea38c5011885d8d029e4">getSizeType</a>()),</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;        cast&lt;OMPLoopDirective&gt;(D).getLowerBoundVariable()-&gt;getExprLoc());</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;    Args.emplace_back(LB);</div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;    ++Idx;</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;    Src = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae58592c031a9400b3fbfeecfd18d1e33">CreateConstInBoundsGEP</a>(SharedArgListAddress, Idx);</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;    TypedAddress = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;        Src, CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>-&gt;getPointerTo(), CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">SizeTy</a>);</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;    llvm::Value *UB = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;        TypedAddress,</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;        <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a41483c42a2f92e8cb7737cf20661a92c">getPointerType</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a7c89acd533ffea38c5011885d8d029e4">getSizeType</a>()),</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;        cast&lt;OMPLoopDirective&gt;(D).getUpperBoundVariable()-&gt;getExprLoc());</div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;    Args.emplace_back(UB);</div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;    ++Idx;</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;  }</div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;  <span class="keywordflow">if</span> (CS.capture_size() &gt; 0) {</div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;    <a class="code" href="classclang_1_1ASTContext.html">ASTContext</a> &amp;CGFContext = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>();</div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> I = 0, E = CS.capture_size(); I &lt; E; ++I, ++CI, ++CurField) {</div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;      <a class="code" href="classclang_1_1QualType.html">QualType</a> ElemTy = CurField-&gt;getType();</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> Src = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae58592c031a9400b3fbfeecfd18d1e33">CreateConstInBoundsGEP</a>(SharedArgListAddress, I + Idx);</div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> TypedAddress = Bld.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;          Src, CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(CGFContext.<a class="code" href="classclang_1_1ASTContext.html#a41483c42a2f92e8cb7737cf20661a92c">getPointerType</a>(ElemTy)),</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(ElemTy));</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      llvm::Value *Arg = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">EmitLoadOfScalar</a>(TypedAddress,</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;                                              <span class="comment">/*Volatile=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;                                              CGFContext.<a class="code" href="classclang_1_1ASTContext.html#a41483c42a2f92e8cb7737cf20661a92c">getPointerType</a>(ElemTy),</div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;                                              CI-&gt;getLocation());</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;      <span class="keywordflow">if</span> (CI-&gt;capturesVariableByCopy() &amp;&amp;</div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;          !CI-&gt;getCapturedVar()-&gt;getType()-&gt;isAnyPointerType()) {</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;        Arg = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#ab86a56b8b7119050e5e1dbc990e46848">castValueToType</a>(CGF, Arg, ElemTy, CGFContext.<a class="code" href="classclang_1_1ASTContext.html#a573a88f4f3b7d984ddf34c74fc113e62">getUIntPtrType</a>(),</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;                              CI-&gt;getLocation());</div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;      }</div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;      Args.emplace_back(Arg);</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;    }</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;  }</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160; </div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9e42d0cd9ecf8445265b6df0aa5f5fbe">emitOutlinedFunctionCall</a>(CGF, D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a6a93ab60ed9eaf3c67305ba6b203c884">getBeginLoc</a>(), OutlinedParallelFn, Args);</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;  CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#adefc925f9c3921cc89f39663e2b2379e">FinishFunction</a>();</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;  <span class="keywordflow">return</span> Fn;</div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;}</div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160; </div>
<div class="line"><a name="l03191"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a11ed023e8ad6cd67fe2d2f712985605a"> 3191</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a11ed023e8ad6cd67fe2d2f712985605a">CGOpenMPRuntimeGPU::emitFunctionProlog</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="classclang_1_1Decl.html">Decl</a> *D) {</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;  <span class="keywordflow">if</span> (getDataSharingMode() != <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0901452f843e26962262cde69855966caeb169e1878130b03e9abd3844ed9d24c">CGOpenMPRuntimeGPU::DS_Generic</a>)</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160; </div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;  assert(D &amp;&amp; <span class="stringliteral">&quot;Expected function or captured|block decl.&quot;</span>);</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;  assert(FunctionGlobalizedDecls.count(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">CurFn</a>) == 0 &amp;&amp;</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;         <span class="stringliteral">&quot;Function is registered already.&quot;</span>);</div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;  assert((!TeamAndReductions.first || TeamAndReductions.first == D) &amp;&amp;</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;         <span class="stringliteral">&quot;Team is set but not processed.&quot;</span>);</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1Stmt.html">Stmt</a> *Body = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;  <span class="keywordtype">bool</span> NeedToDelayGlobalization = <span class="keyword">false</span>;</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *FD = dyn_cast&lt;FunctionDecl&gt;(D)) {</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;    Body = FD-&gt;getBody();</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *BD = dyn_cast&lt;BlockDecl&gt;(D)) {</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;    Body = BD-&gt;getBody();</div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> <span class="keyword">auto</span> *CD = dyn_cast&lt;CapturedDecl&gt;(D)) {</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;    Body = CD-&gt;getBody();</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    NeedToDelayGlobalization = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a20b5348e851b83612ba250f18f67f705">CapturedStmtInfo</a>-&gt;<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction_1_1CGCapturedStmtInfo.html#a136a82df734378b8fa8bca127d5b0df3">getKind</a>() == <a class="code" href="namespaceclang.html#a52df778f2a9b540afde2bc183e9c2075ab0fffe68dfee67b92e91293a2e00bef5">CR_OpenMP</a>;</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;    <span class="keywordflow">if</span> (NeedToDelayGlobalization &amp;&amp;</div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;        getExecutionMode() == <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0caede34f8e39ca7329156d28f1859d1bf7">CGOpenMPRuntimeGPU::EM_SPMD</a>)</div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;  }</div>
<div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;  <span class="keywordflow">if</span> (!Body)</div>
<div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;  CheckVarsEscapingDeclContext VarChecker(CGF, TeamAndReductions.second);</div>
<div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;  VarChecker.Visit(Body);</div>
<div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1RecordDecl.html">RecordDecl</a> *GlobalizedVarsRecord =</div>
<div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;      VarChecker.getGlobalizedRecord(IsInTTDRegion);</div>
<div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;  TeamAndReductions.first = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;  TeamAndReductions.second.clear();</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const ValueDecl *&gt;</a> EscapedVariableLengthDecls =</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;      VarChecker.getEscapedVariableLengthDecls();</div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;const ValueDecl *&gt;</a> DelayedVariableLengthDecls =</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;      VarChecker.getDelayedVariableLengthDecls();</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;  <span class="keywordflow">if</span> (!GlobalizedVarsRecord &amp;&amp; EscapedVariableLengthDecls.empty() &amp;&amp;</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;      DelayedVariableLengthDecls.empty())</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;  <span class="keyword">auto</span> I = FunctionGlobalizedDecls.try_emplace(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">CurFn</a>).first;</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;  I-&gt;getSecond().MappedParams =</div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;      std::make_unique&lt;CodeGenFunction::OMPMapVars&gt;();</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;  I-&gt;getSecond().EscapedParameters.insert(</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;      VarChecker.getEscapedParameters().begin(),</div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      VarChecker.getEscapedParameters().end());</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;  I-&gt;getSecond().EscapedVariableLengthDecls.append(</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;      EscapedVariableLengthDecls.begin(), EscapedVariableLengthDecls.end());</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;  I-&gt;getSecond().DelayedVariableLengthDecls.append(</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;      DelayedVariableLengthDecls.begin(), DelayedVariableLengthDecls.end());</div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;  DeclToAddrMapTy &amp;<a class="code" href="StandardLibrary_8cpp.html#a925665d73bcb5b100927b8c74472687b">Data</a> = I-&gt;getSecond().LocalVarData;</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD : VarChecker.getEscapedDecls()) {</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    assert(VD-&gt;<a class="code" href="classclang_1_1Decl.html#a67ff088944d6f8571f001838f7ef1513">isCanonicalDecl</a>() &amp;&amp; <span class="stringliteral">&quot;Expected canonical declaration&quot;</span>);</div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <a class="code" href="StandardLibrary_8cpp.html#a925665d73bcb5b100927b8c74472687b">Data</a>.insert(std::make_pair(VD, MappedVarData()));</div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;  }</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;  <span class="keywordflow">if</span> (!NeedToDelayGlobalization) {</div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    emitGenericVarsProlog(CGF, D-&gt;<a class="code" href="classclang_1_1Decl.html#abe9f1fa0ebd703587762db886aabe459">getBeginLoc</a>());</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;    <span class="keyword">struct </span>GlobalizationScope final : <a class="code" href="classclang_1_1CodeGen_1_1EHScopeStack_1_1Cleanup.html">EHScopeStack::Cleanup</a> {</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;      GlobalizationScope() = <span class="keywordflow">default</span>;</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160; </div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;      <span class="keywordtype">void</span> Emit(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, Flags flags)<span class="keyword"> override </span>{</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;        <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>())</div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;            .emitGenericVarsEpilog(CGF);</div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;      }</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;    };</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a9b8530f063bc2736b570c0b56a705d37">EHStack</a>.pushCleanup&lt;GlobalizationScope&gt;(<a class="code" href="namespaceclang_1_1CodeGen.html#aa5728b61c4995d4d8dc869ef8a6148f0a142bdd64990b3ca421f185b630db66c8">NormalAndEHCleanup</a>);</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;  }</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;}</div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160; </div>
<div class="line"><a name="l03258"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0e0219b0364ab67502a871eda96c84e6"> 3258</a></span>&#160;<a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0e0219b0364ab67502a871eda96c84e6">CGOpenMPRuntimeGPU::getAddressOfLocalVariable</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF,</div>
<div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;                                                        <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *VD) {</div>
<div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;  <span class="keywordflow">if</span> (VD &amp;&amp; VD-&gt;<a class="code" href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">hasAttr</a>&lt;OMPAllocateDeclAttr&gt;()) {</div>
<div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *A = VD-&gt;<a class="code" href="classclang_1_1Decl.html#aef0e4b06e995dbc54de3cc99993edf5b">getAttr</a>&lt;OMPAllocateDeclAttr&gt;();</div>
<div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;    <span class="keyword">auto</span> AS = <a class="code" href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa7a1920d61156abc05a60135aefe8bc67">LangAS::Default</a>;</div>
<div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;    <span class="keywordflow">switch</span> (A-&gt;getAllocatorType()) {</div>
<div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;      <span class="comment">// Use the default allocator here as by default local vars are</span></div>
<div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      <span class="comment">// threadlocal.</span></div>
<div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPNullMemAlloc:</div>
<div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPDefaultMemAlloc:</div>
<div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPThreadMemAlloc:</div>
<div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPHighBWMemAlloc:</div>
<div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPLowLatMemAlloc:</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;      <span class="comment">// Follow the user decision - use default allocation.</span></div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPUserDefinedMemAlloc:</div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;      <span class="comment">// TODO: implement aupport for user-defined allocators.</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPConstMemAlloc:</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;      AS = <a class="code" href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa60182286971c00f07c50487d0683d6e3">LangAS::cuda_constant</a>;</div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPPTeamMemAlloc:</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;      AS = <a class="code" href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa290073a3c242d08d952a80f7007cfca5">LangAS::cuda_shared</a>;</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPLargeCapMemAlloc:</div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPCGroupMemAlloc:</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;    }</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;    llvm::Type *VarTy = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">ConvertTypeForMem</a>(VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>());</div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;    <span class="keyword">auto</span> *GV = <span class="keyword">new</span> llvm::GlobalVariable(</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), VarTy, <span class="comment">/*isConstant=*/</span><span class="keyword">false</span>,</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;        llvm::GlobalValue::InternalLinkage, llvm::PoisonValue::get(VarTy),</div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;        VD-&gt;<a class="code" href="classclang_1_1NamedDecl.html#a350fd0415d5f387716d5a970b9de4c29">getName</a>(),</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;        <span class="comment">/*InsertBefore=*/</span><span class="keyword">nullptr</span>, llvm::GlobalValue::NotThreadLocal,</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#adf7845565049394ae18e77bfa76599b7">getTargetAddressSpace</a>(AS));</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    <a class="code" href="classclang_1_1CharUnits.html">CharUnits</a> Align = <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a963551b2d662d6ee39a7f4942e37b016">getDeclAlign</a>(VD);</div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;    GV-&gt;setAlignment(Align.<a class="code" href="classclang_1_1CharUnits.html#a9188181b4ef997aee05f9ecca350e234">getAsAlign</a>());</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a>(</div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>.<a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">CreatePointerBitCastOrAddrSpaceCast</a>(</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;            GV, VarTy-&gt;getPointerTo(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#adf7845565049394ae18e77bfa76599b7">getTargetAddressSpace</a>(</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;                    VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>().<a class="code" href="classclang_1_1QualType.html#a6cc7661c7c6b310a91fd90d78b9539db">getAddressSpace</a>()))),</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;        VarTy, Align);</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;  }</div>
<div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160; </div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;  <span class="keywordflow">if</span> (getDataSharingMode() != <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0901452f843e26962262cde69855966caeb169e1878130b03e9abd3844ed9d24c">CGOpenMPRuntimeGPU::DS_Generic</a>)</div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160; </div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  VD = VD-&gt;<a class="code" href="classclang_1_1VarDecl.html#a41b791be900d5c37eea9fd8ead366308">getCanonicalDecl</a>();</div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;  <span class="keyword">auto</span> I = FunctionGlobalizedDecls.find(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">CurFn</a>);</div>
<div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;  <span class="keywordflow">if</span> (I == FunctionGlobalizedDecls.end())</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;  <span class="keyword">auto</span> VDI = I-&gt;getSecond().LocalVarData.find(VD);</div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;  <span class="keywordflow">if</span> (VDI != I-&gt;getSecond().LocalVarData.end())</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;    <span class="keywordflow">return</span> VDI-&gt;second.PrivateAddr;</div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;  <span class="keywordflow">if</span> (VD-&gt;<a class="code" href="classclang_1_1Decl.html#a1e0b6223e2547ac65ddbf4802117998b">hasAttrs</a>()) {</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="classclang_1_1specific__attr__iterator.html">specific_attr_iterator&lt;OMPReferencedVarAttr&gt;</a> IT(VD-&gt;<a class="code" href="classclang_1_1Decl.html#a832f5604f151d17907f878ca685320c5">attr_begin</a>()),</div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;         E(VD-&gt;<a class="code" href="classclang_1_1Decl.html#a240e4f21d41a4395e86d349886d3a820">attr_end</a>());</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;         IT != E; ++IT) {</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;      <span class="keyword">auto</span> VDI = I-&gt;getSecond().LocalVarData.find(</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;          cast&lt;VarDecl&gt;(cast&lt;DeclRefExpr&gt;(IT-&gt;getRef())-&gt;getDecl())</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;              -&gt;getCanonicalDecl());</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;      <span class="keywordflow">if</span> (VDI != I-&gt;getSecond().LocalVarData.end())</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;        <span class="keywordflow">return</span> VDI-&gt;second.PrivateAddr;</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    }</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;  }</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160; </div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">Address::invalid</a>();</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;}</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160; </div>
<div class="line"><a name="l03327"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a69a36112c5c4af567f66865c78f71c8a"> 3327</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a69a36112c5c4af567f66865c78f71c8a">CGOpenMPRuntimeGPU::functionFinished</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;  FunctionGlobalizedDecls.erase(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">CurFn</a>);</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a485d3941ed5d144212a4a8d38f59da23">CGOpenMPRuntime::functionFinished</a>(CGF);</div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;}</div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160; </div>
<div class="line"><a name="l03332"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0c5bac9e1e2b5fdd00b6e5273684f9f1"> 3332</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0c5bac9e1e2b5fdd00b6e5273684f9f1">CGOpenMPRuntimeGPU::getDefaultDistScheduleAndChunk</a>(</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPLoopDirective.html">OMPLoopDirective</a> &amp;S,</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;    <a class="code" href="namespaceclang.html#a59b6b7213bdfaf807d0291cf9fc36ab1">OpenMPDistScheduleClauseKind</a> &amp;ScheduleKind,</div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;    llvm::Value *&amp;Chunk)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;  <span class="keyword">auto</span> &amp;RT = <span class="keyword">static_cast&lt;</span><a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">CGOpenMPRuntimeGPU</a> &amp;<span class="keyword">&gt;</span>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">getOpenMPRuntime</a>());</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;  <span class="keywordflow">if</span> (getExecutionMode() == <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0caede34f8e39ca7329156d28f1859d1bf7">CGOpenMPRuntimeGPU::EM_SPMD</a>) {</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    ScheduleKind = OMPC_DIST_SCHEDULE_static;</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;    Chunk = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#af392c7e37d62759d5e607eaecd8a3e22">EmitScalarConversion</a>(</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        RT.getGPUNumThreads(CGF),</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a6b50b44b241ecee20c8b4fb9d3747ef2">getIntTypeForBitwidth</a>(32, <span class="comment">/*Signed=*/</span>0),</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        S.getIterationVariable()-&gt;getType(), S.getBeginLoc());</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;  }</div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#abedc27c178bbe37abb4bcdfb51b9e4ea">CGOpenMPRuntime::getDefaultDistScheduleAndChunk</a>(</div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;      CGF, S, ScheduleKind, Chunk);</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;}</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160; </div>
<div class="line"><a name="l03349"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a26bcaa52dbff84edb645c0e68d0c5b82"> 3349</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a26bcaa52dbff84edb645c0e68d0c5b82">CGOpenMPRuntimeGPU::getDefaultScheduleAndChunk</a>(</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPLoopDirective.html">OMPLoopDirective</a> &amp;S,</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    <a class="code" href="namespaceclang.html#afaec598dc26a26012ec59587754cc0fb">OpenMPScheduleClauseKind</a> &amp;ScheduleKind,</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1Expr.html">Expr</a> *&amp;ChunkExpr)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;  ScheduleKind = OMPC_SCHEDULE_static;</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;  <span class="comment">// Chunk size is 1 in this case.</span></div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;  <a class="code" href="namespaceclang_1_1interp.html#a16635f6b52b1f71a033528c95bc58274">llvm::APInt</a> ChunkSize(32, 1);</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;  ChunkExpr = <a class="code" href="classclang_1_1IntegerLiteral.html#a68782c17506bd26183c21aa2bf9dc1d7">IntegerLiteral::Create</a>(CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>(), ChunkSize,</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">getContext</a>().<a class="code" href="classclang_1_1ASTContext.html#a6b50b44b241ecee20c8b4fb9d3747ef2">getIntTypeForBitwidth</a>(32, <span class="comment">/*Signed=*/</span>0),</div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;      <a class="code" href="classclang_1_1SourceLocation.html">SourceLocation</a>());</div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;}</div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160; </div>
<div class="line"><a name="l03361"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#af94531ac8c69b4d48e585d4b97350fd5"> 3361</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#af94531ac8c69b4d48e585d4b97350fd5">CGOpenMPRuntimeGPU::adjustTargetSpecificDataForLambdas</a>(</div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF, <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPExecutableDirective.html">OMPExecutableDirective</a> &amp;D)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;  assert(<a class="code" href="namespaceclang.html#a6805956ef192ea44ce89d9791a7e813c">isOpenMPTargetExecutionDirective</a>(D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">getDirectiveKind</a>()) &amp;&amp;</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;         <span class="stringliteral">&quot; Expected target-based directive.&quot;</span>);</div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;  <span class="keyword">const</span> <a class="code" href="classclang_1_1CapturedStmt.html">CapturedStmt</a> *CS = D.<a class="code" href="classclang_1_1OMPExecutableDirective.html#ac639a6cbe96ac4fda549d182a44ba8c3">getCapturedStmt</a>(OMPD_target);</div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1CapturedStmt_1_1Capture.html">CapturedStmt::Capture</a> &amp;C : CS-&gt;<a class="code" href="classclang_1_1CapturedStmt.html#ae53d40b49ef14d85a1dadb229ace03ee">captures</a>()) {</div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    <span class="comment">// Capture variables captured by reference in lambdas for target-based</span></div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;    <span class="comment">// directives.</span></div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;    <span class="keywordflow">if</span> (!C.capturesVariable())</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *VD = C.getCapturedVar();</div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    <span class="keyword">const</span> <span class="keyword">auto</span> *RD = VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>()</div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;                         .<a class="code" href="classclang_1_1QualType.html#a900520b154ba282febbaa7267020ca3f">getCanonicalType</a>()</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;                         .<a class="code" href="classclang_1_1QualType.html#a8be1f3b9e144fba37e7aa9ae2a583de6">getNonReferenceType</a>()</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;                         -&gt;<a class="code" href="classclang_1_1Type.html#a0506d2fd1e686757c62a2b1aa3f9de8d">getAsCXXRecordDecl</a>();</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;    <span class="keywordflow">if</span> (!RD || !RD-&gt;isLambda())</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;      <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> VDAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(VD);</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;    <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> VDLVal;</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;    <span class="keywordflow">if</span> (VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>().<a class="code" href="classclang_1_1QualType.html#a900520b154ba282febbaa7267020ca3f">getCanonicalType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a48b2c2b1c98a1800de465320ee70badc">isReferenceType</a>())</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      VDLVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a0796665b4d44acd99539d24fb6be6184">EmitLoadOfReferenceLValue</a>(VDAddr, VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>());</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;      VDLVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">MakeAddrLValue</a>(</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;          VDAddr, VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>().<a class="code" href="classclang_1_1QualType.html#a900520b154ba282febbaa7267020ca3f">getCanonicalType</a>().<a class="code" href="classclang_1_1QualType.html#a8be1f3b9e144fba37e7aa9ae2a583de6">getNonReferenceType</a>());</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;    llvm::DenseMap&lt;const ValueDecl *, FieldDecl *&gt; Captures;</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;    <a class="code" href="classclang_1_1FieldDecl.html">FieldDecl</a> *ThisCapture = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;    RD-&gt;getCaptureFields(Captures, ThisCapture);</div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <span class="keywordflow">if</span> (ThisCapture &amp;&amp; CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a20b5348e851b83612ba250f18f67f705">CapturedStmtInfo</a>-&gt;<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction_1_1CGCapturedStmtInfo.html#a3a9cc004d736b0db036aa0b613a46979">isCXXThisExprCaptured</a>()) {</div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> ThisLVal =</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;          CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a8e2d33cb4583cb128c964a56c1ebd141">EmitLValueForFieldInitialization</a>(VDLVal, ThisCapture);</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;      llvm::Value *<a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa06e001a20c541b4a78269c95eeee122c">CXXThis</a> = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a239c983f96c4ab39307ffb5f99b73d7f">LoadCXXThis</a>();</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(<a class="code" href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa06e001a20c541b4a78269c95eeee122c">CXXThis</a>, ThisLVal);</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;    }</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1LambdaCapture.html">LambdaCapture</a> &amp;LC : RD-&gt;captures()) {</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;      <span class="keywordflow">if</span> (LC.getCaptureKind() != <a class="code" href="namespaceclang.html#a4302d73c34f84f339015be4a88d5645ea041ff48e466d5940c068be89fe439e23">LCK_ByRef</a>)</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;      <span class="keyword">const</span> <a class="code" href="classclang_1_1ValueDecl.html">ValueDecl</a> *VD = LC.getCapturedVar();</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;      <span class="comment">// FIXME: For now VD is always a VarDecl because OpenMP does not support</span></div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;      <span class="comment">//  capturing structured bindings in lambdas yet.</span></div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;      <span class="keywordflow">if</span> (!CS-&gt;<a class="code" href="classclang_1_1CapturedStmt.html#a85d96f34278fa5ee487f23893474f893">capturesVariable</a>(cast&lt;VarDecl&gt;(VD)))</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;      <span class="keyword">auto</span> It = Captures.find(VD);</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;      assert(It != Captures.end() &amp;&amp; <span class="stringliteral">&quot;Found lambda capture without field.&quot;</span>);</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1LValue.html">LValue</a> VarLVal = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a8e2d33cb4583cb128c964a56c1ebd141">EmitLValueForFieldInitialization</a>(VDLVal, It-&gt;second);</div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1Address.html">Address</a> VDAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">GetAddrOfLocalVar</a>(cast&lt;VarDecl&gt;(VD));</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;      <span class="keywordflow">if</span> (VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>().<a class="code" href="classclang_1_1QualType.html#a900520b154ba282febbaa7267020ca3f">getCanonicalType</a>()-&gt;<a class="code" href="classclang_1_1Type.html#a48b2c2b1c98a1800de465320ee70badc">isReferenceType</a>())</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;        VDAddr = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a0796665b4d44acd99539d24fb6be6184">EmitLoadOfReferenceLValue</a>(VDAddr,</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;                                               VD-&gt;<a class="code" href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">getType</a>().<a class="code" href="classclang_1_1QualType.html#a900520b154ba282febbaa7267020ca3f">getCanonicalType</a>())</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;                     .<a class="code" href="classclang_1_1CodeGen_1_1LValue.html#a7f4854b60c6f7626344f156dad6e77c9">getAddress</a>(CGF);</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;      CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">EmitStoreOfScalar</a>(VDAddr.<a class="code" href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">emitRawPointer</a>(CGF), VarLVal);</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;    }</div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;  }</div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;}</div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160; </div>
<div class="line"><a name="l03415"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a57bcc86086aa59ec1464f53921aba0e1"> 3415</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a57bcc86086aa59ec1464f53921aba0e1">CGOpenMPRuntimeGPU::hasAllocateAttributeForGlobalVar</a>(<span class="keyword">const</span> <a class="code" href="classclang_1_1VarDecl.html">VarDecl</a> *VD,</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;                                                            <a class="code" href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793a">LangAS</a> &amp;AS) {</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;  <span class="keywordflow">if</span> (!VD || !VD-&gt;<a class="code" href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">hasAttr</a>&lt;OMPAllocateDeclAttr&gt;())</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> *A = VD-&gt;<a class="code" href="classclang_1_1Decl.html#aef0e4b06e995dbc54de3cc99993edf5b">getAttr</a>&lt;OMPAllocateDeclAttr&gt;();</div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;  <span class="keywordflow">switch</span>(A-&gt;getAllocatorType()) {</div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPNullMemAlloc:</div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPDefaultMemAlloc:</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;  <span class="comment">// Not supported, fallback to the default mem space.</span></div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPThreadMemAlloc:</div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPLargeCapMemAlloc:</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPCGroupMemAlloc:</div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPHighBWMemAlloc:</div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPLowLatMemAlloc:</div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    AS = <a class="code" href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa7a1920d61156abc05a60135aefe8bc67">LangAS::Default</a>;</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPConstMemAlloc:</div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    AS = <a class="code" href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa60182286971c00f07c50487d0683d6e3">LangAS::cuda_constant</a>;</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPPTeamMemAlloc:</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;    AS = <a class="code" href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa290073a3c242d08d952a80f7007cfca5">LangAS::cuda_shared</a>;</div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;  <span class="keywordflow">case</span> OMPAllocateDeclAttr::OMPUserDefinedMemAlloc:</div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;    llvm_unreachable(<span class="stringliteral">&quot;Expected predefined allocator for the variables with the &quot;</span></div>
<div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;                     <span class="stringliteral">&quot;static storage.&quot;</span>);</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  }</div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;}</div>
<div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160; </div>
<div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;<span class="comment">// Get current CudaArch and ignore any unknown values</span></div>
<div class="line"><a name="l03445"></a><span class="lineno"><a class="line" href="CGOpenMPRuntimeGPU_8cpp.html#a186cffe90a0401a38e42f74e47418349"> 3445</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1">CudaArch</a> <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a186cffe90a0401a38e42f74e47418349">getCudaArch</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html">CodeGenModule</a> &amp;CGM) {</div>
<div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;  <span class="keywordflow">if</span> (!CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a09a815215ff67d2e52b7605af35c40cb">getTarget</a>().<a class="code" href="classclang_1_1TargetInfo.html#aec3f90551de05b963bd4df1387aa2743">hasFeature</a>(<span class="stringliteral">&quot;ptx&quot;</span>))</div>
<div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a696b031073e74bf2cb98e5ef201d4aa3">CudaArch::UNKNOWN</a>;</div>
<div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;Feature : CGM.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a09a815215ff67d2e52b7605af35c40cb">getTarget</a>().<a class="code" href="classclang_1_1TargetInfo.html#af46e41c7c724fb238952a87f92eb0557">getTargetOpts</a>().<a class="code" href="classclang_1_1TargetOptions.html#ace44d198262901d30c8fe8d0bfca1403">FeatureMap</a>) {</div>
<div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;    <span class="keywordflow">if</span> (Feature.getValue()) {</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1">CudaArch</a> Arch = <a class="code" href="namespaceclang.html#a50aee5ceae697f7f977601070149cfe6">StringToCudaArch</a>(Feature.getKey());</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;      <span class="keywordflow">if</span> (Arch != <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a696b031073e74bf2cb98e5ef201d4aa3">CudaArch::UNKNOWN</a>)</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;        <span class="keywordflow">return</span> Arch;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    }</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;  }</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a696b031073e74bf2cb98e5ef201d4aa3">CudaArch::UNKNOWN</a>;</div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;}</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;<span class="comment">/// Check to see if target architecture supports unified addressing which is</span></div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;<span class="comment">/// a restriction for OpenMP requires clause &quot;unified_shared_memory&quot;.</span></div>
<div class="line"><a name="l03460"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9c92dd9bc3afabcdfa815a1fc6c3d0ea"> 3460</a></span>&#160;<span class="comment"></span><span class="keywordtype">void</span> <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9c92dd9bc3afabcdfa815a1fc6c3d0ea">CGOpenMPRuntimeGPU::processRequiresDirective</a>(</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;    <span class="keyword">const</span> <a class="code" href="classclang_1_1OMPRequiresDecl.html">OMPRequiresDecl</a> *D) {</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classclang_1_1OMPClause.html">OMPClause</a> *Clause : D-&gt;<a class="code" href="classclang_1_1OMPRequiresDecl.html#a686d86c373db2b1ac8971deb2730207f">clauselists</a>()) {</div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;    <span class="keywordflow">if</span> (Clause-&gt;getClauseKind() == OMPC_unified_shared_memory) {</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;      <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1">CudaArch</a> Arch = <a class="code" href="CGOpenMPRuntimeGPU_8cpp.html#a186cffe90a0401a38e42f74e47418349">getCudaArch</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>);</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;      <span class="keywordflow">switch</span> (Arch) {</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a94c31e33aaa74e3eb6a11db931d63be1">CudaArch::SM_20</a>:</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a1e5c0b97d6529f717c0500b0fbd04b69">CudaArch::SM_21</a>:</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1abff82d70a73917474240c68c05ef972f">CudaArch::SM_30</a>:</div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1af44ef7bb2483783f890097db86e170fa">CudaArch::SM_32_</a>:</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7f610e68c243f016176f0465c407e170">CudaArch::SM_35</a>:</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1adfcef7d71e77eb8d8ded0c24f4e58756">CudaArch::SM_37</a>:</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a70be19b43b0f67805bba113d565dad83">CudaArch::SM_50</a>:</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a6ebb9a9ffebcbbba448247e2dc44d15a">CudaArch::SM_52</a>:</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7a9b7c7fa1e2c26840f459fa77ba08aa">CudaArch::SM_53</a>: {</div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;        <a class="code" href="classllvm_1_1SmallString.html">SmallString&lt;256&gt;</a> Buffer;</div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;        llvm::raw_svector_ostream Out(Buffer);</div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;        Out &lt;&lt; <span class="stringliteral">&quot;Target architecture &quot;</span> &lt;&lt; <a class="code" href="namespaceclang.html#af93821a9d77e2f0f95847c8b0f726c79">CudaArchToString</a>(Arch)</div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; does not support unified addressing&quot;</span>;</div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;        <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a780cdd48671d865670b7c51536e9664d">Error</a>(Clause-&gt;getBeginLoc(), Out.str());</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      }</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7f789f119307bc80093cd60c9f288261">CudaArch::SM_60</a>:</div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a3d12a95f70f4caa1e1591a7cf6ddc14b">CudaArch::SM_61</a>:</div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aac751e13f47e2914390d7f77f786943a">CudaArch::SM_62</a>:</div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ac179e857b04c2faf1d790e0ea6507a7b">CudaArch::SM_70</a>:</div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a334bd5ee7fa1e1ac3934410e586e8b90">CudaArch::SM_72</a>:</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a714f0321ebc3e5ae647c40503bdf3060">CudaArch::SM_75</a>:</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab09562e89d5edbfd8822603e786b1201">CudaArch::SM_80</a>:</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a9884a0d3243872ff198043ba39631038">CudaArch::SM_86</a>:</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aa7c00fa759274252de7394171b6a79a3">CudaArch::SM_87</a>:</div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a74953a02b00f13b6ee58868145fea91f">CudaArch::SM_89</a>:</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1abe5bc8939a8ba0f0e475817e3554f2cd">CudaArch::SM_90</a>:</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1accd7bbabbd68dc90f42114e0e9d96a5d">CudaArch::SM_90a</a>:</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0847d1ab37bcdadf88aa7ed0aab4e164">CudaArch::GFX600</a>:</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1abad64aaa5c6db77eaf76828f5cb40ae5">CudaArch::GFX601</a>:</div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a1a0d3ec3a569039edb92240936bbf656">CudaArch::GFX602</a>:</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab664561bc412d9e5ea4cd38105bcf1eb">CudaArch::GFX700</a>:</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0968a4cc5b854bc9fbea2e8c33651e90">CudaArch::GFX701</a>:</div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0d288b09d38a22014da51efac770a04d">CudaArch::GFX702</a>:</div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a512f871862bf81dd08808dea3f718253">CudaArch::GFX703</a>:</div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aaf08c0bcda9bf569ffa3cfc75cfea11e">CudaArch::GFX704</a>:</div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ae169eb14b3f4107945e6c84a7cc52051">CudaArch::GFX705</a>:</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ad3154cc1293d0fc48e74eed8b5b71cc6">CudaArch::GFX801</a>:</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1afcd7f64770f5eb22f85762e7ab982919">CudaArch::GFX802</a>:</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab3444ff76476d73bc9958ed8f707c3ae">CudaArch::GFX803</a>:</div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a1416936466bae8b9ad956a090ca8b63b">CudaArch::GFX805</a>:</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0534c594c7e8dca296adf507f242c043">CudaArch::GFX810</a>:</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ad145ac4508af3ce8fed80a1a36fc962c">CudaArch::GFX900</a>:</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab4a0f9d228b8e3448596f777a5ac91d7">CudaArch::GFX902</a>:</div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0a24846061ac5e3bf11003284315409a">CudaArch::GFX904</a>:</div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aec52144d9f65df1e88082b7fa58cc64a">CudaArch::GFX906</a>:</div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1afe4103612c37e7efa57e720e471c9259">CudaArch::GFX908</a>:</div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aaa3140ab5dcaa9858ec66f984912c5c8">CudaArch::GFX909</a>:</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a3ba9f28c8be101b04b68198240d1b89a">CudaArch::GFX90a</a>:</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aec1768a1fd20f41a87a9d2a4a0cfe8bb">CudaArch::GFX90c</a>:</div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a03453e38e7992e1eae6ee511c98444ce">CudaArch::GFX940</a>:</div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a5fa849a49dd8aef830c350a1276e0fd4">CudaArch::GFX941</a>:</div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a874e85bf420a44a0c638e505dd8fb9b8">CudaArch::GFX942</a>:</div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a2881dc0548b731410611b0f36cce997f">CudaArch::GFX1010</a>:</div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a4c6b0fb477249efef285872a1f873a1a">CudaArch::GFX1011</a>:</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0bd26cad655182000d86a69b066a651a">CudaArch::GFX1012</a>:</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1acf2ba5f154242f7414210fb9a9d10d20">CudaArch::GFX1013</a>:</div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1af879a89e51fafa8f5b8aa310ea354971">CudaArch::GFX1030</a>:</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a086d89e7de3b8b22f5eee65a7a34b094">CudaArch::GFX1031</a>:</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7c3fcea8caa6b3ed4015e672fd8b05aa">CudaArch::GFX1032</a>:</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab73529922b421582b937e2f66bbf5cb2">CudaArch::GFX1033</a>:</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a398f3db9522be126ca9f08c498bcd833">CudaArch::GFX1034</a>:</div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0990062f0c484f0b13ef1ac13c158a80">CudaArch::GFX1035</a>:</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a43fd6db05bb9d1e1119dba10215eb204">CudaArch::GFX1036</a>:</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a752fa05613502efaaac241f931ee5889">CudaArch::GFX1100</a>:</div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ae16c4be7b1eae81d565789ced356195a">CudaArch::GFX1101</a>:</div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1afd791c005e62e711acc2df6282783fb5">CudaArch::GFX1102</a>:</div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a9bed743b2bc8ff7ebcfb57067319cbbd">CudaArch::GFX1103</a>:</div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ac5eb5e370b24b72db923be91bb8346cb">CudaArch::GFX1150</a>:</div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a92d8beca7b536a823332aead42cd0408">CudaArch::GFX1151</a>:</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7b775c18f622c6aea0459da5c0480da3">CudaArch::GFX1200</a>:</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a47e26ccd2210f6c0ddea3e38a63ab9a2">CudaArch::GFX1201</a>:</div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a8045a0a6c688b0635e3caccc408a1446">CudaArch::Generic</a>:</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a3bc180bd00be2c60a3a5a68e0dd49503">CudaArch::UNUSED</a>:</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a696b031073e74bf2cb98e5ef201d4aa3">CudaArch::UNKNOWN</a>:</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1af447f5c03508de4d88e340390ba7c78f">CudaArch::LAST</a>:</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;        llvm_unreachable(<span class="stringliteral">&quot;Unexpected Cuda arch.&quot;</span>);</div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;      }</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;    }</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;  }</div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a7460ab8b0d77e17e08c8e5399005219f">CGOpenMPRuntime::processRequiresDirective</a>(D);</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;}</div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160; </div>
<div class="line"><a name="l03550"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab9ab384c6f9f3ee61a27eb226982b2e9"> 3550</a></span>&#160;llvm::Value *<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab9ab384c6f9f3ee61a27eb226982b2e9">CGOpenMPRuntimeGPU::getGPUNumThreads</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;  <a class="code" href="classclang_1_1CodeGen_1_1CGBuilderTy.html">CGBuilderTy</a> &amp;Bld = CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">Builder</a>;</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;  llvm::Module *M = &amp;CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>();</div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span> *LocSize = <span class="stringliteral">&quot;__kmpc_get_hardware_num_threads_in_block&quot;</span>;</div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;  llvm::Function *F = M-&gt;getFunction(LocSize);</div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;  <span class="keywordflow">if</span> (!F) {</div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;    F = llvm::Function::Create(</div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;        llvm::FunctionType::get(CGF.<a class="code" href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">Int32Ty</a>, std::nullopt, <span class="keyword">false</span>),</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;        llvm::GlobalVariable::ExternalLinkage, LocSize, &amp;CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>());</div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;  }</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;  <span class="keywordflow">return</span> Bld.CreateCall(F, std::nullopt, <span class="stringliteral">&quot;nvptx_num_threads&quot;</span>);</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;}</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160; </div>
<div class="line"><a name="l03563"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a6b7f0061aae68808348ed9e5e5cc81ac"> 3563</a></span>&#160;llvm::Value *<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a6b7f0061aae68808348ed9e5e5cc81ac">CGOpenMPRuntimeGPU::getGPUThreadID</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> Args{};</div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  <span class="keywordflow">return</span> CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;      <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;          <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_get_hardware_thread_id_in_block),</div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;      Args);</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;}</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160; </div>
<div class="line"><a name="l03571"></a><span class="lineno"><a class="line" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a72a0f50977ffff3f0c29f961dc237ed5"> 3571</a></span>&#160;llvm::Value *<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a72a0f50977ffff3f0c29f961dc237ed5">CGOpenMPRuntimeGPU::getGPUWarpSize</a>(<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html">CodeGenFunction</a> &amp;CGF) {</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;  <a class="code" href="classllvm_1_1ArrayRef.html">ArrayRef&lt;llvm::Value *&gt;</a> Args{};</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;  <span class="keywordflow">return</span> CGF.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">EmitRuntimeCall</a>(<a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">OMPBuilder</a>.getOrCreateRuntimeFunction(</div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;                                 <a class="code" href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">CGM</a>.<a class="code" href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">getModule</a>(), OMPRTL___kmpc_get_warp_size),</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;                             Args);</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;}</div>
<div class="ttc" id="aASTContext_8h_html_ab1457e11becd51c5d0c750caab5446c2"><div class="ttname"><a href="ASTContext_8h.html#ab1457e11becd51c5d0c750caab5446c2">V</a></div><div class="ttdeci">#define V(N, I)</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l03278">ASTContext.h:3278</a></div></div>
<div class="ttc" id="aArena_8cpp_html_a595f6ff5c8c7b1538e28f9b6cb97113f"><div class="ttname"><a href="Arena_8cpp.html#a595f6ff5c8c7b1538e28f9b6cb97113f">ID</a></div><div class="ttdeci">static char ID</div><div class="ttdef"><b>Definition:</b> <a href="Arena_8cpp_source.html#l00183">Arena.cpp:183</a></div></div>
<div class="ttc" id="aAttr_8h_html"><div class="ttname"><a href="Attr_8h.html">Attr.h</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a186cffe90a0401a38e42f74e47418349"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a186cffe90a0401a38e42f74e47418349">getCudaArch</a></div><div class="ttdeci">static CudaArch getCudaArch(CodeGenModule &amp;CGM)</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03445">CGOpenMPRuntimeGPU.cpp:3445</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a2745f124cc3313823419744fc4957610"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a2745f124cc3313823419744fc4957610">emitGlobalToListCopyFunction</a></div><div class="ttdeci">static llvm::Value * emitGlobalToListCopyFunction(CodeGenModule &amp;CGM, ArrayRef&lt; const Expr * &gt; Privates, QualType ReductionArrayTy, SourceLocation Loc, const RecordDecl *TeamReductionRec, const llvm::SmallDenseMap&lt; const ValueDecl *, const FieldDecl * &gt; &amp;VarFieldMap)</div><div class="ttdoc">This function emits a helper that copies all the reduction variables from the team into the provided ...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l02364">CGOpenMPRuntimeGPU.cpp:2364</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a42bb1f4448293d5411b60d83feffd370"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a42bb1f4448293d5411b60d83feffd370">emitInterWarpCopyFunction</a></div><div class="ttdeci">static llvm::Value * emitInterWarpCopyFunction(CodeGenModule &amp;CGM, ArrayRef&lt; const Expr * &gt; Privates, QualType ReductionArrayTy, SourceLocation Loc)</div><div class="ttdoc">This function emits a helper that gathers Reduce lists from the first lane of every active warp to la...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01708">CGOpenMPRuntimeGPU.cpp:1708</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a49b6bfd18b729f44dfa67a2a783d34c1"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a49b6bfd18b729f44dfa67a2a783d34c1">getTeamsReductionVars</a></div><div class="ttdeci">static void getTeamsReductionVars(ASTContext &amp;Ctx, const OMPExecutableDirective &amp;D, llvm::SmallVectorImpl&lt; const ValueDecl * &gt; &amp;Vars)</div><div class="ttdoc">Get list of reduction variables from the teams ... directives.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00986">CGOpenMPRuntimeGPU.cpp:986</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a5a004688c83feec0eb5b4b30d5e4e4a1"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a5a004688c83feec0eb5b4b30d5e4e4a1">emitReductionListCopy</a></div><div class="ttdeci">static void emitReductionListCopy(CopyAction Action, CodeGenFunction &amp;CGF, QualType ReductionArrayTy, ArrayRef&lt; const Expr * &gt; Privates, Address SrcBase, Address DestBase, CopyOptionsTy CopyOptions={nullptr, nullptr, nullptr})</div><div class="ttdoc">Emit instructions to copy a Reduce list, which contains partially aggregated values,...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01577">CGOpenMPRuntimeGPU.cpp:1577</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a5c706b93ab05dff7677da9fa481a4b25"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a5c706b93ab05dff7677da9fa481a4b25">getNVPTXLaneID</a></div><div class="ttdeci">static llvm::Value * getNVPTXLaneID(CodeGenFunction &amp;CGF)</div><div class="ttdoc">Get the id of the current lane in the Warp.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00518">CGOpenMPRuntimeGPU.cpp:518</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a6d875dc8bd6f0a26d625f3f85418c811"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a6d875dc8bd6f0a26d625f3f85418c811">getDistributeLastprivateVars</a></div><div class="ttdeci">static void getDistributeLastprivateVars(ASTContext &amp;Ctx, const OMPExecutableDirective &amp;D, llvm::SmallVectorImpl&lt; const ValueDecl * &gt; &amp;Vars)</div><div class="ttdoc">Get list of lastprivate variables from the teams distribute ...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00961">CGOpenMPRuntimeGPU.cpp:961</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a732ee718e2149694c12e45397432b170"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a732ee718e2149694c12e45397432b170">emitListToGlobalReduceFunction</a></div><div class="ttdeci">static llvm::Value * emitListToGlobalReduceFunction(CodeGenModule &amp;CGM, ArrayRef&lt; const Expr * &gt; Privates, QualType ReductionArrayTy, SourceLocation Loc, const RecordDecl *TeamReductionRec, const llvm::SmallDenseMap&lt; const ValueDecl *, const FieldDecl * &gt; &amp;VarFieldMap, llvm::Function *ReduceFn)</div><div class="ttdoc">This function emits a helper that reduces all the reduction variables from the team into the provided...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l02269">CGOpenMPRuntimeGPU.cpp:2269</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a828e607d0ae9ffa0f7b7fe47e79363ca"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a828e607d0ae9ffa0f7b7fe47e79363ca">shuffleAndStore</a></div><div class="ttdeci">static void shuffleAndStore(CodeGenFunction &amp;CGF, Address SrcAddr, Address DestAddr, QualType ElemType, llvm::Value *Offset, SourceLocation Loc)</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01473">CGOpenMPRuntimeGPU.cpp:1473</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a867a24bcff7e64a500c6ea7c18db7403"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a867a24bcff7e64a500c6ea7c18db7403">hasNestedSPMDDirective</a></div><div class="ttdeci">static bool hasNestedSPMDDirective(ASTContext &amp;Ctx, const OMPExecutableDirective &amp;D)</div><div class="ttdoc">Check for inner (nested) SPMD construct, if any.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00540">CGOpenMPRuntimeGPU.cpp:540</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_a95092577e143858c43bbcc8928e1ffa8"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#a95092577e143858c43bbcc8928e1ffa8">getNVPTXWarpID</a></div><div class="ttdeci">static llvm::Value * getNVPTXWarpID(CodeGenFunction &amp;CGF)</div><div class="ttdoc">Get the id of the warp in the block.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00507">CGOpenMPRuntimeGPU.cpp:507</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_aa0476a4f321d90fb780333ee3f8de29b"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#aa0476a4f321d90fb780333ee3f8de29b">supportsSPMDExecutionMode</a></div><div class="ttdeci">static bool supportsSPMDExecutionMode(ASTContext &amp;Ctx, const OMPExecutableDirective &amp;D)</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00642">CGOpenMPRuntimeGPU.cpp:642</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_aa57830284ce7f6b0c33632649c956fd3"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#aa57830284ce7f6b0c33632649c956fd3">createRuntimeShuffleFunction</a></div><div class="ttdeci">static llvm::Value * createRuntimeShuffleFunction(CodeGenFunction &amp;CGF, llvm::Value *Elem, QualType ElemType, llvm::Value *Offset, SourceLocation Loc)</div><div class="ttdoc">This function creates calls to one of two shuffle functions to copy variables between lanes in a warp...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01440">CGOpenMPRuntimeGPU.cpp:1440</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_ab86a56b8b7119050e5e1dbc990e46848"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#ab86a56b8b7119050e5e1dbc990e46848">castValueToType</a></div><div class="ttdeci">static llvm::Value * castValueToType(CodeGenFunction &amp;CGF, llvm::Value *Val, QualType ValTy, QualType CastTy, SourceLocation Loc)</div><div class="ttdoc">Cast value to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01412">CGOpenMPRuntimeGPU.cpp:1412</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_abbea910f67c50b061024e583f7a8d411"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#abbea910f67c50b061024e583f7a8d411">emitGlobalToListReduceFunction</a></div><div class="ttdeci">static llvm::Value * emitGlobalToListReduceFunction(CodeGenModule &amp;CGM, ArrayRef&lt; const Expr * &gt; Privates, QualType ReductionArrayTy, SourceLocation Loc, const RecordDecl *TeamReductionRec, const llvm::SmallDenseMap&lt; const ValueDecl *, const FieldDecl * &gt; &amp;VarFieldMap, llvm::Function *ReduceFn)</div><div class="ttdoc">This function emits a helper that reduces all the reduction variables from the team into the provided...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l02476">CGOpenMPRuntimeGPU.cpp:2476</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_aeceb0b491954f710d711164d4a0568db"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#aeceb0b491954f710d711164d4a0568db">emitShuffleAndReduceFunction</a></div><div class="ttdeci">static llvm::Function * emitShuffleAndReduceFunction(CodeGenModule &amp;CGM, ArrayRef&lt; const Expr * &gt; Privates, QualType ReductionArrayTy, llvm::Function *ReduceFn, SourceLocation Loc)</div><div class="ttdoc">Emit a helper that reduces data across two OpenMP threads (lanes) in the same warp.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l02000">CGOpenMPRuntimeGPU.cpp:2000</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8cpp_html_af8ef22468ed9a3f441665f533c8f6285"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8cpp.html#af8ef22468ed9a3f441665f533c8f6285">emitListToGlobalCopyFunction</a></div><div class="ttdeci">static llvm::Value * emitListToGlobalCopyFunction(CodeGenModule &amp;CGM, ArrayRef&lt; const Expr * &gt; Privates, QualType ReductionArrayTy, SourceLocation Loc, const RecordDecl *TeamReductionRec, const llvm::SmallDenseMap&lt; const ValueDecl *, const FieldDecl * &gt; &amp;VarFieldMap)</div><div class="ttdoc">This function emits a helper that copies all the reduction variables from the team into the provided ...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l02158">CGOpenMPRuntimeGPU.cpp:2158</a></div></div>
<div class="ttc" id="aCGOpenMPRuntimeGPU_8h_html"><div class="ttname"><a href="CGOpenMPRuntimeGPU_8h.html">CGOpenMPRuntimeGPU.h</a></div></div>
<div class="ttc" id="aCodeGenFunction_8h_html"><div class="ttname"><a href="CodeGenFunction_8h.html">CodeGenFunction.h</a></div></div>
<div class="ttc" id="aDeclOpenMP_8h_html"><div class="ttname"><a href="DeclOpenMP_8h.html">DeclOpenMP.h</a></div><div class="ttdoc">This file defines OpenMP nodes for declarative directives.</div></div>
<div class="ttc" id="aFormat_8cpp_html_a9fcf84dffafb0ea03c0f9b686ddbf2b3"><div class="ttname"><a href="Format_8cpp.html#a9fcf84dffafb0ea03c0f9b686ddbf2b3">Offset</a></div><div class="ttdeci">unsigned Offset</div><div class="ttdef"><b>Definition:</b> <a href="Format_8cpp_source.html#l02974">Format.cpp:2974</a></div></div>
<div class="ttc" id="aOpenMPClause_8h_html"><div class="ttname"><a href="OpenMPClause_8h.html">OpenMPClause.h</a></div><div class="ttdoc">This file defines OpenMP AST classes for clauses.</div></div>
<div class="ttc" id="aSemaOpenMP_8cpp_html_a85553ac942b29ac2b24340f19f29ab7d"><div class="ttname"><a href="SemaOpenMP_8cpp.html#a85553ac942b29ac2b24340f19f29ab7d">getPrivateItem</a></div><div class="ttdeci">static std::pair&lt; ValueDecl *, bool &gt; getPrivateItem(Sema &amp;S, Expr *&amp;RefExpr, SourceLocation &amp;ELoc, SourceRange &amp;ERange, bool AllowArraySection=false, StringRef DiagType=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="SemaOpenMP_8cpp_source.html#l05406">SemaOpenMP.cpp:5406</a></div></div>
<div class="ttc" id="aStandardLibrary_8cpp_html_a925665d73bcb5b100927b8c74472687b"><div class="ttname"><a href="StandardLibrary_8cpp.html#a925665d73bcb5b100927b8c74472687b">Data</a></div><div class="ttdeci">const char * Data</div><div class="ttdef"><b>Definition:</b> <a href="StandardLibrary_8cpp_source.html#l00036">StandardLibrary.cpp:36</a></div></div>
<div class="ttc" id="aStmtOpenMP_8h_html"><div class="ttname"><a href="StmtOpenMP_8h.html">StmtOpenMP.h</a></div><div class="ttdoc">This file defines OpenMP AST classes for executable directives and clauses.</div></div>
<div class="ttc" id="aStmtVisitor_8h_html"><div class="ttname"><a href="StmtVisitor_8h.html">StmtVisitor.h</a></div></div>
<div class="ttc" id="aclassBase_html"><div class="ttname"><a href="classBase.html">Base</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html"><div class="ttname"><a href="classclang_1_1ASTContext.html">clang::ASTContext</a></div><div class="ttdoc">Holds long-lived AST nodes (such as types and decls) that can be referred to throughout the semantic ...</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l00182">ASTContext.h:182</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a41483c42a2f92e8cb7737cf20661a92c"><div class="ttname"><a href="classclang_1_1ASTContext.html#a41483c42a2f92e8cb7737cf20661a92c">clang::ASTContext::getPointerType</a></div><div class="ttdeci">QualType getPointerType(QualType T) const</div><div class="ttdoc">Return the uniqued reference to the type for a pointer to the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8cpp_source.html#l03324">ASTContext.cpp:3324</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a485732164c40553bb323c58f5e8bf7a7"><div class="ttname"><a href="classclang_1_1ASTContext.html#a485732164c40553bb323c58f5e8bf7a7">clang::ASTContext::VoidPtrTy</a></div><div class="ttdeci">CanQualType VoidPtrTy</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l01118">ASTContext.h:1118</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a573a88f4f3b7d984ddf34c74fc113e62"><div class="ttname"><a href="classclang_1_1ASTContext.html#a573a88f4f3b7d984ddf34c74fc113e62">clang::ASTContext::getUIntPtrType</a></div><div class="ttdeci">QualType getUIntPtrType() const</div><div class="ttdoc">Return a type compatible with &quot;uintptr_t&quot; (C99 7.18.1.4), as defined by the target.</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8cpp_source.html#l06067">ASTContext.cpp:6067</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a6b50b44b241ecee20c8b4fb9d3747ef2"><div class="ttname"><a href="classclang_1_1ASTContext.html#a6b50b44b241ecee20c8b4fb9d3747ef2">clang::ASTContext::getIntTypeForBitwidth</a></div><div class="ttdeci">QualType getIntTypeForBitwidth(unsigned DestWidth, unsigned Signed) const</div><div class="ttdoc">getIntTypeForBitwidth - sets integer QualTy according to specified details: bitwidth,...</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8cpp_source.html#l12261">ASTContext.cpp:12261</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a6ff315a5c1e14dc775fe14c5356f3777"><div class="ttname"><a href="classclang_1_1ASTContext.html#a6ff315a5c1e14dc775fe14c5356f3777">clang::ASTContext::getAsVariableArrayType</a></div><div class="ttdeci">const VariableArrayType * getAsVariableArrayType(QualType T) const</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l02764">ASTContext.h:2764</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a7c89acd533ffea38c5011885d8d029e4"><div class="ttname"><a href="classclang_1_1ASTContext.html#a7c89acd533ffea38c5011885d8d029e4">clang::ASTContext::getSizeType</a></div><div class="ttdeci">CanQualType getSizeType() const</div><div class="ttdoc">Return the unique type for &quot;size_t&quot; (C99 7.17), defined in &lt;stddef.h&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8cpp_source.html#l06029">ASTContext.cpp:6029</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a963551b2d662d6ee39a7f4942e37b016"><div class="ttname"><a href="classclang_1_1ASTContext.html#a963551b2d662d6ee39a7f4942e37b016">clang::ASTContext::getDeclAlign</a></div><div class="ttdeci">CharUnits getDeclAlign(const Decl *D, bool ForAlignof=false) const</div><div class="ttdoc">Return a conservative estimate of the alignment of the specified decl D.</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8cpp_source.html#l01646">ASTContext.cpp:1646</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_a97247f7ac314132665272482cb220e68"><div class="ttname"><a href="classclang_1_1ASTContext.html#a97247f7ac314132665272482cb220e68">clang::ASTContext::toBits</a></div><div class="ttdeci">int64_t toBits(CharUnits CharSize) const</div><div class="ttdoc">Convert a size in characters to a size in bits.</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8cpp_source.html#l02441">ASTContext.cpp:2441</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_aa8c44e88d6ce9b3cce885b62d3cd5dff"><div class="ttname"><a href="classclang_1_1ASTContext.html#aa8c44e88d6ce9b3cce885b62d3cd5dff">clang::ASTContext::getTypeSizeInChars</a></div><div class="ttdeci">CharUnits getTypeSizeInChars(QualType T) const</div><div class="ttdoc">Return the size of the specified (complete) type T, in characters.</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8cpp_source.html#l02447">ASTContext.cpp:2447</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_aaa9dd0ebd4ff2e55c572f5718b7af508"><div class="ttname"><a href="classclang_1_1ASTContext.html#aaa9dd0ebd4ff2e55c572f5718b7af508">clang::ASTContext::VoidTy</a></div><div class="ttdeci">CanQualType VoidTy</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l01091">ASTContext.h:1091</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_ac052b2e7614712bb410e01756f9669e9"><div class="ttname"><a href="classclang_1_1ASTContext.html#ac052b2e7614712bb410e01756f9669e9">clang::ASTContext::getTargetInfo</a></div><div class="ttdeci">const TargetInfo &amp; getTargetInfo() const</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l00757">ASTContext.h:757</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_ad98f6467d6c7f3b536fe0be5f70cf8de"><div class="ttname"><a href="classclang_1_1ASTContext.html#ad98f6467d6c7f3b536fe0be5f70cf8de">clang::ASTContext::getAddrSpaceQualType</a></div><div class="ttdeci">QualType getAddrSpaceQualType(QualType T, LangAS AddressSpace) const</div><div class="ttdoc">Return the uniqued reference to the type for an address space qualified type with the specified type ...</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8cpp_source.html#l03051">ASTContext.cpp:3051</a></div></div>
<div class="ttc" id="aclassclang_1_1ASTContext_html_adf7845565049394ae18e77bfa76599b7"><div class="ttname"><a href="classclang_1_1ASTContext.html#adf7845565049394ae18e77bfa76599b7">clang::ASTContext::getTargetAddressSpace</a></div><div class="ttdeci">unsigned getTargetAddressSpace(LangAS AS) const</div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8cpp_source.html#l12543">ASTContext.cpp:12543</a></div></div>
<div class="ttc" id="aclassclang_1_1Attr_html"><div class="ttname"><a href="classclang_1_1Attr.html">clang::Attr</a></div><div class="ttdoc">Attr - This represents one attribute.</div><div class="ttdef"><b>Definition:</b> <a href="Attr_8h_source.html#l00046">Attr.h:46</a></div></div>
<div class="ttc" id="aclassclang_1_1BlockDecl_1_1Capture_html"><div class="ttname"><a href="classclang_1_1BlockDecl_1_1Capture.html">clang::BlockDecl::Capture</a></div><div class="ttdoc">A class which contains all the information about a particular captured value.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l04502">Decl.h:4502</a></div></div>
<div class="ttc" id="aclassclang_1_1BlockDecl_html_a6d59881fb427be537ab4cc332352d554"><div class="ttname"><a href="classclang_1_1BlockDecl.html#a6d59881fb427be537ab4cc332352d554">clang::BlockDecl::captures</a></div><div class="ttdeci">ArrayRef&lt; Capture &gt; captures() const</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l04623">Decl.h:4623</a></div></div>
<div class="ttc" id="aclassclang_1_1BlockExpr_html"><div class="ttname"><a href="classclang_1_1BlockExpr.html">clang::BlockExpr</a></div><div class="ttdoc">BlockExpr - Adaptor class for mixing a BlockDecl with expressions.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l06214">Expr.h:6214</a></div></div>
<div class="ttc" id="aclassclang_1_1BlockExpr_html_ab1123558a2bed73c9016a52281912cea"><div class="ttname"><a href="classclang_1_1BlockExpr.html#ab1123558a2bed73c9016a52281912cea">clang::BlockExpr::getBlockDecl</a></div><div class="ttdeci">const BlockDecl * getBlockDecl() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l06226">Expr.h:6226</a></div></div>
<div class="ttc" id="aclassclang_1_1CallExpr_html"><div class="ttname"><a href="classclang_1_1CallExpr.html">clang::CallExpr</a></div><div class="ttdoc">CallExpr - Represents a function call (C99 6.5.2.2, C++ [expr.call]).</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l02872">Expr.h:2872</a></div></div>
<div class="ttc" id="aclassclang_1_1CallExpr_html_aac613bb62328f34f8fbd8876eac3e30f"><div class="ttname"><a href="classclang_1_1CallExpr.html#aac613bb62328f34f8fbd8876eac3e30f">clang::CallExpr::arguments</a></div><div class="ttdeci">arg_range arguments()</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03111">Expr.h:3111</a></div></div>
<div class="ttc" id="aclassclang_1_1CallExpr_html_ab4a8390212bdfd96c41f5451af3fb701"><div class="ttname"><a href="classclang_1_1CallExpr.html#ab4a8390212bdfd96c41f5451af3fb701">clang::CallExpr::getCallee</a></div><div class="ttdeci">Expr * getCallee()</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03022">Expr.h:3022</a></div></div>
<div class="ttc" id="aclassclang_1_1CapturedStmt_1_1Capture_html"><div class="ttname"><a href="classclang_1_1CapturedStmt_1_1Capture.html">clang::CapturedStmt::Capture</a></div><div class="ttdoc">Describes the capture of either a variable, or 'this', or variable-length array type.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l03770">Stmt.h:3770</a></div></div>
<div class="ttc" id="aclassclang_1_1CapturedStmt_html"><div class="ttname"><a href="classclang_1_1CapturedStmt.html">clang::CapturedStmt</a></div><div class="ttdoc">This captures a statement into a function.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l03757">Stmt.h:3757</a></div></div>
<div class="ttc" id="aclassclang_1_1CapturedStmt_html_a443b15961510278fa7b880763608bd90"><div class="ttname"><a href="classclang_1_1CapturedStmt.html#a443b15961510278fa7b880763608bd90">clang::CapturedStmt::getCapturedDecl</a></div><div class="ttdeci">CapturedDecl * getCapturedDecl()</div><div class="ttdoc">Retrieve the outlined function declaration.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8cpp_source.html#l01407">Stmt.cpp:1407</a></div></div>
<div class="ttc" id="aclassclang_1_1CapturedStmt_html_a85d96f34278fa5ee487f23893474f893"><div class="ttname"><a href="classclang_1_1CapturedStmt.html#a85d96f34278fa5ee487f23893474f893">clang::CapturedStmt::capturesVariable</a></div><div class="ttdeci">bool capturesVariable(const VarDecl *Var) const</div><div class="ttdoc">True if this variable has been captured.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8cpp_source.html#l01431">Stmt.cpp:1431</a></div></div>
<div class="ttc" id="aclassclang_1_1CapturedStmt_html_ae53d40b49ef14d85a1dadb229ace03ee"><div class="ttname"><a href="classclang_1_1CapturedStmt.html#ae53d40b49ef14d85a1dadb229ace03ee">clang::CapturedStmt::captures</a></div><div class="ttdeci">capture_range captures()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l03895">Stmt.h:3895</a></div></div>
<div class="ttc" id="aclassclang_1_1CapturedStmt_html_ae8ade9cc59759ca1e39d7bb9d0a76f9f"><div class="ttname"><a href="classclang_1_1CapturedStmt.html#ae8ade9cc59759ca1e39d7bb9d0a76f9f">clang::CapturedStmt::getCapturedStmt</a></div><div class="ttdeci">Stmt * getCapturedStmt()</div><div class="ttdoc">Retrieve the statement being captured.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l03861">Stmt.h:3861</a></div></div>
<div class="ttc" id="aclassclang_1_1CastExpr_html_a2e40241b31a75137d192af1ec626f9d8"><div class="ttname"><a href="classclang_1_1CastExpr.html#a2e40241b31a75137d192af1ec626f9d8">clang::CastExpr::getCastKind</a></div><div class="ttdeci">CastKind getCastKind() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03579">Expr.h:3579</a></div></div>
<div class="ttc" id="aclassclang_1_1CastExpr_html_a37e3d80c4ca590eadbe49e400c50134b"><div class="ttname"><a href="classclang_1_1CastExpr.html#a37e3d80c4ca590eadbe49e400c50134b">clang::CastExpr::getSubExpr</a></div><div class="ttdeci">Expr * getSubExpr()</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03585">Expr.h:3585</a></div></div>
<div class="ttc" id="aclassclang_1_1CharUnits_html"><div class="ttname"><a href="classclang_1_1CharUnits.html">clang::CharUnits</a></div><div class="ttdoc">CharUnits - This is an opaque type for sizes expressed in character units.</div><div class="ttdef"><b>Definition:</b> <a href="CharUnits_8h_source.html#l00038">CharUnits.h:38</a></div></div>
<div class="ttc" id="aclassclang_1_1CharUnits_html_a58e175e680629d64f2b880a104058ecc"><div class="ttname"><a href="classclang_1_1CharUnits.html#a58e175e680629d64f2b880a104058ecc">clang::CharUnits::isZero</a></div><div class="ttdeci">bool isZero() const</div><div class="ttdoc">isZero - Test whether the quantity equals zero.</div><div class="ttdef"><b>Definition:</b> <a href="CharUnits_8h_source.html#l00122">CharUnits.h:122</a></div></div>
<div class="ttc" id="aclassclang_1_1CharUnits_html_a9188181b4ef997aee05f9ecca350e234"><div class="ttname"><a href="classclang_1_1CharUnits.html#a9188181b4ef997aee05f9ecca350e234">clang::CharUnits::getAsAlign</a></div><div class="ttdeci">llvm::Align getAsAlign() const</div><div class="ttdoc">getAsAlign - Returns Quantity as a valid llvm::Align, Beware llvm::Align assumes power of two 8-bit b...</div><div class="ttdef"><b>Definition:</b> <a href="CharUnits_8h_source.html#l00189">CharUnits.h:189</a></div></div>
<div class="ttc" id="aclassclang_1_1CharUnits_html_a968b1a66a449ab256c4dd176bd663c07"><div class="ttname"><a href="classclang_1_1CharUnits.html#a968b1a66a449ab256c4dd176bd663c07">clang::CharUnits::getQuantity</a></div><div class="ttdeci">QuantityType getQuantity() const</div><div class="ttdoc">getQuantity - Get the raw integer representation of this quantity.</div><div class="ttdef"><b>Definition:</b> <a href="CharUnits_8h_source.html#l00185">CharUnits.h:185</a></div></div>
<div class="ttc" id="aclassclang_1_1CharUnits_html_adf6d3a79993b58285a0626b61c2c6c82"><div class="ttname"><a href="classclang_1_1CharUnits.html#adf6d3a79993b58285a0626b61c2c6c82">clang::CharUnits::fromQuantity</a></div><div class="ttdeci">static CharUnits fromQuantity(QuantityType Quantity)</div><div class="ttdoc">fromQuantity - Construct a CharUnits quantity from a raw integer type.</div><div class="ttdef"><b>Definition:</b> <a href="CharUnits_8h_source.html#l00063">CharUnits.h:63</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1Address_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1Address.html">clang::CodeGen::Address</a></div><div class="ttdoc">Like RawAddress, an abstract representation of an aligned address, but the pointer contained in this ...</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00111">Address.h:111</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1Address_html_a06435c34d77b9c4659fe88800c4027aa"><div class="ttname"><a href="classclang_1_1CodeGen_1_1Address.html#a06435c34d77b9c4659fe88800c4027aa">clang::CodeGen::Address::invalid</a></div><div class="ttdeci">static Address invalid()</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00153">Address.h:153</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1Address_html_a2617fe6f1d7899bd6ad99e9053072f24"><div class="ttname"><a href="classclang_1_1CodeGen_1_1Address.html#a2617fe6f1d7899bd6ad99e9053072f24">clang::CodeGen::Address::emitRawPointer</a></div><div class="ttdeci">llvm::Value * emitRawPointer(CodeGenFunction &amp;CGF) const</div><div class="ttdoc">Return the pointer contained in this class after authenticating it and adding offset to it if necessa...</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00220">Address.h:220</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1Address_html_a34953de03f6c979659e4262c00c1f9ee"><div class="ttname"><a href="classclang_1_1CodeGen_1_1Address.html#a34953de03f6c979659e4262c00c1f9ee">clang::CodeGen::Address::getAlignment</a></div><div class="ttdeci">CharUnits getAlignment() const</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00166">Address.h:166</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1Address_html_a3974dea79c7629e4cf2db5dfc96867ae"><div class="ttname"><a href="classclang_1_1CodeGen_1_1Address.html#a3974dea79c7629e4cf2db5dfc96867ae">clang::CodeGen::Address::getElementType</a></div><div class="ttdeci">llvm::Type * getElementType() const</div><div class="ttdoc">Return the type of the values stored in this address.</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00184">Address.h:184</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1Address_html_a49782c568ba73ee265a502b43646e5da"><div class="ttname"><a href="classclang_1_1CodeGen_1_1Address.html#a49782c568ba73ee265a502b43646e5da">clang::CodeGen::Address::withElementType</a></div><div class="ttdeci">Address withElementType(llvm::Type *ElemTy) const</div><div class="ttdoc">Return address with different element type, but same pointer and alignment.</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00241">Address.h:241</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1Address_html_a6b6ef60870f8aa6542e665c9ffd325d8"><div class="ttname"><a href="classclang_1_1CodeGen_1_1Address.html#a6b6ef60870f8aa6542e665c9ffd325d8">clang::CodeGen::Address::getType</a></div><div class="ttdeci">llvm::PointerType * getType() const</div><div class="ttdoc">Return the type of the pointer value.</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00176">Address.h:176</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1AggValueSlot_html_a0a3d1078f85b36699f59bdf81f20319aa9df550c4985c3c2c3156657c8c840297"><div class="ttname"><a href="classclang_1_1CodeGen_1_1AggValueSlot.html#a0a3d1078f85b36699f59bdf81f20319aa9df550c4985c3c2c3156657c8c840297">clang::CodeGen::AggValueSlot::DoesNotOverlap</a></div><div class="ttdeci">@ DoesNotOverlap</div><div class="ttdef"><b>Definition:</b> <a href="CGValue_8h_source.html#l00574">CGValue.h:574</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1ApplyDebugLocation_html_aa90c4f07b6d82797622594c49f4f022e"><div class="ttname"><a href="classclang_1_1CodeGen_1_1ApplyDebugLocation.html#aa90c4f07b6d82797622594c49f4f022e">clang::CodeGen::ApplyDebugLocation::CreateEmpty</a></div><div class="ttdeci">static ApplyDebugLocation CreateEmpty(CodeGenFunction &amp;CGF)</div><div class="ttdoc">Set the IRBuilder to not attach debug locations.</div><div class="ttdef"><b>Definition:</b> <a href="CGDebugInfo_8h_source.html#l00886">CGDebugInfo.h:886</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html">clang::CodeGen::CGBuilderTy</a></div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00050">CGBuilder.h:50</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html_a31c4f06bfbc1c841bb0d6707212d7354"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a31c4f06bfbc1c841bb0d6707212d7354">clang::CodeGen::CGBuilderTy::CreateGEP</a></div><div class="ttdeci">Address CreateGEP(CodeGenFunction &amp;CGF, Address Addr, llvm::Value *Index, const llvm::Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00292">CGBuilder.h:292</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html_a3f1ccfedc082a3145bbb91619ea60277"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a3f1ccfedc082a3145bbb91619ea60277">clang::CodeGen::CGBuilderTy::CreatePointerBitCastOrAddrSpaceCast</a></div><div class="ttdeci">Address CreatePointerBitCastOrAddrSpaceCast(Address Addr, llvm::Type *Ty, llvm::Type *ElementTy, const llvm::Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00203">CGBuilder.h:203</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html_a5f8f00a84115fa0de7ec827e117f5a8a"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a5f8f00a84115fa0de7ec827e117f5a8a">clang::CodeGen::CGBuilderTy::CreateStore</a></div><div class="ttdeci">llvm::StoreInst * CreateStore(llvm::Value *Val, Address Addr, bool IsVolatile=false)</div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00136">CGBuilder.h:136</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html_a855546cbb0fc9603255ebde993554e19"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html#a855546cbb0fc9603255ebde993554e19">clang::CodeGen::CGBuilderTy::CreateConstArrayGEP</a></div><div class="ttdeci">Address CreateConstArrayGEP(Address Addr, uint64_t Index, const llvm::Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Given addr = [n x T]* ...</div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00241">CGBuilder.h:241</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html_aa44627a34670f3a2fe50f38596e21428"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html#aa44627a34670f3a2fe50f38596e21428">clang::CodeGen::CGBuilderTy::CreateIsNull</a></div><div class="ttdeci">llvm::Value * CreateIsNull(Address Addr, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00355">CGBuilder.h:355</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html_acbfef79ff48d4d3b14d84a8696192e2d"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html#acbfef79ff48d4d3b14d84a8696192e2d">clang::CodeGen::CGBuilderTy::CreateConstGEP</a></div><div class="ttdeci">Address CreateConstGEP(Address Addr, uint64_t Index, const llvm::Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Given addr = T* ...</div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00278">CGBuilder.h:278</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html_ae58592c031a9400b3fbfeecfd18d1e33"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae58592c031a9400b3fbfeecfd18d1e33">clang::CodeGen::CGBuilderTy::CreateConstInBoundsGEP</a></div><div class="ttdeci">Address CreateConstInBoundsGEP(Address Addr, uint64_t Index, const llvm::Twine &amp;Name=&quot;&quot;)</div><div class="ttdoc">Given addr = T* ...</div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00261">CGBuilder.h:261</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGBuilderTy_html_ae7975a7578d12fa84314158c91421f9d"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGBuilderTy.html#ae7975a7578d12fa84314158c91421f9d">clang::CodeGen::CGBuilderTy::CreateInBoundsGEP</a></div><div class="ttdeci">Address CreateInBoundsGEP(Address Addr, ArrayRef&lt; llvm::Value * &gt; IdxList, llvm::Type *ElementType, CharUnits Align, const Twine &amp;Name=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="CGBuilder_8h_source.html#l00345">CGBuilder.h:345</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGFunctionInfo_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGFunctionInfo.html">clang::CodeGen::CGFunctionInfo</a></div><div class="ttdoc">CGFunctionInfo - Class to encapsulate the information about a function definition.</div><div class="ttdef"><b>Definition:</b> <a href="CGFunctionInfo_8h_source.html#l00551">CGFunctionInfo.h:554</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html">clang::CodeGen::CGOpenMPRuntimeGPU</a></div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8h_source.html#l00024">CGOpenMPRuntimeGPU.h:24</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a01d9e3e6f1818a945bd51b28ffeb6f21"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a01d9e3e6f1818a945bd51b28ffeb6f21">clang::CodeGen::CGOpenMPRuntimeGPU::emitParallelCall</a></div><div class="ttdeci">void emitParallelCall(CodeGenFunction &amp;CGF, SourceLocation Loc, llvm::Function *OutlinedFn, ArrayRef&lt; llvm::Value * &gt; CapturedVars, const Expr *IfCond, llvm::Value *NumThreads) override</div><div class="ttdoc">Emits code for parallel or serial call of the OutlinedFn with variables captured in a record which ad...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01230">CGOpenMPRuntimeGPU.cpp:1230</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a01f9a1d9f303aa6fdabcb85153f1096c"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a01f9a1d9f303aa6fdabcb85153f1096c">clang::CodeGen::CGOpenMPRuntimeGPU::emitTeamsOutlinedFunction</a></div><div class="ttdeci">llvm::Function * emitTeamsOutlinedFunction(CodeGenFunction &amp;CGF, const OMPExecutableDirective &amp;D, const VarDecl *ThreadIDVar, OpenMPDirectiveKind InnermostKind, const RegionCodeGenTy &amp;CodeGen) override</div><div class="ttdoc">Emits inlined function for the specified OpenMP teams.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00996">CGOpenMPRuntimeGPU.cpp:996</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a05ca3966a8de7baf36b32d6f743b2266"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a05ca3966a8de7baf36b32d6f743b2266">clang::CodeGen::CGOpenMPRuntimeGPU::emitProcBindClause</a></div><div class="ttdeci">void emitProcBindClause(CodeGenFunction &amp;CGF, llvm::omp::ProcBindKind ProcBind, SourceLocation Loc) override</div><div class="ttdoc">Emit call to void __kmpc_push_proc_bind(ident_t *loc, kmp_int32 global_tid, int proc_bind) to generat...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00921">CGOpenMPRuntimeGPU.cpp:921</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a06dcb970113cbba5bd3d545fb61dddc7"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a06dcb970113cbba5bd3d545fb61dddc7">clang::CodeGen::CGOpenMPRuntimeGPU::emitReduction</a></div><div class="ttdeci">void emitReduction(CodeGenFunction &amp;CGF, SourceLocation Loc, ArrayRef&lt; const Expr * &gt; Privates, ArrayRef&lt; const Expr * &gt; LHSExprs, ArrayRef&lt; const Expr * &gt; RHSExprs, ArrayRef&lt; const Expr * &gt; ReductionOps, ReductionOptionsTy Options) override</div><div class="ttdoc">Emit a code for reduction clause.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l02807">CGOpenMPRuntimeGPU.cpp:2807</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a0901452f843e26962262cde69855966c"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0901452f843e26962262cde69855966c">clang::CodeGen::CGOpenMPRuntimeGPU::DataSharingMode</a></div><div class="ttdeci">DataSharingMode</div><div class="ttdoc">Target codegen is specialized based on two data-sharing modes: CUDA, in which the local variables are...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8h_source.html#l00040">CGOpenMPRuntimeGPU.h:40</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a0901452f843e26962262cde69855966cabaf08fec9367dd94dc6fe6e626b412d0"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0901452f843e26962262cde69855966cabaf08fec9367dd94dc6fe6e626b412d0">clang::CodeGen::CGOpenMPRuntimeGPU::DS_CUDA</a></div><div class="ttdeci">@ DS_CUDA</div><div class="ttdoc">CUDA data sharing mode.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8h_source.html#l00042">CGOpenMPRuntimeGPU.h:42</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a0901452f843e26962262cde69855966caeb169e1878130b03e9abd3844ed9d24c"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0901452f843e26962262cde69855966caeb169e1878130b03e9abd3844ed9d24c">clang::CodeGen::CGOpenMPRuntimeGPU::DS_Generic</a></div><div class="ttdeci">@ DS_Generic</div><div class="ttdoc">Generic data-sharing mode.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8h_source.html#l00044">CGOpenMPRuntimeGPU.h:44</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a0c5bac9e1e2b5fdd00b6e5273684f9f1"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0c5bac9e1e2b5fdd00b6e5273684f9f1">clang::CodeGen::CGOpenMPRuntimeGPU::getDefaultDistScheduleAndChunk</a></div><div class="ttdeci">void getDefaultDistScheduleAndChunk(CodeGenFunction &amp;CGF, const OMPLoopDirective &amp;S, OpenMPDistScheduleClauseKind &amp;ScheduleKind, llvm::Value *&amp;Chunk) const override</div><div class="ttdoc">Choose a default value for the dist_schedule clause.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03332">CGOpenMPRuntimeGPU.cpp:3332</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a0e0219b0364ab67502a871eda96c84e6"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a0e0219b0364ab67502a871eda96c84e6">clang::CodeGen::CGOpenMPRuntimeGPU::getAddressOfLocalVariable</a></div><div class="ttdeci">Address getAddressOfLocalVariable(CodeGenFunction &amp;CGF, const VarDecl *VD) override</div><div class="ttdoc">Gets the OpenMP-specific address of the local variable.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03258">CGOpenMPRuntimeGPU.cpp:3258</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a11ed023e8ad6cd67fe2d2f712985605a"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a11ed023e8ad6cd67fe2d2f712985605a">clang::CodeGen::CGOpenMPRuntimeGPU::emitFunctionProlog</a></div><div class="ttdeci">void emitFunctionProlog(CodeGenFunction &amp;CGF, const Decl *D) override</div><div class="ttdoc">Emits OpenMP-specific function prolog.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03191">CGOpenMPRuntimeGPU.cpp:3191</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a26bcaa52dbff84edb645c0e68d0c5b82"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a26bcaa52dbff84edb645c0e68d0c5b82">clang::CodeGen::CGOpenMPRuntimeGPU::getDefaultScheduleAndChunk</a></div><div class="ttdeci">void getDefaultScheduleAndChunk(CodeGenFunction &amp;CGF, const OMPLoopDirective &amp;S, OpenMPScheduleClauseKind &amp;ScheduleKind, const Expr *&amp;ChunkExpr) const override</div><div class="ttdoc">Choose a default value for the schedule clause.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03349">CGOpenMPRuntimeGPU.cpp:3349</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a336c7c1159ff2b47325b4fff0c63794b"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a336c7c1159ff2b47325b4fff0c63794b">clang::CodeGen::CGOpenMPRuntimeGPU::emitNumTeamsClause</a></div><div class="ttdeci">void emitNumTeamsClause(CodeGenFunction &amp;CGF, const Expr *NumTeams, const Expr *ThreadLimit, SourceLocation Loc) override</div><div class="ttdoc">This function ought to emit, in the general case, a call to.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00933">CGOpenMPRuntimeGPU.cpp:933</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a35e2468898e38e663654af3f25fc561f"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a35e2468898e38e663654af3f25fc561f">clang::CodeGen::CGOpenMPRuntimeGPU::emitCriticalRegion</a></div><div class="ttdeci">void emitCriticalRegion(CodeGenFunction &amp;CGF, StringRef CriticalName, const RegionCodeGenTy &amp;CriticalOpGen, SourceLocation Loc, const Expr *Hint=nullptr) override</div><div class="ttdoc">Emits a critical region.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01342">CGOpenMPRuntimeGPU.cpp:1342</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a521affafbffe2049118e934abee07fc7"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a521affafbffe2049118e934abee07fc7">clang::CodeGen::CGOpenMPRuntimeGPU::emitTeamsCall</a></div><div class="ttdeci">void emitTeamsCall(CodeGenFunction &amp;CGF, const OMPExecutableDirective &amp;D, SourceLocation Loc, llvm::Function *OutlinedFn, ArrayRef&lt; llvm::Value * &gt; CapturedVars) override</div><div class="ttdoc">Emits code for teams call of the OutlinedFn with variables captured in a record which address is stor...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01205">CGOpenMPRuntimeGPU.cpp:1205</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a57bcc86086aa59ec1464f53921aba0e1"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a57bcc86086aa59ec1464f53921aba0e1">clang::CodeGen::CGOpenMPRuntimeGPU::hasAllocateAttributeForGlobalVar</a></div><div class="ttdeci">bool hasAllocateAttributeForGlobalVar(const VarDecl *VD, LangAS &amp;AS) override</div><div class="ttdoc">Checks if the variable has associated OMPAllocateDeclAttr attribute with the predefined allocator and...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03415">CGOpenMPRuntimeGPU.cpp:3415</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a5db59671b797ac20480321889b323d25"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a5db59671b797ac20480321889b323d25">clang::CodeGen::CGOpenMPRuntimeGPU::getKmpcFreeShared</a></div><div class="ttdeci">void getKmpcFreeShared(CodeGenFunction &amp;CGF, const std::pair&lt; llvm::Value *, llvm::Value * &gt; &amp;AddrSizePair) override</div><div class="ttdoc">Get call to __kmpc_free_shared.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01168">CGOpenMPRuntimeGPU.cpp:1168</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a5f3d80a1309ae938a3b132672fd438ec"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a5f3d80a1309ae938a3b132672fd438ec">clang::CodeGen::CGOpenMPRuntimeGPU::CGOpenMPRuntimeGPU</a></div><div class="ttdeci">CGOpenMPRuntimeGPU(CodeGenModule &amp;CGM)</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00890">CGOpenMPRuntimeGPU.cpp:890</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a600990069fa4059ad332f29e1c80e976"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a600990069fa4059ad332f29e1c80e976">clang::CodeGen::CGOpenMPRuntimeGPU::emitParallelOutlinedFunction</a></div><div class="ttdeci">llvm::Function * emitParallelOutlinedFunction(CodeGenFunction &amp;CGF, const OMPExecutableDirective &amp;D, const VarDecl *ThreadIDVar, OpenMPDirectiveKind InnermostKind, const RegionCodeGenTy &amp;CodeGen) override</div><div class="ttdoc">Emits inlined function for the specified OpenMP parallel.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00938">CGOpenMPRuntimeGPU.cpp:938</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a69a36112c5c4af567f66865c78f71c8a"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a69a36112c5c4af567f66865c78f71c8a">clang::CodeGen::CGOpenMPRuntimeGPU::functionFinished</a></div><div class="ttdeci">void functionFinished(CodeGenFunction &amp;CGF) override</div><div class="ttdoc">Cleans up references to the objects in finished function.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03327">CGOpenMPRuntimeGPU.cpp:3327</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a6b7f0061aae68808348ed9e5e5cc81ac"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a6b7f0061aae68808348ed9e5e5cc81ac">clang::CodeGen::CGOpenMPRuntimeGPU::getGPUThreadID</a></div><div class="ttdeci">llvm::Value * getGPUThreadID(CodeGenFunction &amp;CGF)</div><div class="ttdoc">Get the id of the current thread on the GPU.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03563">CGOpenMPRuntimeGPU.cpp:3563</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a72a0f50977ffff3f0c29f961dc237ed5"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a72a0f50977ffff3f0c29f961dc237ed5">clang::CodeGen::CGOpenMPRuntimeGPU::getGPUWarpSize</a></div><div class="ttdeci">llvm::Value * getGPUWarpSize(CodeGenFunction &amp;CGF)</div><div class="ttdoc">Get the GPU warp size.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03571">CGOpenMPRuntimeGPU.cpp:3571</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a9c92dd9bc3afabcdfa815a1fc6c3d0ea"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9c92dd9bc3afabcdfa815a1fc6c3d0ea">clang::CodeGen::CGOpenMPRuntimeGPU::processRequiresDirective</a></div><div class="ttdeci">void processRequiresDirective(const OMPRequiresDecl *D) override</div><div class="ttdoc">Perform check on requires decl to ensure that target architecture supports unified addressing.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03460">CGOpenMPRuntimeGPU.cpp:3460</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a9e42d0cd9ecf8445265b6df0aa5f5fbe"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9e42d0cd9ecf8445265b6df0aa5f5fbe">clang::CodeGen::CGOpenMPRuntimeGPU::emitOutlinedFunctionCall</a></div><div class="ttdeci">void emitOutlinedFunctionCall(CodeGenFunction &amp;CGF, SourceLocation Loc, llvm::FunctionCallee OutlinedFn, ArrayRef&lt; llvm::Value * &gt; Args=std::nullopt) const override</div><div class="ttdoc">Emits call of the outlined function with the provided arguments, translating these arguments to corre...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03037">CGOpenMPRuntimeGPU.cpp:3037</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_a9f1d9c8e36c2d5d72fb9cb18e083a8c7"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#a9f1d9c8e36c2d5d72fb9cb18e083a8c7">clang::CodeGen::CGOpenMPRuntimeGPU::isDelayedVariableLengthDecl</a></div><div class="ttdeci">bool isDelayedVariableLengthDecl(CodeGenFunction &amp;CGF, const VarDecl *VD) const override</div><div class="ttdoc">Declare generalized virtual functions which need to be defined by all specializations of OpenMPGPURun...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01131">CGOpenMPRuntimeGPU.cpp:1131</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_aa3b8482eb573e08cb45c62b92b97ddd7"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#aa3b8482eb573e08cb45c62b92b97ddd7">clang::CodeGen::CGOpenMPRuntimeGPU::getParameterAddress</a></div><div class="ttdeci">Address getParameterAddress(CodeGenFunction &amp;CGF, const VarDecl *NativeParam, const VarDecl *TargetParam) const override</div><div class="ttdoc">Gets the address of the native argument basing on the address of the target-specific parameter.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03011">CGOpenMPRuntimeGPU.cpp:3011</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_ab1e14485c95827672479ba726a523d0c"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0c">clang::CodeGen::CGOpenMPRuntimeGPU::ExecutionMode</a></div><div class="ttdeci">ExecutionMode</div><div class="ttdoc">Defines the execution mode.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8h_source.html#l00027">CGOpenMPRuntimeGPU.h:27</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_ab1e14485c95827672479ba726a523d0ca7747411110365a07a15d5b82858c40a3"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0ca7747411110365a07a15d5b82858c40a3">clang::CodeGen::CGOpenMPRuntimeGPU::EM_Unknown</a></div><div class="ttdeci">@ EM_Unknown</div><div class="ttdoc">Unknown execution mode (orphaned directive).</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8h_source.html#l00033">CGOpenMPRuntimeGPU.h:33</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_ab1e14485c95827672479ba726a523d0caede34f8e39ca7329156d28f1859d1bf7"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab1e14485c95827672479ba726a523d0caede34f8e39ca7329156d28f1859d1bf7">clang::CodeGen::CGOpenMPRuntimeGPU::EM_SPMD</a></div><div class="ttdeci">@ EM_SPMD</div><div class="ttdoc">SPMD execution mode (all threads are worker threads).</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8h_source.html#l00029">CGOpenMPRuntimeGPU.h:29</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_ab97c3a1b79696c76113390f7f0f570bf"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab97c3a1b79696c76113390f7f0f570bf">clang::CodeGen::CGOpenMPRuntimeGPU::emitBarrierCall</a></div><div class="ttdeci">void emitBarrierCall(CodeGenFunction &amp;CGF, SourceLocation Loc, OpenMPDirectiveKind Kind, bool EmitChecks=true, bool ForceSimpleCall=false) override</div><div class="ttdoc">Emit an implicit/explicit barrier for OpenMP threads.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01325">CGOpenMPRuntimeGPU.cpp:1325</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_ab9ab384c6f9f3ee61a27eb226982b2e9"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ab9ab384c6f9f3ee61a27eb226982b2e9">clang::CodeGen::CGOpenMPRuntimeGPU::getGPUNumThreads</a></div><div class="ttdeci">llvm::Value * getGPUNumThreads(CodeGenFunction &amp;CGF)</div><div class="ttdoc">Get the maximum number of threads in a block of the GPU.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03550">CGOpenMPRuntimeGPU.cpp:3550</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_abffc64bff273d21ad4bd205a2829c4eb"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#abffc64bff273d21ad4bd205a2829c4eb">clang::CodeGen::CGOpenMPRuntimeGPU::translateParameter</a></div><div class="ttdeci">const VarDecl * translateParameter(const FieldDecl *FD, const VarDecl *NativeParam) const override</div><div class="ttdoc">Translates the native parameter of outlined function if this is required for target.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l02979">CGOpenMPRuntimeGPU.cpp:2979</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_ac6746ae1835bf3909cdfdb2108b9ea77"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ac6746ae1835bf3909cdfdb2108b9ea77">clang::CodeGen::CGOpenMPRuntimeGPU::getKmpcAllocShared</a></div><div class="ttdeci">std::pair&lt; llvm::Value *, llvm::Value * &gt; getKmpcAllocShared(CodeGenFunction &amp;CGF, const VarDecl *VD) override</div><div class="ttdoc">Get call to __kmpc_alloc_shared.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01142">CGOpenMPRuntimeGPU.cpp:1142</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_ac9be0d9fe786cc93c866e2ac7c458999"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ac9be0d9fe786cc93c866e2ac7c458999">clang::CodeGen::CGOpenMPRuntimeGPU::isGPU</a></div><div class="ttdeci">bool isGPU() const override</div><div class="ttdoc">Returns true if the current target is a GPU.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8h_source.html#l00134">CGOpenMPRuntimeGPU.h:134</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_ad6468b8c95a5c025aadcac34787d19d7"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#ad6468b8c95a5c025aadcac34787d19d7">clang::CodeGen::CGOpenMPRuntimeGPU::emitNumThreadsClause</a></div><div class="ttdeci">void emitNumThreadsClause(CodeGenFunction &amp;CGF, llvm::Value *NumThreads, SourceLocation Loc) override</div><div class="ttdoc">Emits call to void __kmpc_push_num_threads(ident_t *loc, kmp_int32 global_tid, kmp_int32 num_threads)...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l00927">CGOpenMPRuntimeGPU.cpp:927</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU_html_af94531ac8c69b4d48e585d4b97350fd5"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntimeGPU.html#af94531ac8c69b4d48e585d4b97350fd5">clang::CodeGen::CGOpenMPRuntimeGPU::adjustTargetSpecificDataForLambdas</a></div><div class="ttdeci">void adjustTargetSpecificDataForLambdas(CodeGenFunction &amp;CGF, const OMPExecutableDirective &amp;D) const override</div><div class="ttdoc">Adjust some parameters for the target-based directives, like addresses of the variables captured by r...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l03361">CGOpenMPRuntimeGPU.cpp:3361</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html">clang::CodeGen::CGOpenMPRuntime</a></div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8h_source.html#l00229">CGOpenMPRuntime.h:229</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a013c8313e33d0c4e027822d270d08ac4"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a013c8313e33d0c4e027822d270d08ac4">clang::CodeGen::CGOpenMPRuntime::emitThreadIDAddress</a></div><div class="ttdeci">virtual Address emitThreadIDAddress(CodeGenFunction &amp;CGF, SourceLocation Loc)</div><div class="ttdoc">Emits address of the word in a memory where current thread id is stored.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l01944">CGOpenMPRuntime.cpp:1944</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a19b99808bbd6b4106578a897124f7688"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a19b99808bbd6b4106578a897124f7688">clang::CodeGen::CGOpenMPRuntime::CGM</a></div><div class="ttdeci">CodeGenModule &amp; CGM</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8h_source.html#l00309">CGOpenMPRuntime.h:309</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a34deac6afc54d401ea44e65d13b17be6"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a34deac6afc54d401ea44e65d13b17be6">clang::CodeGen::CGOpenMPRuntime::getSingleCompoundChild</a></div><div class="ttdeci">static const Stmt * getSingleCompoundChild(ASTContext &amp;Ctx, const Stmt *Body)</div><div class="ttdoc">Checks if the Body is the CompoundStmt and returns its child statement iff there is only one that is ...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l05972">CGOpenMPRuntime.cpp:5972</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a3b70e2e3825d7f69be6a179bf90b5583"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a3b70e2e3825d7f69be6a179bf90b5583">clang::CodeGen::CGOpenMPRuntime::emitUpdateLocation</a></div><div class="ttdeci">llvm::Value * emitUpdateLocation(CodeGenFunction &amp;CGF, SourceLocation Loc, unsigned Flags=0, bool EmitLoc=false)</div><div class="ttdoc">Emits object of ident_t type with info for source location.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l01366">CGOpenMPRuntime.cpp:1366</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a3e3402fcb44557e2abeadd35a7e7238e"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a3e3402fcb44557e2abeadd35a7e7238e">clang::CodeGen::CGOpenMPRuntime::getOMPBuilder</a></div><div class="ttdeci">llvm::OpenMPIRBuilder &amp; getOMPBuilder()</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8h_source.html#l00306">CGOpenMPRuntime.h:306</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a485d3941ed5d144212a4a8d38f59da23"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a485d3941ed5d144212a4a8d38f59da23">clang::CodeGen::CGOpenMPRuntime::functionFinished</a></div><div class="ttdeci">virtual void functionFinished(CodeGenFunction &amp;CGF)</div><div class="ttdoc">Cleans up references to the objects in finished function.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l01461">CGOpenMPRuntime.cpp:1461</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a4c1dd7002cc1d577055dd57885f11be6"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4c1dd7002cc1d577055dd57885f11be6">clang::CodeGen::CGOpenMPRuntime::emitTeamsOutlinedFunction</a></div><div class="ttdeci">virtual llvm::Function * emitTeamsOutlinedFunction(CodeGenFunction &amp;CGF, const OMPExecutableDirective &amp;D, const VarDecl *ThreadIDVar, OpenMPDirectiveKind InnermostKind, const RegionCodeGenTy &amp;CodeGen)</div><div class="ttdoc">Emits outlined function for the specified OpenMP teams directive D.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l01271">CGOpenMPRuntime.cpp:1271</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a4ebf626397570f9442eadc8652cf5532"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a4ebf626397570f9442eadc8652cf5532">clang::CodeGen::CGOpenMPRuntime::OMPBuilder</a></div><div class="ttdeci">llvm::OpenMPIRBuilder OMPBuilder</div><div class="ttdoc">An OpenMP-IR-Builder instance.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8h_source.html#l00312">CGOpenMPRuntime.h:312</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a6e80064fefd39b7477510caaf7d44bee"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a6e80064fefd39b7477510caaf7d44bee">clang::CodeGen::CGOpenMPRuntime::hasRequiresUnifiedSharedMemory</a></div><div class="ttdeci">bool hasRequiresUnifiedSharedMemory() const</div><div class="ttdoc">Return whether the unified_shared_memory has been specified.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l10080">CGOpenMPRuntime.cpp:10080</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a7460ab8b0d77e17e08c8e5399005219f"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a7460ab8b0d77e17e08c8e5399005219f">clang::CodeGen::CGOpenMPRuntime::processRequiresDirective</a></div><div class="ttdeci">virtual void processRequiresDirective(const OMPRequiresDecl *D)</div><div class="ttdoc">Perform check on requires decl to ensure that target architecture supports unified addressing.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l10027">CGOpenMPRuntime.cpp:10027</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a77456971682b73c927c7f76aa5ad3ac0"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a77456971682b73c927c7f76aa5ad3ac0">clang::CodeGen::CGOpenMPRuntime::getThreadID</a></div><div class="ttdeci">llvm::Value * getThreadID(CodeGenFunction &amp;CGF, SourceLocation Loc)</div><div class="ttdoc">Gets thread id value for the current thread.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l01391">CGOpenMPRuntime.cpp:1391</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a7ad29b68e3f94284eec6f66a572236b1"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a7ad29b68e3f94284eec6f66a572236b1">clang::CodeGen::CGOpenMPRuntime::clearLocThreadIdInsertPt</a></div><div class="ttdeci">void clearLocThreadIdInsertPt(CodeGenFunction &amp;CGF)</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l01344">CGOpenMPRuntime.cpp:1344</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a8ccc3e674e91675658b9f62746e419c6"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a8ccc3e674e91675658b9f62746e419c6">clang::CodeGen::CGOpenMPRuntime::emitBarrierCall</a></div><div class="ttdeci">virtual void emitBarrierCall(CodeGenFunction &amp;CGF, SourceLocation Loc, OpenMPDirectiveKind Kind, bool EmitChecks=true, bool ForceSimpleCall=false)</div><div class="ttdoc">Emit an implicit/explicit barrier for OpenMP threads.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l02343">CGOpenMPRuntime.cpp:2343</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a8e61596f2b501281bd70649d262aa13c"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a8e61596f2b501281bd70649d262aa13c">clang::CodeGen::CGOpenMPRuntime::getDefaultFlagsForBarriers</a></div><div class="ttdeci">static unsigned getDefaultFlagsForBarriers(OpenMPDirectiveKind Kind)</div><div class="ttdoc">Returns default flags for the barriers depending on the directive, for which this barier is going to ...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l02310">CGOpenMPRuntime.cpp:2310</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_a9f395abd345c2908a00bd665d478fd9a"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#a9f395abd345c2908a00bd665d478fd9a">clang::CodeGen::CGOpenMPRuntime::emitParallelOutlinedFunction</a></div><div class="ttdeci">virtual llvm::Function * emitParallelOutlinedFunction(CodeGenFunction &amp;CGF, const OMPExecutableDirective &amp;D, const VarDecl *ThreadIDVar, OpenMPDirectiveKind InnermostKind, const RegionCodeGenTy &amp;CodeGen)</div><div class="ttdoc">Emits outlined function for the specified OpenMP parallel directive D.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l01261">CGOpenMPRuntime.cpp:1261</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_abedc27c178bbe37abb4bcdfb51b9e4ea"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#abedc27c178bbe37abb4bcdfb51b9e4ea">clang::CodeGen::CGOpenMPRuntime::getDefaultDistScheduleAndChunk</a></div><div class="ttdeci">virtual void getDefaultDistScheduleAndChunk(CodeGenFunction &amp;CGF, const OMPLoopDirective &amp;S, OpenMPDistScheduleClauseKind &amp;ScheduleKind, llvm::Value *&amp;Chunk) const</div><div class="ttdoc">Choose default schedule type and chunk value for the dist_schedule clause.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8h_source.html#l01523">CGOpenMPRuntime.h:1523</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_ac663d61a452955e716c3f917c6b20221"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#ac663d61a452955e716c3f917c6b20221">clang::CodeGen::CGOpenMPRuntime::getIdentTyPointerTy</a></div><div class="ttdeci">llvm::Type * getIdentTyPointerTy()</div><div class="ttdoc">Returns pointer to ident_t type.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l01482">CGOpenMPRuntime.cpp:1482</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_ac70a33b6ed0026bb2a9f40ba4dd96b0d"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#ac70a33b6ed0026bb2a9f40ba4dd96b0d">clang::CodeGen::CGOpenMPRuntime::emitSingleReductionCombiner</a></div><div class="ttdeci">void emitSingleReductionCombiner(CodeGenFunction &amp;CGF, const Expr *ReductionOp, const Expr *PrivateRef, const DeclRefExpr *LHS, const DeclRefExpr *RHS)</div><div class="ttdoc">Emits single reduction combiner.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l04900">CGOpenMPRuntime.cpp:4900</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_acfb6312269a11c93e9f0f5f2f0b817ac"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#acfb6312269a11c93e9f0f5f2f0b817ac">clang::CodeGen::CGOpenMPRuntime::emitCriticalRegion</a></div><div class="ttdeci">virtual void emitCriticalRegion(CodeGenFunction &amp;CGF, StringRef CriticalName, const RegionCodeGenTy &amp;CriticalOpGen, SourceLocation Loc, const Expr *Hint=nullptr)</div><div class="ttdoc">Emits a critical region.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l02006">CGOpenMPRuntime.cpp:2006</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_aed149fe9e2ab879c0f48912064e95f92"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#aed149fe9e2ab879c0f48912064e95f92">clang::CodeGen::CGOpenMPRuntime::emitReduction</a></div><div class="ttdeci">virtual void emitReduction(CodeGenFunction &amp;CGF, SourceLocation Loc, ArrayRef&lt; const Expr * &gt; Privates, ArrayRef&lt; const Expr * &gt; LHSExprs, ArrayRef&lt; const Expr * &gt; RHSExprs, ArrayRef&lt; const Expr * &gt; ReductionOps, ReductionOptionsTy Options)</div><div class="ttdoc">Emit a code for reduction clause.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l04920">CGOpenMPRuntime.cpp:4920</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_af546e72839c4357b485a7f41348b755a"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#af546e72839c4357b485a7f41348b755a">clang::CodeGen::CGOpenMPRuntime::emitOutlinedFunctionCall</a></div><div class="ttdeci">virtual void emitOutlinedFunctionCall(CodeGenFunction &amp;CGF, SourceLocation Loc, llvm::FunctionCallee OutlinedFn, ArrayRef&lt; llvm::Value * &gt; Args=std::nullopt) const</div><div class="ttdoc">Emits call of the outlined function with the provided arguments, translating these arguments to corre...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l11223">CGOpenMPRuntime.cpp:11223</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CGOpenMPRuntime_html_aff641facc0a6d677637723df7e5cae2f"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CGOpenMPRuntime.html#aff641facc0a6d677637723df7e5cae2f">clang::CodeGen::CGOpenMPRuntime::emitReductionFunction</a></div><div class="ttdeci">llvm::Function * emitReductionFunction(StringRef ReducerName, SourceLocation Loc, llvm::Type *ArgsElemType, ArrayRef&lt; const Expr * &gt; Privates, ArrayRef&lt; const Expr * &gt; LHSExprs, ArrayRef&lt; const Expr * &gt; RHSExprs, ArrayRef&lt; const Expr * &gt; ReductionOps)</div><div class="ttdoc">Emits reduction function.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8cpp_source.html#l04810">CGOpenMPRuntime.cpp:4810</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_1_1CGCapturedStmtInfo_html_a136a82df734378b8fa8bca127d5b0df3"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction_1_1CGCapturedStmtInfo.html#a136a82df734378b8fa8bca127d5b0df3">clang::CodeGen::CodeGenFunction::CGCapturedStmtInfo::getKind</a></div><div class="ttdeci">CapturedRegionKind getKind() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00482">CodeGenFunction.h:482</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_1_1CGCapturedStmtInfo_html_a3a9cc004d736b0db036aa0b613a46979"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction_1_1CGCapturedStmtInfo.html#a3a9cc004d736b0db036aa0b613a46979">clang::CodeGen::CodeGenFunction::CGCapturedStmtInfo::isCXXThisExprCaptured</a></div><div class="ttdeci">bool isCXXThisExprCaptured() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00493">CodeGenFunction.h:493</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_1_1OMPPrivateScope_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction_1_1OMPPrivateScope.html">clang::CodeGen::CodeGenFunction::OMPPrivateScope</a></div><div class="ttdoc">The scope used to remap some variables as private in the OpenMP loop body (or other captured region e...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l01120">CodeGenFunction.h:1120</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html">clang::CodeGen::CodeGenFunction</a></div><div class="ttdoc">CodeGenFunction - This class organizes the per-function state that is used while generating LLVM code...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00256">CodeGenFunction.h:256</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a0796665b4d44acd99539d24fb6be6184"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a0796665b4d44acd99539d24fb6be6184">clang::CodeGen::CodeGenFunction::EmitLoadOfReferenceLValue</a></div><div class="ttdeci">LValue EmitLoadOfReferenceLValue(LValue RefLVal)</div><div class="ttdef"><b>Definition:</b> <a href="CGExpr_8cpp_source.html#l02782">CGExpr.cpp:2782</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a0fe5273873e8ce1fab483cd99ed84000"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a0fe5273873e8ce1fab483cd99ed84000">clang::CodeGen::CodeGenFunction::EmitLValueForField</a></div><div class="ttdeci">LValue EmitLValueForField(LValue Base, const FieldDecl *Field)</div><div class="ttdef"><b>Definition:</b> <a href="CGExpr_8cpp_source.html#l04812">CGExpr.cpp:4812</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a1ccd343226e5bdfd99c6017f0ddfda20"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a1ccd343226e5bdfd99c6017f0ddfda20">clang::CodeGen::CodeGenFunction::ConvertType</a></div><div class="ttdeci">llvm::Type * ConvertType(QualType T)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l00232">CodeGenFunction.cpp:232</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a20b5348e851b83612ba250f18f67f705"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a20b5348e851b83612ba250f18f67f705">clang::CodeGen::CodeGenFunction::CapturedStmtInfo</a></div><div class="ttdeci">CGCapturedStmtInfo * CapturedStmtInfo</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00528">CodeGenFunction.h:528</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a239c983f96c4ab39307ffb5f99b73d7f"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a239c983f96c4ab39307ffb5f99b73d7f">clang::CodeGen::CodeGenFunction::LoadCXXThis</a></div><div class="ttdeci">llvm::Value * LoadCXXThis()</div><div class="ttdoc">LoadCXXThis - Load the value of 'this'.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02998">CodeGenFunction.h:2998</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a26d8547dd8e031970116491629669c39"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a26d8547dd8e031970116491629669c39">clang::CodeGen::CodeGenFunction::EmitLoadOfComplex</a></div><div class="ttdeci">ComplexPairTy EmitLoadOfComplex(LValue src, SourceLocation loc)</div><div class="ttdoc">EmitLoadOfComplex - Load a complex number from the specified l-value.</div><div class="ttdef"><b>Definition:</b> <a href="CGExprComplex_8cpp_source.html#l01497">CGExprComplex.cpp:1497</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a39c7c8b5f58bc5fa8511c2493c85cfe3"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a39c7c8b5f58bc5fa8511c2493c85cfe3">clang::CodeGen::CodeGenFunction::createBasicBlock</a></div><div class="ttdeci">llvm::BasicBlock * createBasicBlock(const Twine &amp;name=&quot;&quot;, llvm::Function *parent=nullptr, llvm::BasicBlock *before=nullptr)</div><div class="ttdoc">createBasicBlock - Create an LLVM basic block.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02566">CodeGenFunction.h:2566</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a3ab38e48e9cabd4b9b64555c6c825f06"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a3ab38e48e9cabd4b9b64555c6c825f06">clang::CodeGen::CodeGenFunction::getLLVMContext</a></div><div class="ttdeci">llvm::LLVMContext &amp; getLLVMContext()</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02157">CodeGenFunction.h:2157</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a4c20fadb4446090e59fcd468aa82e981"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a4c20fadb4446090e59fcd468aa82e981">clang::CodeGen::CodeGenFunction::EmitLoadOfPointer</a></div><div class="ttdeci">Address EmitLoadOfPointer(Address Ptr, const PointerType *PtrTy, LValueBaseInfo *BaseInfo=nullptr, TBAAAccessInfo *TBAAInfo=nullptr)</div><div class="ttdoc">Load a pointer with type PtrTy stored at address Ptr.</div><div class="ttdef"><b>Definition:</b> <a href="CGExpr_8cpp_source.html#l02791">CGExpr.cpp:2791</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a4c6cd74c3ad46fdf2094512686b10cbc"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a4c6cd74c3ad46fdf2094512686b10cbc">clang::CodeGen::CodeGenFunction::MakeNaturalAlignPointeeRawAddrLValue</a></div><div class="ttdeci">LValue MakeNaturalAlignPointeeRawAddrLValue(llvm::Value *V, QualType T)</div><div class="ttdoc">Same as MakeNaturalAlignPointeeAddrLValue except that the pointer is known to be unsigned.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l00223">CodeGenFunction.cpp:223</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a63fc9c5b566f21e623bd6c15515b8688"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a63fc9c5b566f21e623bd6c15515b8688">clang::CodeGen::CodeGenFunction::EmitAggregateCopy</a></div><div class="ttdeci">void EmitAggregateCopy(LValue Dest, LValue Src, QualType EltTy, AggValueSlot::Overlap_t MayOverlap, bool isVolatile=false)</div><div class="ttdoc">EmitAggregateCopy - Emit an aggregate copy.</div><div class="ttdef"><b>Definition:</b> <a href="CGExprAgg_8cpp_source.html#l02126">CGExprAgg.cpp:2126</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a65706fb353ad8c19024c1d3e48a839b0"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a65706fb353ad8c19024c1d3e48a839b0">clang::CodeGen::CodeGenFunction::CreateDefaultAlignTempAlloca</a></div><div class="ttdeci">RawAddress CreateDefaultAlignTempAlloca(llvm::Type *Ty, const Twine &amp;Name=&quot;tmp&quot;)</div><div class="ttdoc">CreateDefaultAlignedTempAlloca - This creates an alloca with the default ABI alignment of the given L...</div><div class="ttdef"><b>Definition:</b> <a href="CGExpr_8cpp_source.html#l00129">CGExpr.cpp:129</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a68cb014ddfbe2cff2ae2e47140850139"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a68cb014ddfbe2cff2ae2e47140850139">clang::CodeGen::CodeGenFunction::getContext</a></div><div class="ttdeci">ASTContext &amp; getContext() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02114">CodeGenFunction.h:2114</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a773426ce113953ed0e3e75885b61d9a8"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a773426ce113953ed0e3e75885b61d9a8">clang::CodeGen::CodeGenFunction::StartFunction</a></div><div class="ttdeci">void StartFunction(GlobalDecl GD, QualType RetTy, llvm::Function *Fn, const CGFunctionInfo &amp;FnInfo, const FunctionArgList &amp;Args, SourceLocation Loc=SourceLocation(), SourceLocation StartLoc=SourceLocation())</div><div class="ttdoc">Emit code for the start of a function.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l00912">CodeGenFunction.cpp:912</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a7b8c7e5a5818ebcdea197df5db92153c"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a7b8c7e5a5818ebcdea197df5db92153c">clang::CodeGen::CodeGenFunction::EvaluateExprAsBool</a></div><div class="ttdeci">llvm::Value * EvaluateExprAsBool(const Expr *E)</div><div class="ttdoc">EvaluateExprAsBool - Perform the usual unary conversions on the specified expression and compare the ...</div><div class="ttdef"><b>Definition:</b> <a href="CGExpr_8cpp_source.html#l00178">CGExpr.cpp:178</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a84fe1f7899f73123e897b6945c4d135e"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a84fe1f7899f73123e897b6945c4d135e">clang::CodeGen::CodeGenFunction::HaveInsertPoint</a></div><div class="ttdeci">bool HaveInsertPoint() const</div><div class="ttdoc">HaveInsertPoint - True if an insertion point is defined.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02607">CodeGenFunction.h:2607</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a8c0fcfd20bf12f8746d76d7cb8cc1604"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a8c0fcfd20bf12f8746d76d7cb8cc1604">clang::CodeGen::CodeGenFunction::getTypeSize</a></div><div class="ttdeci">llvm::Value * getTypeSize(QualType Ty)</div><div class="ttdoc">Returns calculated size of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="CGStmtOpenMP_8cpp_source.html#l00310">CGStmtOpenMP.cpp:310</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a8e2d33cb4583cb128c964a56c1ebd141"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a8e2d33cb4583cb128c964a56c1ebd141">clang::CodeGen::CodeGenFunction::EmitLValueForFieldInitialization</a></div><div class="ttdeci">LValue EmitLValueForFieldInitialization(LValue Base, const FieldDecl *Field)</div><div class="ttdoc">EmitLValueForFieldInitialization - Like EmitLValueForField, except that if the Field is a reference,...</div><div class="ttdef"><b>Definition:</b> <a href="CGExpr_8cpp_source.html#l04993">CGExpr.cpp:4993</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a919dceb77e599d6b0eea2c46597cbc28"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a919dceb77e599d6b0eea2c46597cbc28">clang::CodeGen::CodeGenFunction::EmitRuntimeCall</a></div><div class="ttdeci">llvm::CallInst * EmitRuntimeCall(llvm::FunctionCallee callee, const Twine &amp;name=&quot;&quot;)</div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a9340d803527eb2c2164d7ff1721bc98d"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a9340d803527eb2c2164d7ff1721bc98d">clang::CodeGen::CodeGenFunction::getTarget</a></div><div class="ttdeci">const TargetInfo &amp; getTarget() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02156">CodeGenFunction.h:2156</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a982c1e3091df3de75723921687460d3d"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a982c1e3091df3de75723921687460d3d">clang::CodeGen::CodeGenFunction::Builder</a></div><div class="ttdeci">CGBuilderTy Builder</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00294">CodeGenFunction.h:294</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_a9b8530f063bc2736b570c0b56a705d37"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#a9b8530f063bc2736b570c0b56a705d37">clang::CodeGen::CodeGenFunction::EHStack</a></div><div class="ttdeci">EHScopeStack EHStack</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00671">CodeGenFunction.h:671</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_aa0df047a8374a7b5e1696adb2d71a72c"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa0df047a8374a7b5e1696adb2d71a72c">clang::CodeGen::CodeGenFunction::getVLASize</a></div><div class="ttdeci">VlaSizePair getVLASize(const VariableArrayType *vla)</div><div class="ttdoc">Returns an LLVM value that corresponds to the size, in non-variably-sized elements,...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l02539">CodeGenFunction.cpp:2539</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_aa893cfd068618a6390d63f24b725801c"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa893cfd068618a6390d63f24b725801c">clang::CodeGen::CodeGenFunction::EmitLoadOfScalar</a></div><div class="ttdeci">llvm::Value * EmitLoadOfScalar(Address Addr, bool Volatile, QualType Ty, SourceLocation Loc, AlignmentSource Source=AlignmentSource::Type, bool isNontemporal=false)</div><div class="ttdoc">EmitLoadOfScalar - Load a scalar value from an address, taking care to appropriately convert from the...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l04107">CodeGenFunction.h:4107</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_aa903765558c8982b2d81d97e637adda1"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aa903765558c8982b2d81d97e637adda1">clang::CodeGen::CodeGenFunction::EmitStoreOfComplex</a></div><div class="ttdeci">void EmitStoreOfComplex(ComplexPairTy V, LValue dest, bool isInit)</div><div class="ttdoc">EmitStoreOfComplex - Store a complex number into the specified l-value.</div><div class="ttdef"><b>Definition:</b> <a href="CGExprComplex_8cpp_source.html#l01491">CGExprComplex.cpp:1491</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_aae2a6ad5f0ab2ff7b94e717a18352512"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#aae2a6ad5f0ab2ff7b94e717a18352512">clang::CodeGen::CodeGenFunction::getDebugInfo</a></div><div class="ttdeci">CGDebugInfo * getDebugInfo()</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02115">CodeGenFunction.h:2115</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ab96689ae1b68ca38dd3c382f54bcbcd7"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ab96689ae1b68ca38dd3c382f54bcbcd7">clang::CodeGen::CodeGenFunction::ConvertTypeForMem</a></div><div class="ttdeci">llvm::Type * ConvertTypeForMem(QualType T)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l00228">CodeGenFunction.cpp:228</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ac1be3afe566ffd19818efe9f6b07a8ea"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac1be3afe566ffd19818efe9f6b07a8ea">clang::CodeGen::CodeGenFunction::getEvaluationKind</a></div><div class="ttdeci">static TypeEvaluationKind getEvaluationKind(QualType T)</div><div class="ttdoc">getEvaluationKind - Return the TypeEvaluationKind of QualType T.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l00236">CodeGenFunction.cpp:236</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ac90e716619f634d438c02ba73caaafeb"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ac90e716619f634d438c02ba73caaafeb">clang::CodeGen::CodeGenFunction::CGM</a></div><div class="ttdeci">CodeGenModule &amp; CGM</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00286">CodeGenFunction.h:286</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_acd75804886d9542735d748f04de9efa1"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acd75804886d9542735d748f04de9efa1">clang::CodeGen::CodeGenFunction::EmitBranch</a></div><div class="ttdeci">void EmitBranch(llvm::BasicBlock *Block)</div><div class="ttdoc">EmitBranch - Emit a branch to the specified basic block from the current insert block,...</div><div class="ttdef"><b>Definition:</b> <a href="CGStmt_8cpp_source.html#l00598">CGStmt.cpp:598</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_acfec9edd1fdd85072c0de0052e6e0ef5"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#acfec9edd1fdd85072c0de0052e6e0ef5">clang::CodeGen::CodeGenFunction::CreateMemTemp</a></div><div class="ttdeci">RawAddress CreateMemTemp(QualType T, const Twine &amp;Name=&quot;tmp&quot;, RawAddress *Alloca=nullptr)</div><div class="ttdoc">CreateMemTemp - Create a temporary memory object of the given type, with appropriate alignmen and cas...</div><div class="ttdef"><b>Definition:</b> <a href="CGExpr_8cpp_source.html#l00141">CGExpr.cpp:141</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ade1be93e4c11e1945ef1c0d8bbc61ff8"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade1be93e4c11e1945ef1c0d8bbc61ff8">clang::CodeGen::CodeGenFunction::CurFn</a></div><div class="ttdeci">llvm::Function * CurFn</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00353">CodeGenFunction.h:353</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ade2d6e532eab8fcb03fa4126ca8f6d5d"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ade2d6e532eab8fcb03fa4126ca8f6d5d">clang::CodeGen::CodeGenFunction::MakeAddrLValue</a></div><div class="ttdeci">LValue MakeAddrLValue(Address Addr, QualType T, AlignmentSource Source=AlignmentSource::Type)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02658">CodeGenFunction.h:2658</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_adefc925f9c3921cc89f39663e2b2379e"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#adefc925f9c3921cc89f39663e2b2379e">clang::CodeGen::CodeGenFunction::FinishFunction</a></div><div class="ttdeci">void FinishFunction(SourceLocation EndLoc=SourceLocation())</div><div class="ttdoc">FinishFunction - Complete IR generation of the current function.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l00348">CodeGenFunction.cpp:348</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ae117c73d1875ea2133b7ee965af344bf"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae117c73d1875ea2133b7ee965af344bf">clang::CodeGen::CodeGenFunction::GetAddrOfLocalVar</a></div><div class="ttdeci">Address GetAddrOfLocalVar(const VarDecl *VD)</div><div class="ttdoc">GetAddrOfLocalVar - Return the address of a local variable.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02914">CodeGenFunction.h:2914</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ae417ed4971c18c5ce0607e1be62ec117"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae417ed4971c18c5ce0607e1be62ec117">clang::CodeGen::CodeGenFunction::ComplexPairTy</a></div><div class="ttdeci">std::pair&lt; llvm::Value *, llvm::Value * &gt; ComplexPairTy</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00292">CodeGenFunction.h:292</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ae541f30aa5aabcc74b8d843f4efd7b17"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae541f30aa5aabcc74b8d843f4efd7b17">clang::CodeGen::CodeGenFunction::EmitLValue</a></div><div class="ttdeci">LValue EmitLValue(const Expr *E, KnownNonNull_t IsKnownNonNull=NotKnownNonNull)</div><div class="ttdoc">EmitLValue - Emit code to compute a designator that specifies the location of the expression.</div><div class="ttdef"><b>Definition:</b> <a href="CGExpr_8cpp_source.html#l01497">CGExpr.cpp:1497</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_ae8fc4625f419a76656332581eb63d6b2"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#ae8fc4625f419a76656332581eb63d6b2">clang::CodeGen::CodeGenFunction::getTypes</a></div><div class="ttdeci">CodeGenTypes &amp; getTypes() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02113">CodeGenFunction.h:2113</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_af392c7e37d62759d5e607eaecd8a3e22"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#af392c7e37d62759d5e607eaecd8a3e22">clang::CodeGen::CodeGenFunction::EmitScalarConversion</a></div><div class="ttdeci">llvm::Value * EmitScalarConversion(llvm::Value *Src, QualType SrcTy, QualType DstTy, SourceLocation Loc)</div><div class="ttdoc">Emit a conversion from the specified type to the specified destination type, both of which are LLVM s...</div><div class="ttdef"><b>Definition:</b> <a href="CGExprScalar_8cpp_source.html#l05502">CGExprScalar.cpp:5502</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_afbe3c11fdf775f031cda9dd4dcbf64ae"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afbe3c11fdf775f031cda9dd4dcbf64ae">clang::CodeGen::CodeGenFunction::EmitStoreOfScalar</a></div><div class="ttdeci">void EmitStoreOfScalar(llvm::Value *Value, Address Addr, bool Volatile, QualType Ty, AlignmentSource Source=AlignmentSource::Type, bool isInit=false, bool isNontemporal=false)</div><div class="ttdoc">EmitStoreOfScalar - Store a scalar value to an address, taking care to appropriately convert from the...</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l04129">CodeGenFunction.h:4129</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_afdec5412ab40bb1923c689fe093f8871"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afdec5412ab40bb1923c689fe093f8871">clang::CodeGen::CodeGenFunction::EmitBlock</a></div><div class="ttdeci">void EmitBlock(llvm::BasicBlock *BB, bool IsFinished=false)</div><div class="ttdoc">EmitBlock - Emit the given block.</div><div class="ttdef"><b>Definition:</b> <a href="CGStmt_8cpp_source.html#l00578">CGStmt.cpp:578</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenFunction_html_afe567899b7e344def2c522f57d57e655"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenFunction.html#afe567899b7e344def2c522f57d57e655">clang::CodeGen::CodeGenFunction::MakeNaturalAlignRawAddrLValue</a></div><div class="ttdeci">LValue MakeNaturalAlignRawAddrLValue(llvm::Value *V, QualType T)</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8cpp_source.html#l00218">CodeGenFunction.cpp:218</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html">clang::CodeGen::CodeGenModule</a></div><div class="ttdoc">This class organizes the cross-function state that is used while generating LLVM code.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00281">CodeGenModule.h:281</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a099e9d7c130a8a6cd21c548889fa4b9a"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a099e9d7c130a8a6cd21c548889fa4b9a">clang::CodeGen::CodeGenModule::getOpenMPRuntime</a></div><div class="ttdeci">CGOpenMPRuntime &amp; getOpenMPRuntime()</div><div class="ttdoc">Return a reference to the configured OpenMP runtime.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00662">CodeGenModule.h:662</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a09a815215ff67d2e52b7605af35c40cb"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a09a815215ff67d2e52b7605af35c40cb">clang::CodeGen::CodeGenModule::getTarget</a></div><div class="ttdeci">const TargetInfo &amp; getTarget() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00776">CodeGenModule.h:776</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a0d41184ca8693cab4ed36a55a348bf86"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a0d41184ca8693cab4ed36a55a348bf86">clang::CodeGen::CodeGenModule::SetInternalFunctionAttributes</a></div><div class="ttdeci">void SetInternalFunctionAttributes(GlobalDecl GD, llvm::Function *F, const CGFunctionInfo &amp;FI)</div><div class="ttdoc">Set the attributes on the LLVM function for the given decl and function info.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8cpp_source.html#l02869">CodeGenModule.cpp:2869</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a1325760f10142c1da8521b53734858ef"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a1325760f10142c1da8521b53734858ef">clang::CodeGen::CodeGenModule::getTypes</a></div><div class="ttdeci">CodeGenTypes &amp; getTypes()</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00788">CodeGenModule.h:788</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a14d6c53710b0ea9878d0fa4e7e9d4978"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a14d6c53710b0ea9878d0fa4e7e9d4978">clang::CodeGen::CodeGenModule::addCompilerUsedGlobal</a></div><div class="ttdeci">void addCompilerUsedGlobal(llvm::GlobalValue *GV)</div><div class="ttdoc">Add a global to a list to be added to the llvm.compiler.used metadata.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8cpp_source.html#l03098">CodeGenModule.cpp:3098</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a39ec0b0e947ef63c1ee7346afbed83bf"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a39ec0b0e947ef63c1ee7346afbed83bf">clang::CodeGen::CodeGenModule::getModule</a></div><div class="ttdeci">llvm::Module &amp; getModule() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00771">CodeGenModule.h:771</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a5012e3315238d7f13994a844a1587ee8"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a5012e3315238d7f13994a844a1587ee8">clang::CodeGen::CodeGenModule::getLangOpts</a></div><div class="ttdeci">const LangOptions &amp; getLangOpts() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00762">CodeGenModule.h:762</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a6c8cff399ad98c730cce0907b1acd44e"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a6c8cff399ad98c730cce0907b1acd44e">clang::CodeGen::CodeGenModule::getLLVMContext</a></div><div class="ttdeci">llvm::LLVMContext &amp; getLLVMContext()</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00782">CodeGenModule.h:782</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_a780cdd48671d865670b7c51536e9664d"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#a780cdd48671d865670b7c51536e9664d">clang::CodeGen::CodeGenModule::Error</a></div><div class="ttdeci">void Error(SourceLocation loc, StringRef error)</div><div class="ttdoc">Emit a general error that something can't be done.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8cpp_source.html#l01581">CodeGenModule.cpp:1581</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenModule_html_ac72bf04603a604d7dea6f51739445a76"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenModule.html#ac72bf04603a604d7dea6f51739445a76">clang::CodeGen::CodeGenModule::getContext</a></div><div class="ttdeci">ASTContext &amp; getContext() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenModule_8h_source.html#l00761">CodeGenModule.h:761</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenTypes_html_a5e6c7473f14643c5a5b45ac9c0bb2ef8"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a5e6c7473f14643c5a5b45ac9c0bb2ef8">clang::CodeGen::CodeGenTypes::GetFunctionType</a></div><div class="ttdeci">llvm::FunctionType * GetFunctionType(const CGFunctionInfo &amp;Info)</div><div class="ttdoc">GetFunctionType - Get the LLVM function type for.</div><div class="ttdef"><b>Definition:</b> <a href="CGCall_8cpp_source.html#l01636">CGCall.cpp:1636</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenTypes_html_a6e2a1179e9475f17f7db1e6e642a43ec"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a6e2a1179e9475f17f7db1e6e642a43ec">clang::CodeGen::CodeGenTypes::arrangeBuiltinFunctionDeclaration</a></div><div class="ttdeci">const CGFunctionInfo &amp; arrangeBuiltinFunctionDeclaration(QualType resultType, const FunctionArgList &amp;args)</div><div class="ttdoc">A builtin function is a freestanding function using the default C conventions.</div><div class="ttdef"><b>Definition:</b> <a href="CGCall_8cpp_source.html#l00682">CGCall.cpp:682</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenTypes_html_a95e345a2d8e3d724926243cdea0f2533"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenTypes.html#a95e345a2d8e3d724926243cdea0f2533">clang::CodeGen::CodeGenTypes::getTargetAddressSpace</a></div><div class="ttdeci">unsigned getTargetAddressSpace(QualType T) const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypes_8cpp_source.html#l00933">CodeGenTypes.cpp:933</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1CodeGenTypes_html_addbcd8ec171784107b51a74441182bb7"><div class="ttname"><a href="classclang_1_1CodeGen_1_1CodeGenTypes.html#addbcd8ec171784107b51a74441182bb7">clang::CodeGen::CodeGenTypes::ConvertTypeForMem</a></div><div class="ttdeci">llvm::Type * ConvertTypeForMem(QualType T, bool ForBitField=false)</div><div class="ttdoc">ConvertTypeForMem - Convert type T into a llvm::Type.</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypes_8cpp_source.html#l00092">CodeGenTypes.cpp:92</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1EHScopeStack_1_1Cleanup_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1EHScopeStack_1_1Cleanup.html">clang::CodeGen::EHScopeStack::Cleanup</a></div><div class="ttdoc">Information for lazily generating a cleanup.</div><div class="ttdef"><b>Definition:</b> <a href="EHScopeStack_8h_source.html#l00141">EHScopeStack.h:141</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1FunctionArgList_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1FunctionArgList.html">clang::CodeGen::FunctionArgList</a></div><div class="ttdoc">FunctionArgList - Type for representing both the decl and type of parameters to a function.</div><div class="ttdef"><b>Definition:</b> <a href="CGCall_8h_source.html#l00351">CGCall.h:351</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1LValueBaseInfo_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1LValueBaseInfo.html">clang::CodeGen::LValueBaseInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="CGValue_8h_source.html#l00164">CGValue.h:164</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1LValue_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1LValue.html">clang::CodeGen::LValue</a></div><div class="ttdoc">LValue - This represents an lvalue references.</div><div class="ttdef"><b>Definition:</b> <a href="CGValue_8h_source.html#l00181">CGValue.h:181</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1LValue_html_a7f4854b60c6f7626344f156dad6e77c9"><div class="ttname"><a href="classclang_1_1CodeGen_1_1LValue.html#a7f4854b60c6f7626344f156dad6e77c9">clang::CodeGen::LValue::getAddress</a></div><div class="ttdeci">Address getAddress(CodeGenFunction &amp;CGF) const</div><div class="ttdef"><b>Definition:</b> <a href="CGValue_8h_source.html#l00370">CGValue.h:370</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1LValue_html_adfdbeccf2814d95fe299aeae6ac127b4"><div class="ttname"><a href="classclang_1_1CodeGen_1_1LValue.html#adfdbeccf2814d95fe299aeae6ac127b4">clang::CodeGen::LValue::getPointer</a></div><div class="ttdeci">llvm::Value * getPointer(CodeGenFunction &amp;CGF) const</div><div class="ttdef"><b>Definition:</b> <a href="CGValue_8h_source.html#l00361">CGValue.h:361</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1LValue_html_af7cae892f32a136f4c8163d6e2f1963b"><div class="ttname"><a href="classclang_1_1CodeGen_1_1LValue.html#af7cae892f32a136f4c8163d6e2f1963b">clang::CodeGen::LValue::setAddress</a></div><div class="ttdeci">void setAddress(Address address)</div><div class="ttdef"><b>Definition:</b> <a href="CGValue_8h_source.html#l00375">CGValue.h:375</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1PrePostActionTy_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1PrePostActionTy.html">clang::CodeGen::PrePostActionTy</a></div><div class="ttdoc">A basic class for pre|post-action for advanced codegen sequence for OpenMP region.</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8h_source.html#l00058">CGOpenMPRuntime.h:58</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1RawAddress_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1RawAddress.html">clang::CodeGen::RawAddress</a></div><div class="ttdoc">An abstract representation of an aligned address.</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00041">Address.h:41</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1RawAddress_html_a370668e6a9f843207d88820c26193cc9"><div class="ttname"><a href="classclang_1_1CodeGen_1_1RawAddress.html#a370668e6a9f843207d88820c26193cc9">clang::CodeGen::RawAddress::getPointer</a></div><div class="ttdeci">llvm::Value * getPointer() const</div><div class="ttdef"><b>Definition:</b> <a href="Address_8h_source.html#l00065">Address.h:65</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1RegionCodeGenTy_html"><div class="ttname"><a href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html">clang::CodeGen::RegionCodeGenTy</a></div><div class="ttdoc">Class provides a way to call simple version of codegen for OpenMP region, or an advanced with possibl...</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8h_source.html#l00068">CGOpenMPRuntime.h:68</a></div></div>
<div class="ttc" id="aclassclang_1_1CodeGen_1_1RegionCodeGenTy_html_a8eac2ee18b8f08f2458d6348adfe9b2e"><div class="ttname"><a href="classclang_1_1CodeGen_1_1RegionCodeGenTy.html#a8eac2ee18b8f08f2458d6348adfe9b2e">clang::CodeGen::RegionCodeGenTy::setAction</a></div><div class="ttdeci">void setAction(PrePostActionTy &amp;Action) const</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8h_source.html#l00089">CGOpenMPRuntime.h:89</a></div></div>
<div class="ttc" id="aclassclang_1_1ConstStmtVisitor_html"><div class="ttname"><a href="classclang_1_1ConstStmtVisitor.html">clang::ConstStmtVisitor</a></div><div class="ttdoc">ConstStmtVisitor - This class implements a simple visitor for Stmt subclasses.</div><div class="ttdef"><b>Definition:</b> <a href="StmtVisitor_8h_source.html#l00194">StmtVisitor.h:195</a></div></div>
<div class="ttc" id="aclassclang_1_1DeclContext_html"><div class="ttname"><a href="classclang_1_1DeclContext.html">clang::DeclContext</a></div><div class="ttdoc">DeclContext - This is used only as base class of specific decl types that can act as declaration cont...</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l01438">DeclBase.h:1438</a></div></div>
<div class="ttc" id="aclassclang_1_1DeclContext_html_a86d2d92d17fbed1a41461bef1ec5cef8"><div class="ttname"><a href="classclang_1_1DeclContext.html#a86d2d92d17fbed1a41461bef1ec5cef8">clang::DeclContext::addDecl</a></div><div class="ttdeci">void addDecl(Decl *D)</div><div class="ttdoc">Add the declaration D into this context.</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8cpp_source.html#l01698">DeclBase.cpp:1698</a></div></div>
<div class="ttc" id="aclassclang_1_1DeclRefExpr_html"><div class="ttname"><a href="classclang_1_1DeclRefExpr.html">clang::DeclRefExpr</a></div><div class="ttdoc">A reference to a declared variable, function, enum, etc.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l01256">Expr.h:1260</a></div></div>
<div class="ttc" id="aclassclang_1_1DeclRefExpr_html_a22eec021070f5d0733e90b6c5c127a25"><div class="ttname"><a href="classclang_1_1DeclRefExpr.html#a22eec021070f5d0733e90b6c5c127a25">clang::DeclRefExpr::getDecl</a></div><div class="ttdeci">ValueDecl * getDecl()</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l01328">Expr.h:1328</a></div></div>
<div class="ttc" id="aclassclang_1_1DeclStmt_html"><div class="ttname"><a href="classclang_1_1DeclStmt.html">clang::DeclStmt</a></div><div class="ttdoc">DeclStmt - Adaptor class for mixing declarations with statements and expressions.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l01497">Stmt.h:1497</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html"><div class="ttname"><a href="classclang_1_1Decl.html">clang::Decl</a></div><div class="ttdoc">Decl - This represents one declaration (or definition), e.g.</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00085">DeclBase.h:85</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a1e0b6223e2547ac65ddbf4802117998b"><div class="ttname"><a href="classclang_1_1Decl.html#a1e0b6223e2547ac65ddbf4802117998b">clang::Decl::hasAttrs</a></div><div class="ttdeci">bool hasAttrs() const</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00526">DeclBase.h:526</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a240e4f21d41a4395e86d349886d3a820"><div class="ttname"><a href="classclang_1_1Decl.html#a240e4f21d41a4395e86d349886d3a820">clang::Decl::attr_end</a></div><div class="ttdeci">attr_iterator attr_end() const</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00550">DeclBase.h:550</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a59463d45ab90b696a368b58d23eb49aa"><div class="ttname"><a href="classclang_1_1Decl.html#a59463d45ab90b696a368b58d23eb49aa">clang::Decl::getAttrs</a></div><div class="ttdeci">AttrVec &amp; getAttrs()</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00532">DeclBase.h:532</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a67ff088944d6f8571f001838f7ef1513"><div class="ttname"><a href="classclang_1_1Decl.html#a67ff088944d6f8571f001838f7ef1513">clang::Decl::isCanonicalDecl</a></div><div class="ttdeci">bool isCanonicalDecl() const</div><div class="ttdoc">Whether this particular Decl is a canonical one.</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00976">DeclBase.h:976</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a832f5604f151d17907f878ca685320c5"><div class="ttname"><a href="classclang_1_1Decl.html#a832f5604f151d17907f878ca685320c5">clang::Decl::attr_begin</a></div><div class="ttdeci">attr_iterator attr_begin() const</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00547">DeclBase.h:547</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a8dc8c86b18af77eba9afe42e4f429fdc"><div class="ttname"><a href="classclang_1_1Decl.html#a8dc8c86b18af77eba9afe42e4f429fdc">clang::Decl::getCanonicalDecl</a></div><div class="ttdeci">virtual Decl * getCanonicalDecl()</div><div class="ttdoc">Retrieves the &quot;canonical&quot; declaration of the given declaration.</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00970">DeclBase.h:970</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_a9ac934b2f7ae95704682dc44da1f0867"><div class="ttname"><a href="classclang_1_1Decl.html#a9ac934b2f7ae95704682dc44da1f0867">clang::Decl::getLocation</a></div><div class="ttdeci">SourceLocation getLocation() const</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00447">DeclBase.h:447</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_abe9f1fa0ebd703587762db886aabe459"><div class="ttname"><a href="classclang_1_1Decl.html#abe9f1fa0ebd703587762db886aabe459">clang::Decl::getBeginLoc</a></div><div class="ttdeci">SourceLocation getBeginLoc() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00439">DeclBase.h:439</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_ae7a63b99398864d86f53afd8a03c359b"><div class="ttname"><a href="classclang_1_1Decl.html#ae7a63b99398864d86f53afd8a03c359b">clang::Decl::hasAttr</a></div><div class="ttdeci">bool hasAttr() const</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00585">DeclBase.h:585</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_aef0e4b06e995dbc54de3cc99993edf5b"><div class="ttname"><a href="classclang_1_1Decl.html#aef0e4b06e995dbc54de3cc99993edf5b">clang::Decl::getAttr</a></div><div class="ttdeci">T * getAttr() const</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00581">DeclBase.h:581</a></div></div>
<div class="ttc" id="aclassclang_1_1Decl_html_af67e1a1d24dcc51093b95dbcf68d4288"><div class="ttname"><a href="classclang_1_1Decl.html#af67e1a1d24dcc51093b95dbcf68d4288">clang::Decl::getDeclContext</a></div><div class="ttdeci">DeclContext * getDeclContext()</div><div class="ttdef"><b>Definition:</b> <a href="DeclBase_8h_source.html#l00456">DeclBase.h:456</a></div></div>
<div class="ttc" id="aclassclang_1_1DeclaratorDecl_html_a73cead379a984c4b4ddb6e0d308725f6"><div class="ttname"><a href="classclang_1_1DeclaratorDecl.html#a73cead379a984c4b4ddb6e0d308725f6">clang::DeclaratorDecl::getBeginLoc</a></div><div class="ttdeci">SourceLocation getBeginLoc() const LLVM_READONLY</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l00823">Decl.h:823</a></div></div>
<div class="ttc" id="aclassclang_1_1Expr_html"><div class="ttname"><a href="classclang_1_1Expr.html">clang::Expr</a></div><div class="ttdoc">This represents one expression.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l00110">Expr.h:110</a></div></div>
<div class="ttc" id="aclassclang_1_1Expr_html_a54036c75e73ecdf081729210fa53e582"><div class="ttname"><a href="classclang_1_1Expr.html#a54036c75e73ecdf081729210fa53e582">clang::Expr::IgnoreParenImpCasts</a></div><div class="ttdeci">Expr * IgnoreParenImpCasts() LLVM_READONLY</div><div class="ttdoc">Skip past any parentheses and implicit casts which might surround this expression until reaching a fi...</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8cpp_source.html#l03111">Expr.cpp:3111</a></div></div>
<div class="ttc" id="aclassclang_1_1Expr_html_a6128786ad6c6ad61b66ad4ddf09b1bd8"><div class="ttname"><a href="classclang_1_1Expr.html#a6128786ad6c6ad61b66ad4ddf09b1bd8">clang::Expr::IgnoreParens</a></div><div class="ttdeci">Expr * IgnoreParens() LLVM_READONLY</div><div class="ttdoc">Skip past any parentheses which might surround this expression until reaching a fixed point.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8cpp_source.html#l03107">Expr.cpp:3107</a></div></div>
<div class="ttc" id="aclassclang_1_1Expr_html_a7ca271e78c095346d73202fcee93964c"><div class="ttname"><a href="classclang_1_1Expr.html#a7ca271e78c095346d73202fcee93964c">clang::Expr::isLValue</a></div><div class="ttdeci">bool isLValue() const</div><div class="ttdoc">isLValue - True if this expression is an &quot;l-value&quot; according to the rules of the current language.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l00277">Expr.h:277</a></div></div>
<div class="ttc" id="aclassclang_1_1Expr_html_ac9bfcc699442f2093723cfcf703d9f47"><div class="ttname"><a href="classclang_1_1Expr.html#ac9bfcc699442f2093723cfcf703d9f47">clang::Expr::getType</a></div><div class="ttdeci">QualType getType() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l00142">Expr.h:142</a></div></div>
<div class="ttc" id="aclassclang_1_1FieldDecl_html"><div class="ttname"><a href="classclang_1_1FieldDecl.html">clang::FieldDecl</a></div><div class="ttdoc">Represents a member of a struct/union/class.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l03059">Decl.h:3059</a></div></div>
<div class="ttc" id="aclassclang_1_1FieldDecl_html_aa67f7d522fa70461f5f8ee134bc0888f"><div class="ttname"><a href="classclang_1_1FieldDecl.html#aa67f7d522fa70461f5f8ee134bc0888f">clang::FieldDecl::Create</a></div><div class="ttdeci">static FieldDecl * Create(const ASTContext &amp;C, DeclContext *DC, SourceLocation StartLoc, SourceLocation IdLoc, const IdentifierInfo *Id, QualType T, TypeSourceInfo *TInfo, Expr *BW, bool Mutable, InClassInitStyle InitStyle)</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8cpp_source.html#l04551">Decl.cpp:4551</a></div></div>
<div class="ttc" id="aclassclang_1_1GlobalDecl_html"><div class="ttname"><a href="classclang_1_1GlobalDecl.html">clang::GlobalDecl</a></div><div class="ttdoc">GlobalDecl - represents a global declaration.</div><div class="ttdef"><b>Definition:</b> <a href="GlobalDecl_8h_source.html#l00056">GlobalDecl.h:56</a></div></div>
<div class="ttc" id="aclassclang_1_1ImplicitCastExpr_html"><div class="ttname"><a href="classclang_1_1ImplicitCastExpr.html">clang::ImplicitCastExpr</a></div><div class="ttdoc">ImplicitCastExpr - Allows us to explicitly represent implicit type conversions, which have no direct ...</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l03704">Expr.h:3707</a></div></div>
<div class="ttc" id="aclassclang_1_1ImplicitParamDecl_html"><div class="ttname"><a href="classclang_1_1ImplicitParamDecl.html">clang::ImplicitParamDecl</a></div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l01721">Decl.h:1721</a></div></div>
<div class="ttc" id="aclassclang_1_1ImplicitParamDecl_html_ab640a59be970445db638fb4dc77fce49"><div class="ttname"><a href="classclang_1_1ImplicitParamDecl.html#ab640a59be970445db638fb4dc77fce49">clang::ImplicitParamDecl::Create</a></div><div class="ttdeci">static ImplicitParamDecl * Create(ASTContext &amp;C, DeclContext *DC, SourceLocation IdLoc, IdentifierInfo *Id, QualType T, ImplicitParamKind ParamKind)</div><div class="ttdoc">Create implicit parameter.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8cpp_source.html#l05384">Decl.cpp:5384</a></div></div>
<div class="ttc" id="aclassclang_1_1IntegerLiteral_html_a68782c17506bd26183c21aa2bf9dc1d7"><div class="ttname"><a href="classclang_1_1IntegerLiteral.html#a68782c17506bd26183c21aa2bf9dc1d7">clang::IntegerLiteral::Create</a></div><div class="ttdeci">static IntegerLiteral * Create(const ASTContext &amp;C, const llvm::APInt &amp;V, QualType type, SourceLocation l)</div><div class="ttdoc">Returns a new integer literal with value 'V' and type 'type'.</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8cpp_source.html#l01032">Expr.cpp:1032</a></div></div>
<div class="ttc" id="aclassclang_1_1LambdaCapture_html"><div class="ttname"><a href="classclang_1_1LambdaCapture.html">clang::LambdaCapture</a></div><div class="ttdoc">Describes the capture of a variable or of this, or of a C++1y init-capture.</div><div class="ttdef"><b>Definition:</b> <a href="LambdaCapture_8h_source.html#l00025">LambdaCapture.h:25</a></div></div>
<div class="ttc" id="aclassclang_1_1LambdaExpr_html"><div class="ttname"><a href="classclang_1_1LambdaExpr.html">clang::LambdaExpr</a></div><div class="ttdoc">A C++ lambda expression, which produces a function object (of unspecified type) that can be invoked l...</div><div class="ttdef"><b>Definition:</b> <a href="ExprCXX_8h_source.html#l01947">ExprCXX.h:1948</a></div></div>
<div class="ttc" id="aclassclang_1_1LambdaExpr_html_a683e2c4c34cff42faa2c387d281e3f1d"><div class="ttname"><a href="classclang_1_1LambdaExpr.html#a683e2c4c34cff42faa2c387d281e3f1d">clang::LambdaExpr::isInitCapture</a></div><div class="ttdeci">bool isInitCapture(const LambdaCapture *Capture) const</div><div class="ttdoc">Determine whether one of this lambda's captures is an init-capture.</div><div class="ttdef"><b>Definition:</b> <a href="ExprCXX_8cpp_source.html#l01290">ExprCXX.cpp:1290</a></div></div>
<div class="ttc" id="aclassclang_1_1LambdaExpr_html_af67062fcaab4dc77808e7487048e58a2"><div class="ttname"><a href="classclang_1_1LambdaExpr.html#af67062fcaab4dc77808e7487048e58a2">clang::LambdaExpr::captures</a></div><div class="ttdeci">capture_range captures() const</div><div class="ttdoc">Retrieve this lambda's captures.</div><div class="ttdef"><b>Definition:</b> <a href="ExprCXX_8cpp_source.html#l01303">ExprCXX.cpp:1303</a></div></div>
<div class="ttc" id="aclassclang_1_1LangOptions_html_a91cf07350cc57571a829786c8fc2f163"><div class="ttname"><a href="classclang_1_1LangOptions.html#a91cf07350cc57571a829786c8fc2f163">clang::LangOptions::OMPHostIRFile</a></div><div class="ttdeci">std::string OMPHostIRFile</div><div class="ttdoc">Name of the IR file that contains the result of the OpenMP target host code generation.</div><div class="ttdef"><b>Definition:</b> <a href="LangOptions_8h_source.html#l00553">LangOptions.h:553</a></div></div>
<div class="ttc" id="aclassclang_1_1NamedDecl_html_a350fd0415d5f387716d5a970b9de4c29"><div class="ttname"><a href="classclang_1_1NamedDecl.html#a350fd0415d5f387716d5a970b9de4c29">clang::NamedDecl::getName</a></div><div class="ttdeci">StringRef getName() const</div><div class="ttdoc">Get the name of identifier for this declaration as a StringRef.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l00276">Decl.h:276</a></div></div>
<div class="ttc" id="aclassclang_1_1NamedDecl_html_a7fab32caa3b7d601128265248260fd37"><div class="ttname"><a href="classclang_1_1NamedDecl.html#a7fab32caa3b7d601128265248260fd37">clang::NamedDecl::getIdentifier</a></div><div class="ttdeci">IdentifierInfo * getIdentifier() const</div><div class="ttdoc">Get the identifier that names this declaration, if there is one.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l00270">Decl.h:270</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPClause_html"><div class="ttname"><a href="classclang_1_1OMPClause.html">clang::OMPClause</a></div><div class="ttdoc">This is a basic class for representing single OpenMP clause.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPClause_8h_source.html#l00055">OpenMPClause.h:55</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html">clang::OMPExecutableDirective</a></div><div class="ttdoc">This is a basic class for representing single OpenMP executable directive.</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00266">StmtOpenMP.h:266</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html_a1c8fb64de627234c00125b9ff6bafed4"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html#a1c8fb64de627234c00125b9ff6bafed4">clang::OMPExecutableDirective::hasAssociatedStmt</a></div><div class="ttdeci">bool hasAssociatedStmt() const</div><div class="ttdoc">Returns true if directive has associated statement.</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00531">StmtOpenMP.h:531</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html_a3db24e9e5eb37dd7d7c8c00d65b129a3"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html#a3db24e9e5eb37dd7d7c8c00d65b129a3">clang::OMPExecutableDirective::getDirectiveKind</a></div><div class="ttdeci">OpenMPDirectiveKind getDirectiveKind() const</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00569">StmtOpenMP.h:569</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html_a65fd6c1771ce206aea971592c4cacc97"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html#a65fd6c1771ce206aea971592c4cacc97">clang::OMPExecutableDirective::getInnermostCapturedStmt</a></div><div class="ttdeci">CapturedStmt * getInnermostCapturedStmt()</div><div class="ttdoc">Get innermost captured statement for the construct.</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00556">StmtOpenMP.h:556</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html_a6a93ab60ed9eaf3c67305ba6b203c884"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html#a6a93ab60ed9eaf3c67305ba6b203c884">clang::OMPExecutableDirective::getBeginLoc</a></div><div class="ttdeci">SourceLocation getBeginLoc() const</div><div class="ttdoc">Returns starting location of directive kind.</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00502">StmtOpenMP.h:502</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html_a91f7698117747dc9b8886f6e3bee6a0f"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html#a91f7698117747dc9b8886f6e3bee6a0f">clang::OMPExecutableDirective::clauses</a></div><div class="ttdeci">ArrayRef&lt; OMPClause * &gt; clauses() const</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00586">StmtOpenMP.h:586</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html_ab6926c2d778083e65823350e8cf3b974"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html#ab6926c2d778083e65823350e8cf3b974">clang::OMPExecutableDirective::getClausesOfKind</a></div><div class="ttdeci">static llvm::iterator_range&lt; specific_clause_iterator&lt; SpecificClause &gt; &gt; getClausesOfKind(ArrayRef&lt; OMPClause * &gt; Clauses)</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00459">StmtOpenMP.h:459</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html_ac639a6cbe96ac4fda549d182a44ba8c3"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html#ac639a6cbe96ac4fda549d182a44ba8c3">clang::OMPExecutableDirective::getCapturedStmt</a></div><div class="ttdeci">const CapturedStmt * getCapturedStmt(OpenMPDirectiveKind RegionKind) const</div><div class="ttdoc">Returns the captured statement associated with the component region within the (combined) directive.</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00547">StmtOpenMP.h:547</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html_ae1b5a0e3119bfac66fc55e154af1baff"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html#ae1b5a0e3119bfac66fc55e154af1baff">clang::OMPExecutableDirective::getSingleClause</a></div><div class="ttdeci">static const SpecificClause * getSingleClause(ArrayRef&lt; OMPClause * &gt; Clauses)</div><div class="ttdoc">Gets a single clause of the specified kind associated with the current directive iff there is only on...</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00477">StmtOpenMP.h:477</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPExecutableDirective_html_af43ffb5d76e7022f8d96d74d2c556ca3"><div class="ttname"><a href="classclang_1_1OMPExecutableDirective.html#af43ffb5d76e7022f8d96d74d2c556ca3">clang::OMPExecutableDirective::getAssociatedStmt</a></div><div class="ttdeci">const Stmt * getAssociatedStmt() const</div><div class="ttdoc">Returns statement associated with the directive.</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l00534">StmtOpenMP.h:534</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPLastprivateClause_html"><div class="ttname"><a href="classclang_1_1OMPLastprivateClause.html">clang::OMPLastprivateClause</a></div><div class="ttdoc">This represents clause 'lastprivate' in the '#pragma omp ...' directives.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPClause_8h_source.html#l02893">OpenMPClause.h:2896</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPLoopDirective_html"><div class="ttname"><a href="classclang_1_1OMPLoopDirective.html">clang::OMPLoopDirective</a></div><div class="ttdoc">This is a common base class for loop directives ('omp simd', 'omp for', 'omp for simd' etc....</div><div class="ttdef"><b>Definition:</b> <a href="StmtOpenMP_8h_source.html#l01018">StmtOpenMP.h:1018</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPReductionClause_html"><div class="ttname"><a href="classclang_1_1OMPReductionClause.html">clang::OMPReductionClause</a></div><div class="ttdoc">This represents clause 'reduction' in the '#pragma omp ...' directives.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPClause_8h_source.html#l03204">OpenMPClause.h:3207</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPRequiresDecl_html"><div class="ttname"><a href="classclang_1_1OMPRequiresDecl.html">clang::OMPRequiresDecl</a></div><div class="ttdoc">This represents '#pragma omp requires...' directive.</div><div class="ttdef"><b>Definition:</b> <a href="DeclOpenMP_8h_source.html#l00416">DeclOpenMP.h:416</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPRequiresDecl_html_a686d86c373db2b1ac8971deb2730207f"><div class="ttname"><a href="classclang_1_1OMPRequiresDecl.html#a686d86c373db2b1ac8971deb2730207f">clang::OMPRequiresDecl::clauselists</a></div><div class="ttdeci">clauselist_range clauselists()</div><div class="ttdef"><b>Definition:</b> <a href="DeclOpenMP_8h_source.html#l00441">DeclOpenMP.h:441</a></div></div>
<div class="ttc" id="aclassclang_1_1OMPXBareClause_html"><div class="ttname"><a href="classclang_1_1OMPXBareClause.html">clang::OMPXBareClause</a></div><div class="ttdoc">This represents 'ompx_bare' clause in the '#pragma omp target teams ...' directive.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPClause_8h_source.html#l09367">OpenMPClause.h:9367</a></div></div>
<div class="ttc" id="aclassclang_1_1ParmVarDecl_html_a88e29dc261acd541e0b1676c38e2f892"><div class="ttname"><a href="classclang_1_1ParmVarDecl.html#a88e29dc261acd541e0b1676c38e2f892">clang::ParmVarDecl::Create</a></div><div class="ttdeci">static ParmVarDecl * Create(ASTContext &amp;C, DeclContext *DC, SourceLocation StartLoc, SourceLocation IdLoc, const IdentifierInfo *Id, QualType T, TypeSourceInfo *TInfo, StorageClass S, Expr *DefArg)</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8cpp_source.html#l02919">Decl.cpp:2919</a></div></div>
<div class="ttc" id="aclassclang_1_1PointerType_html"><div class="ttname"><a href="classclang_1_1PointerType.html">clang::PointerType</a></div><div class="ttdoc">PointerType - C99 6.7.5.1 - Pointer Declarators.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l02939">Type.h:2939</a></div></div>
<div class="ttc" id="aclassclang_1_1QualType_html"><div class="ttname"><a href="classclang_1_1QualType.html">clang::QualType</a></div><div class="ttdoc">A (possibly-)qualified type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00738">Type.h:738</a></div></div>
<div class="ttc" id="aclassclang_1_1QualType_html_a6cc7661c7c6b310a91fd90d78b9539db"><div class="ttname"><a href="classclang_1_1QualType.html#a6cc7661c7c6b310a91fd90d78b9539db">clang::QualType::getAddressSpace</a></div><div class="ttdeci">LangAS getAddressSpace() const</div><div class="ttdoc">Return the address space of this type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07285">Type.h:7285</a></div></div>
<div class="ttc" id="aclassclang_1_1QualType_html_a8be1f3b9e144fba37e7aa9ae2a583de6"><div class="ttname"><a href="classclang_1_1QualType.html#a8be1f3b9e144fba37e7aa9ae2a583de6">clang::QualType::getNonReferenceType</a></div><div class="ttdeci">QualType getNonReferenceType() const</div><div class="ttdoc">If Type is a reference type (e.g., const int&amp;), returns the type that the reference refers to (&quot;const...</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07360">Type.h:7360</a></div></div>
<div class="ttc" id="aclassclang_1_1QualType_html_a900520b154ba282febbaa7267020ca3f"><div class="ttname"><a href="classclang_1_1QualType.html#a900520b154ba282febbaa7267020ca3f">clang::QualType::getCanonicalType</a></div><div class="ttdeci">QualType getCanonicalType() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07211">Type.h:7211</a></div></div>
<div class="ttc" id="aclassclang_1_1QualifierCollector_html"><div class="ttname"><a href="classclang_1_1QualifierCollector.html">clang::QualifierCollector</a></div><div class="ttdoc">A qualifier set is used to build a set of qualifiers.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07099">Type.h:7099</a></div></div>
<div class="ttc" id="aclassclang_1_1QualifierCollector_html_a0d384a2acd12cac66c6b9efec3a2f6af"><div class="ttname"><a href="classclang_1_1QualifierCollector.html#a0d384a2acd12cac66c6b9efec3a2f6af">clang::QualifierCollector::strip</a></div><div class="ttdeci">const Type * strip(QualType type)</div><div class="ttdoc">Collect any qualifiers on the given type and return an unqualified type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07106">Type.h:7106</a></div></div>
<div class="ttc" id="aclassclang_1_1QualifierCollector_html_ab10692c3f54cddee7c5675cc7dd7d2dd"><div class="ttname"><a href="classclang_1_1QualifierCollector.html#ab10692c3f54cddee7c5675cc7dd7d2dd">clang::QualifierCollector::apply</a></div><div class="ttdeci">QualType apply(const ASTContext &amp;Context, QualType QT) const</div><div class="ttdoc">Apply the collected qualifiers to the given type.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l04278">Type.cpp:4278</a></div></div>
<div class="ttc" id="aclassclang_1_1Qualifiers_html_a515f21f2ce2cc21c59b47967ca77c83b"><div class="ttname"><a href="classclang_1_1Qualifiers.html#a515f21f2ce2cc21c59b47967ca77c83b">clang::Qualifiers::addRestrict</a></div><div class="ttdeci">void addRestrict()</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00288">Type.h:288</a></div></div>
<div class="ttc" id="aclassclang_1_1Qualifiers_html_ab344dfe26d89a97ad5b50ca5d73f4ef4"><div class="ttname"><a href="classclang_1_1Qualifiers.html#ab344dfe26d89a97ad5b50ca5d73f4ef4">clang::Qualifiers::addAddressSpace</a></div><div class="ttdeci">void addAddressSpace(LangAS space, bool AllowDefaultAddrSpace=false)</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l00405">Type.h:405</a></div></div>
<div class="ttc" id="aclassclang_1_1RecordDecl_html"><div class="ttname"><a href="classclang_1_1RecordDecl.html">clang::RecordDecl</a></div><div class="ttdoc">Represents a struct/union/class.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l04170">Decl.h:4170</a></div></div>
<div class="ttc" id="aclassclang_1_1RecordDecl_html_acc8668f235e310c30c64285c46c640be"><div class="ttname"><a href="classclang_1_1RecordDecl.html#acc8668f235e310c30c64285c46c640be">clang::RecordDecl::completeDefinition</a></div><div class="ttdeci">virtual void completeDefinition()</div><div class="ttdoc">Note that the definition of this type is now complete.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8cpp_source.html#l05086">Decl.cpp:5086</a></div></div>
<div class="ttc" id="aclassclang_1_1SourceLocation_html"><div class="ttname"><a href="classclang_1_1SourceLocation.html">clang::SourceLocation</a></div><div class="ttdoc">Encodes a location in the source.</div><div class="ttdef"><b>Definition:</b> <a href="SourceLocation_8h_source.html#l00088">SourceLocation.h:88</a></div></div>
<div class="ttc" id="aclassclang_1_1Stmt_html"><div class="ttname"><a href="classclang_1_1Stmt.html">clang::Stmt</a></div><div class="ttdoc">Stmt - This represents one statement.</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8h_source.html#l00084">Stmt.h:84</a></div></div>
<div class="ttc" id="aclassclang_1_1Stmt_html_a489148e5d234a5a7f00d8b02981bcee5"><div class="ttname"><a href="classclang_1_1Stmt.html#a489148e5d234a5a7f00d8b02981bcee5">clang::Stmt::children</a></div><div class="ttdeci">child_range children()</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8cpp_source.html#l00287">Stmt.cpp:287</a></div></div>
<div class="ttc" id="aclassclang_1_1Stmt_html_ad5a9ae52b5b303a59d40032b0c76b544"><div class="ttname"><a href="classclang_1_1Stmt.html#ad5a9ae52b5b303a59d40032b0c76b544">clang::Stmt::IgnoreContainers</a></div><div class="ttdeci">Stmt * IgnoreContainers(bool IgnoreCaptured=false)</div><div class="ttdoc">Skip no-op (attributed, compound) container stmts and skip captured stmt at the top,...</div><div class="ttdef"><b>Definition:</b> <a href="Stmt_8cpp_source.html#l00197">Stmt.cpp:197</a></div></div>
<div class="ttc" id="aclassclang_1_1TagDecl_html_a5a54066831bd4af8a720ca33d3fc46da"><div class="ttname"><a href="classclang_1_1TagDecl.html#a5a54066831bd4af8a720ca33d3fc46da">clang::TagDecl::startDefinition</a></div><div class="ttdeci">void startDefinition()</div><div class="ttdoc">Starts the definition of this tag declaration.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8cpp_source.html#l04743">Decl.cpp:4743</a></div></div>
<div class="ttc" id="aclassclang_1_1TargetInfo_html_a01403a5106161d4d3cd0c50c43150f89"><div class="ttname"><a href="classclang_1_1TargetInfo.html#a01403a5106161d4d3cd0c50c43150f89">clang::TargetInfo::getNewAlign</a></div><div class="ttdeci">unsigned getNewAlign() const</div><div class="ttdoc">Return the largest alignment for which a suitably-sized allocation with '::operator new(size_t)' is g...</div><div class="ttdef"><b>Definition:</b> <a href="include_2clang_2Basic_2TargetInfo_8h_source.html#l00721">TargetInfo.h:721</a></div></div>
<div class="ttc" id="aclassclang_1_1TargetInfo_html_acba9bb0bf5c834141c5d2a65ca273d2a"><div class="ttname"><a href="classclang_1_1TargetInfo.html#acba9bb0bf5c834141c5d2a65ca273d2a">clang::TargetInfo::getGridValue</a></div><div class="ttdeci">virtual const llvm::omp::GV &amp; getGridValue() const</div><div class="ttdef"><b>Definition:</b> <a href="include_2clang_2Basic_2TargetInfo_8h_source.html#l01617">TargetInfo.h:1617</a></div></div>
<div class="ttc" id="aclassclang_1_1TargetInfo_html_aec3f90551de05b963bd4df1387aa2743"><div class="ttname"><a href="classclang_1_1TargetInfo.html#aec3f90551de05b963bd4df1387aa2743">clang::TargetInfo::hasFeature</a></div><div class="ttdeci">virtual bool hasFeature(StringRef Feature) const</div><div class="ttdoc">Determine whether the given target has the given feature.</div><div class="ttdef"><b>Definition:</b> <a href="include_2clang_2Basic_2TargetInfo_8h_source.html#l01451">TargetInfo.h:1451</a></div></div>
<div class="ttc" id="aclassclang_1_1TargetInfo_html_af46e41c7c724fb238952a87f92eb0557"><div class="ttname"><a href="classclang_1_1TargetInfo.html#af46e41c7c724fb238952a87f92eb0557">clang::TargetInfo::getTargetOpts</a></div><div class="ttdeci">TargetOptions &amp; getTargetOpts() const</div><div class="ttdoc">Retrieve the target options.</div><div class="ttdef"><b>Definition:</b> <a href="include_2clang_2Basic_2TargetInfo_8h_source.html#l00307">TargetInfo.h:307</a></div></div>
<div class="ttc" id="aclassclang_1_1TargetOptions_html_ace44d198262901d30c8fe8d0bfca1403"><div class="ttname"><a href="classclang_1_1TargetOptions.html#ace44d198262901d30c8fe8d0bfca1403">clang::TargetOptions::FeatureMap</a></div><div class="ttdeci">llvm::StringMap&lt; bool &gt; FeatureMap</div><div class="ttdoc">The map of which features have been enabled disabled based on the command line.</div><div class="ttdef"><b>Definition:</b> <a href="TargetOptions_8h_source.html#l00062">TargetOptions.h:62</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html"><div class="ttname"><a href="classclang_1_1Type.html">clang::Type</a></div><div class="ttdoc">The base class of the type hierarchy.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l01607">Type.h:1607</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a0506d2fd1e686757c62a2b1aa3f9de8d"><div class="ttname"><a href="classclang_1_1Type.html#a0506d2fd1e686757c62a2b1aa3f9de8d">clang::Type::getAsCXXRecordDecl</a></div><div class="ttdeci">CXXRecordDecl * getAsCXXRecordDecl() const</div><div class="ttdoc">Retrieves the CXXRecordDecl that this type refers to, either because the type is a RecordType or beca...</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l01870">Type.cpp:1870</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a3b8d0cdfe0bdd8b98296b84ae9d438c5"><div class="ttname"><a href="classclang_1_1Type.html#a3b8d0cdfe0bdd8b98296b84ae9d438c5">clang::Type::isIntegerType</a></div><div class="ttdeci">bool isIntegerType() const</div><div class="ttdoc">isIntegerType() does not include complex integers (a GCC extension).</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07763">Type.h:7763</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a436b8b08ae7f2404b4712d37986194ce"><div class="ttname"><a href="classclang_1_1Type.html#a436b8b08ae7f2404b4712d37986194ce">clang::Type::castAs</a></div><div class="ttdeci">const T * castAs() const</div><div class="ttdoc">Member-template castAs&lt;specific type&gt;.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l08008">Type.h:8008</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a48b2c2b1c98a1800de465320ee70badc"><div class="ttname"><a href="classclang_1_1Type.html#a48b2c2b1c98a1800de465320ee70badc">clang::Type::isReferenceType</a></div><div class="ttdeci">bool isReferenceType() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07424">Type.h:7424</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a56c474868f4027b847f181f99b226f47"><div class="ttname"><a href="classclang_1_1Type.html#a56c474868f4027b847f181f99b226f47">clang::Type::getPointeeType</a></div><div class="ttdeci">QualType getPointeeType() const</div><div class="ttdoc">If this is a pointer, ObjC object pointer, or block pointer, this returns the respective pointee.</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l00694">Type.cpp:694</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a66aac439c2d7e5c462415a6d31502b62"><div class="ttname"><a href="classclang_1_1Type.html#a66aac439c2d7e5c462415a6d31502b62">clang::Type::isLValueReferenceType</a></div><div class="ttdeci">bool isLValueReferenceType() const</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l07428">Type.h:7428</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a7e6c7b9a94ee115f7d550fd56a0ba5ba"><div class="ttname"><a href="classclang_1_1Type.html#a7e6c7b9a94ee115f7d550fd56a0ba5ba">clang::Type::hasSignedIntegerRepresentation</a></div><div class="ttdeci">bool hasSignedIntegerRepresentation() const</div><div class="ttdoc">Determine whether this type has an signed integer representation of some sort, e.g....</div><div class="ttdef"><b>Definition:</b> <a href="Type_8cpp_source.html#l02174">Type.cpp:2174</a></div></div>
<div class="ttc" id="aclassclang_1_1Type_html_a96d0cb0fe011209ffcc3dd1ebf150194"><div class="ttname"><a href="classclang_1_1Type.html#a96d0cb0fe011209ffcc3dd1ebf150194">clang::Type::isVariablyModifiedType</a></div><div class="ttdeci">bool isVariablyModifiedType() const</div><div class="ttdoc">Whether this type is a variably-modified type (C99 6.7.5).</div><div class="ttdef"><b>Definition:</b> <a href="Type_8h_source.html#l02467">Type.h:2467</a></div></div>
<div class="ttc" id="aclassclang_1_1UnaryOperator_html"><div class="ttname"><a href="classclang_1_1UnaryOperator.html">clang::UnaryOperator</a></div><div class="ttdoc">UnaryOperator - This represents the unary-expression's (except sizeof and alignof),...</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l02233">Expr.h:2235</a></div></div>
<div class="ttc" id="aclassclang_1_1UnaryOperator_html_a7309fe0698496ead06f77065a8cb94a1"><div class="ttname"><a href="classclang_1_1UnaryOperator.html#a7309fe0698496ead06f77065a8cb94a1">clang::UnaryOperator::getOpcode</a></div><div class="ttdeci">Opcode getOpcode() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l02275">Expr.h:2275</a></div></div>
<div class="ttc" id="aclassclang_1_1UnaryOperator_html_a804929b99cee522ce0fe5b33fa544e77"><div class="ttname"><a href="classclang_1_1UnaryOperator.html#a804929b99cee522ce0fe5b33fa544e77">clang::UnaryOperator::getSubExpr</a></div><div class="ttdeci">Expr * getSubExpr() const</div><div class="ttdef"><b>Definition:</b> <a href="Expr_8h_source.html#l02280">Expr.h:2280</a></div></div>
<div class="ttc" id="aclassclang_1_1ValueDecl_html"><div class="ttname"><a href="classclang_1_1ValueDecl.html">clang::ValueDecl</a></div><div class="ttdoc">Represent the declaration of a variable (in which case it is an lvalue) a function (in which case it ...</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l00707">Decl.h:707</a></div></div>
<div class="ttc" id="aclassclang_1_1ValueDecl_html_a673ae4e2fab42426820de8df166fef5d"><div class="ttname"><a href="classclang_1_1ValueDecl.html#a673ae4e2fab42426820de8df166fef5d">clang::ValueDecl::getType</a></div><div class="ttdeci">QualType getType() const</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l00718">Decl.h:718</a></div></div>
<div class="ttc" id="aclassclang_1_1ValueDecl_html_adc193cd881d3e18cd0fd830ba765d66e"><div class="ttname"><a href="classclang_1_1ValueDecl.html#adc193cd881d3e18cd0fd830ba765d66e">clang::ValueDecl::isInitCapture</a></div><div class="ttdeci">bool isInitCapture() const</div><div class="ttdoc">Whether this variable is the implicit variable for a lambda init-capture.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8cpp_source.html#l05376">Decl.cpp:5376</a></div></div>
<div class="ttc" id="aclassclang_1_1VarDecl_html"><div class="ttname"><a href="classclang_1_1VarDecl.html">clang::VarDecl</a></div><div class="ttdoc">Represents a variable declaration or definition.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l00919">Decl.h:919</a></div></div>
<div class="ttc" id="aclassclang_1_1VarDecl_html_a41b791be900d5c37eea9fd8ead366308"><div class="ttname"><a href="classclang_1_1VarDecl.html#a41b791be900d5c37eea9fd8ead366308">clang::VarDecl::getCanonicalDecl</a></div><div class="ttdeci">VarDecl * getCanonicalDecl() override</div><div class="ttdoc">Retrieves the &quot;canonical&quot; declaration of the given declaration.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8cpp_source.html#l02258">Decl.cpp:2258</a></div></div>
<div class="ttc" id="aclassclang_1_1VarDecl_html_a467213c46a275a47908744321d3d9f75"><div class="ttname"><a href="classclang_1_1VarDecl.html#a467213c46a275a47908744321d3d9f75">clang::VarDecl::isInitCapture</a></div><div class="ttdeci">bool isInitCapture() const</div><div class="ttdoc">Whether this variable is the implicit variable for a lambda init-capture.</div><div class="ttdef"><b>Definition:</b> <a href="Decl_8h_source.html#l01559">Decl.h:1559</a></div></div>
<div class="ttc" id="aclassclang_1_1specific__attr__iterator_html"><div class="ttname"><a href="classclang_1_1specific__attr__iterator.html">clang::specific_attr_iterator</a></div><div class="ttdoc">specific_attr_iterator - Iterates over a subrange of an AttrVec, only providing attributes that are o...</div><div class="ttdef"><b>Definition:</b> <a href="AttrIterator_8h_source.html#l00033">AttrIterator.h:33</a></div></div>
<div class="ttc" id="aclassllvm_1_1ArrayRef_html"><div class="ttname"><a href="classllvm_1_1ArrayRef.html">llvm::ArrayRef</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVM_8h_source.html#l00031">LLVM.h:31</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallPtrSet_html"><div class="ttname"><a href="classllvm_1_1SmallPtrSet.html">llvm::SmallPtrSet</a></div><div class="ttdef"><b>Definition:</b> <a href="ASTContext_8h_source.html#l00049">ASTContext.h:49</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallString_html"><div class="ttname"><a href="classllvm_1_1SmallString.html">llvm::SmallString</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVM_8h_source.html#l00034">LLVM.h:34</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVectorImpl_html"><div class="ttname"><a href="classllvm_1_1SmallVectorImpl.html">llvm::SmallVectorImpl</a></div><div class="ttdef"><b>Definition:</b> <a href="Randstruct_8h_source.html#l00018">Randstruct.h:18</a></div></div>
<div class="ttc" id="aclassllvm_1_1SmallVector_html"><div class="ttname"><a href="classllvm_1_1SmallVector.html">llvm::SmallVector</a></div><div class="ttdef"><b>Definition:</b> <a href="LLVM_8h_source.html#l00035">LLVM.h:35</a></div></div>
<div class="ttc" id="ainclude_2clang_2Basic_2Cuda_8h_html"><div class="ttname"><a href="include_2clang_2Basic_2Cuda_8h.html">Cuda.h</a></div></div>
<div class="ttc" id="anamespaceAttributeLangSupport_html_a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e"><div class="ttname"><a href="namespaceAttributeLangSupport.html#a2f895ae8ae6d7966390f197b109d1f4dac1c6ab9ca121c29c650b3ab6a4212b4e">AttributeLangSupport::C</a></div><div class="ttdeci">@ C</div><div class="ttdef"><b>Definition:</b> <a href="SemaDeclAttr_8cpp_source.html#l00062">SemaDeclAttr.cpp:62</a></div></div>
<div class="ttc" id="anamespaceclang_1_1CodeGen_html_a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508"><div class="ttname"><a href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17aa1fa27779242b4902f7ae3bdd5c6d508">clang::CodeGen::AlignmentSource::Type</a></div><div class="ttdeci">@ Type</div><div class="ttdoc">The l-value was considered opaque, so the alignment was determined from a type.</div></div>
<div class="ttc" id="anamespaceclang_1_1CodeGen_html_a1c294b2b5bfa35483ddb984a1ad6db17ac02172f092142d31f6b3d06ff4eca48c"><div class="ttname"><a href="namespaceclang_1_1CodeGen.html#a1c294b2b5bfa35483ddb984a1ad6db17ac02172f092142d31f6b3d06ff4eca48c">clang::CodeGen::AlignmentSource::Decl</a></div><div class="ttdeci">@ Decl</div><div class="ttdoc">The l-value was an access to a declared entity or something equivalently strong, like the address of ...</div></div>
<div class="ttc" id="anamespaceclang_1_1CodeGen_html_a8e206ea4edfe305918f0b28322f7aef9a6bdd6972cc7f7a6326c359a2a07df29a"><div class="ttname"><a href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9a6bdd6972cc7f7a6326c359a2a07df29a">clang::CodeGen::TEK_Aggregate</a></div><div class="ttdeci">@ TEK_Aggregate</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00112">CodeGenFunction.h:111</a></div></div>
<div class="ttc" id="anamespaceclang_1_1CodeGen_html_a8e206ea4edfe305918f0b28322f7aef9aa4a7b0b5cf5c3854e35ca0c172e93269"><div class="ttname"><a href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9aa4a7b0b5cf5c3854e35ca0c172e93269">clang::CodeGen::TEK_Scalar</a></div><div class="ttdeci">@ TEK_Scalar</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00109">CodeGenFunction.h:109</a></div></div>
<div class="ttc" id="anamespaceclang_1_1CodeGen_html_a8e206ea4edfe305918f0b28322f7aef9ad0c74fbe072df321c2078f52f052d07c"><div class="ttname"><a href="namespaceclang_1_1CodeGen.html#a8e206ea4edfe305918f0b28322f7aef9ad0c74fbe072df321c2078f52f052d07c">clang::CodeGen::TEK_Complex</a></div><div class="ttdeci">@ TEK_Complex</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l00110">CodeGenFunction.h:110</a></div></div>
<div class="ttc" id="anamespaceclang_1_1CodeGen_html_aa5728b61c4995d4d8dc869ef8a6148f0a142bdd64990b3ca421f185b630db66c8"><div class="ttname"><a href="namespaceclang_1_1CodeGen.html#aa5728b61c4995d4d8dc869ef8a6148f0a142bdd64990b3ca421f185b630db66c8">clang::CodeGen::NormalAndEHCleanup</a></div><div class="ttdeci">@ NormalAndEHCleanup</div><div class="ttdef"><b>Definition:</b> <a href="EHScopeStack_8h_source.html#l00086">EHScopeStack.h:86</a></div></div>
<div class="ttc" id="anamespaceclang_1_1ObjCPropertyAttribute_html_a5cee046f95725089d626e8e3c42bf60c"><div class="ttname"><a href="namespaceclang_1_1ObjCPropertyAttribute.html#a5cee046f95725089d626e8e3c42bf60c">clang::ObjCPropertyAttribute::Kind</a></div><div class="ttdeci">Kind</div><div class="ttdef"><b>Definition:</b> <a href="DeclObjCCommon_8h_source.html#l00022">DeclObjCCommon.h:22</a></div></div>
<div class="ttc" id="anamespaceclang_1_1dependency__directives__scan_html_a41c77692d1d7ec7f9f86528d1f36202f"><div class="ttname"><a href="namespaceclang_1_1dependency__directives__scan.html#a41c77692d1d7ec7f9f86528d1f36202f">clang::dependency_directives_scan::DirectiveKind</a></div><div class="ttdeci">DirectiveKind</div><div class="ttdoc">Represents the kind of preprocessor directive or a module declaration that is tracked by the scanner ...</div><div class="ttdef"><b>Definition:</b> <a href="DependencyDirectivesScanner_8h_source.html#l00059">DependencyDirectivesScanner.h:59</a></div></div>
<div class="ttc" id="anamespaceclang_1_1format_html_a8a233e0f1d8dde41312def6c10a76038"><div class="ttname"><a href="namespaceclang_1_1format.html#a8a233e0f1d8dde41312def6c10a76038">clang::format::Base</a></div><div class="ttdeci">Base</div><div class="ttdef"><b>Definition:</b> <a href="IntegerLiteralSeparatorFixer_8cpp_source.html#l00020">IntegerLiteralSeparatorFixer.cpp:20</a></div></div>
<div class="ttc" id="anamespaceclang_1_1index_html_a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7"><div class="ttname"><a href="namespaceclang_1_1index.html#a2f70a3d61ba9b8a97d8e609dcdf069dea6f16a5f8ff5d75ab84c018adacdfcbb7">clang::index::SymbolKind::Field</a></div><div class="ttdeci">@ Field</div></div>
<div class="ttc" id="anamespaceclang_1_1interp_html_a16635f6b52b1f71a033528c95bc58274"><div class="ttname"><a href="namespaceclang_1_1interp.html#a16635f6b52b1f71a033528c95bc58274">clang::interp::APInt</a></div><div class="ttdeci">llvm::APInt APInt</div><div class="ttdef"><b>Definition:</b> <a href="Integral_8h_source.html#l00029">Integral.h:29</a></div></div>
<div class="ttc" id="anamespaceclang_1_1prec_html_a9bfbe31f4770359ea44ad42e7c7ed8ffac169fcf9bffce025b0554c2e64025a43"><div class="ttname"><a href="namespaceclang_1_1prec.html#a9bfbe31f4770359ea44ad42e7c7ed8ffac169fcf9bffce025b0554c2e64025a43">clang::prec::Conditional</a></div><div class="ttdeci">@ Conditional</div><div class="ttdef"><b>Definition:</b> <a href="OperatorPrecedence_8h_source.html#l00030">OperatorPrecedence.h:30</a></div></div>
<div class="ttc" id="anamespaceclang_html"><div class="ttname"><a href="namespaceclang.html">clang</a></div><div class="ttdoc">The JSON file list parser is used to communicate input to InstallAPI.</div><div class="ttdef"><b>Definition:</b> <a href="CalledOnceCheck_8h_source.html#l00017">CalledOnceCheck.h:17</a></div></div>
<div class="ttc" id="anamespaceclang_html_a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1"><div class="ttname"><a href="namespaceclang.html#a015889db1a9bb17e9d7103a8e79c2a2ca47f9082fc380ca62d531096aa1d110f1">clang::OpenACCClauseKind::Private</a></div><div class="ttdeci">@ Private</div><div class="ttdoc">'private' clause, allowed on 'parallel', 'serial', 'loop', 'parallel loop', and 'serial loop' constru...</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1">clang::CudaArch</a></div><div class="ttdeci">CudaArch</div><div class="ttdef"><b>Definition:</b> <a href="include_2clang_2Basic_2Cuda_8h_source.html#l00053">Cuda.h:53</a></div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a03453e38e7992e1eae6ee511c98444ce"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a03453e38e7992e1eae6ee511c98444ce">clang::CudaArch::GFX940</a></div><div class="ttdeci">@ GFX940</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a0534c594c7e8dca296adf507f242c043"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0534c594c7e8dca296adf507f242c043">clang::CudaArch::GFX810</a></div><div class="ttdeci">@ GFX810</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a0847d1ab37bcdadf88aa7ed0aab4e164"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0847d1ab37bcdadf88aa7ed0aab4e164">clang::CudaArch::GFX600</a></div><div class="ttdeci">@ GFX600</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a086d89e7de3b8b22f5eee65a7a34b094"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a086d89e7de3b8b22f5eee65a7a34b094">clang::CudaArch::GFX1031</a></div><div class="ttdeci">@ GFX1031</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a0968a4cc5b854bc9fbea2e8c33651e90"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0968a4cc5b854bc9fbea2e8c33651e90">clang::CudaArch::GFX701</a></div><div class="ttdeci">@ GFX701</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a0990062f0c484f0b13ef1ac13c158a80"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0990062f0c484f0b13ef1ac13c158a80">clang::CudaArch::GFX1035</a></div><div class="ttdeci">@ GFX1035</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a0a24846061ac5e3bf11003284315409a"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0a24846061ac5e3bf11003284315409a">clang::CudaArch::GFX904</a></div><div class="ttdeci">@ GFX904</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a0bd26cad655182000d86a69b066a651a"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0bd26cad655182000d86a69b066a651a">clang::CudaArch::GFX1012</a></div><div class="ttdeci">@ GFX1012</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a0d288b09d38a22014da51efac770a04d"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a0d288b09d38a22014da51efac770a04d">clang::CudaArch::GFX702</a></div><div class="ttdeci">@ GFX702</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a1416936466bae8b9ad956a090ca8b63b"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a1416936466bae8b9ad956a090ca8b63b">clang::CudaArch::GFX805</a></div><div class="ttdeci">@ GFX805</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a1a0d3ec3a569039edb92240936bbf656"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a1a0d3ec3a569039edb92240936bbf656">clang::CudaArch::GFX602</a></div><div class="ttdeci">@ GFX602</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a1e5c0b97d6529f717c0500b0fbd04b69"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a1e5c0b97d6529f717c0500b0fbd04b69">clang::CudaArch::SM_21</a></div><div class="ttdeci">@ SM_21</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a2881dc0548b731410611b0f36cce997f"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a2881dc0548b731410611b0f36cce997f">clang::CudaArch::GFX1010</a></div><div class="ttdeci">@ GFX1010</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a334bd5ee7fa1e1ac3934410e586e8b90"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a334bd5ee7fa1e1ac3934410e586e8b90">clang::CudaArch::SM_72</a></div><div class="ttdeci">@ SM_72</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a398f3db9522be126ca9f08c498bcd833"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a398f3db9522be126ca9f08c498bcd833">clang::CudaArch::GFX1034</a></div><div class="ttdeci">@ GFX1034</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a3ba9f28c8be101b04b68198240d1b89a"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a3ba9f28c8be101b04b68198240d1b89a">clang::CudaArch::GFX90a</a></div><div class="ttdeci">@ GFX90a</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a3bc180bd00be2c60a3a5a68e0dd49503"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a3bc180bd00be2c60a3a5a68e0dd49503">clang::CudaArch::UNUSED</a></div><div class="ttdeci">@ UNUSED</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a3d12a95f70f4caa1e1591a7cf6ddc14b"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a3d12a95f70f4caa1e1591a7cf6ddc14b">clang::CudaArch::SM_61</a></div><div class="ttdeci">@ SM_61</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a43fd6db05bb9d1e1119dba10215eb204"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a43fd6db05bb9d1e1119dba10215eb204">clang::CudaArch::GFX1036</a></div><div class="ttdeci">@ GFX1036</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a47e26ccd2210f6c0ddea3e38a63ab9a2"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a47e26ccd2210f6c0ddea3e38a63ab9a2">clang::CudaArch::GFX1201</a></div><div class="ttdeci">@ GFX1201</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a4c6b0fb477249efef285872a1f873a1a"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a4c6b0fb477249efef285872a1f873a1a">clang::CudaArch::GFX1011</a></div><div class="ttdeci">@ GFX1011</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a512f871862bf81dd08808dea3f718253"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a512f871862bf81dd08808dea3f718253">clang::CudaArch::GFX703</a></div><div class="ttdeci">@ GFX703</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a5fa849a49dd8aef830c350a1276e0fd4"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a5fa849a49dd8aef830c350a1276e0fd4">clang::CudaArch::GFX941</a></div><div class="ttdeci">@ GFX941</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a696b031073e74bf2cb98e5ef201d4aa3"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a696b031073e74bf2cb98e5ef201d4aa3">clang::CudaArch::UNKNOWN</a></div><div class="ttdeci">@ UNKNOWN</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a6ebb9a9ffebcbbba448247e2dc44d15a"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a6ebb9a9ffebcbbba448247e2dc44d15a">clang::CudaArch::SM_52</a></div><div class="ttdeci">@ SM_52</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a70be19b43b0f67805bba113d565dad83"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a70be19b43b0f67805bba113d565dad83">clang::CudaArch::SM_50</a></div><div class="ttdeci">@ SM_50</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a714f0321ebc3e5ae647c40503bdf3060"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a714f0321ebc3e5ae647c40503bdf3060">clang::CudaArch::SM_75</a></div><div class="ttdeci">@ SM_75</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a74953a02b00f13b6ee58868145fea91f"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a74953a02b00f13b6ee58868145fea91f">clang::CudaArch::SM_89</a></div><div class="ttdeci">@ SM_89</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a752fa05613502efaaac241f931ee5889"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a752fa05613502efaaac241f931ee5889">clang::CudaArch::GFX1100</a></div><div class="ttdeci">@ GFX1100</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a7a9b7c7fa1e2c26840f459fa77ba08aa"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7a9b7c7fa1e2c26840f459fa77ba08aa">clang::CudaArch::SM_53</a></div><div class="ttdeci">@ SM_53</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a7b775c18f622c6aea0459da5c0480da3"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7b775c18f622c6aea0459da5c0480da3">clang::CudaArch::GFX1200</a></div><div class="ttdeci">@ GFX1200</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a7c3fcea8caa6b3ed4015e672fd8b05aa"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7c3fcea8caa6b3ed4015e672fd8b05aa">clang::CudaArch::GFX1032</a></div><div class="ttdeci">@ GFX1032</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a7f610e68c243f016176f0465c407e170"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7f610e68c243f016176f0465c407e170">clang::CudaArch::SM_35</a></div><div class="ttdeci">@ SM_35</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a7f789f119307bc80093cd60c9f288261"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a7f789f119307bc80093cd60c9f288261">clang::CudaArch::SM_60</a></div><div class="ttdeci">@ SM_60</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a8045a0a6c688b0635e3caccc408a1446"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a8045a0a6c688b0635e3caccc408a1446">clang::CudaArch::Generic</a></div><div class="ttdeci">@ Generic</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a874e85bf420a44a0c638e505dd8fb9b8"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a874e85bf420a44a0c638e505dd8fb9b8">clang::CudaArch::GFX942</a></div><div class="ttdeci">@ GFX942</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a92d8beca7b536a823332aead42cd0408"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a92d8beca7b536a823332aead42cd0408">clang::CudaArch::GFX1151</a></div><div class="ttdeci">@ GFX1151</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a94c31e33aaa74e3eb6a11db931d63be1"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a94c31e33aaa74e3eb6a11db931d63be1">clang::CudaArch::SM_20</a></div><div class="ttdeci">@ SM_20</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a9884a0d3243872ff198043ba39631038"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a9884a0d3243872ff198043ba39631038">clang::CudaArch::SM_86</a></div><div class="ttdeci">@ SM_86</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1a9bed743b2bc8ff7ebcfb57067319cbbd"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1a9bed743b2bc8ff7ebcfb57067319cbbd">clang::CudaArch::GFX1103</a></div><div class="ttdeci">@ GFX1103</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1aa7c00fa759274252de7394171b6a79a3"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aa7c00fa759274252de7394171b6a79a3">clang::CudaArch::SM_87</a></div><div class="ttdeci">@ SM_87</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1aaa3140ab5dcaa9858ec66f984912c5c8"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aaa3140ab5dcaa9858ec66f984912c5c8">clang::CudaArch::GFX909</a></div><div class="ttdeci">@ GFX909</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1aac751e13f47e2914390d7f77f786943a"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aac751e13f47e2914390d7f77f786943a">clang::CudaArch::SM_62</a></div><div class="ttdeci">@ SM_62</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1aaf08c0bcda9bf569ffa3cfc75cfea11e"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aaf08c0bcda9bf569ffa3cfc75cfea11e">clang::CudaArch::GFX704</a></div><div class="ttdeci">@ GFX704</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ab09562e89d5edbfd8822603e786b1201"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab09562e89d5edbfd8822603e786b1201">clang::CudaArch::SM_80</a></div><div class="ttdeci">@ SM_80</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ab3444ff76476d73bc9958ed8f707c3ae"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab3444ff76476d73bc9958ed8f707c3ae">clang::CudaArch::GFX803</a></div><div class="ttdeci">@ GFX803</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ab4a0f9d228b8e3448596f777a5ac91d7"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab4a0f9d228b8e3448596f777a5ac91d7">clang::CudaArch::GFX902</a></div><div class="ttdeci">@ GFX902</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ab664561bc412d9e5ea4cd38105bcf1eb"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab664561bc412d9e5ea4cd38105bcf1eb">clang::CudaArch::GFX700</a></div><div class="ttdeci">@ GFX700</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ab73529922b421582b937e2f66bbf5cb2"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ab73529922b421582b937e2f66bbf5cb2">clang::CudaArch::GFX1033</a></div><div class="ttdeci">@ GFX1033</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1abad64aaa5c6db77eaf76828f5cb40ae5"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1abad64aaa5c6db77eaf76828f5cb40ae5">clang::CudaArch::GFX601</a></div><div class="ttdeci">@ GFX601</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1abe5bc8939a8ba0f0e475817e3554f2cd"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1abe5bc8939a8ba0f0e475817e3554f2cd">clang::CudaArch::SM_90</a></div><div class="ttdeci">@ SM_90</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1abff82d70a73917474240c68c05ef972f"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1abff82d70a73917474240c68c05ef972f">clang::CudaArch::SM_30</a></div><div class="ttdeci">@ SM_30</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ac179e857b04c2faf1d790e0ea6507a7b"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ac179e857b04c2faf1d790e0ea6507a7b">clang::CudaArch::SM_70</a></div><div class="ttdeci">@ SM_70</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ac5eb5e370b24b72db923be91bb8346cb"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ac5eb5e370b24b72db923be91bb8346cb">clang::CudaArch::GFX1150</a></div><div class="ttdeci">@ GFX1150</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1accd7bbabbd68dc90f42114e0e9d96a5d"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1accd7bbabbd68dc90f42114e0e9d96a5d">clang::CudaArch::SM_90a</a></div><div class="ttdeci">@ SM_90a</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1acf2ba5f154242f7414210fb9a9d10d20"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1acf2ba5f154242f7414210fb9a9d10d20">clang::CudaArch::GFX1013</a></div><div class="ttdeci">@ GFX1013</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ad145ac4508af3ce8fed80a1a36fc962c"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ad145ac4508af3ce8fed80a1a36fc962c">clang::CudaArch::GFX900</a></div><div class="ttdeci">@ GFX900</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ad3154cc1293d0fc48e74eed8b5b71cc6"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ad3154cc1293d0fc48e74eed8b5b71cc6">clang::CudaArch::GFX801</a></div><div class="ttdeci">@ GFX801</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1adfcef7d71e77eb8d8ded0c24f4e58756"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1adfcef7d71e77eb8d8ded0c24f4e58756">clang::CudaArch::SM_37</a></div><div class="ttdeci">@ SM_37</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ae169eb14b3f4107945e6c84a7cc52051"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ae169eb14b3f4107945e6c84a7cc52051">clang::CudaArch::GFX705</a></div><div class="ttdeci">@ GFX705</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1ae16c4be7b1eae81d565789ced356195a"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1ae16c4be7b1eae81d565789ced356195a">clang::CudaArch::GFX1101</a></div><div class="ttdeci">@ GFX1101</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1aec1768a1fd20f41a87a9d2a4a0cfe8bb"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aec1768a1fd20f41a87a9d2a4a0cfe8bb">clang::CudaArch::GFX90c</a></div><div class="ttdeci">@ GFX90c</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1aec52144d9f65df1e88082b7fa58cc64a"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1aec52144d9f65df1e88082b7fa58cc64a">clang::CudaArch::GFX906</a></div><div class="ttdeci">@ GFX906</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1af447f5c03508de4d88e340390ba7c78f"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1af447f5c03508de4d88e340390ba7c78f">clang::CudaArch::LAST</a></div><div class="ttdeci">@ LAST</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1af44ef7bb2483783f890097db86e170fa"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1af44ef7bb2483783f890097db86e170fa">clang::CudaArch::SM_32_</a></div><div class="ttdeci">@ SM_32_</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1af879a89e51fafa8f5b8aa310ea354971"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1af879a89e51fafa8f5b8aa310ea354971">clang::CudaArch::GFX1030</a></div><div class="ttdeci">@ GFX1030</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1afcd7f64770f5eb22f85762e7ab982919"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1afcd7f64770f5eb22f85762e7ab982919">clang::CudaArch::GFX802</a></div><div class="ttdeci">@ GFX802</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1afd791c005e62e711acc2df6282783fb5"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1afd791c005e62e711acc2df6282783fb5">clang::CudaArch::GFX1102</a></div><div class="ttdeci">@ GFX1102</div></div>
<div class="ttc" id="anamespaceclang_html_a154d4efe71183474157856160e7f6ce1afe4103612c37e7efa57e720e471c9259"><div class="ttname"><a href="namespaceclang.html#a154d4efe71183474157856160e7f6ce1afe4103612c37e7efa57e720e471c9259">clang::CudaArch::GFX908</a></div><div class="ttdeci">@ GFX908</div></div>
<div class="ttc" id="anamespaceclang_html_a21f16842ce2d008fa5dabb179319a3f9"><div class="ttname"><a href="namespaceclang.html#a21f16842ce2d008fa5dabb179319a3f9">clang::OpenMPDirectiveKind</a></div><div class="ttdeci">llvm::omp::Directive OpenMPDirectiveKind</div><div class="ttdoc">OpenMP directives.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8h_source.html#l00024">OpenMPKinds.h:24</a></div></div>
<div class="ttc" id="anamespaceclang_html_a38631de947cb87dc51f30d539410a786aa7e7fcec7cfb08e0975e5fc01e88fb44"><div class="ttname"><a href="namespaceclang.html#a38631de947cb87dc51f30d539410a786aa7e7fcec7cfb08e0975e5fc01e88fb44">clang::ICIS_NoInit</a></div><div class="ttdeci">@ ICIS_NoInit</div><div class="ttdoc">No in-class initializer.</div><div class="ttdef"><b>Definition:</b> <a href="Specifiers_8h_source.html#l00269">Specifiers.h:269</a></div></div>
<div class="ttc" id="anamespaceclang_html_a42d4e3b439cfc085b7db7b8a30718af0"><div class="ttname"><a href="namespaceclang.html#a42d4e3b439cfc085b7db7b8a30718af0">clang::isOpenMPDistributeDirective</a></div><div class="ttdeci">bool isOpenMPDistributeDirective(OpenMPDirectiveKind DKind)</div><div class="ttdoc">Checks if the specified directive is a distribute directive.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8cpp_source.html#l00649">OpenMPKinds.cpp:649</a></div></div>
<div class="ttc" id="anamespaceclang_html_a4302d73c34f84f339015be4a88d5645ea041ff48e466d5940c068be89fe439e23"><div class="ttname"><a href="namespaceclang.html#a4302d73c34f84f339015be4a88d5645ea041ff48e466d5940c068be89fe439e23">clang::LCK_ByRef</a></div><div class="ttdeci">@ LCK_ByRef</div><div class="ttdoc">Capturing by reference.</div><div class="ttdef"><b>Definition:</b> <a href="Lambda_8h_source.html#l00037">Lambda.h:37</a></div></div>
<div class="ttc" id="anamespaceclang_html_a50aee5ceae697f7f977601070149cfe6"><div class="ttname"><a href="namespaceclang.html#a50aee5ceae697f7f977601070149cfe6">clang::StringToCudaArch</a></div><div class="ttdeci">CudaArch StringToCudaArch(llvm::StringRef S)</div><div class="ttdef"><b>Definition:</b> <a href="Basic_2Cuda_8cpp_source.html#l00168">Cuda.cpp:168</a></div></div>
<div class="ttc" id="anamespaceclang_html_a52df778f2a9b540afde2bc183e9c2075ab0fffe68dfee67b92e91293a2e00bef5"><div class="ttname"><a href="namespaceclang.html#a52df778f2a9b540afde2bc183e9c2075ab0fffe68dfee67b92e91293a2e00bef5">clang::CR_OpenMP</a></div><div class="ttdeci">@ CR_OpenMP</div><div class="ttdef"><b>Definition:</b> <a href="CapturedStmt_8h_source.html#l00020">CapturedStmt.h:19</a></div></div>
<div class="ttc" id="anamespaceclang_html_a56341f29c8efb590dd2db805c8dca624"><div class="ttname"><a href="namespaceclang.html#a56341f29c8efb590dd2db805c8dca624">clang::isOpenMPParallelDirective</a></div><div class="ttdeci">bool isOpenMPParallelDirective(OpenMPDirectiveKind DKind)</div><div class="ttdoc">Checks if the specified directive is a parallel-kind directive.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8cpp_source.html#l00602">OpenMPKinds.cpp:602</a></div></div>
<div class="ttc" id="anamespaceclang_html_a564fc2445fc2bfb47590dfaf884fc476"><div class="ttname"><a href="namespaceclang.html#a564fc2445fc2bfb47590dfaf884fc476">clang::isOpenMPPrivate</a></div><div class="ttdeci">bool isOpenMPPrivate(OpenMPClauseKind Kind)</div><div class="ttdoc">Checks if the specified clause is one of private clauses like 'private', 'firstprivate',...</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8cpp_source.html#l00661">OpenMPKinds.cpp:661</a></div></div>
<div class="ttc" id="anamespaceclang_html_a56dabc7d0ce7d72b9a35f6f5c3f89370aebf74ba707605e744f1303f997b2477f"><div class="ttname"><a href="namespaceclang.html#a56dabc7d0ce7d72b9a35f6f5c3f89370aebf74ba707605e744f1303f997b2477f">clang::SC_None</a></div><div class="ttdeci">@ SC_None</div><div class="ttdef"><b>Definition:</b> <a href="Specifiers_8h_source.html#l00247">Specifiers.h:247</a></div></div>
<div class="ttc" id="anamespaceclang_html_a59b6b7213bdfaf807d0291cf9fc36ab1"><div class="ttname"><a href="namespaceclang.html#a59b6b7213bdfaf807d0291cf9fc36ab1">clang::OpenMPDistScheduleClauseKind</a></div><div class="ttdeci">OpenMPDistScheduleClauseKind</div><div class="ttdoc">OpenMP attributes for 'dist_schedule' clause.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8h_source.html#l00103">OpenMPKinds.h:103</a></div></div>
<div class="ttc" id="anamespaceclang_html_a6805956ef192ea44ce89d9791a7e813c"><div class="ttname"><a href="namespaceclang.html#a6805956ef192ea44ce89d9791a7e813c">clang::isOpenMPTargetExecutionDirective</a></div><div class="ttdeci">bool isOpenMPTargetExecutionDirective(OpenMPDirectiveKind DKind)</div><div class="ttdoc">Checks if the specified directive is a target code offload directive.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8cpp_source.html#l00609">OpenMPKinds.cpp:609</a></div></div>
<div class="ttc" id="anamespaceclang_html_a7689d02af684f7ecf00477bbc8dd14bc"><div class="ttname"><a href="namespaceclang.html#a7689d02af684f7ecf00477bbc8dd14bc">clang::isOpenMPTeamsDirective</a></div><div class="ttdeci">bool isOpenMPTeamsDirective(OpenMPDirectiveKind DKind)</div><div class="ttdoc">Checks if the specified directive is a teams-kind directive.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8cpp_source.html#l00626">OpenMPKinds.cpp:626</a></div></div>
<div class="ttc" id="anamespaceclang_html_a7aa7eb06045794431129ae08e43c0ea2a960b44c579bc2f6818d2daaf9e4c16f0"><div class="ttname"><a href="namespaceclang.html#a7aa7eb06045794431129ae08e43c0ea2a960b44c579bc2f6818d2daaf9e4c16f0">clang::ArraySizeModifier::Normal</a></div><div class="ttdeci">@ Normal</div></div>
<div class="ttc" id="anamespaceclang_html_a9237bdb3cf715b9bff8bcb3172635548aaef12e903e606a4895a16b393bfdec8c"><div class="ttname"><a href="namespaceclang.html#a9237bdb3cf715b9bff8bcb3172635548aaef12e903e606a4895a16b393bfdec8c">clang::TagTypeKind::Union</a></div><div class="ttdeci">@ Union</div><div class="ttdoc">The &quot;union&quot; keyword.</div></div>
<div class="ttc" id="anamespaceclang_html_aa3127862988e2c241fb39f5329ddfa87"><div class="ttname"><a href="namespaceclang.html#aa3127862988e2c241fb39f5329ddfa87">clang::isOpenMPLoopBoundSharingDirective</a></div><div class="ttdeci">bool isOpenMPLoopBoundSharingDirective(OpenMPDirectiveKind Kind)</div><div class="ttdoc">Checks if the specified directive kind is one of the composite or combined directives that need loop ...</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8cpp_source.html#l00676">OpenMPKinds.cpp:676</a></div></div>
<div class="ttc" id="anamespaceclang_html_aa3eb18d56ff745e83217cde4d647793a"><div class="ttname"><a href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793a">clang::LangAS</a></div><div class="ttdeci">LangAS</div><div class="ttdoc">Defines the address space values used by the address space qualifier of QualType.</div><div class="ttdef"><b>Definition:</b> <a href="AddressSpaces_8h_source.html#l00025">AddressSpaces.h:25</a></div></div>
<div class="ttc" id="anamespaceclang_html_aa3eb18d56ff745e83217cde4d647793aa274f845648dd88aca9f1eb414d323784"><div class="ttname"><a href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa274f845648dd88aca9f1eb414d323784">clang::LangAS::opencl_global</a></div><div class="ttdeci">@ opencl_global</div></div>
<div class="ttc" id="anamespaceclang_html_aa3eb18d56ff745e83217cde4d647793aa290073a3c242d08d952a80f7007cfca5"><div class="ttname"><a href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa290073a3c242d08d952a80f7007cfca5">clang::LangAS::cuda_shared</a></div><div class="ttdeci">@ cuda_shared</div></div>
<div class="ttc" id="anamespaceclang_html_aa3eb18d56ff745e83217cde4d647793aa60182286971c00f07c50487d0683d6e3"><div class="ttname"><a href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa60182286971c00f07c50487d0683d6e3">clang::LangAS::cuda_constant</a></div><div class="ttdeci">@ cuda_constant</div></div>
<div class="ttc" id="anamespaceclang_html_aa3eb18d56ff745e83217cde4d647793aa7a1920d61156abc05a60135aefe8bc67"><div class="ttname"><a href="namespaceclang.html#aa3eb18d56ff745e83217cde4d647793aa7a1920d61156abc05a60135aefe8bc67">clang::LangAS::Default</a></div><div class="ttdeci">@ Default</div></div>
<div class="ttc" id="anamespaceclang_html_ad3806b3677cb49b203db8df6515b54f7"><div class="ttname"><a href="namespaceclang.html#ad3806b3677cb49b203db8df6515b54f7">clang::getOpenMPCaptureRegions</a></div><div class="ttdeci">void getOpenMPCaptureRegions(llvm::SmallVectorImpl&lt; OpenMPDirectiveKind &gt; &amp;CaptureRegions, OpenMPDirectiveKind DKind)</div><div class="ttdoc">Return the captured regions of an OpenMP directive.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8cpp_source.html#l00705">OpenMPKinds.cpp:705</a></div></div>
<div class="ttc" id="anamespaceclang_html_aebfaef149b8e8767fe07a380264b3f94"><div class="ttname"><a href="namespaceclang.html#aebfaef149b8e8767fe07a380264b3f94">clang::getLangASFromTargetAS</a></div><div class="ttdeci">LangAS getLangASFromTargetAS(unsigned TargetAS)</div><div class="ttdef"><b>Definition:</b> <a href="AddressSpaces_8h_source.html#l00086">AddressSpaces.h:86</a></div></div>
<div class="ttc" id="anamespaceclang_html_af7eaa89fee7d6e491ae7313b738eca1aa06e001a20c541b4a78269c95eeee122c"><div class="ttname"><a href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa06e001a20c541b4a78269c95eeee122c">clang::ImplicitParamKind::CXXThis</a></div><div class="ttdeci">@ CXXThis</div><div class="ttdoc">Parameter for C++ 'this' argument.</div></div>
<div class="ttc" id="anamespaceclang_html_af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387"><div class="ttname"><a href="namespaceclang.html#af7eaa89fee7d6e491ae7313b738eca1aa6311ae17c1ee52b36e68aaf4ad066387">clang::ImplicitParamKind::Other</a></div><div class="ttdeci">@ Other</div><div class="ttdoc">Other implicit parameter.</div></div>
<div class="ttc" id="anamespaceclang_html_af93821a9d77e2f0f95847c8b0f726c79"><div class="ttname"><a href="namespaceclang.html#af93821a9d77e2f0f95847c8b0f726c79">clang::CudaArchToString</a></div><div class="ttdeci">const char * CudaArchToString(CudaArch A)</div><div class="ttdef"><b>Definition:</b> <a href="Basic_2Cuda_8cpp_source.html#l00150">Cuda.cpp:150</a></div></div>
<div class="ttc" id="anamespaceclang_html_afaec598dc26a26012ec59587754cc0fb"><div class="ttname"><a href="namespaceclang.html#afaec598dc26a26012ec59587754cc0fb">clang::OpenMPScheduleClauseKind</a></div><div class="ttdeci">OpenMPScheduleClauseKind</div><div class="ttdoc">OpenMP attributes for 'schedule' clause.</div><div class="ttdef"><b>Definition:</b> <a href="OpenMPKinds_8h_source.html#l00030">OpenMPKinds.h:30</a></div></div>
<div class="ttc" id="anamespaceclang_html_afc8aabd1f46cf32e805cd0d970ef988fa163ae3a419460301961bc458f8f01fd3"><div class="ttname"><a href="namespaceclang.html#afc8aabd1f46cf32e805cd0d970ef988fa163ae3a419460301961bc458f8f01fd3">clang::AS_public</a></div><div class="ttdeci">@ AS_public</div><div class="ttdef"><b>Definition:</b> <a href="Specifiers_8h_source.html#l00121">Specifiers.h:121</a></div></div>
<div class="ttc" id="anamespacehlsl_html_a4d0646486ed9e3296180e1692dc3e921"><div class="ttname"><a href="namespacehlsl.html#a4d0646486ed9e3296180e1692dc3e921">hlsl::uint64_t</a></div><div class="ttdeci">unsigned long uint64_t</div><div class="ttdef"><b>Definition:</b> <a href="hlsl__basic__types_8h_source.html#l00032">hlsl_basic_types.h:32</a></div></div>
<div class="ttc" id="astructCopyOptionsTy_html"><div class="ttname"><a href="structCopyOptionsTy.html">CopyOptionsTy</a></div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01569">CGOpenMPRuntimeGPU.cpp:1569</a></div></div>
<div class="ttc" id="astructCopyOptionsTy_html_a0603689bd7d66bb9bdd3e94756d335e4"><div class="ttname"><a href="structCopyOptionsTy.html#a0603689bd7d66bb9bdd3e94756d335e4">CopyOptionsTy::ScratchpadIndex</a></div><div class="ttdeci">llvm::Value * ScratchpadIndex</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01571">CGOpenMPRuntimeGPU.cpp:1571</a></div></div>
<div class="ttc" id="astructCopyOptionsTy_html_a4a4759cb9a9167587f68d43da87fe62b"><div class="ttname"><a href="structCopyOptionsTy.html#a4a4759cb9a9167587f68d43da87fe62b">CopyOptionsTy::ScratchpadWidth</a></div><div class="ttdeci">llvm::Value * ScratchpadWidth</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01572">CGOpenMPRuntimeGPU.cpp:1572</a></div></div>
<div class="ttc" id="astructCopyOptionsTy_html_ab5086c8b0c85477cdef57a67801a50a4"><div class="ttname"><a href="structCopyOptionsTy.html#ab5086c8b0c85477cdef57a67801a50a4">CopyOptionsTy::RemoteLaneOffset</a></div><div class="ttdeci">llvm::Value * RemoteLaneOffset</div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntimeGPU_8cpp_source.html#l01570">CGOpenMPRuntimeGPU.cpp:1570</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CGOpenMPRuntime_1_1ReductionOptionsTy_html"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CGOpenMPRuntime_1_1ReductionOptionsTy.html">clang::CodeGen::CGOpenMPRuntime::ReductionOptionsTy</a></div><div class="ttdef"><b>Definition:</b> <a href="CGOpenMPRuntime_8h_source.html#l01211">CGOpenMPRuntime.h:1211</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenFunction_1_1VlaSizePair_html_a519c4b03a5e4d4da34f59ae14fd25a03"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenFunction_1_1VlaSizePair.html#a519c4b03a5e4d4da34f59ae14fd25a03">clang::CodeGen::CodeGenFunction::VlaSizePair::NumElts</a></div><div class="ttdeci">llvm::Value * NumElts</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenFunction_8h_source.html#l02978">CodeGenFunction.h:2978</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_a0609fd52690a7779529ad842007e239f"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a0609fd52690a7779529ad842007e239f">clang::CodeGen::CodeGenTypeCache::VoidPtrTy</a></div><div class="ttdeci">llvm::PointerType * VoidPtrTy</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00057">CodeGenTypeCache.h:57</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_a06114f0bc840b61c0b2c60bb284e46fb"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a06114f0bc840b61c0b2c60bb284e46fb">clang::CodeGen::CodeGenTypeCache::Int64Ty</a></div><div class="ttdeci">llvm::IntegerType * Int64Ty</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00037">CodeGenTypeCache.h:37</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_a329e1a1ea4a981895ad14b70611e163b"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a329e1a1ea4a981895ad14b70611e163b">clang::CodeGen::CodeGenTypeCache::Int8Ty</a></div><div class="ttdeci">llvm::IntegerType * Int8Ty</div><div class="ttdoc">i8, i16, i32, and i64</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00037">CodeGenTypeCache.h:37</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_a91ff72566394e59c6ffe25b21016f289"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a91ff72566394e59c6ffe25b21016f289">clang::CodeGen::CodeGenTypeCache::SizeTy</a></div><div class="ttdeci">llvm::IntegerType * SizeTy</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00050">CodeGenTypeCache.h:50</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_a9542d45208ac69c5061bfc569e76f40a"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9542d45208ac69c5061bfc569e76f40a">clang::CodeGen::CodeGenTypeCache::VoidPtrPtrTy</a></div><div class="ttdeci">llvm::PointerType * VoidPtrPtrTy</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00059">CodeGenTypeCache.h:59</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_a9b70851ea2ff034ca9a5443ce213a81c"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#a9b70851ea2ff034ca9a5443ce213a81c">clang::CodeGen::CodeGenTypeCache::Int32Ty</a></div><div class="ttdeci">llvm::IntegerType * Int32Ty</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00037">CodeGenTypeCache.h:37</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_aa0d14821b268a724ecc3a9add2f290e6"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#aa0d14821b268a724ecc3a9add2f290e6">clang::CodeGen::CodeGenTypeCache::IntTy</a></div><div class="ttdeci">llvm::IntegerType * IntTy</div><div class="ttdoc">int</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00042">CodeGenTypeCache.h:42</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_aa5aa690f05d199fd0cbc08bae591354e"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#aa5aa690f05d199fd0cbc08bae591354e">clang::CodeGen::CodeGenTypeCache::Int16Ty</a></div><div class="ttdeci">llvm::IntegerType * Int16Ty</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00037">CodeGenTypeCache.h:37</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_ac3ec7e3938996c5354dbee1a103ed4d2"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#ac3ec7e3938996c5354dbee1a103ed4d2">clang::CodeGen::CodeGenTypeCache::Int8PtrTy</a></div><div class="ttdeci">llvm::PointerType * Int8PtrTy</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00058">CodeGenTypeCache.h:58</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1CodeGenTypeCache_html_ada1b89da70bd71382c681e4254874e1a"><div class="ttname"><a href="structclang_1_1CodeGen_1_1CodeGenTypeCache.html#ada1b89da70bd71382c681e4254874e1a">clang::CodeGen::CodeGenTypeCache::getPointerAlign</a></div><div class="ttdeci">CharUnits getPointerAlign() const</div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTypeCache_8h_source.html#l00120">CodeGenTypeCache.h:120</a></div></div>
<div class="ttc" id="astructclang_1_1CodeGen_1_1TBAAAccessInfo_html"><div class="ttname"><a href="structclang_1_1CodeGen_1_1TBAAAccessInfo.html">clang::CodeGen::TBAAAccessInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="CodeGenTBAA_8h_source.html#l00042">CodeGenTBAA.h:42</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri May 3 2024 01:35:06 for clang by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
